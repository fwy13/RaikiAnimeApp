var ph=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Z=(t,e,n)=>(ph(t,e,"read from private field"),n?n.call(t):e.get(t)),_e=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ve=(t,e,n,i)=>(ph(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Eu=(t,e,n,i)=>({set _(s){ve(t,e,s,n)},get _(){return Z(t,e,i)}}),bt=(t,e,n)=>(ph(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function zl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sA={exports:{}},of={},rA={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=Symbol.for("react.element"),iP=Symbol.for("react.portal"),sP=Symbol.for("react.fragment"),rP=Symbol.for("react.strict_mode"),aP=Symbol.for("react.profiler"),oP=Symbol.for("react.provider"),lP=Symbol.for("react.context"),uP=Symbol.for("react.forward_ref"),cP=Symbol.for("react.suspense"),dP=Symbol.for("react.memo"),fP=Symbol.for("react.lazy"),J1=Symbol.iterator;function hP(t){return t===null||typeof t!="object"?null:(t=J1&&t[J1]||t["@@iterator"],typeof t=="function"?t:null)}var aA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oA=Object.assign,lA={};function Qa(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||aA}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uA(){}uA.prototype=Qa.prototype;function hg(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||aA}var pg=hg.prototype=new uA;pg.constructor=hg;oA(pg,Qa.prototype);pg.isPureReactComponent=!0;var eT=Array.isArray,cA=Object.prototype.hasOwnProperty,mg={current:null},dA={key:!0,ref:!0,__self:!0,__source:!0};function fA(t,e,n){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)cA.call(e,i)&&!dA.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:Kl,type:t,key:r,ref:a,props:s,_owner:mg.current}}function pP(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function mP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tT=/\/+/g;function mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mP(""+t.key):e.toString(36)}function gc(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Kl:case iP:a=!0}}if(a)return a=t,s=s(a),t=i===""?"."+mh(a,0):i,eT(s)?(n="",t!=null&&(n=t.replace(tT,"$&/")+"/"),gc(s,e,n,"",function(u){return u})):s!=null&&(gg(s)&&(s=pP(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(tT,"$&/")+"/")+t)),e.push(s)),1;if(a=0,i=i===""?".":i+":",eT(t))for(var o=0;o<t.length;o++){r=t[o];var l=i+mh(r,o);a+=gc(r,e,n,l,s)}else if(l=hP(t),typeof l=="function")for(t=l.call(t),o=0;!(r=t.next()).done;)r=r.value,l=i+mh(r,o++),a+=gc(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Tu(t,e,n){if(t==null)return t;var i=[],s=0;return gc(t,i,"","",function(r){return e.call(n,r,s++)}),i}function gP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Ec={transition:null},EP={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Ec,ReactCurrentOwner:mg};function hA(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Tu,forEach:function(t,e,n){Tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tu(t,function(){e++}),e},toArray:function(t){return Tu(t,function(e){return e})||[]},only:function(t){if(!gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Qa;Ae.Fragment=sP;Ae.Profiler=aP;Ae.PureComponent=hg;Ae.StrictMode=rP;Ae.Suspense=cP;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EP;Ae.act=hA;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=oA({},t.props),s=t.key,r=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=mg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)cA.call(e,l)&&!dA.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:Kl,type:t.type,key:s,ref:r,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:lP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oP,_context:t},t.Consumer=t};Ae.createElement=fA;Ae.createFactory=function(t){var e=fA.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:uP,render:t}};Ae.isValidElement=gg;Ae.lazy=function(t){return{$$typeof:fP,_payload:{_status:-1,_result:t},_init:gP}};Ae.memo=function(t,e){return{$$typeof:dP,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Ec.transition;Ec.transition={};try{t()}finally{Ec.transition=e}};Ae.unstable_act=hA;Ae.useCallback=function(t,e){return Ht.current.useCallback(t,e)};Ae.useContext=function(t){return Ht.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Ht.current.useEffect(t,e)};Ae.useId=function(){return Ht.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Ht.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};Ae.useRef=function(t){return Ht.current.useRef(t)};Ae.useState=function(t){return Ht.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Ht.current.useTransition()};Ae.version="18.3.1";rA.exports=Ae;var X=rA.exports;const $=zl(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=X,yP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),bP=Object.prototype.hasOwnProperty,xP=TP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SP={key:!0,ref:!0,__self:!0,__source:!0};function pA(t,e,n){var i,s={},r=null,a=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)bP.call(e,i)&&!SP.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:yP,type:t,key:r,ref:a,props:s,_owner:xP.current}}of.Fragment=vP;of.jsx=pA;of.jsxs=pA;sA.exports=of;var P=sA.exports,mA={exports:{}},mn={},gA={exports:{}},EA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,O){var k=Y.length;Y.push(O);e:for(;0<k;){var z=k-1>>>1,G=Y[z];if(0<s(G,O))Y[z]=O,Y[k]=G,k=z;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var O=Y[0],k=Y.pop();if(k!==O){Y[0]=k;e:for(var z=0,G=Y.length,se=G>>>1;z<se;){var re=2*(z+1)-1,de=Y[re],ge=re+1,Se=Y[ge];if(0>s(de,k))ge<G&&0>s(Se,de)?(Y[z]=Se,Y[ge]=k,z=ge):(Y[z]=de,Y[re]=k,z=re);else if(ge<G&&0>s(Se,k))Y[z]=Se,Y[ge]=k,z=ge;else break e}}return O}function s(Y,O){var k=Y.sortIndex-O.sortIndex;return k!==0?k:Y.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Y){for(var O=n(u);O!==null;){if(O.callback===null)i(u);else if(O.startTime<=Y)i(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(u)}}function b(Y){if(g=!1,T(Y),!p)if(n(l)!==null)p=!0,te(x);else{var O=n(u);O!==null&&ce(b,O.startTime-Y)}}function x(Y,O){p=!1,g&&(g=!1,E(C),C=-1),h=!0;var k=f;try{for(T(O),d=n(l);d!==null&&(!(d.expirationTime>O)||Y&&!N());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var G=z(d.expirationTime<=O);O=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&i(l),T(O)}else i(l);d=n(l)}if(d!==null)var se=!0;else{var re=n(u);re!==null&&ce(b,re.startTime-O),se=!1}return se}finally{d=null,f=k,h=!1}}var w=!1,A=null,C=-1,L=5,_=-1;function N(){return!(t.unstable_now()-_<L)}function j(){if(A!==null){var Y=t.unstable_now();_=Y;var O=!0;try{O=A(!0,Y)}finally{O?U():(w=!1,A=null)}}else w=!1}var U;if(typeof y=="function")U=function(){y(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,q=J.port2;J.port1.onmessage=j,U=function(){q.postMessage(null)}}else U=function(){v(j,0)};function te(Y){A=Y,w||(w=!0,U())}function ce(Y,O){C=v(function(){Y(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,te(x))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var k=f;f=O;try{return Y()}finally{f=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,O){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var k=f;f=Y;try{return O()}finally{f=k}},t.unstable_scheduleCallback=function(Y,O,k){var z=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?z+k:z):k=z,Y){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=k+G,Y={id:c++,callback:O,priorityLevel:Y,startTime:k,expirationTime:G,sortIndex:-1},k>z?(Y.sortIndex=k,e(u,Y),n(l)===null&&Y===n(u)&&(g?(E(C),C=-1):g=!0,ce(b,k-z))):(Y.sortIndex=G,e(l,Y),p||h||(p=!0,te(x))),Y},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Y){var O=f;return function(){var k=f;f=O;try{return Y.apply(this,arguments)}finally{f=k}}}})(EA);gA.exports=EA;var AP=gA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP=X,hn=AP;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TA=new Set,ll={};function wr(t,e){Pa(t,e),Pa(t+"Capture",e)}function Pa(t,e){for(ll[t]=e,t=0;t<e.length;t++)TA.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cp=Object.prototype.hasOwnProperty,wP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nT={},iT={};function LP(t){return cp.call(iT,t)?!0:cp.call(nT,t)?!1:wP.test(t)?iT[t]=!0:(nT[t]=!0,!1)}function IP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _P(t,e,n,i){if(e===null||typeof e>"u"||IP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eg=/[\-:]([a-z])/g;function Tg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eg,Tg);yt[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eg,Tg);yt[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eg,Tg);yt[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yg(t,e,n,i){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_P(e,n,s,i)&&(n=null),i||s===null?LP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Xi=CP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),zr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),vg=Symbol.for("react.strict_mode"),dp=Symbol.for("react.profiler"),yA=Symbol.for("react.provider"),vA=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),fp=Symbol.for("react.suspense"),hp=Symbol.for("react.suspense_list"),xg=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),bA=Symbol.for("react.offscreen"),sT=Symbol.iterator;function ho(t){return t===null||typeof t!="object"?null:(t=sT&&t[sT]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,gh;function Io(t){if(gh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gh=e&&e[1]||""}return`
`+gh+t}var Eh=!1;function Th(t,e){if(!t||Eh)return"";Eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Io(t):""}function RP(t){switch(t.tag){case 5:return Io(t.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return t=Th(t.type,!1),t;case 11:return t=Th(t.type.render,!1),t;case 1:return t=Th(t.type,!0),t;default:return""}}function pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case zr:return"Portal";case dp:return"Profiler";case vg:return"StrictMode";case fp:return"Suspense";case hp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vA:return(t.displayName||"Context")+".Consumer";case yA:return(t._context.displayName||"Context")+".Provider";case bg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xg:return e=t.displayName||null,e!==null?e:pp(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return pp(t(e))}catch{}}return null}function DP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pp(e);case 8:return e===vg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PP(t){var e=xA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vu(t){t._valueTracker||(t._valueTracker=PP(t))}function SA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=xA(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function jc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mp(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rT(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AA(t,e){e=e.checked,e!=null&&yg(t,"checked",e,!1)}function gp(t,e){AA(t,e);var n=_s(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ep(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ep(t,e,n){(e!=="number"||jc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _o=Array.isArray;function da(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(_o(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function CA(t,e){var n=_s(e.value),i=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function lT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bu,LA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bu=bu||document.createElement("div"),bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ul(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kP=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(t){kP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mo[e]=Mo[t]})});function IA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mo.hasOwnProperty(t)&&Mo[t]?(""+e).trim():e+"px"}function _A(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=IA(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var NP=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vp(t,e){if(e){if(NP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xp=null;function Sg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sp=null,fa=null,ha=null;function uT(t){if(t=Xl(t)){if(typeof Sp!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=ff(e),Sp(t.stateNode,t.type,e))}}function RA(t){fa?ha?ha.push(t):ha=[t]:fa=t}function DA(){if(fa){var t=fa,e=ha;if(ha=fa=null,uT(t),e)for(t=0;t<e.length;t++)uT(e[t])}}function PA(t,e){return t(e)}function kA(){}var yh=!1;function NA(t,e,n){if(yh)return t(e,n);yh=!0;try{return PA(t,e,n)}finally{yh=!1,(fa!==null||ha!==null)&&(kA(),DA())}}function cl(t,e){var n=t.stateNode;if(n===null)return null;var i=ff(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Ap=!1;if(ji)try{var po={};Object.defineProperty(po,"passive",{get:function(){Ap=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Ap=!1}function OP(t,e,n,i,s,r,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Fo=!1,Wc=null,zc=!1,Cp=null,MP={onError:function(t){Fo=!0,Wc=t}};function FP(t,e,n,i,s,r,a,o,l){Fo=!1,Wc=null,OP.apply(MP,arguments)}function BP(t,e,n,i,s,r,a,o,l){if(FP.apply(this,arguments),Fo){if(Fo){var u=Wc;Fo=!1,Wc=null}else throw Error(ie(198));zc||(zc=!0,Cp=u)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cT(t){if(Lr(t)!==t)throw Error(ie(188))}function UP(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return cT(s),t;if(r===i)return cT(s),e;r=r.sibling}throw Error(ie(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==i)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function MA(t){return t=UP(t),t!==null?FA(t):null}function FA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FA(t);if(e!==null)return e;t=t.sibling}return null}var BA=hn.unstable_scheduleCallback,dT=hn.unstable_cancelCallback,$P=hn.unstable_shouldYield,HP=hn.unstable_requestPaint,Je=hn.unstable_now,VP=hn.unstable_getCurrentPriorityLevel,Ag=hn.unstable_ImmediatePriority,UA=hn.unstable_UserBlockingPriority,Kc=hn.unstable_NormalPriority,GP=hn.unstable_LowPriority,$A=hn.unstable_IdlePriority,lf=null,ci=null;function jP(t){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(lf,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:KP,WP=Math.log,zP=Math.LN2;function KP(t){return t>>>=0,t===0?32:31-(WP(t)/zP|0)|0}var xu=64,Su=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?i=Ro(o):(r&=a,r!==0&&(i=Ro(r)))}else a=n&~s,a!==0?i=Ro(a):r!==0&&(i=Ro(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-jn(e),s=1<<n,i|=t[n],e&=~s;return i}function YP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var a=31-jn(r),o=1<<a,l=s[a];l===-1?(!(o&n)||o&i)&&(s[a]=YP(o,e)):l<=e&&(t.expiredLanes|=o),r&=~o}}function wp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HA(){var t=xu;return xu<<=1,!(xu&4194240)&&(xu=64),t}function vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function XP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jn(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function Cg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-jn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var De=0;function VA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GA,wg,jA,WA,zA,Lp=!1,Au=[],Es=null,Ts=null,ys=null,dl=new Map,fl=new Map,as=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fT(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(e.pointerId)}}function mo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Xl(e),e!==null&&wg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ZP(t,e,n,i,s){switch(e){case"focusin":return Es=mo(Es,t,e,n,i,s),!0;case"dragenter":return Ts=mo(Ts,t,e,n,i,s),!0;case"mouseover":return ys=mo(ys,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return dl.set(r,mo(dl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,fl.set(r,mo(fl.get(r)||null,t,e,n,i,s)),!0}return!1}function KA(t){var e=Js(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=OA(n),e!==null){t.blockedOn=e,zA(t.priority,function(){jA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ip(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xp=i,n.target.dispatchEvent(i),xp=null}else return e=Xl(n),e!==null&&wg(e),t.blockedOn=n,!1;e.shift()}return!0}function hT(t,e,n){Tc(t)&&n.delete(e)}function JP(){Lp=!1,Es!==null&&Tc(Es)&&(Es=null),Ts!==null&&Tc(Ts)&&(Ts=null),ys!==null&&Tc(ys)&&(ys=null),dl.forEach(hT),fl.forEach(hT)}function go(t,e){t.blockedOn===e&&(t.blockedOn=null,Lp||(Lp=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,JP)))}function hl(t){function e(s){return go(s,t)}if(0<Au.length){go(Au[0],t);for(var n=1;n<Au.length;n++){var i=Au[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Es!==null&&go(Es,t),Ts!==null&&go(Ts,t),ys!==null&&go(ys,t),dl.forEach(e),fl.forEach(e),n=0;n<as.length;n++)i=as[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)KA(n),n.blockedOn===null&&as.shift()}var pa=Xi.ReactCurrentBatchConfig,qc=!0;function ek(t,e,n,i){var s=De,r=pa.transition;pa.transition=null;try{De=1,Lg(t,e,n,i)}finally{De=s,pa.transition=r}}function tk(t,e,n,i){var s=De,r=pa.transition;pa.transition=null;try{De=4,Lg(t,e,n,i)}finally{De=s,pa.transition=r}}function Lg(t,e,n,i){if(qc){var s=Ip(t,e,n,i);if(s===null)Rh(t,e,i,Xc,n),fT(t,i);else if(ZP(s,t,e,n,i))i.stopPropagation();else if(fT(t,i),e&4&&-1<QP.indexOf(t)){for(;s!==null;){var r=Xl(s);if(r!==null&&GA(r),r=Ip(t,e,n,i),r===null&&Rh(t,e,i,Xc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Rh(t,e,i,null,n)}}var Xc=null;function Ip(t,e,n,i){if(Xc=null,t=Sg(i),t=Js(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xc=t,null}function YA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VP()){case Ag:return 1;case UA:return 4;case Kc:case GP:return 16;case $A:return 536870912;default:return 16}default:return 16}}var hs=null,Ig=null,yc=null;function qA(){if(yc)return yc;var t,e=Ig,n=e.length,i,s="value"in hs?hs.value:hs.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return yc=s.slice(t,1<i?1-i:void 0)}function vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cu(){return!0}function pT(){return!1}function gn(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Cu:pT,this.isPropagationStopped=pT,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_g=gn(Za),ql=Ke({},Za,{view:0,detail:0}),nk=gn(ql),bh,xh,Eo,uf=Ke({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(bh=t.screenX-Eo.screenX,xh=t.screenY-Eo.screenY):xh=bh=0,Eo=t),bh)},movementY:function(t){return"movementY"in t?t.movementY:xh}}),mT=gn(uf),ik=Ke({},uf,{dataTransfer:0}),sk=gn(ik),rk=Ke({},ql,{relatedTarget:0}),Sh=gn(rk),ak=Ke({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),ok=gn(ak),lk=Ke({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uk=gn(lk),ck=Ke({},Za,{data:0}),gT=gn(ck),dk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hk[t])?!!e[t]:!1}function Rg(){return pk}var mk=Ke({},ql,{key:function(t){if(t.key){var e=dk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rg,charCode:function(t){return t.type==="keypress"?vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gk=gn(mk),Ek=Ke({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ET=gn(Ek),Tk=Ke({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rg}),yk=gn(Tk),vk=Ke({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),bk=gn(vk),xk=Ke({},uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sk=gn(xk),Ak=[9,13,27,32],Dg=ji&&"CompositionEvent"in window,Bo=null;ji&&"documentMode"in document&&(Bo=document.documentMode);var Ck=ji&&"TextEvent"in window&&!Bo,XA=ji&&(!Dg||Bo&&8<Bo&&11>=Bo),TT=" ",yT=!1;function QA(t,e){switch(t){case"keyup":return Ak.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function wk(t,e){switch(t){case"compositionend":return ZA(e);case"keypress":return e.which!==32?null:(yT=!0,TT);case"textInput":return t=e.data,t===TT&&yT?null:t;default:return null}}function Lk(t,e){if(Yr)return t==="compositionend"||!Dg&&QA(t,e)?(t=qA(),yc=Ig=hs=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XA&&e.locale!=="ko"?null:e.data;default:return null}}var Ik={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ik[t.type]:e==="textarea"}function JA(t,e,n,i){RA(i),e=Qc(e,"onChange"),0<e.length&&(n=new _g("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Uo=null,pl=null;function _k(t){cC(t,0)}function cf(t){var e=Qr(t);if(SA(e))return t}function Rk(t,e){if(t==="change")return e}var eC=!1;if(ji){var Ah;if(ji){var Ch="oninput"in document;if(!Ch){var bT=document.createElement("div");bT.setAttribute("oninput","return;"),Ch=typeof bT.oninput=="function"}Ah=Ch}else Ah=!1;eC=Ah&&(!document.documentMode||9<document.documentMode)}function xT(){Uo&&(Uo.detachEvent("onpropertychange",tC),pl=Uo=null)}function tC(t){if(t.propertyName==="value"&&cf(pl)){var e=[];JA(e,pl,t,Sg(t)),NA(_k,e)}}function Dk(t,e,n){t==="focusin"?(xT(),Uo=e,pl=n,Uo.attachEvent("onpropertychange",tC)):t==="focusout"&&xT()}function Pk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cf(pl)}function kk(t,e){if(t==="click")return cf(e)}function Nk(t,e){if(t==="input"||t==="change")return cf(e)}function Ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:Ok;function ml(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!cp.call(e,s)||!Kn(t[s],e[s]))return!1}return!0}function ST(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function AT(t,e){var n=ST(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ST(n)}}function nC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iC(){for(var t=window,e=jc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jc(t.document)}return e}function Pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mk(t){var e=iC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nC(n.ownerDocument.documentElement,n)){if(i!==null&&Pg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=AT(n,r);var a=AT(n,i);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fk=ji&&"documentMode"in document&&11>=document.documentMode,qr=null,_p=null,$o=null,Rp=!1;function CT(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rp||qr==null||qr!==jc(i)||(i=qr,"selectionStart"in i&&Pg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$o&&ml($o,i)||($o=i,i=Qc(_p,"onSelect"),0<i.length&&(e=new _g("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=qr)))}function wu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xr={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},wh={},sC={};ji&&(sC=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function df(t){if(wh[t])return wh[t];if(!Xr[t])return t;var e=Xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sC)return wh[t]=e[n];return t}var rC=df("animationend"),aC=df("animationiteration"),oC=df("animationstart"),lC=df("transitionend"),uC=new Map,wT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){uC.set(t,e),wr(e,[t])}for(var Lh=0;Lh<wT.length;Lh++){var Ih=wT[Lh],Bk=Ih.toLowerCase(),Uk=Ih[0].toUpperCase()+Ih.slice(1);ks(Bk,"on"+Uk)}ks(rC,"onAnimationEnd");ks(aC,"onAnimationIteration");ks(oC,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(lC,"onTransitionEnd");Pa("onMouseEnter",["mouseout","mouseover"]);Pa("onMouseLeave",["mouseout","mouseover"]);Pa("onPointerEnter",["pointerout","pointerover"]);Pa("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$k=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function LT(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,BP(i,e,void 0,t),t.currentTarget=null}function cC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;LT(s,o,u),r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;LT(s,o,u),r=l}}}if(zc)throw t=Cp,zc=!1,Cp=null,t}function Be(t,e){var n=e[Op];n===void 0&&(n=e[Op]=new Set);var i=t+"__bubble";n.has(i)||(dC(e,t,2,!1),n.add(i))}function _h(t,e,n){var i=0;e&&(i|=4),dC(n,t,i,e)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function gl(t){if(!t[Lu]){t[Lu]=!0,TA.forEach(function(n){n!=="selectionchange"&&($k.has(n)||_h(n,!1,t),_h(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lu]||(e[Lu]=!0,_h("selectionchange",!1,e))}}function dC(t,e,n,i){switch(YA(e)){case 1:var s=ek;break;case 4:s=tk;break;default:s=Lg}n=s.bind(null,e,n,t),s=void 0,!Ap||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rh(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Js(o),a===null)return;if(l=a.tag,l===5||l===6){i=r=a;continue e}o=o.parentNode}}i=i.return}NA(function(){var u=r,c=Sg(n),d=[];e:{var f=uC.get(t);if(f!==void 0){var h=_g,p=t;switch(t){case"keypress":if(vc(n)===0)break e;case"keydown":case"keyup":h=gk;break;case"focusin":p="focus",h=Sh;break;case"focusout":p="blur",h=Sh;break;case"beforeblur":case"afterblur":h=Sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=yk;break;case rC:case aC:case oC:h=ok;break;case lC:h=bk;break;case"scroll":h=nk;break;case"wheel":h=Sk;break;case"copy":case"cut":case"paste":h=uk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=ET}var g=(e&4)!==0,v=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,T;y!==null;){T=y;var b=T.stateNode;if(T.tag===5&&b!==null&&(T=b,E!==null&&(b=cl(y,E),b!=null&&g.push(El(y,b,T)))),v)break;y=y.return}0<g.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==xp&&(p=n.relatedTarget||n.fromElement)&&(Js(p)||p[Wi]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Js(p):null,p!==null&&(v=Lr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=mT,b="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=ET,b="onPointerLeave",E="onPointerEnter",y="pointer"),v=h==null?f:Qr(h),T=p==null?f:Qr(p),f=new g(b,y+"leave",h,n,c),f.target=v,f.relatedTarget=T,b=null,Js(c)===u&&(g=new g(E,y+"enter",p,n,c),g.target=T,g.relatedTarget=v,b=g),v=b,h&&p)t:{for(g=h,E=p,y=0,T=g;T;T=Or(T))y++;for(T=0,b=E;b;b=Or(b))T++;for(;0<y-T;)g=Or(g),y--;for(;0<T-y;)E=Or(E),T--;for(;y--;){if(g===E||E!==null&&g===E.alternate)break t;g=Or(g),E=Or(E)}g=null}else g=null;h!==null&&IT(d,f,h,g,!1),p!==null&&v!==null&&IT(d,v,p,g,!0)}}e:{if(f=u?Qr(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=Rk;else if(vT(f))if(eC)x=Nk;else{x=Pk;var w=Dk}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=kk);if(x&&(x=x(t,u))){JA(d,x,n,c);break e}w&&w(t,f,u),t==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&Ep(f,"number",f.value)}switch(w=u?Qr(u):window,t){case"focusin":(vT(w)||w.contentEditable==="true")&&(qr=w,_p=u,$o=null);break;case"focusout":$o=_p=qr=null;break;case"mousedown":Rp=!0;break;case"contextmenu":case"mouseup":case"dragend":Rp=!1,CT(d,n,c);break;case"selectionchange":if(Fk)break;case"keydown":case"keyup":CT(d,n,c)}var A;if(Dg)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Yr?QA(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(XA&&n.locale!=="ko"&&(Yr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Yr&&(A=qA()):(hs=c,Ig="value"in hs?hs.value:hs.textContent,Yr=!0)),w=Qc(u,C),0<w.length&&(C=new gT(C,t,null,n,c),d.push({event:C,listeners:w}),A?C.data=A:(A=ZA(n),A!==null&&(C.data=A)))),(A=Ck?wk(t,n):Lk(t,n))&&(u=Qc(u,"onBeforeInput"),0<u.length&&(c=new gT("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=A))}cC(d,e)})}function El(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=cl(t,n),r!=null&&i.unshift(El(t,r,s)),r=cl(t,e),r!=null&&i.push(El(t,r,s))),t=t.return}return i}function Or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IT(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,s?(l=cl(n,r),l!=null&&a.unshift(El(n,l,o))):s||(l=cl(n,r),l!=null&&a.push(El(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Hk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function _T(t){return(typeof t=="string"?t:""+t).replace(Hk,`
`).replace(Vk,"")}function Iu(t,e,n){if(e=_T(e),_T(t)!==e&&n)throw Error(ie(425))}function Zc(){}var Dp=null,Pp=null;function kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Np=typeof setTimeout=="function"?setTimeout:void 0,Gk=typeof clearTimeout=="function"?clearTimeout:void 0,RT=typeof Promise=="function"?Promise:void 0,jk=typeof queueMicrotask=="function"?queueMicrotask:typeof RT<"u"?function(t){return RT.resolve(null).then(t).catch(Wk)}:Np;function Wk(t){setTimeout(function(){throw t})}function Dh(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),hl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);hl(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),ai="__reactFiber$"+Ja,Tl="__reactProps$"+Ja,Wi="__reactContainer$"+Ja,Op="__reactEvents$"+Ja,zk="__reactListeners$"+Ja,Kk="__reactHandles$"+Ja;function Js(t){var e=t[ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wi]||n[ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DT(t);t!==null;){if(n=t[ai])return n;t=DT(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){return t=t[ai]||t[Wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function ff(t){return t[Tl]||null}var Mp=[],Zr=-1;function Ns(t){return{current:t}}function Ue(t){0>Zr||(t.current=Mp[Zr],Mp[Zr]=null,Zr--)}function Fe(t,e){Zr++,Mp[Zr]=t.current,t.current=e}var Rs={},Dt=Ns(Rs),en=Ns(!1),pr=Rs;function ka(t,e){var n=t.type.contextTypes;if(!n)return Rs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tn(t){return t=t.childContextTypes,t!=null}function Jc(){Ue(en),Ue(Dt)}function PT(t,e,n){if(Dt.current!==Rs)throw Error(ie(168));Fe(Dt,e),Fe(en,n)}function fC(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ie(108,DP(t)||"Unknown",s));return Ke({},n,i)}function ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,pr=Dt.current,Fe(Dt,t),Fe(en,en.current),!0}function kT(t,e,n){var i=t.stateNode;if(!i)throw Error(ie(169));n?(t=fC(t,e,pr),i.__reactInternalMemoizedMergedChildContext=t,Ue(en),Ue(Dt),Fe(Dt,t)):Ue(en),Fe(en,n)}var _i=null,hf=!1,Ph=!1;function hC(t){_i===null?_i=[t]:_i.push(t)}function Yk(t){hf=!0,hC(t)}function Os(){if(!Ph&&_i!==null){Ph=!0;var t=0,e=De;try{var n=_i;for(De=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}_i=null,hf=!1}catch(s){throw _i!==null&&(_i=_i.slice(t+1)),BA(Ag,Os),s}finally{De=e,Ph=!1}}return null}var Jr=[],ea=0,td=null,nd=0,wn=[],Ln=0,mr=null,ki=1,Ni="";function Ws(t,e){Jr[ea++]=nd,Jr[ea++]=td,td=t,nd=e}function pC(t,e,n){wn[Ln++]=ki,wn[Ln++]=Ni,wn[Ln++]=mr,mr=t;var i=ki;t=Ni;var s=32-jn(i)-1;i&=~(1<<s),n+=1;var r=32-jn(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ki=1<<32-jn(e)+s|n<<s|i,Ni=r+t}else ki=1<<r|n<<s|i,Ni=t}function kg(t){t.return!==null&&(Ws(t,1),pC(t,1,0))}function Ng(t){for(;t===td;)td=Jr[--ea],Jr[ea]=null,nd=Jr[--ea],Jr[ea]=null;for(;t===mr;)mr=wn[--Ln],wn[Ln]=null,Ni=wn[--Ln],wn[Ln]=null,ki=wn[--Ln],wn[Ln]=null}var fn=null,un=null,Ve=!1,Hn=null;function mC(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,un=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mr!==null?{id:ki,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,un=null,!0):!1;default:return!1}}function Fp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bp(t){if(Ve){var e=un;if(e){var n=e;if(!NT(t,e)){if(Fp(t))throw Error(ie(418));e=vs(n.nextSibling);var i=fn;e&&NT(t,e)?mC(i,n):(t.flags=t.flags&-4097|2,Ve=!1,fn=t)}}else{if(Fp(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Ve=!1,fn=t}}}function OT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function _u(t){if(t!==fn)return!1;if(!Ve)return OT(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kp(t.type,t.memoizedProps)),e&&(e=un)){if(Fp(t))throw gC(),Error(ie(418));for(;e;)mC(t,e),e=vs(e.nextSibling)}if(OT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=fn?vs(t.stateNode.nextSibling):null;return!0}function gC(){for(var t=un;t;)t=vs(t.nextSibling)}function Na(){un=fn=null,Ve=!1}function Og(t){Hn===null?Hn=[t]:Hn.push(t)}var qk=Xi.ReactCurrentBatchConfig;function To(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var i=n.stateNode}if(!i)throw Error(ie(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ru(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function MT(t){var e=t._init;return e(t._payload)}function EC(t){function e(E,y){if(t){var T=E.deletions;T===null?(E.deletions=[y],E.flags|=16):T.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function i(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=As(E,y),E.index=0,E.sibling=null,E}function r(E,y,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<y?(E.flags|=2,y):T):(E.flags|=2,y)):(E.flags|=1048576,y)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function o(E,y,T,b){return y===null||y.tag!==6?(y=Uh(T,E.mode,b),y.return=E,y):(y=s(y,T),y.return=E,y)}function l(E,y,T,b){var x=T.type;return x===Kr?c(E,y,T.props.children,b,T.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===is&&MT(x)===y.type)?(b=s(y,T.props),b.ref=To(E,y,T),b.return=E,b):(b=Lc(T.type,T.key,T.props,null,E.mode,b),b.ref=To(E,y,T),b.return=E,b)}function u(E,y,T,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=$h(T,E.mode,b),y.return=E,y):(y=s(y,T.children||[]),y.return=E,y)}function c(E,y,T,b,x){return y===null||y.tag!==7?(y=cr(T,E.mode,b,x),y.return=E,y):(y=s(y,T),y.return=E,y)}function d(E,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Uh(""+y,E.mode,T),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yu:return T=Lc(y.type,y.key,y.props,null,E.mode,T),T.ref=To(E,null,y),T.return=E,T;case zr:return y=$h(y,E.mode,T),y.return=E,y;case is:var b=y._init;return d(E,b(y._payload),T)}if(_o(y)||ho(y))return y=cr(y,E.mode,T,null),y.return=E,y;Ru(E,y)}return null}function f(E,y,T,b){var x=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return x!==null?null:o(E,y,""+T,b);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case yu:return T.key===x?l(E,y,T,b):null;case zr:return T.key===x?u(E,y,T,b):null;case is:return x=T._init,f(E,y,x(T._payload),b)}if(_o(T)||ho(T))return x!==null?null:c(E,y,T,b,null);Ru(E,T)}return null}function h(E,y,T,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(T)||null,o(y,E,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yu:return E=E.get(b.key===null?T:b.key)||null,l(y,E,b,x);case zr:return E=E.get(b.key===null?T:b.key)||null,u(y,E,b,x);case is:var w=b._init;return h(E,y,T,w(b._payload),x)}if(_o(b)||ho(b))return E=E.get(T)||null,c(y,E,b,x,null);Ru(y,b)}return null}function p(E,y,T,b){for(var x=null,w=null,A=y,C=y=0,L=null;A!==null&&C<T.length;C++){A.index>C?(L=A,A=null):L=A.sibling;var _=f(E,A,T[C],b);if(_===null){A===null&&(A=L);break}t&&A&&_.alternate===null&&e(E,A),y=r(_,y,C),w===null?x=_:w.sibling=_,w=_,A=L}if(C===T.length)return n(E,A),Ve&&Ws(E,C),x;if(A===null){for(;C<T.length;C++)A=d(E,T[C],b),A!==null&&(y=r(A,y,C),w===null?x=A:w.sibling=A,w=A);return Ve&&Ws(E,C),x}for(A=i(E,A);C<T.length;C++)L=h(A,E,C,T[C],b),L!==null&&(t&&L.alternate!==null&&A.delete(L.key===null?C:L.key),y=r(L,y,C),w===null?x=L:w.sibling=L,w=L);return t&&A.forEach(function(N){return e(E,N)}),Ve&&Ws(E,C),x}function g(E,y,T,b){var x=ho(T);if(typeof x!="function")throw Error(ie(150));if(T=x.call(T),T==null)throw Error(ie(151));for(var w=x=null,A=y,C=y=0,L=null,_=T.next();A!==null&&!_.done;C++,_=T.next()){A.index>C?(L=A,A=null):L=A.sibling;var N=f(E,A,_.value,b);if(N===null){A===null&&(A=L);break}t&&A&&N.alternate===null&&e(E,A),y=r(N,y,C),w===null?x=N:w.sibling=N,w=N,A=L}if(_.done)return n(E,A),Ve&&Ws(E,C),x;if(A===null){for(;!_.done;C++,_=T.next())_=d(E,_.value,b),_!==null&&(y=r(_,y,C),w===null?x=_:w.sibling=_,w=_);return Ve&&Ws(E,C),x}for(A=i(E,A);!_.done;C++,_=T.next())_=h(A,E,C,_.value,b),_!==null&&(t&&_.alternate!==null&&A.delete(_.key===null?C:_.key),y=r(_,y,C),w===null?x=_:w.sibling=_,w=_);return t&&A.forEach(function(j){return e(E,j)}),Ve&&Ws(E,C),x}function v(E,y,T,b){if(typeof T=="object"&&T!==null&&T.type===Kr&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case yu:e:{for(var x=T.key,w=y;w!==null;){if(w.key===x){if(x=T.type,x===Kr){if(w.tag===7){n(E,w.sibling),y=s(w,T.props.children),y.return=E,E=y;break e}}else if(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===is&&MT(x)===w.type){n(E,w.sibling),y=s(w,T.props),y.ref=To(E,w,T),y.return=E,E=y;break e}n(E,w);break}else e(E,w);w=w.sibling}T.type===Kr?(y=cr(T.props.children,E.mode,b,T.key),y.return=E,E=y):(b=Lc(T.type,T.key,T.props,null,E.mode,b),b.ref=To(E,y,T),b.return=E,E=b)}return a(E);case zr:e:{for(w=T.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(E,y.sibling),y=s(y,T.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=$h(T,E.mode,b),y.return=E,E=y}return a(E);case is:return w=T._init,v(E,y,w(T._payload),b)}if(_o(T))return p(E,y,T,b);if(ho(T))return g(E,y,T,b);Ru(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,T),y.return=E,E=y):(n(E,y),y=Uh(T,E.mode,b),y.return=E,E=y),a(E)):n(E,y)}return v}var Oa=EC(!0),TC=EC(!1),id=Ns(null),sd=null,ta=null,Mg=null;function Fg(){Mg=ta=sd=null}function Bg(t){var e=id.current;Ue(id),t._currentValue=e}function Up(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ma(t,e){sd=t,Mg=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Mg!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(sd===null)throw Error(ie(308));ta=t,sd.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var er=null;function Ug(t){er===null?er=[t]:er.push(t)}function yC(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Ug(e)):(n.next=s.next,s.next=n),e.interleaved=n,zi(t,i)}function zi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function $g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bs(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,zi(t,n)}return s=i.interleaved,s===null?(e.next=e,Ug(i)):(e.next=s.next,s.next=e),i.interleaved=e,zi(t,n)}function bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Cg(t,n)}}function FT(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rd(t,e,n,i){var s=t.updateQueue;ss=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;a=0,c=u=l=null,o=r;do{var f=o.lane,h=o.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,g=o;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ke({},d,f);break e;case 2:ss=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Er|=a,t.lanes=a,t.memoizedState=d}}function BT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(ie(191,s));s.call(i)}}}var Ql={},di=Ns(Ql),yl=Ns(Ql),vl=Ns(Ql);function tr(t){if(t===Ql)throw Error(ie(174));return t}function Hg(t,e){switch(Fe(vl,e),Fe(yl,t),Fe(di,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yp(e,t)}Ue(di),Fe(di,e)}function Ma(){Ue(di),Ue(yl),Ue(vl)}function bC(t){tr(vl.current);var e=tr(di.current),n=yp(e,t.type);e!==n&&(Fe(yl,t),Fe(di,n))}function Vg(t){yl.current===t&&(Ue(di),Ue(yl))}var je=Ns(0);function ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kh=[];function Gg(){for(var t=0;t<kh.length;t++)kh[t]._workInProgressVersionPrimary=null;kh.length=0}var xc=Xi.ReactCurrentDispatcher,Nh=Xi.ReactCurrentBatchConfig,gr=0,ze=null,it=null,lt=null,od=!1,Ho=!1,bl=0,Xk=0;function xt(){throw Error(ie(321))}function jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function Wg(t,e,n,i,s,r){if(gr=r,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?eN:tN,t=n(i,s),Ho){r=0;do{if(Ho=!1,bl=0,25<=r)throw Error(ie(301));r+=1,lt=it=null,e.updateQueue=null,xc.current=nN,t=n(i,s)}while(Ho)}if(xc.current=ld,e=it!==null&&it.next!==null,gr=0,lt=it=ze=null,od=!1,e)throw Error(ie(300));return t}function zg(){var t=bl!==0;return bl=0,t}function ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?ze.memoizedState=lt=t:lt=lt.next=t,lt}function Pn(){if(it===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=lt===null?ze.memoizedState:lt.next;if(e!==null)lt=e,it=t;else{if(t===null)throw Error(ie(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},lt===null?ze.memoizedState=lt=t:lt=lt.next=t}return lt}function xl(t,e){return typeof e=="function"?e(t):e}function Oh(t){var e=Pn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var i=it,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,l=null,u=r;do{var c=u.lane;if((gr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,ze.lanes|=c,Er|=c}u=u.next}while(u!==null&&u!==r);l===null?a=i:l.next=o,Kn(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ze.lanes|=r,Er|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mh(t){var e=Pn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);Kn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function xC(){}function SC(t,e){var n=ze,i=Pn(),s=e(),r=!Kn(i.memoizedState,s);if(r&&(i.memoizedState=s,Jt=!0),i=i.queue,Kg(wC.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,Sl(9,CC.bind(null,n,i,s,e),void 0,null),dt===null)throw Error(ie(349));gr&30||AC(n,e,s)}return s}function AC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CC(t,e,n,i){e.value=n,e.getSnapshot=i,LC(e)&&IC(t)}function wC(t,e,n){return n(function(){LC(e)&&IC(t)})}function LC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function IC(t){var e=zi(t,1);e!==null&&Wn(e,t,1,-1)}function UT(t){var e=ei();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:t},e.queue=t,t=t.dispatch=Jk.bind(null,ze,t),[e.memoizedState,t]}function Sl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function _C(){return Pn().memoizedState}function Sc(t,e,n,i){var s=ei();ze.flags|=t,s.memoizedState=Sl(1|e,n,void 0,i===void 0?null:i)}function pf(t,e,n,i){var s=Pn();i=i===void 0?null:i;var r=void 0;if(it!==null){var a=it.memoizedState;if(r=a.destroy,i!==null&&jg(i,a.deps)){s.memoizedState=Sl(e,n,r,i);return}}ze.flags|=t,s.memoizedState=Sl(1|e,n,r,i)}function $T(t,e){return Sc(8390656,8,t,e)}function Kg(t,e){return pf(2048,8,t,e)}function RC(t,e){return pf(4,2,t,e)}function DC(t,e){return pf(4,4,t,e)}function PC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kC(t,e,n){return n=n!=null?n.concat([t]):null,pf(4,4,PC.bind(null,e,t),n)}function Yg(){}function NC(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function OC(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function MC(t,e,n){return gr&21?(Kn(n,e)||(n=HA(),ze.lanes|=n,Er|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function Qk(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var i=Nh.transition;Nh.transition={};try{t(!1),e()}finally{De=n,Nh.transition=i}}function FC(){return Pn().memoizedState}function Zk(t,e,n){var i=Ss(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BC(t))UC(e,n);else if(n=yC(t,e,n,i),n!==null){var s=$t();Wn(n,t,i,s),$C(n,e,i)}}function Jk(t,e,n){var i=Ss(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BC(t))UC(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,Kn(o,a)){var l=e.interleaved;l===null?(s.next=s,Ug(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yC(t,e,s,i),n!==null&&(s=$t(),Wn(n,t,i,s),$C(n,e,i))}}function BC(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function UC(t,e){Ho=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $C(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Cg(t,n)}}var ld={readContext:Dn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},eN={readContext:Dn,useCallback:function(t,e){return ei().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:$T,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4194308,4,PC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sc(4,2,t,e)},useMemo:function(t,e){var n=ei();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ei();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Zk.bind(null,ze,t),[i.memoizedState,t]},useRef:function(t){var e=ei();return t={current:t},e.memoizedState=t},useState:UT,useDebugValue:Yg,useDeferredValue:function(t){return ei().memoizedState=t},useTransition:function(){var t=UT(!1),e=t[0];return t=Qk.bind(null,t[1]),ei().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ze,s=ei();if(Ve){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),dt===null)throw Error(ie(349));gr&30||AC(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,$T(wC.bind(null,i,r,t),[t]),i.flags|=2048,Sl(9,CC.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=ei(),e=dt.identifierPrefix;if(Ve){var n=Ni,i=ki;n=(i&~(1<<32-jn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tN={readContext:Dn,useCallback:NC,useContext:Dn,useEffect:Kg,useImperativeHandle:kC,useInsertionEffect:RC,useLayoutEffect:DC,useMemo:OC,useReducer:Oh,useRef:_C,useState:function(){return Oh(xl)},useDebugValue:Yg,useDeferredValue:function(t){var e=Pn();return MC(e,it.memoizedState,t)},useTransition:function(){var t=Oh(xl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:SC,useId:FC,unstable_isNewReconciler:!1},nN={readContext:Dn,useCallback:NC,useContext:Dn,useEffect:Kg,useImperativeHandle:kC,useInsertionEffect:RC,useLayoutEffect:DC,useMemo:OC,useReducer:Mh,useRef:_C,useState:function(){return Mh(xl)},useDebugValue:Yg,useDeferredValue:function(t){var e=Pn();return it===null?e.memoizedState=t:MC(e,it.memoizedState,t)},useTransition:function(){var t=Mh(xl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:SC,useId:FC,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $p(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mf={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Ss(t),r=Bi(i,s);r.payload=e,n!=null&&(r.callback=n),e=bs(t,r,s),e!==null&&(Wn(e,t,s,i),bc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Ss(t),r=Bi(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=bs(t,r,s),e!==null&&(Wn(e,t,s,i),bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),i=Ss(t),s=Bi(n,i);s.tag=2,e!=null&&(s.callback=e),e=bs(t,s,i),e!==null&&(Wn(e,t,i,n),bc(e,t,i))}};function HT(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!ml(n,i)||!ml(s,r):!0}function HC(t,e,n){var i=!1,s=Rs,r=e.contextType;return typeof r=="object"&&r!==null?r=Dn(r):(s=tn(e)?pr:Dt.current,i=e.contextTypes,r=(i=i!=null)?ka(t,s):Rs),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function VT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&mf.enqueueReplaceState(e,e.state,null)}function Hp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$g(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Dn(r):(r=tn(e)?pr:Dt.current,s.context=ka(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&($p(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mf.enqueueReplaceState(s,s.state,null),rd(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fa(t,e){try{var n="",i=e;do n+=RP(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Fh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iN=typeof WeakMap=="function"?WeakMap:Map;function VC(t,e,n){n=Bi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){cd||(cd=!0,Zp=i),Vp(t,e)},n}function GC(t,e,n){n=Bi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Vp(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Vp(t,e),typeof i!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function GT(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new iN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=EN.bind(null,t,e,n),e.then(t,t))}function jT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WT(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bi(-1,1),e.tag=2,bs(n,e,1))),n.lanes|=1),t)}var sN=Xi.ReactCurrentOwner,Jt=!1;function Ft(t,e,n,i){e.child=t===null?TC(e,null,n,i):Oa(e,t.child,n,i)}function zT(t,e,n,i,s){n=n.render;var r=e.ref;return ma(e,s),i=Wg(t,e,n,i,r,s),n=zg(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(Ve&&n&&kg(e),e.flags|=1,Ft(t,e,i,s),e.child)}function KT(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!nE(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,jC(t,e,r,i,s)):(t=Lc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(a,i)&&t.ref===e.ref)return Ki(t,e,s)}return e.flags|=1,t=As(r,i),t.ref=e.ref,t.return=e,e.child=t}function jC(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(ml(r,i)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,Ki(t,e,s)}return Gp(t,e,n,i,s)}function WC(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ia,an),an|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(ia,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Fe(ia,an),an|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,Fe(ia,an),an|=i;return Ft(t,e,s,n),e.child}function zC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gp(t,e,n,i,s){var r=tn(n)?pr:Dt.current;return r=ka(e,r),ma(e,s),n=Wg(t,e,n,i,r,s),i=zg(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(Ve&&i&&kg(e),e.flags|=1,Ft(t,e,n,s),e.child)}function YT(t,e,n,i,s){if(tn(n)){var r=!0;ed(e)}else r=!1;if(ma(e,s),e.stateNode===null)Ac(t,e),HC(e,n,i),Hp(e,n,i,s),i=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dn(u):(u=tn(n)?pr:Dt.current,u=ka(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&VT(e,a,i,u),ss=!1;var f=e.memoizedState;a.state=f,rd(e,i,a,s),l=e.memoizedState,o!==i||f!==l||en.current||ss?(typeof c=="function"&&($p(e,n,c,i),l=e.memoizedState),(o=ss||HT(e,n,o,i,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,vC(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Fn(e.type,o),a.props=u,d=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=tn(n)?pr:Dt.current,l=ka(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&VT(e,a,i,l),ss=!1,f=e.memoizedState,a.state=f,rd(e,i,a,s);var p=e.memoizedState;o!==d||f!==p||en.current||ss?(typeof h=="function"&&($p(e,n,h,i),p=e.memoizedState),(u=ss||HT(e,n,u,i,f,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return jp(t,e,n,i,r,s)}function jp(t,e,n,i,s,r){zC(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&kT(e,n,!1),Ki(t,e,r);i=e.stateNode,sN.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Oa(e,t.child,null,r),e.child=Oa(e,null,o,r)):Ft(t,e,o,r),e.memoizedState=i.state,s&&kT(e,n,!0),e.child}function KC(t){var e=t.stateNode;e.pendingContext?PT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&PT(t,e.context,!1),Hg(t,e.containerInfo)}function qT(t,e,n,i,s){return Na(),Og(s),e.flags|=256,Ft(t,e,n,i),e.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function YC(t,e,n){var i=e.pendingProps,s=je.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(je,s&1),t===null)return Bp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Tf(a,i,0,null),t=cr(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=zp(n),e.memoizedState=Wp,t):qg(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return rN(t,e,a,i,o,s,n);if(r){r=i.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=As(s,l),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=As(o,r):(r=cr(r,a,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=t.child.memoizedState,a=a===null?zp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=t.childLanes&~n,e.memoizedState=Wp,i}return r=t.child,t=r.sibling,i=As(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function qg(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Du(t,e,n,i){return i!==null&&Og(i),Oa(e,t.child,null,n),t=qg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rN(t,e,n,i,s,r,a){if(n)return e.flags&256?(e.flags&=-257,i=Fh(Error(ie(422))),Du(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Tf({mode:"visible",children:i.children},s,0,null),r=cr(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Oa(e,t.child,null,a),e.child.memoizedState=zp(a),e.memoizedState=Wp,r);if(!(e.mode&1))return Du(t,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(ie(419)),i=Fh(r,i,void 0),Du(t,e,a,i)}if(o=(a&t.childLanes)!==0,Jt||o){if(i=dt,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,zi(t,s),Wn(i,t,s,-1))}return tE(),i=Fh(Error(ie(421))),Du(t,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=TN.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,un=vs(s.nextSibling),fn=e,Ve=!0,Hn=null,t!==null&&(wn[Ln++]=ki,wn[Ln++]=Ni,wn[Ln++]=mr,ki=t.id,Ni=t.overflow,mr=e),e=qg(e,i.children),e.flags|=4096,e)}function XT(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Up(t.return,e,n)}function Bh(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function qC(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Ft(t,e,i.children,n),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XT(t,n,e);else if(t.tag===19)XT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(je,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ad(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bh(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ad(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bh(e,!0,n,null,r);break;case"together":Bh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Er|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aN(t,e,n){switch(e.tag){case 3:KC(e),Na();break;case 5:bC(e);break;case 1:tn(e.type)&&ed(e);break;case 4:Hg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Fe(id,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?YC(t,e,n):(Fe(je,je.current&1),t=Ki(t,e,n),t!==null?t.sibling:null);Fe(je,je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return qC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,WC(t,e,n)}return Ki(t,e,n)}var XC,Kp,QC,ZC;XC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kp=function(){};QC=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,tr(di.current);var r=null;switch(n){case"input":s=mp(t,s),i=mp(t,i),r=[];break;case"select":s=Ke({},s,{value:void 0}),i=Ke({},i,{value:void 0}),r=[];break;case"textarea":s=Tp(t,s),i=Tp(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Zc)}vp(n,i);var a;n=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ll.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(o=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(r||(r=[]),r.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ll.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",t),r||o===l||(r=[])):(r=r||[]).push(u,l))}n&&(r=r||[]).push("style",n);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};ZC=function(t,e,n,i){n!==i&&(e.flags|=4)};function yo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oN(t,e,n){var i=e.pendingProps;switch(Ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return tn(e.type)&&Jc(),St(e),null;case 3:return i=e.stateNode,Ma(),Ue(en),Ue(Dt),Gg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(_u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(tm(Hn),Hn=null))),Kp(t,e),St(e),null;case 5:Vg(e);var s=tr(vl.current);if(n=e.type,t!==null&&e.stateNode!=null)QC(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ie(166));return St(e),null}if(t=tr(di.current),_u(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[ai]=e,i[Tl]=r,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(s=0;s<Do.length;s++)Be(Do[s],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":rT(i,r),Be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Be("invalid",i);break;case"textarea":oT(i,r),Be("invalid",i)}vp(n,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&Iu(i.textContent,o,t),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Iu(i.textContent,o,t),s=["children",""+o]):ll.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Be("scroll",i)}switch(n){case"input":vu(i),aT(i,r,!0);break;case"textarea":vu(i),lT(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Zc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ai]=e,t[Tl]=i,XC(t,e,!1,!1),e.stateNode=t;e:{switch(a=bp(n,i),n){case"dialog":Be("cancel",t),Be("close",t),s=i;break;case"iframe":case"object":case"embed":Be("load",t),s=i;break;case"video":case"audio":for(s=0;s<Do.length;s++)Be(Do[s],t);s=i;break;case"source":Be("error",t),s=i;break;case"img":case"image":case"link":Be("error",t),Be("load",t),s=i;break;case"details":Be("toggle",t),s=i;break;case"input":rT(t,i),s=mp(t,i),Be("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ke({},i,{value:void 0}),Be("invalid",t);break;case"textarea":oT(t,i),s=Tp(t,i),Be("invalid",t);break;default:s=i}vp(n,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?_A(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LA(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ul(t,l):typeof l=="number"&&ul(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ll.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Be("scroll",t):l!=null&&yg(t,r,l,a))}switch(n){case"input":vu(t),aT(t,i,!1);break;case"textarea":vu(t),lT(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_s(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?da(t,!!i.multiple,r,!1):i.defaultValue!=null&&da(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)ZC(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ie(166));if(n=tr(vl.current),tr(di.current),_u(e)){if(i=e.stateNode,n=e.memoizedProps,i[ai]=e,(r=i.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:Iu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Iu(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ai]=e,e.stateNode=i}return St(e),null;case 13:if(Ue(je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&un!==null&&e.mode&1&&!(e.flags&128))gC(),Na(),e.flags|=98560,r=!1;else if(r=_u(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(ie(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ie(317));r[ai]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),r=!1}else Hn!==null&&(tm(Hn),Hn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?rt===0&&(rt=3):tE())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Ma(),Kp(t,e),t===null&&gl(e.stateNode.containerInfo),St(e),null;case 10:return Bg(e.type._context),St(e),null;case 17:return tn(e.type)&&Jc(),St(e),null;case 19:if(Ue(je),r=e.memoizedState,r===null)return St(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)yo(r,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ad(t),a!==null){for(e.flags|=128,yo(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,t=a.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(je,je.current&1|2),e.child}t=t.sibling}r.tail!==null&&Je()>Ba&&(e.flags|=128,i=!0,yo(r,!1),e.lanes=4194304)}else{if(!i)if(t=ad(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ve)return St(e),null}else 2*Je()-r.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,i=!0,yo(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(n=r.last,n!==null?n.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Je(),e.sibling=null,n=je.current,Fe(je,i?n&1|2:n&1),e):(St(e),null);case 22:case 23:return eE(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?an&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function lN(t,e){switch(Ng(e),e.tag){case 1:return tn(e.type)&&Jc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Ue(en),Ue(Dt),Gg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vg(e),null;case 13:if(Ue(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(je),null;case 4:return Ma(),null;case 10:return Bg(e.type._context),null;case 22:case 23:return eE(),null;case 24:return null;default:return null}}var Pu=!1,It=!1,uN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xe(t,e,i)}else n.current=null}function Yp(t,e,n){try{n()}catch(i){Xe(t,e,i)}}var QT=!1;function cN(t,e){if(Dp=qc,t=iC(),Pg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(o=a+s),d!==r||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===s&&(o=a),f===r&&++c===i&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pp={focusedElem:t,selectionRange:n},qc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:Fn(e.type,g),v);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(b){Xe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return p=QT,QT=!1,p}function Vo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Yp(e,n,r)}s=s.next}while(s!==i)}}function gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function qp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JC(t){var e=t.alternate;e!==null&&(t.alternate=null,JC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ai],delete e[Tl],delete e[Op],delete e[zk],delete e[Kk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ew(t){return t.tag===5||t.tag===3||t.tag===4}function ZT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ew(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zc));else if(i!==4&&(t=t.child,t!==null))for(Xp(t,e,n),t=t.sibling;t!==null;)Xp(t,e,n),t=t.sibling}function Qp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}var mt=null,$n=!1;function Zi(t,e,n){for(n=n.child;n!==null;)tw(t,e,n),n=n.sibling}function tw(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:It||na(n,e);case 6:var i=mt,s=$n;mt=null,Zi(t,e,n),mt=i,$n=s,mt!==null&&($n?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&($n?(t=mt,n=n.stateNode,t.nodeType===8?Dh(t.parentNode,n):t.nodeType===1&&Dh(t,n),hl(t)):Dh(mt,n.stateNode));break;case 4:i=mt,s=$n,mt=n.stateNode.containerInfo,$n=!0,Zi(t,e,n),mt=i,$n=s;break;case 0:case 11:case 14:case 15:if(!It&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&Yp(n,e,a),s=s.next}while(s!==i)}Zi(t,e,n);break;case 1:if(!It&&(na(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Xe(n,e,o)}Zi(t,e,n);break;case 21:Zi(t,e,n);break;case 22:n.mode&1?(It=(i=It)||n.memoizedState!==null,Zi(t,e,n),It=i):Zi(t,e,n);break;default:Zi(t,e,n)}}function JT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uN),e.forEach(function(i){var s=yN.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:mt=o.stateNode,$n=!1;break e;case 3:mt=o.stateNode.containerInfo,$n=!0;break e;case 4:mt=o.stateNode.containerInfo,$n=!0;break e}o=o.return}if(mt===null)throw Error(ie(160));tw(r,a,s),mt=null,$n=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Xe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nw(e,t),e=e.sibling}function nw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Qn(t),i&4){try{Vo(3,t,t.return),gf(3,t)}catch(g){Xe(t,t.return,g)}try{Vo(5,t,t.return)}catch(g){Xe(t,t.return,g)}}break;case 1:Nn(e,t),Qn(t),i&512&&n!==null&&na(n,n.return);break;case 5:if(Nn(e,t),Qn(t),i&512&&n!==null&&na(n,n.return),t.flags&32){var s=t.stateNode;try{ul(s,"")}catch(g){Xe(t,t.return,g)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,a=n!==null?n.memoizedProps:r,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&AA(s,r),bp(o,a);var u=bp(o,r);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?_A(s,d):c==="dangerouslySetInnerHTML"?LA(s,d):c==="children"?ul(s,d):yg(s,c,d,u)}switch(o){case"input":gp(s,r);break;case"textarea":CA(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var h=r.value;h!=null?da(s,!!r.multiple,h,!1):f!==!!r.multiple&&(r.defaultValue!=null?da(s,!!r.multiple,r.defaultValue,!0):da(s,!!r.multiple,r.multiple?[]:"",!1))}s[Tl]=r}catch(g){Xe(t,t.return,g)}}break;case 6:if(Nn(e,t),Qn(t),i&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(g){Xe(t,t.return,g)}}break;case 3:if(Nn(e,t),Qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hl(e.containerInfo)}catch(g){Xe(t,t.return,g)}break;case 4:Nn(e,t),Qn(t);break;case 13:Nn(e,t),Qn(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Zg=Je())),i&4&&JT(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(It=(u=It)||c,Nn(e,t),It=u):Nn(e,t),Qn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(oe=t,c=t.child;c!==null;){for(d=oe=c;oe!==null;){switch(f=oe,h=f.child,f.tag){case 0:case 11:case 14:case 15:Vo(4,f,f.return);break;case 1:na(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Xe(i,n,g)}}break;case 5:na(f,f.return);break;case 22:if(f.memoizedState!==null){ty(d);continue}}h!==null?(h.return=f,oe=h):ty(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=IA("display",a))}catch(g){Xe(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Xe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(e,t),Qn(t),i&4&&JT(t);break;case 21:break;default:Nn(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ew(n)){var i=n;break e}n=n.return}throw Error(ie(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ul(s,""),i.flags&=-33);var r=ZT(t);Qp(t,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=ZT(t);Xp(t,o,a);break;default:throw Error(ie(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dN(t,e,n){oe=t,iw(t)}function iw(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var s=oe,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Pu;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||It;o=Pu;var u=It;if(Pu=a,(It=l)&&!u)for(oe=s;oe!==null;)a=oe,l=a.child,a.tag===22&&a.memoizedState!==null?ny(s):l!==null?(l.return=a,oe=l):ny(s);for(;r!==null;)oe=r,iw(r),r=r.sibling;oe=s,Pu=o,It=u}ey(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,oe=r):ey(t)}}function ey(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||gf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!It)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&BT(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BT(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&hl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}It||e.flags&512&&qp(e)}catch(f){Xe(e,e.return,f)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function ty(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function ny(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gf(4,e)}catch(l){Xe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Xe(e,s,l)}}var r=e.return;try{qp(e)}catch(l){Xe(e,r,l)}break;case 5:var a=e.return;try{qp(e)}catch(l){Xe(e,a,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){oe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,oe=o;break}oe=e.return}}var fN=Math.ceil,ud=Xi.ReactCurrentDispatcher,Xg=Xi.ReactCurrentOwner,Rn=Xi.ReactCurrentBatchConfig,Le=0,dt=null,et=null,Tt=0,an=0,ia=Ns(0),rt=0,Al=null,Er=0,Ef=0,Qg=0,Go=null,qt=null,Zg=0,Ba=1/0,Ci=null,cd=!1,Zp=null,xs=null,ku=!1,ps=null,dd=0,jo=0,Jp=null,Cc=-1,wc=0;function $t(){return Le&6?Je():Cc!==-1?Cc:Cc=Je()}function Ss(t){return t.mode&1?Le&2&&Tt!==0?Tt&-Tt:qk.transition!==null?(wc===0&&(wc=HA()),wc):(t=De,t!==0||(t=window.event,t=t===void 0?16:YA(t.type)),t):1}function Wn(t,e,n,i){if(50<jo)throw jo=0,Jp=null,Error(ie(185));Yl(t,n,i),(!(Le&2)||t!==dt)&&(t===dt&&(!(Le&2)&&(Ef|=n),rt===4&&os(t,Tt)),nn(t,i),n===1&&Le===0&&!(e.mode&1)&&(Ba=Je()+500,hf&&Os()))}function nn(t,e){var n=t.callbackNode;qP(t,e);var i=Yc(t,t===dt?Tt:0);if(i===0)n!==null&&dT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&dT(n),e===1)t.tag===0?Yk(iy.bind(null,t)):hC(iy.bind(null,t)),jk(function(){!(Le&6)&&Os()}),n=null;else{switch(VA(i)){case 1:n=Ag;break;case 4:n=UA;break;case 16:n=Kc;break;case 536870912:n=$A;break;default:n=Kc}n=dw(n,sw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sw(t,e){if(Cc=-1,wc=0,Le&6)throw Error(ie(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var i=Yc(t,t===dt?Tt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=fd(t,i);else{e=i;var s=Le;Le|=2;var r=aw();(dt!==t||Tt!==e)&&(Ci=null,Ba=Je()+500,ur(t,e));do try{mN();break}catch(o){rw(t,o)}while(!0);Fg(),ud.current=r,Le=s,et!==null?e=0:(dt=null,Tt=0,e=rt)}if(e!==0){if(e===2&&(s=wp(t),s!==0&&(i=s,e=em(t,s))),e===1)throw n=Al,ur(t,0),os(t,i),nn(t,Je()),n;if(e===6)os(t,i);else{if(s=t.current.alternate,!(i&30)&&!hN(s)&&(e=fd(t,i),e===2&&(r=wp(t),r!==0&&(i=r,e=em(t,r))),e===1))throw n=Al,ur(t,0),os(t,i),nn(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ie(345));case 2:zs(t,qt,Ci);break;case 3:if(os(t,i),(i&130023424)===i&&(e=Zg+500-Je(),10<e)){if(Yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Np(zs.bind(null,t,qt,Ci),e);break}zs(t,qt,Ci);break;case 4:if(os(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var a=31-jn(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fN(i/1960))-i,10<i){t.timeoutHandle=Np(zs.bind(null,t,qt,Ci),i);break}zs(t,qt,Ci);break;case 5:zs(t,qt,Ci);break;default:throw Error(ie(329))}}}return nn(t,Je()),t.callbackNode===n?sw.bind(null,t):null}function em(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(ur(t,e).flags|=256),t=fd(t,e),t!==2&&(e=qt,qt=n,e!==null&&tm(e)),t}function tm(t){qt===null?qt=t:qt.push.apply(qt,t)}function hN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Kn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~Qg,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),i=1<<n;t[n]=-1,e&=~i}}function iy(t){if(Le&6)throw Error(ie(327));ga();var e=Yc(t,0);if(!(e&1))return nn(t,Je()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var i=wp(t);i!==0&&(e=i,n=em(t,i))}if(n===1)throw n=Al,ur(t,0),os(t,e),nn(t,Je()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,qt,Ci),nn(t,Je()),null}function Jg(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Ba=Je()+500,hf&&Os())}}function Tr(t){ps!==null&&ps.tag===0&&!(Le&6)&&ga();var e=Le;Le|=1;var n=Rn.transition,i=De;try{if(Rn.transition=null,De=1,t)return t()}finally{De=i,Rn.transition=n,Le=e,!(Le&6)&&Os()}}function eE(){an=ia.current,Ue(ia)}function ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gk(n)),et!==null)for(n=et.return;n!==null;){var i=n;switch(Ng(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Jc();break;case 3:Ma(),Ue(en),Ue(Dt),Gg();break;case 5:Vg(i);break;case 4:Ma();break;case 13:Ue(je);break;case 19:Ue(je);break;case 10:Bg(i.type._context);break;case 22:case 23:eE()}n=n.return}if(dt=t,et=t=As(t.current,null),Tt=an=e,rt=0,Al=null,Qg=Ef=Er=0,qt=Go=null,er!==null){for(e=0;e<er.length;e++)if(n=er[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}n.pending=i}er=null}return t}function rw(t,e){do{var n=et;try{if(Fg(),xc.current=ld,od){for(var i=ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}od=!1}if(gr=0,lt=it=ze=null,Ho=!1,bl=0,Xg.current=null,n===null||n.return===null){rt=1,Al=e,et=null;break}e:{var r=t,a=n.return,o=n,l=e;if(e=Tt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=jT(a);if(h!==null){h.flags&=-257,WT(h,a,o,r,e),h.mode&1&&GT(r,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){GT(r,u,e),tE();break e}l=Error(ie(426))}}else if(Ve&&o.mode&1){var v=jT(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),WT(v,a,o,r,e),Og(Fa(l,o));break e}}r=l=Fa(l,o),rt!==4&&(rt=2),Go===null?Go=[r]:Go.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var E=VC(r,l,e);FT(r,E);break e;case 1:o=l;var y=r.type,T=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(xs===null||!xs.has(T)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=GC(r,o,e);FT(r,b);break e}}r=r.return}while(r!==null)}lw(n)}catch(x){e=x,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function aw(){var t=ud.current;return ud.current=ld,t===null?ld:t}function tE(){(rt===0||rt===3||rt===2)&&(rt=4),dt===null||!(Er&268435455)&&!(Ef&268435455)||os(dt,Tt)}function fd(t,e){var n=Le;Le|=2;var i=aw();(dt!==t||Tt!==e)&&(Ci=null,ur(t,e));do try{pN();break}catch(s){rw(t,s)}while(!0);if(Fg(),Le=n,ud.current=i,et!==null)throw Error(ie(261));return dt=null,Tt=0,rt}function pN(){for(;et!==null;)ow(et)}function mN(){for(;et!==null&&!$P();)ow(et)}function ow(t){var e=cw(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?lw(t):et=e,Xg.current=null}function lw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lN(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,et=null;return}}else if(n=oN(n,e,an),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);rt===0&&(rt=5)}function zs(t,e,n){var i=De,s=Rn.transition;try{Rn.transition=null,De=1,gN(t,e,n,i)}finally{Rn.transition=s,De=i}return null}function gN(t,e,n,i){do ga();while(ps!==null);if(Le&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(XP(t,r),t===dt&&(et=dt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,dw(Kc,function(){return ga(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Rn.transition,Rn.transition=null;var a=De;De=1;var o=Le;Le|=4,Xg.current=null,cN(t,n),nw(n,t),Mk(Pp),qc=!!Dp,Pp=Dp=null,t.current=n,dN(n),HP(),Le=o,De=a,Rn.transition=r}else t.current=n;if(ku&&(ku=!1,ps=t,dd=s),r=t.pendingLanes,r===0&&(xs=null),jP(n.stateNode),nn(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(cd)throw cd=!1,t=Zp,Zp=null,t;return dd&1&&t.tag!==0&&ga(),r=t.pendingLanes,r&1?t===Jp?jo++:(jo=0,Jp=t):jo=0,Os(),null}function ga(){if(ps!==null){var t=VA(dd),e=Rn.transition,n=De;try{if(Rn.transition=null,De=16>t?16:t,ps===null)var i=!1;else{if(t=ps,ps=null,dd=0,Le&6)throw Error(ie(331));var s=Le;for(Le|=4,oe=t.current;oe!==null;){var r=oe,a=r.child;if(oe.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(oe=u;oe!==null;){var c=oe;switch(c.tag){case 0:case 11:case 15:Vo(8,c,r)}var d=c.child;if(d!==null)d.return=c,oe=d;else for(;oe!==null;){c=oe;var f=c.sibling,h=c.return;if(JC(c),c===u){oe=null;break}if(f!==null){f.return=h,oe=f;break}oe=h}}}var p=r.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}oe=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,oe=a;else e:for(;oe!==null;){if(r=oe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Vo(9,r,r.return)}var E=r.sibling;if(E!==null){E.return=r.return,oe=E;break e}oe=r.return}}var y=t.current;for(oe=y;oe!==null;){a=oe;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,oe=T;else e:for(a=y;oe!==null;){if(o=oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gf(9,o)}}catch(x){Xe(o,o.return,x)}if(o===a){oe=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,oe=b;break e}oe=o.return}}if(Le=s,Os(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(lf,t)}catch{}i=!0}return i}finally{De=n,Rn.transition=e}}return!1}function sy(t,e,n){e=Fa(n,e),e=VC(t,e,1),t=bs(t,e,1),e=$t(),t!==null&&(Yl(t,1,e),nn(t,e))}function Xe(t,e,n){if(t.tag===3)sy(t,t,n);else for(;e!==null;){if(e.tag===3){sy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(xs===null||!xs.has(i))){t=Fa(n,t),t=GC(e,t,1),e=bs(e,t,1),t=$t(),e!==null&&(Yl(e,1,t),nn(e,t));break}}e=e.return}}function EN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(Tt&n)===n&&(rt===4||rt===3&&(Tt&130023424)===Tt&&500>Je()-Zg?ur(t,0):Qg|=n),nn(t,e)}function uw(t,e){e===0&&(t.mode&1?(e=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):e=1);var n=$t();t=zi(t,e),t!==null&&(Yl(t,e,n),nn(t,n))}function TN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uw(t,n)}function yN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ie(314))}i!==null&&i.delete(e),uw(t,n)}var cw;cw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,aN(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Ve&&e.flags&1048576&&pC(e,nd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ac(t,e),t=e.pendingProps;var s=ka(e,Dt.current);ma(e,n),s=Wg(null,e,i,t,s,n);var r=zg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(i)?(r=!0,ed(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$g(e),s.updater=mf,e.stateNode=s,s._reactInternals=e,Hp(e,i,t,n),e=jp(null,e,i,!0,r,n)):(e.tag=0,Ve&&r&&kg(e),Ft(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=bN(i),t=Fn(i,t),s){case 0:e=Gp(null,e,i,t,n);break e;case 1:e=YT(null,e,i,t,n);break e;case 11:e=zT(null,e,i,t,n);break e;case 14:e=KT(null,e,i,Fn(i.type,t),n);break e}throw Error(ie(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),Gp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),YT(t,e,i,s,n);case 3:e:{if(KC(e),t===null)throw Error(ie(387));i=e.pendingProps,r=e.memoizedState,s=r.element,vC(t,e),rd(e,i,null,n);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Fa(Error(ie(423)),e),e=qT(t,e,i,n,s);break e}else if(i!==s){s=Fa(Error(ie(424)),e),e=qT(t,e,i,n,s);break e}else for(un=vs(e.stateNode.containerInfo.firstChild),fn=e,Ve=!0,Hn=null,n=TC(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),i===s){e=Ki(t,e,n);break e}Ft(t,e,i,n)}e=e.child}return e;case 5:return bC(e),t===null&&Bp(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,a=s.children,kp(i,s)?a=null:r!==null&&kp(i,r)&&(e.flags|=32),zC(t,e),Ft(t,e,a,n),e.child;case 6:return t===null&&Bp(e),null;case 13:return YC(t,e,n);case 4:return Hg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Oa(e,null,i,n):Ft(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),zT(t,e,i,s,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,Fe(id,i._currentValue),i._currentValue=a,r!==null)if(Kn(r.value,a)){if(r.children===s.children&&!en.current){e=Ki(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Bi(-1,n&-n),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Up(r.return,n,e),o.lanes|=n;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(ie(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Up(a,n,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ma(e,n),s=Dn(s),i=i(s),e.flags|=1,Ft(t,e,i,n),e.child;case 14:return i=e.type,s=Fn(i,e.pendingProps),s=Fn(i.type,s),KT(t,e,i,s,n);case 15:return jC(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),Ac(t,e),e.tag=1,tn(i)?(t=!0,ed(e)):t=!1,ma(e,n),HC(e,i,s),Hp(e,i,s,n),jp(null,e,i,!0,t,n);case 19:return qC(t,e,n);case 22:return WC(t,e,n)}throw Error(ie(156,e.tag))};function dw(t,e){return BA(t,e)}function vN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,i){return new vN(t,e,n,i)}function nE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bN(t){if(typeof t=="function")return nE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bg)return 11;if(t===xg)return 14}return 2}function As(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,i,s,r){var a=2;if(i=t,typeof t=="function")nE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Kr:return cr(n.children,s,r,e);case vg:a=8,s|=8;break;case dp:return t=_n(12,n,e,s|2),t.elementType=dp,t.lanes=r,t;case fp:return t=_n(13,n,e,s),t.elementType=fp,t.lanes=r,t;case hp:return t=_n(19,n,e,s),t.elementType=hp,t.lanes=r,t;case bA:return Tf(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yA:a=10;break e;case vA:a=9;break e;case bg:a=11;break e;case xg:a=14;break e;case is:a=16,i=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=_n(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function cr(t,e,n,i){return t=_n(7,t,i,e),t.lanes=n,t}function Tf(t,e,n,i){return t=_n(22,t,i,e),t.elementType=bA,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function $h(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xN(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vh(0),this.expirationTimes=vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function iE(t,e,n,i,s,r,a,o,l){return t=new xN(t,e,n,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=_n(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$g(r),t}function SN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fw(t){if(!t)return Rs;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(tn(n))return fC(t,n,e)}return e}function hw(t,e,n,i,s,r,a,o,l){return t=iE(n,i,!0,t,s,r,a,o,l),t.context=fw(null),n=t.current,i=$t(),s=Ss(n),r=Bi(i,s),r.callback=e??null,bs(n,r,s),t.current.lanes=s,Yl(t,s,i),nn(t,i),t}function yf(t,e,n,i){var s=e.current,r=$t(),a=Ss(s);return n=fw(n),e.context===null?e.context=n:e.pendingContext=n,e=Bi(r,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=bs(s,e,a),t!==null&&(Wn(t,s,a,r),bc(t,s,a)),a}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ry(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sE(t,e){ry(t,e),(t=t.alternate)&&ry(t,e)}function AN(){return null}var pw=typeof reportError=="function"?reportError:function(t){console.error(t)};function rE(t){this._internalRoot=t}vf.prototype.render=rE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));yf(t,e,null,null)};vf.prototype.unmount=rE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tr(function(){yf(null,t,null,null)}),e[Wi]=null}};function vf(t){this._internalRoot=t}vf.prototype.unstable_scheduleHydration=function(t){if(t){var e=WA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&KA(t)}};function aE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ay(){}function CN(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=hd(a);r.call(u)}}var a=hw(e,i,t,0,null,!1,!1,"",ay);return t._reactRootContainer=a,t[Wi]=a.current,gl(t.nodeType===8?t.parentNode:t),Tr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var u=hd(l);o.call(u)}}var l=iE(t,0,!1,null,null,!1,!1,"",ay);return t._reactRootContainer=l,t[Wi]=l.current,gl(t.nodeType===8?t.parentNode:t),Tr(function(){yf(e,l,n,i)}),l}function xf(t,e,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var l=hd(a);o.call(l)}}yf(e,a,t,s)}else a=CN(n,e,t,s,i);return hd(a)}GA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ro(e.pendingLanes);n!==0&&(Cg(e,n|1),nn(e,Je()),!(Le&6)&&(Ba=Je()+500,Os()))}break;case 13:Tr(function(){var i=zi(t,1);if(i!==null){var s=$t();Wn(i,t,1,s)}}),sE(t,1)}};wg=function(t){if(t.tag===13){var e=zi(t,134217728);if(e!==null){var n=$t();Wn(e,t,134217728,n)}sE(t,134217728)}};jA=function(t){if(t.tag===13){var e=Ss(t),n=zi(t,e);if(n!==null){var i=$t();Wn(n,t,e,i)}sE(t,e)}};WA=function(){return De};zA=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Sp=function(t,e,n){switch(e){case"input":if(gp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=ff(i);if(!s)throw Error(ie(90));SA(i),gp(i,s)}}}break;case"textarea":CA(t,n);break;case"select":e=n.value,e!=null&&da(t,!!n.multiple,e,!1)}};PA=Jg;kA=Tr;var wN={usingClientEntryPoint:!1,Events:[Xl,Qr,ff,RA,DA,Jg]},vo={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LN={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MA(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||AN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{lf=Nu.inject(LN),ci=Nu}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wN;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aE(e))throw Error(ie(200));return SN(t,e,null,n)};mn.createRoot=function(t,e){if(!aE(t))throw Error(ie(299));var n=!1,i="",s=pw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=iE(t,1,!1,null,null,n,!1,i,s),t[Wi]=e.current,gl(t.nodeType===8?t.parentNode:t),new rE(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=MA(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return Tr(t)};mn.hydrate=function(t,e,n){if(!bf(e))throw Error(ie(200));return xf(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!aE(t))throw Error(ie(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",a=pw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=hw(e,null,t,1,n??null,s,!1,r,a),t[Wi]=e.current,gl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vf(e)};mn.render=function(t,e,n){if(!bf(e))throw Error(ie(200));return xf(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!bf(t))throw Error(ie(40));return t._reactRootContainer?(Tr(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Wi]=null})}),!0):!1};mn.unstable_batchedUpdates=Jg;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bf(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return xf(t,e,n,!1,i)};mn.version="18.3.1-next-f1338f8080-20240426";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(t){console.error(t)}}mw(),mA.exports=mn;var gw=mA.exports,Ew,oy=gw;Ew=oy.createRoot,oy.hydrateRoot;const IN="modulepreload",_N=function(t){return"/"+t},ly={},eo=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.all(n.map(o=>{if(o=_N(o),o in ly)return;ly[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":IN,l||(c.as="script",c.crossOrigin=""),c.href=o,a&&c.setAttribute("nonce",a),document.head.appendChild(c),l)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};function nm(t,e){return nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nm(t,e)}function gi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,nm(t,e)}var Tw={exports:{}},RN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DN=RN,PN=DN;function yw(){}function vw(){}vw.resetWarningCache=yw;var kN=function(){function t(i,s,r,a,o,l){if(l!==PN){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vw,resetWarningCache:yw};return n.PropTypes=n,n};Tw.exports=kN();var NN=Tw.exports;const uy=zl(NN);function Pt(){return Pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pt.apply(null,arguments)}function Ou(t){return t.charAt(0)==="/"}function Hh(t,e){for(var n=e,i=n+1,s=t.length;i<s;n+=1,i+=1)t[n]=t[i];t.pop()}function ON(t,e){e===void 0&&(e="");var n=t&&t.split("/")||[],i=e&&e.split("/")||[],s=t&&Ou(t),r=e&&Ou(e),a=s||r;if(t&&Ou(t)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var o;if(i.length){var l=i[i.length-1];o=l==="."||l===".."||l===""}else o=!1;for(var u=0,c=i.length;c>=0;c--){var d=i[c];d==="."?Hh(i,c):d===".."?(Hh(i,c),u++):u&&(Hh(i,c),u--)}if(!a)for(;u--;u)i.unshift("..");a&&i[0]!==""&&(!i[0]||!Ou(i[0]))&&i.unshift("");var f=i.join("/");return o&&f.substr(-1)!=="/"&&(f+="/"),f}var MN="Invariant failed";function Ms(t,e){throw new Error(MN)}function Wo(t){return t.charAt(0)==="/"?t:"/"+t}function cy(t){return t.charAt(0)==="/"?t.substr(1):t}function FN(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function bw(t,e){return FN(t,e)?t.substr(e.length):t}function xw(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function BN(t){var e=t||"/",n="",i="",s=e.indexOf("#");s!==-1&&(i=e.substr(s),e=e.substr(0,s));var r=e.indexOf("?");return r!==-1&&(n=e.substr(r),e=e.substr(0,r)),{pathname:e,search:n==="?"?"":n,hash:i==="#"?"":i}}function Kt(t){var e=t.pathname,n=t.search,i=t.hash,s=e||"/";return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function cn(t,e,n,i){var s;typeof t=="string"?(s=BN(t),s.state=e):(s=Pt({},t),s.pathname===void 0&&(s.pathname=""),s.search?s.search.charAt(0)!=="?"&&(s.search="?"+s.search):s.search="",s.hash?s.hash.charAt(0)!=="#"&&(s.hash="#"+s.hash):s.hash="",e!==void 0&&s.state===void 0&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(r){throw r instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):r}return n&&(s.key=n),i?s.pathname?s.pathname.charAt(0)!=="/"&&(s.pathname=ON(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s}function oE(){var t=null;function e(a){return t=a,function(){t===a&&(t=null)}}function n(a,o,l,u){if(t!=null){var c=typeof t=="function"?t(a,o):t;typeof c=="string"?typeof l=="function"?l(c,u):u(!0):u(c!==!1)}else u(!0)}var i=[];function s(a){var o=!0;function l(){o&&a.apply(void 0,arguments)}return i.push(l),function(){o=!1,i=i.filter(function(u){return u!==l})}}function r(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];i.forEach(function(u){return u.apply(void 0,o)})}return{setPrompt:e,confirmTransitionTo:n,appendListener:s,notifyListeners:r}}var Sw=!!(typeof window<"u"&&window.document&&window.document.createElement);function Aw(t,e){e(window.confirm(t))}function UN(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function $N(){return window.navigator.userAgent.indexOf("Trident")===-1}function HN(){return window.navigator.userAgent.indexOf("Firefox")===-1}function VN(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var dy="popstate",fy="hashchange";function hy(){try{return window.history.state||{}}catch{return{}}}function Cw(t){t===void 0&&(t={}),Sw||Ms();var e=window.history,n=UN(),i=!$N(),s=t,r=s.forceRefresh,a=r===void 0?!1:r,o=s.getUserConfirmation,l=o===void 0?Aw:o,u=s.keyLength,c=u===void 0?6:u,d=t.basename?xw(Wo(t.basename)):"";function f(O){var k=O||{},z=k.key,G=k.state,se=window.location,re=se.pathname,de=se.search,ge=se.hash,Se=re+de+ge;return d&&(Se=bw(Se,d)),cn(Se,G,z)}function h(){return Math.random().toString(36).substr(2,c)}var p=oE();function g(O){Pt(Y,O),Y.length=e.length,p.notifyListeners(Y.location,Y.action)}function v(O){VN(O)||T(f(O.state))}function E(){T(f(hy()))}var y=!1;function T(O){if(y)y=!1,g();else{var k="POP";p.confirmTransitionTo(O,k,l,function(z){z?g({action:k,location:O}):b(O)})}}function b(O){var k=Y.location,z=w.indexOf(k.key);z===-1&&(z=0);var G=w.indexOf(O.key);G===-1&&(G=0);var se=z-G;se&&(y=!0,_(se))}var x=f(hy()),w=[x.key];function A(O){return d+Kt(O)}function C(O,k){var z="PUSH",G=cn(O,k,h(),Y.location);p.confirmTransitionTo(G,z,l,function(se){if(se){var re=A(G),de=G.key,ge=G.state;if(n)if(e.pushState({key:de,state:ge},null,re),a)window.location.href=re;else{var Se=w.indexOf(Y.location.key),Nt=w.slice(0,Se+1);Nt.push(G.key),w=Nt,g({action:z,location:G})}else window.location.href=re}})}function L(O,k){var z="REPLACE",G=cn(O,k,h(),Y.location);p.confirmTransitionTo(G,z,l,function(se){if(se){var re=A(G),de=G.key,ge=G.state;if(n)if(e.replaceState({key:de,state:ge},null,re),a)window.location.replace(re);else{var Se=w.indexOf(Y.location.key);Se!==-1&&(w[Se]=G.key),g({action:z,location:G})}else window.location.replace(re)}})}function _(O){e.go(O)}function N(){_(-1)}function j(){_(1)}var U=0;function J(O){U+=O,U===1&&O===1?(window.addEventListener(dy,v),i&&window.addEventListener(fy,E)):U===0&&(window.removeEventListener(dy,v),i&&window.removeEventListener(fy,E))}var q=!1;function te(O){O===void 0&&(O=!1);var k=p.setPrompt(O);return q||(J(1),q=!0),function(){return q&&(q=!1,J(-1)),k()}}function ce(O){var k=p.appendListener(O);return J(1),function(){J(-1),k()}}var Y={length:e.length,action:"POP",location:x,createHref:A,push:C,replace:L,go:_,goBack:N,goForward:j,block:te,listen:ce};return Y}var py="hashchange",GN={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+cy(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:cy,decodePath:Wo},slash:{encodePath:Wo,decodePath:Wo}};function ww(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function bo(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function jN(t){window.location.hash=t}function Vh(t){window.location.replace(ww(window.location.href)+"#"+t)}function Lw(t){t===void 0&&(t={}),Sw||Ms();var e=window.history;HN();var n=t,i=n.getUserConfirmation,s=i===void 0?Aw:i,r=n.hashType,a=r===void 0?"slash":r,o=t.basename?xw(Wo(t.basename)):"",l=GN[a],u=l.encodePath,c=l.decodePath;function d(){var k=c(bo());return o&&(k=bw(k,o)),cn(k)}var f=oE();function h(k){Pt(O,k),O.length=e.length,f.notifyListeners(O.location,O.action)}var p=!1,g=null;function v(k,z){return k.pathname===z.pathname&&k.search===z.search&&k.hash===z.hash}function E(){var k=bo(),z=u(k);if(k!==z)Vh(z);else{var G=d(),se=O.location;if(!p&&v(se,G)||g===Kt(G))return;g=null,y(G)}}function y(k){if(p)p=!1,h();else{var z="POP";f.confirmTransitionTo(k,z,s,function(G){G?h({action:z,location:k}):T(k)})}}function T(k){var z=O.location,G=A.lastIndexOf(Kt(z));G===-1&&(G=0);var se=A.lastIndexOf(Kt(k));se===-1&&(se=0);var re=G-se;re&&(p=!0,N(re))}var b=bo(),x=u(b);b!==x&&Vh(x);var w=d(),A=[Kt(w)];function C(k){var z=document.querySelector("base"),G="";return z&&z.getAttribute("href")&&(G=ww(window.location.href)),G+"#"+u(o+Kt(k))}function L(k,z){var G="PUSH",se=cn(k,void 0,void 0,O.location);f.confirmTransitionTo(se,G,s,function(re){if(re){var de=Kt(se),ge=u(o+de),Se=bo()!==ge;if(Se){g=de,jN(ge);var Nt=A.lastIndexOf(Kt(O.location)),Qi=A.slice(0,Nt+1);Qi.push(de),A=Qi,h({action:G,location:se})}else h()}})}function _(k,z){var G="REPLACE",se=cn(k,void 0,void 0,O.location);f.confirmTransitionTo(se,G,s,function(re){if(re){var de=Kt(se),ge=u(o+de),Se=bo()!==ge;Se&&(g=de,Vh(ge));var Nt=A.indexOf(Kt(O.location));Nt!==-1&&(A[Nt]=de),h({action:G,location:se})}})}function N(k){e.go(k)}function j(){N(-1)}function U(){N(1)}var J=0;function q(k){J+=k,J===1&&k===1?window.addEventListener(py,E):J===0&&window.removeEventListener(py,E)}var te=!1;function ce(k){k===void 0&&(k=!1);var z=f.setPrompt(k);return te||(q(1),te=!0),function(){return te&&(te=!1,q(-1)),z()}}function Y(k){var z=f.appendListener(k);return q(1),function(){q(-1),z()}}var O={length:e.length,action:"POP",location:w,createHref:C,push:L,replace:_,go:N,goBack:j,goForward:U,block:ce,listen:Y};return O}function my(t,e,n){return Math.min(Math.max(t,e),n)}function WN(t){t===void 0&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,s=i===void 0?["/"]:i,r=e.initialIndex,a=r===void 0?0:r,o=e.keyLength,l=o===void 0?6:o,u=oE();function c(C){Pt(A,C),A.length=A.entries.length,u.notifyListeners(A.location,A.action)}function d(){return Math.random().toString(36).substr(2,l)}var f=my(a,0,s.length-1),h=s.map(function(C){return typeof C=="string"?cn(C,void 0,d()):cn(C,void 0,C.key||d())}),p=Kt;function g(C,L){var _="PUSH",N=cn(C,L,d(),A.location);u.confirmTransitionTo(N,_,n,function(j){if(j){var U=A.index,J=U+1,q=A.entries.slice(0);q.length>J?q.splice(J,q.length-J,N):q.push(N),c({action:_,location:N,index:J,entries:q})}})}function v(C,L){var _="REPLACE",N=cn(C,L,d(),A.location);u.confirmTransitionTo(N,_,n,function(j){j&&(A.entries[A.index]=N,c({action:_,location:N}))})}function E(C){var L=my(A.index+C,0,A.entries.length-1),_="POP",N=A.entries[L];u.confirmTransitionTo(N,_,n,function(j){j?c({action:_,location:N,index:L}):c()})}function y(){E(-1)}function T(){E(1)}function b(C){var L=A.index+C;return L>=0&&L<A.entries.length}function x(C){return C===void 0&&(C=!1),u.setPrompt(C)}function w(C){return u.appendListener(C)}var A={length:h.length,action:"POP",location:h[f],index:f,entries:h,createHref:p,push:g,replace:v,go:E,goBack:y,goForward:T,canGo:b,block:x,listen:w};return A}var to={exports:{}},zN=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},pd=zN;to.exports=Rw;to.exports.parse=lE;to.exports.compile=YN;to.exports.tokensToFunction=Iw;to.exports.tokensToRegExp=_w;var KN=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function lE(t,e){for(var n=[],i=0,s=0,r="",a=e&&e.delimiter||"/",o;(o=KN.exec(t))!=null;){var l=o[0],u=o[1],c=o.index;if(r+=t.slice(s,c),s=c+l.length,u){r+=u[1];continue}var d=t[s],f=o[2],h=o[3],p=o[4],g=o[5],v=o[6],E=o[7];r&&(n.push(r),r="");var y=f!=null&&d!=null&&d!==f,T=v==="+"||v==="*",b=v==="?"||v==="*",x=o[2]||a,w=p||g;n.push({name:h||i++,prefix:f||"",delimiter:x,optional:b,repeat:T,partial:y,asterisk:!!E,pattern:w?QN(w):E?".*":"[^"+Ic(x)+"]+?"})}return s<t.length&&(r+=t.substr(s)),r&&n.push(r),n}function YN(t,e){return Iw(lE(t,e),e)}function qN(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function XN(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Iw(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)typeof t[i]=="object"&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",cE(e)));return function(s,r){for(var a="",o=s||{},l=r||{},u=l.pretty?qN:encodeURIComponent,c=0;c<t.length;c++){var d=t[c];if(typeof d=="string"){a+=d;continue}var f=o[d.name],h;if(f==null)if(d.optional){d.partial&&(a+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(pd(f)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(f.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(h=u(f[p]),!n[c].test(h))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(p===0?d.prefix:d.delimiter)+h}continue}if(h=d.asterisk?XN(f):u(f),!n[c].test(h))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+h+'"');a+=d.prefix+h}return a}}function Ic(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function QN(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function uE(t,e){return t.keys=e,t}function cE(t){return t&&t.sensitive?"":"i"}function ZN(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return uE(t,e)}function JN(t,e,n){for(var i=[],s=0;s<t.length;s++)i.push(Rw(t[s],e,n).source);var r=new RegExp("(?:"+i.join("|")+")",cE(n));return uE(r,e)}function eO(t,e,n){return _w(lE(t,n),e,n)}function _w(t,e,n){pd(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,s=n.end!==!1,r="",a=0;a<t.length;a++){var o=t[a];if(typeof o=="string")r+=Ic(o);else{var l=Ic(o.prefix),u="(?:"+o.pattern+")";e.push(o),o.repeat&&(u+="(?:"+l+u+")*"),o.optional?o.partial?u=l+"("+u+")?":u="(?:"+l+"("+u+"))?":u=l+"("+u+")",r+=u}}var c=Ic(n.delimiter||"/"),d=r.slice(-c.length)===c;return i||(r=(d?r.slice(0,-c.length):r)+"(?:"+c+"(?=$))?"),s?r+="$":r+=i&&d?"":"(?="+c+"|$)",uE(new RegExp("^"+r,cE(n)),e)}function Rw(t,e,n){return pd(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?ZN(t,e):pd(t)?JN(t,e,n):eO(t,e,n)}var tO=to.exports;const nO=zl(tO);var Dw={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=typeof Symbol=="function"&&Symbol.for,dE=pt?Symbol.for("react.element"):60103,fE=pt?Symbol.for("react.portal"):60106,Sf=pt?Symbol.for("react.fragment"):60107,Af=pt?Symbol.for("react.strict_mode"):60108,Cf=pt?Symbol.for("react.profiler"):60114,wf=pt?Symbol.for("react.provider"):60109,Lf=pt?Symbol.for("react.context"):60110,hE=pt?Symbol.for("react.async_mode"):60111,If=pt?Symbol.for("react.concurrent_mode"):60111,_f=pt?Symbol.for("react.forward_ref"):60112,Rf=pt?Symbol.for("react.suspense"):60113,iO=pt?Symbol.for("react.suspense_list"):60120,Df=pt?Symbol.for("react.memo"):60115,Pf=pt?Symbol.for("react.lazy"):60116,sO=pt?Symbol.for("react.block"):60121,rO=pt?Symbol.for("react.fundamental"):60117,aO=pt?Symbol.for("react.responder"):60118,oO=pt?Symbol.for("react.scope"):60119;function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dE:switch(t=t.type,t){case hE:case If:case Sf:case Cf:case Af:case Rf:return t;default:switch(t=t&&t.$$typeof,t){case Lf:case _f:case Pf:case Df:case wf:return t;default:return e}}case fE:return e}}}function Pw(t){return En(t)===If}Pe.AsyncMode=hE;Pe.ConcurrentMode=If;Pe.ContextConsumer=Lf;Pe.ContextProvider=wf;Pe.Element=dE;Pe.ForwardRef=_f;Pe.Fragment=Sf;Pe.Lazy=Pf;Pe.Memo=Df;Pe.Portal=fE;Pe.Profiler=Cf;Pe.StrictMode=Af;Pe.Suspense=Rf;Pe.isAsyncMode=function(t){return Pw(t)||En(t)===hE};Pe.isConcurrentMode=Pw;Pe.isContextConsumer=function(t){return En(t)===Lf};Pe.isContextProvider=function(t){return En(t)===wf};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dE};Pe.isForwardRef=function(t){return En(t)===_f};Pe.isFragment=function(t){return En(t)===Sf};Pe.isLazy=function(t){return En(t)===Pf};Pe.isMemo=function(t){return En(t)===Df};Pe.isPortal=function(t){return En(t)===fE};Pe.isProfiler=function(t){return En(t)===Cf};Pe.isStrictMode=function(t){return En(t)===Af};Pe.isSuspense=function(t){return En(t)===Rf};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Sf||t===If||t===Cf||t===Af||t===Rf||t===iO||typeof t=="object"&&t!==null&&(t.$$typeof===Pf||t.$$typeof===Df||t.$$typeof===wf||t.$$typeof===Lf||t.$$typeof===_f||t.$$typeof===rO||t.$$typeof===aO||t.$$typeof===oO||t.$$typeof===sO)};Pe.typeOf=En;Dw.exports=Pe;var lO=Dw.exports;function Zl(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}var pE=lO,uO={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cO={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mE={};mE[pE.ForwardRef]=dO;mE[pE.Memo]=kw;function gy(t){return pE.isMemo(t)?kw:mE[t.$$typeof]||uO}var fO=Object.defineProperty,hO=Object.getOwnPropertyNames,Ey=Object.getOwnPropertySymbols,pO=Object.getOwnPropertyDescriptor,mO=Object.getPrototypeOf,Ty=Object.prototype;function Nw(t,e,n){if(typeof e!="string"){if(Ty){var i=mO(e);i&&i!==Ty&&Nw(t,i,n)}var s=hO(e);Ey&&(s=s.concat(Ey(e)));for(var r=gy(t),a=gy(e),o=0;o<s.length;++o){var l=s[o];if(!cO[l]&&!(n&&n[l])&&!(a&&a[l])&&!(r&&r[l])){var u=pO(e,l);try{fO(t,l,u)}catch{}}}}return t}var gO=Nw;const EO=zl(gO);var Gh=1073741823,yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function TO(){var t="__global_unique_id__";return yy[t]=(yy[t]||0)+1}function yO(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function vO(t){var e=[];return{on:function(i){e.push(i)},off:function(i){e=e.filter(function(s){return s!==i})},get:function(){return t},set:function(i,s){t=i,e.forEach(function(r){return r(t,s)})}}}function bO(t){return Array.isArray(t)?t[0]:t}function xO(t,e){var n,i,s="__create-react-context-"+TO()+"__",r=function(o){gi(l,o);function l(){for(var c,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return c=o.call.apply(o,[this].concat(f))||this,c.emitter=vO(c.props.value),c}var u=l.prototype;return u.getChildContext=function(){var d;return d={},d[s]=this.emitter,d},u.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var f=this.props.value,h=d.value,p;yO(f,h)?p=0:(p=typeof e=="function"?e(f,h):Gh,p|=0,p!==0&&this.emitter.set(d.value,p))}},u.render=function(){return this.props.children},l}($.Component);r.childContextTypes=(n={},n[s]=uy.object.isRequired,n);var a=function(o){gi(l,o);function l(){for(var c,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return c=o.call.apply(o,[this].concat(f))||this,c.observedBits=void 0,c.state={value:c.getValue()},c.onUpdate=function(p,g){var v=c.observedBits|0;v&g&&c.setState({value:c.getValue()})},c}var u=l.prototype;return u.componentWillReceiveProps=function(d){var f=d.observedBits;this.observedBits=f??Gh},u.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d??Gh},u.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},u.getValue=function(){return this.context[s]?this.context[s].get():t},u.render=function(){return bO(this.props.children)(this.state.value)},l}($.Component);return a.contextTypes=(i={},i[s]=uy.object,i),{Provider:r,Consumer:a}}var SO=$.createContext||xO,Ow=function(e){var n=SO();return n.displayName=e,n},AO=Ow("Router-History"),Yi=Ow("Router"),Ir=function(t){gi(e,t),e.computeRootMatch=function(s){return{path:"/",url:"/",params:{},isExact:s==="/"}};function e(i){var s;return s=t.call(this,i)||this,s.state={location:i.history.location},s._isMounted=!1,s._pendingLocation=null,i.staticContext||(s.unlisten=i.history.listen(function(r){s._pendingLocation=r})),s}var n=e.prototype;return n.componentDidMount=function(){var s=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(r){s._isMounted&&s.setState({location:r})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return $.createElement(Yi.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},$.createElement(AO.Provider,{children:this.props.children||null,value:this.props.history}))},e}($.Component);$.Component;$.Component;var vy={},CO=1e4,by=0;function wO(t,e){var n=""+e.end+e.strict+e.sensitive,i=vy[n]||(vy[n]={});if(i[t])return i[t];var s=[],r=nO(t,s,e),a={regexp:r,keys:s};return by<CO&&(i[t]=a,by++),a}function kf(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var n=e,i=n.path,s=n.exact,r=s===void 0?!1:s,a=n.strict,o=a===void 0?!1:a,l=n.sensitive,u=l===void 0?!1:l,c=[].concat(i);return c.reduce(function(d,f){if(!f&&f!=="")return null;if(d)return d;var h=wO(f,{end:r,strict:o,sensitive:u}),p=h.regexp,g=h.keys,v=p.exec(t);if(!v)return null;var E=v[0],y=v.slice(1),T=t===E;return r&&!T?null:{path:f,url:f==="/"&&E===""?"/":E,isExact:T,params:g.reduce(function(b,x,w){return b[x.name]=y[w],b},{})}},null)}function LO(t){return $.Children.count(t)===0}var _c=function(t){gi(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var s=this;return $.createElement(Yi.Consumer,null,function(r){r||Ms();var a=s.props.location||r.location,o=s.props.computedMatch?s.props.computedMatch:s.props.path?kf(a.pathname,s.props):r.match,l=Pt({},r,{location:a,match:o}),u=s.props,c=u.children,d=u.component,f=u.render;return Array.isArray(c)&&LO(c)&&(c=null),$.createElement(Yi.Provider,{value:l},l.match?c?typeof c=="function"?c(l):c:d?$.createElement(d,l):f?f(l):null:typeof c=="function"?c(l):null)})},e}($.Component);function gE(t){return t.charAt(0)==="/"?t:"/"+t}function IO(t,e){return t?Pt({},e,{pathname:gE(t)+e.pathname}):e}function _O(t,e){if(!t)return e;var n=gE(t);return e.pathname.indexOf(n)!==0?e:Pt({},e,{pathname:e.pathname.substr(n.length)})}function xy(t){return typeof t=="string"?t:Kt(t)}function jh(t){return function(){Ms()}}function Sy(){}$.Component;$.Component;function RO(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(s){var r=s.wrappedComponentRef,a=Zl(s,["wrappedComponentRef"]);return $.createElement(Yi.Consumer,null,function(o){return o||Ms(),$.createElement(t,Pt({},a,o,{ref:r}))})};return n.displayName=e,n.WrappedComponent=t,EO(n,t)}var Mw=$.useContext;function Fw(){return Mw(Yi).location}function Bw(){var t=Mw(Yi).match;return t?t.params:{}}$.Component;$.Component;var im=function(e,n){return typeof e=="function"?e(n):e},sm=function(e,n){return typeof e=="string"?cn(e,null,null,n):e},EE=function(e){return e},Ua=$.forwardRef;typeof Ua>"u"&&(Ua=EE);function DO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var PO=Ua(function(t,e){var n=t.innerRef,i=t.navigate,s=t.onClick,r=Zl(t,["innerRef","navigate","onClick"]),a=r.target,o=Pt({},r,{onClick:function(u){try{s&&s(u)}catch(c){throw u.preventDefault(),c}!u.defaultPrevented&&u.button===0&&(!a||a==="_self")&&!DO(u)&&(u.preventDefault(),i())}});return EE!==Ua?o.ref=e||n:o.ref=n,$.createElement("a",o)}),zo=Ua(function(t,e){var n=t.component,i=n===void 0?PO:n,s=t.replace,r=t.to,a=t.innerRef,o=Zl(t,["component","replace","to","innerRef"]);return $.createElement(Yi.Consumer,null,function(l){l||Ms();var u=l.history,c=sm(im(r,l.location),l.location),d=c?u.createHref(c):"",f=Pt({},o,{href:d,navigate:function(){var p=im(r,l.location),g=Kt(l.location)===Kt(sm(p)),v=s||g?u.replace:u.push;v(p)}});return EE!==Ua?f.ref=e||a:f.innerRef=a,$.createElement(i,f)})}),Uw=function(e){return e},md=$.forwardRef;typeof md>"u"&&(md=Uw);function kO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(i){return i}).join(" ")}md(function(t,e){var n=t["aria-current"],i=n===void 0?"page":n,s=t.activeClassName,r=s===void 0?"active":s,a=t.activeStyle,o=t.className,l=t.exact,u=t.isActive,c=t.location,d=t.sensitive,f=t.strict,h=t.style,p=t.to,g=t.innerRef,v=Zl(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return $.createElement(Yi.Consumer,null,function(E){E||Ms();var y=c||E.location,T=sm(im(p,y),y),b=T.pathname,x=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=x?kf(y.pathname,{path:x,exact:l,sensitive:d,strict:f}):null,A=!!(u?u(w,y):w),C=typeof o=="function"?o(A):o,L=typeof h=="function"?h(A):h;A&&(C=kO(C,r),L=Pt({},L,a));var _=Pt({"aria-current":A&&i||null,className:C,style:L,to:T},v);return Uw!==md?_.ref=e||g:_.innerRef=g,$.createElement(zo,_)})});var In={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},NO=Object.defineProperty,OO=(t,e)=>{for(var n in e)NO(t,n,{get:e[n],enumerable:!0})},MO={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},$w=new WeakMap,_r=t=>$w.get(t),FO=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return $w.set(t,n)},Ay=(t,e)=>e in t,Jl=(t,e)=>(0,console.error)(t,e),gd=new Map,BO=[],UO="slot-fb{display:contents}slot-fb[hidden]{display:none}",Cy="http://www.w3.org/1999/xlink",eu=typeof window<"u"?window:{},zn=eu.document||{head:{}},no=eu.HTMLElement||class{},vt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,i)=>t.addEventListener(e,n,i),rel:(t,e,n,i)=>t.removeEventListener(e,n,i),ce:(t,e)=>new CustomEvent(t,e)},$O=(()=>{let t=!1;try{zn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),HO=t=>Promise.resolve(t),VO=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),rm=!1,am=[],Hw=[],Vw=(t,e)=>n=>{t.push(n),rm||(rm=!0,e&&vt.$flags$&4?GO(om):vt.raf(om))},wy=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Jl(n)}t.length=0},om=()=>{wy(am),wy(Hw),(rm=am.length>0)&&vt.raf(om)},GO=t=>HO().then(t),jO=Vw(am,!1),TE=Vw(Hw,!0),WO=t=>{const e=new URL(t,vt.$resourcesUrl$);return e.origin!==eu.location.origin?e.href:e.pathname},Ly={},zO="http://www.w3.org/2000/svg",KO="http://www.w3.org/1999/xhtml",YO=t=>t!=null,yE=t=>(t=typeof t,t==="object"||t==="function");function qO(t){var e,n,i;return(i=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?i:void 0}var XO={};OO(XO,{err:()=>Gw,map:()=>QO,ok:()=>lm,unwrap:()=>ZO,unwrapErr:()=>JO});var lm=t=>({isOk:!0,isErr:!1,value:t}),Gw=t=>({isOk:!1,isErr:!0,value:t});function QO(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(i=>lm(i)):lm(n)}if(t.isErr){const n=t.value;return Gw(n)}throw"should never get here"}var ZO=t=>{if(t.isOk)return t.value;throw t.value},JO=t=>{if(t.isErr)return t.value;throw t.value},yr=(t,e="")=>()=>{},Ut=(t,e,...n)=>{let i=null,s=null,r=null,a=!1,o=!1;const l=[],u=d=>{for(let f=0;f<d.length;f++)i=d[f],Array.isArray(i)?u(i):i!=null&&typeof i!="boolean"&&((a=typeof t!="function"&&!yE(i))&&(i=String(i)),a&&o?l[l.length-1].$text$+=i:l.push(a?Ed(null,i):i),o=a)};if(u(n),e){e.key&&(s=e.key),e.name&&(r=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(f=>d[f]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,t3);const c=Ed(t,null);return c.$attrs$=e,l.length>0&&(c.$children$=l),c.$key$=s,c.$name$=r,c},Ed=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},tu={},e3=t=>t&&t.$tag$===tu,t3={forEach:(t,e)=>t.map(Iy).forEach(e),map:(t,e)=>t.map(Iy).map(e).map(n3)},Iy=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),n3=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),Ut(t.vtag,n,...t.vchildren||[])}const e=Ed(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},i3=t=>BO.map(e=>e(t)).find(e=>!!e),s3=t=>_r(t).$modeName$,r3=(t,e)=>t!=null&&!yE(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,a3=t=>t,Ui=(t,e,n)=>{const i=a3(t);return{emit:s=>o3(i,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:s})}},o3=(t,e,n)=>{const i=vt.ce(e,n);return t.dispatchEvent(i),i},_y=new WeakMap,l3=(t,e,n)=>{let i=gd.get(t);VO&&n?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,gd.set(t,i)},u3=(t,e,n)=>{var i;const s=jw(e,n),r=gd.get(s);if(t=t.nodeType===11?t:zn,r)if(typeof r=="string"){t=t.head||t;let a=_y.get(t),o;if(a||_y.set(t,a=new Set),!a.has(s)){{o=zn.createElement("style"),o.innerHTML=r;const l=(i=vt.$nonce$)!=null?i:qO(zn);l!=null&&o.setAttribute("nonce",l),(!(e.$flags$&1)||e.$flags$&1&&t.nodeName!=="HEAD")&&t.insertBefore(o,t.querySelector("link"))}e.$flags$&4&&(o.innerHTML+=UO),a&&a.add(s)}}else t.adoptedStyleSheets.includes(r)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return s},c3=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,i=e.$flags$,s=yr("attachStyles",e.$tagName$),r=u3(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);i&10&&i&2&&(n["s-sc"]=r,n.classList.add(r+"-h"),i&2&&n.classList.add(r+"-s")),s()},jw=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),Ry=(t,e,n,i,s,r)=>{if(n!==i){let a=Ay(t,e),o=e.toLowerCase();if(e==="class"){const l=t.classList,u=Dy(n),c=Dy(i);l.remove(...u.filter(d=>d&&!c.includes(d))),l.add(...c.filter(d=>d&&!u.includes(d)))}else if(e==="style"){for(const l in n)(!i||i[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in i)(!n||i[l]!==n[l])&&(l.includes("-")?t.style.setProperty(l,i[l]):t.style[l]=i[l])}else if(e!=="key")if(e==="ref")i&&i(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):Ay(eu,o)?e=o.slice(2):e=o[2]+e.slice(3),n||i){const l=e.endsWith(Ww);e=e.replace(f3,""),n&&vt.rel(t,e,n,l),i&&vt.ael(t,e,i,l)}}else{const l=yE(i);if((a||l&&i!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=i;else{const c=i??"";e==="list"?a=!1:(n==null||t[e]!=c)&&(t[e]=c)}}catch{}let u=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,u=!0),i==null||i===!1?(i!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(Cy,e):t.removeAttribute(e)):(!a||r&4||s)&&!l&&(i=i===!0?"":i,u?t.setAttributeNS(Cy,e,i):t.setAttribute(e,i))}}},d3=/\s/,Dy=t=>t?t.split(d3):[],Ww="Capture",f3=new RegExp(Ww+"$"),zw=(t,e,n)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||Ly,r=e.$attrs$||Ly;for(const a of Py(Object.keys(s)))a in r||Ry(i,a,s[a],void 0,n,e.$flags$);for(const a of Py(Object.keys(r)))Ry(i,a,s[a],r[a],n,e.$flags$)};function Py(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var jr,um,$a,Td=!1,yd=!1,vE=!1,on=!1,vd=(t,e,n,i)=>{var s;const r=e.$children$[n];let a=0,o,l,u;if(Td||(vE=!0,r.$tag$==="slot"&&(jr&&i.classList.add(jr+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)o=r.$elm$=zn.createTextNode(r.$text$);else if(r.$flags$&1)o=r.$elm$=zn.createTextNode("");else{if(on||(on=r.$tag$==="svg"),o=r.$elm$=zn.createElementNS(on?zO:KO,!Td&&In.slotRelocation&&r.$flags$&2?"slot-fb":r.$tag$),on&&r.$tag$==="foreignObject"&&(on=!1),zw(null,r,on),!!o.getRootNode().querySelector("body")&&In.scoped&&YO(jr)&&o["s-si"]!==jr&&o.classList.add(o["s-si"]=jr),xE(o,i),r.$children$)for(a=0;a<r.$children$.length;++a)l=vd(t,r,a,o),l&&o.appendChild(l);r.$tag$==="svg"?on=!1:o.tagName==="foreignObject"&&(on=!0)}return o["s-hn"]=$a,r.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=um,o["s-sn"]=r.$name$||"",o["s-rf"]=(s=r.$attrs$)==null?void 0:s.ref,u=t&&t.$children$&&t.$children$[n],u&&u.$tag$===r.$tag$&&t.$elm$&&Cl(t.$elm$,!1)),o},Cl=(t,e)=>{vt.$flags$|=1;const n=Array.from(t.childNodes);if(t["s-sr"]&&In.experimentalSlotFixes){let i=t;for(;i=i.nextSibling;)i&&i["s-sn"]===t["s-sn"]&&i["s-sh"]===$a&&n.push(i)}for(let i=n.length-1;i>=0;i--){const s=n[i];s["s-hn"]!==$a&&s["s-ol"]&&(Cs(qw(s),s,bE(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,vE=!0),e&&Cl(s,e)}vt.$flags$&=-2},Kw=(t,e,n,i,s,r)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,o;for(a.shadowRoot&&a.tagName===$a&&(a=a.shadowRoot);s<=r;++s)i[s]&&(o=vd(null,n,s,t),o&&(i[s].$elm$=o,Cs(a,o,bE(e))))},Yw=(t,e,n)=>{for(let i=e;i<=n;++i){const s=t[i];if(s){const r=s.$elm$;Zw(s),r&&(yd=!0,r["s-ol"]?r["s-ol"].remove():Cl(r,!0),r.remove())}}},h3=(t,e,n,i,s=!1)=>{let r=0,a=0,o=0,l=0,u=e.length-1,c=e[0],d=e[u],f=i.length-1,h=i[0],p=i[f],g,v;for(;r<=u&&a<=f;)if(c==null)c=e[++r];else if(d==null)d=e[--u];else if(h==null)h=i[++a];else if(p==null)p=i[--f];else if(Mu(c,h,s))Wr(c,h,s),c=e[++r],h=i[++a];else if(Mu(d,p,s))Wr(d,p,s),d=e[--u],p=i[--f];else if(Mu(c,p,s))(c.$tag$==="slot"||p.$tag$==="slot")&&Cl(c.$elm$.parentNode,!1),Wr(c,p,s),Cs(t,c.$elm$,d.$elm$.nextSibling),c=e[++r],p=i[--f];else if(Mu(d,h,s))(c.$tag$==="slot"||p.$tag$==="slot")&&Cl(d.$elm$.parentNode,!1),Wr(d,h,s),Cs(t,d.$elm$,c.$elm$),d=e[--u],h=i[++a];else{for(o=-1,l=r;l<=u;++l)if(e[l]&&e[l].$key$!==null&&e[l].$key$===h.$key$){o=l;break}o>=0?(v=e[o],v.$tag$!==h.$tag$?g=vd(e&&e[a],n,o,t):(Wr(v,h,s),e[o]=void 0,g=v.$elm$),h=i[++a]):(g=vd(e&&e[a],n,a,t),h=i[++a]),g&&Cs(qw(c.$elm$),g,bE(c.$elm$))}r>u?Kw(t,i[f+1]==null?null:i[f+1].$elm$,n,i,a,f):a>f&&Yw(e,r,u)},Mu=(t,e,n=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?"$nodeId$"in t&&n&&t.$elm$.nodeType!==8?!1:t.$name$===e.$name$:n?!0:t.$key$===e.$key$:!1,bE=t=>t&&t["s-ol"]||t,qw=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Wr=(t,e,n=!1)=>{const i=e.$elm$=t.$elm$,s=t.$children$,r=e.$children$,a=e.$tag$,o=e.$text$;let l;o===null?(on=a==="svg"?!0:a==="foreignObject"?!1:on,a==="slot"&&!Td||zw(t,e,on),s!==null&&r!==null?h3(i,s,e,r,n):r!==null?(t.$text$!==null&&(i.textContent=""),Kw(i,null,e,r,0,r.length-1)):!n&&In.updatable&&s!==null&&Yw(s,0,s.length-1),on&&a==="svg"&&(on=!1)):(l=i["s-cr"])?l.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},Xw=t=>{const e=t.childNodes;for(const n of e)if(n.nodeType===1){if(n["s-sr"]){const i=n["s-sn"];n.hidden=!1;for(const s of e)if(s!==n){if(s["s-hn"]!==n["s-hn"]||i!==""){if(s.nodeType===1&&(i===s.getAttribute("slot")||i===s["s-sn"])||s.nodeType===3&&i===s["s-sn"]){n.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){n.hidden=!0;break}}}Xw(n)}},Ri=[],Qw=t=>{let e,n,i;for(const s of t.childNodes){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){n=e.parentNode.childNodes;const r=s["s-sn"];for(i=n.length-1;i>=0;i--)if(e=n[i],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"]&&!In.experimentalSlotFixes)if(ky(e,r)){let a=Ri.find(o=>o.$nodeToRelocate$===e);yd=!0,e["s-sn"]=e["s-sn"]||r,a?(a.$nodeToRelocate$["s-sh"]=s["s-hn"],a.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],Ri.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&Ri.map(o=>{ky(o.$nodeToRelocate$,e["s-sn"])&&(a=Ri.find(l=>l.$nodeToRelocate$===e),a&&!o.$slotRefNode$&&(o.$slotRefNode$=a.$slotRefNode$))})}else Ri.some(a=>a.$nodeToRelocate$===e)||Ri.push({$nodeToRelocate$:e})}s.nodeType===1&&Qw(s)}},ky=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",Zw=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(Zw)},Cs=(t,e,n)=>{const i=t==null?void 0:t.insertBefore(e,n);return xE(e,t),i},Jw=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...Jw(t.parentElement)),e},xE=(t,e,n=!1)=>{var i;if(t&&e&&t.nodeType===1){const s=new Set(Jw(e).filter(Boolean));if(s.size&&((i=t.classList)==null||i.add(...t["s-scs"]=[...s]),t["s-ol"]||n))for(const r of Array.from(t.childNodes))xE(r,t,!0)}},p3=(t,e,n=!1)=>{var i,s,r,a,o;const l=t.$hostElement$,u=t.$cmpMeta$,c=t.$vnode$||Ed(null,null),d=e3(e)?e:Ut(null,null,e);if($a=l.tagName,u.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},u.$attrsToReflect$.map(([f,h])=>d.$attrs$[h]=l[f])),n&&d.$attrs$)for(const f of Object.keys(d.$attrs$))l.hasAttribute(f)&&!["key","ref","style","class"].includes(f)&&(d.$attrs$[f]=l[f]);d.$tag$=null,d.$flags$|=4,t.$vnode$=d,d.$elm$=c.$elm$=l.shadowRoot||l,jr=l["s-sc"],Td=(u.$flags$&1)!==0,um=l["s-cr"],yd=!1,Wr(c,d,n);{if(vt.$flags$|=1,vE){Qw(d.$elm$);for(const f of Ri){const h=f.$nodeToRelocate$;if(!h["s-ol"]){const p=zn.createTextNode("");p["s-nr"]=h,Cs(h.parentNode,h["s-ol"]=p,h)}}for(const f of Ri){const h=f.$nodeToRelocate$,p=f.$slotRefNode$;if(p){const g=p.parentNode;let v=p.nextSibling;{let E=(i=h["s-ol"])==null?void 0:i.previousSibling;for(;E;){let y=(s=E["s-nr"])!=null?s:null;if(y&&y["s-sn"]===h["s-sn"]&&g===y.parentNode){for(y=y.nextSibling;y===h||y!=null&&y["s-sr"];)y=y==null?void 0:y.nextSibling;if(!y||!y["s-nr"]){v=y;break}}E=E.previousSibling}}(!v&&g!==h.parentNode||h.nextSibling!==v)&&h!==v&&(!h["s-hn"]&&h["s-ol"]&&(h["s-hn"]=h["s-ol"].parentNode.nodeName),Cs(g,h,v),h.nodeType===1&&(h.hidden=(r=h["s-ih"])!=null?r:!1)),h&&typeof p["s-rf"]=="function"&&p["s-rf"](h)}else h.nodeType===1&&(n&&(h["s-ih"]=(a=h.hidden)!=null?a:!1),h.hidden=!0)}}yd&&Xw(d.$elm$),vt.$flags$&=-2,Ri.length=0}if(In.experimentalScopedSlotChanges&&u.$flags$&2)for(const f of d.$elm$.childNodes)f["s-hn"]!==$a&&!f["s-sh"]&&(n&&f["s-ih"]==null&&(f["s-ih"]=(o=f.hidden)!=null?o:!1),f.hidden=!0);um=void 0},m3=(t,e)=>{},eL=(t,e)=>(t.$flags$|=16,m3(t,t.$ancestorComponent$),TE(()=>g3(t,e))),g3=(t,e)=>{const n=t.$hostElement$,i=yr("scheduleUpdate",t.$cmpMeta$.$tagName$),s=n;if(!s)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Ea(s,"componentWillLoad"):r=Ea(s,"componentWillUpdate"),r=Ny(r,()=>Ea(s,"componentWillRender")),i(),Ny(r,()=>T3(t,s,e))},Ny=(t,e)=>E3(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),E3=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",T3=async(t,e,n)=>{const i=t.$hostElement$,s=yr("update",t.$cmpMeta$.$tagName$);i["s-rc"],n&&c3(t);const r=yr("render",t.$cmpMeta$.$tagName$);y3(t,e,i,n),r(),s(),v3(t)},Oy=null,y3=(t,e,n,i)=>{try{Oy=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(In.hasRenderFn||In.reflect)&&(In.vdomRender||In.reflect)&&(In.hydrateServerSide||p3(t,e,i))}catch(l){Jl(l,t.$hostElement$)}return Oy=null,null},v3=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,i=yr("postUpdate",e),s=n;t.$ancestorComponent$,Ea(s,"componentDidRender"),t.$flags$&64?(Ea(s,"componentDidUpdate"),i()):(t.$flags$|=64,Ea(s,"componentDidLoad"),i())},Ea=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(i){Jl(i)}},b3=(t,e)=>_r(t).$instanceValues$.get(e),x3=(t,e,n,i)=>{const s=_r(t),r=t,a=s.$instanceValues$.get(e),o=s.$flags$,l=r;n=r3(n,i.$members$[e][0]);const u=Number.isNaN(a)&&Number.isNaN(n);if(n!==a&&!u){s.$instanceValues$.set(e,n);{if(i.$watchers$&&o&128){const d=i.$watchers$[e];d&&d.map(f=>{try{l[f](n,a,e)}catch(h){Jl(h,r)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,a,e)===!1)return;eL(s,!1)}}}},S3=(t,e,n)=>{var i,s;const r=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const a=Object.entries((i=e.$members$)!=null?i:{});a.map(([o,[l]])=>{(l&31||l&32)&&Object.defineProperty(r,o,{get(){return b3(this,o)},set(u){x3(this,o,u,e)},configurable:!0,enumerable:!0})});{const o=new Map;r.attributeChangedCallback=function(l,u,c){vt.jmp(()=>{var d;const f=o.get(l);if(this.hasOwnProperty(f))c=this[f],delete this[f];else{if(r.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==c)return;if(f==null){const h=_r(this),p=h==null?void 0:h.$flags$;if(p&&!(p&8)&&p&128&&c!==u){const v=this,E=(d=e.$watchers$)==null?void 0:d[l];E==null||E.forEach(y=>{v[y]!=null&&v[y].call(v,c,u,l)})}return}}this[f]=c===null&&typeof this[f]=="boolean"?!1:c})},t.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...a.filter(([l,u])=>u[0]&15).map(([l,u])=>{var c;const d=u[1]||l;return o.set(d,l),u[0]&512&&((c=e.$attrsToReflect$)==null||c.push([l,d])),d})]))}}return t},A3=async(t,e,n,i)=>{let s;if(!(e.$flags$&32)){e.$flags$|=32,n.$lazyBundleId$;{s=t.constructor;const a=t.localName;customElements.whenDefined(a).then(()=>e.$flags$|=128)}if(s&&s.style){let a;typeof s.style=="string"?a=s.style:typeof s.style!="string"&&(e.$modeName$=i3(t),e.$modeName$&&(a=s.style[e.$modeName$]));const o=jw(n,e.$modeName$);if(!gd.has(o)){const l=yr("registerStyles",n.$tagName$);l3(o,a,!!(n.$flags$&1)),l()}}}e.$ancestorComponent$,eL(e,!0)},My=t=>{},C3=t=>{if(!(vt.$flags$&1)){const e=_r(t),n=e.$cmpMeta$,i=yr("connectedCallback",n.$tagName$);e.$flags$&1?(tL(t,e,n.$listeners$),e!=null&&e.$lazyInstance$?My(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>My(e.$lazyInstance$))):(e.$flags$|=1,n.$flags$&12&&w3(t),n.$members$&&Object.entries(n.$members$).map(([s,[r]])=>{if(r&31&&t.hasOwnProperty(s)){const a=t[s];delete t[s],t[s]=a}}),A3(t,e,n)),i()}},w3=t=>{const e=t["s-cr"]=zn.createComment("");e["s-cn"]=!0,Cs(t,e,t.firstChild)},L3=async t=>{if(!(vt.$flags$&1)){const e=_r(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},io=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const i=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){FO(this,n)},connectedCallback(){const r=_r(this);tL(this,r,n.$listeners$),C3(this),i&&i.call(this)},disconnectedCallback(){L3(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${n.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),t.is=n.$tagName$,S3(t,n)},tL=(t,e,n,i)=>{n&&n.map(([s,r,a])=>{const o=_3(t,s),l=I3(e,a),u=R3(s);vt.ael(o,r,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>vt.rel(o,r,l,u))})},I3=(t,e)=>n=>{var i;try{In.lazyLoad||t.$hostElement$[e](n)}catch(s){Jl(s)}},_3=(t,e)=>e&4?zn:e&8?eu:e&16?zn.body:t,R3=t=>$O?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wt=typeof window<"u"?window:void 0,Wh=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let zh;const D3=t=>{if(zh===void 0){const e=t.style.animationName!==void 0,n=t.style.webkitAnimationName!==void 0;zh=!e&&n?"-webkit-":""}return zh},Kh=(t,e,n)=>{const i=e.startsWith("animation")?D3(t):"";t.style.setProperty(i+e,n)},Fu=(t=[],e)=>{if(e!==void 0){const n=Array.isArray(e)?e:[e];return[...t,...n]}return t},P3=t=>{let e,n,i,s,r,a,o=[],l=[],u=[],c=!1,d,f={},h=[],p=[],g={},v=0,E=!1,y=!1,T,b,x,w=!0,A=!1,C=!0,L,_=!1;const N=t,j=[],U=[],J=[],q=[],te=[],ce=[],Y=[],O=[],k=[],z=[],G=[],se=typeof AnimationEffect=="function"||wt!==void 0&&typeof wt.AnimationEffect=="function",re=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&se,de=()=>G,ge=W=>(te.forEach(ue=>{ue.destroy(W)}),Se(W),q.length=0,te.length=0,o.length=0,vD(),c=!1,C=!0,L),Se=W=>{K1(),W&&bD()},Nt=()=>{E=!1,y=!1,C=!0,T=void 0,b=void 0,x=void 0,v=0,A=!1,w=!0,_=!1},Qi=()=>v!==0&&!_,z1=(W,ue)=>{const be=ue.findIndex(Qe=>Qe.c===W);be>-1&&ue.splice(be,1)},yD=(W,ue)=>(J.push({c:W,o:ue}),L),uh=(W,ue)=>((ue!=null&&ue.oneTimeCallback?U:j).push({c:W,o:ue}),L),vD=()=>(j.length=0,U.length=0,L),K1=()=>{re&&(G.forEach(W=>{W.cancel()}),G.length=0)},bD=()=>{ce.forEach(W=>{W!=null&&W.parentNode&&W.parentNode.removeChild(W)}),ce.length=0},xD=W=>(Y.push(W),L),SD=W=>(O.push(W),L),AD=W=>(k.push(W),L),CD=W=>(z.push(W),L),wD=W=>(l=Fu(l,W),L),LD=W=>(u=Fu(u,W),L),ID=(W={})=>(f=W,L),_D=(W=[])=>{for(const ue of W)f[ue]="";return L},RD=W=>(h=Fu(h,W),L),DD=W=>(p=Fu(p,W),L),PD=(W={})=>(g=W,L),kD=(W=[])=>{for(const ue of W)g[ue]="";return L},ch=()=>r!==void 0?r:d?d.getFill():"both",mu=()=>T!==void 0?T:a!==void 0?a:d?d.getDirection():"normal",dh=()=>E?"linear":i!==void 0?i:d?d.getEasing():"linear",Nr=()=>y?0:b!==void 0?b:n!==void 0?n:d?d.getDuration():0,fh=()=>s!==void 0?s:d?d.getIterations():1,hh=()=>x!==void 0?x:e!==void 0?e:d?d.getDelay():0,ND=()=>o,OD=W=>(a=W,yn(!0),L),MD=W=>(r=W,yn(!0),L),FD=W=>(e=W,yn(!0),L),BD=W=>(i=W,yn(!0),L),UD=W=>(!re&&W===0&&(W=1),n=W,yn(!0),L),$D=W=>(s=W,yn(!0),L),HD=W=>(d=W,L),VD=W=>{if(W!=null)if(W.nodeType===1)q.push(W);else if(W.length>=0)for(let ue=0;ue<W.length;ue++)q.push(W[ue]);else console.error("Invalid addElement value");return L},GD=W=>{if(W!=null)if(Array.isArray(W))for(const ue of W)ue.parent(L),te.push(ue);else W.parent(L),te.push(W);return L},jD=W=>{const ue=o!==W;return o=W,ue&&WD(o),L},WD=W=>{re&&de().forEach(ue=>{const be=ue.effect;if(be.setKeyframes)be.setKeyframes(W);else{const Qe=new KeyframeEffect(be.target,W,be.getTiming());ue.effect=Qe}})},zD=()=>{Y.forEach(Qe=>Qe()),O.forEach(Qe=>Qe());const W=l,ue=u,be=f;q.forEach(Qe=>{const Ot=Qe.classList;W.forEach(Xn=>Ot.add(Xn)),ue.forEach(Xn=>Ot.remove(Xn));for(const Xn in be)be.hasOwnProperty(Xn)&&Kh(Qe,Xn,be[Xn])})},KD=()=>{k.forEach(Ot=>Ot()),z.forEach(Ot=>Ot());const W=w?1:0,ue=h,be=p,Qe=g;q.forEach(Ot=>{const Xn=Ot.classList;ue.forEach(Hs=>Xn.add(Hs)),be.forEach(Hs=>Xn.remove(Hs));for(const Hs in Qe)Qe.hasOwnProperty(Hs)&&Kh(Ot,Hs,Qe[Hs])}),b=void 0,T=void 0,x=void 0,j.forEach(Ot=>Ot.c(W,L)),U.forEach(Ot=>Ot.c(W,L)),U.length=0,C=!0,w&&(A=!0),w=!0},gu=()=>{v!==0&&(v--,v===0&&(KD(),d&&d.animationFinish()))},YD=()=>{q.forEach(W=>{const ue=W.animate(o,{id:N,delay:hh(),duration:Nr(),easing:dh(),iterations:fh(),fill:ch(),direction:mu()});ue.pause(),G.push(ue)}),G.length>0&&(G[0].onfinish=()=>{gu()})},Y1=()=>{zD(),o.length>0&&re&&YD(),c=!0},fo=W=>{W=Math.min(Math.max(W,0),.9999),re&&G.forEach(ue=>{ue.currentTime=ue.effect.getComputedTiming().delay+Nr()*W,ue.pause()})},q1=W=>{G.forEach(ue=>{ue.effect.updateTiming({delay:hh(),duration:Nr(),easing:dh(),iterations:fh(),fill:ch(),direction:mu()})}),W!==void 0&&fo(W)},yn=(W=!1,ue=!0,be)=>(W&&te.forEach(Qe=>{Qe.update(W,ue,be)}),re&&q1(be),L),qD=(W=!1,ue)=>(te.forEach(be=>{be.progressStart(W,ue)}),X1(),E=W,c||Y1(),yn(!1,!0,ue),L),XD=W=>(te.forEach(ue=>{ue.progressStep(W)}),fo(W),L),QD=(W,ue,be)=>(E=!1,te.forEach(Qe=>{Qe.progressEnd(W,ue,be)}),be!==void 0&&(b=be),A=!1,w=!0,W===0?(T=mu()==="reverse"?"normal":"reverse",T==="reverse"&&(w=!1),re?(yn(),fo(1-ue)):(x=(1-ue)*Nr()*-1,yn(!1,!1))):W===1&&(re?(yn(),fo(ue)):(x=ue*Nr()*-1,yn(!1,!1))),W!==void 0&&!d&&Q1(),L),X1=()=>{c&&(re?G.forEach(W=>{W.pause()}):q.forEach(W=>{Kh(W,"animation-play-state","paused")}),_=!0)},ZD=()=>(te.forEach(W=>{W.pause()}),X1(),L),JD=()=>{gu()},eP=()=>{G.forEach(W=>{W.play()}),(o.length===0||q.length===0)&&gu()},tP=()=>{re&&(fo(0),q1())},Q1=W=>new Promise(ue=>{W!=null&&W.sync&&(y=!0,uh(()=>y=!1,{oneTimeCallback:!0})),c||Y1(),A&&(tP(),A=!1),C&&(v=te.length+1,C=!1);const be=()=>{z1(Qe,U),ue()},Qe=()=>{z1(be,J),ue()};uh(Qe,{oneTimeCallback:!0}),yD(be,{oneTimeCallback:!0}),te.forEach(Ot=>{Ot.play()}),re?eP():JD(),_=!1}),nP=()=>{te.forEach(W=>{W.stop()}),c&&(K1(),c=!1),Nt(),J.forEach(W=>W.c(0,L)),J.length=0},Z1=(W,ue)=>{const be=o[0];return be!==void 0&&(be.offset===void 0||be.offset===0)?be[W]=ue:o=[{offset:0,[W]:ue},...o],L};return L={parentAnimation:d,elements:q,childAnimations:te,id:N,animationFinish:gu,from:Z1,to:(W,ue)=>{const be=o[o.length-1];return be!==void 0&&(be.offset===void 0||be.offset===1)?be[W]=ue:o=[...o,{offset:1,[W]:ue}],L},fromTo:(W,ue,be)=>Z1(W,ue).to(W,be),parent:HD,play:Q1,pause:ZD,stop:nP,destroy:ge,keyframes:jD,addAnimation:GD,addElement:VD,update:yn,fill:MD,direction:OD,iterations:$D,duration:UD,easing:BD,delay:FD,getWebAnimations:de,getKeyframes:ND,getFill:ch,getDirection:mu,getDelay:hh,getIterations:fh,getEasing:dh,getDuration:Nr,afterAddRead:AD,afterAddWrite:CD,afterClearStyles:kD,afterStyles:PD,afterRemoveClass:DD,afterAddClass:RD,beforeAddRead:xD,beforeAddWrite:SD,beforeClearStyles:_D,beforeStyles:ID,beforeRemoveClass:LD,beforeAddClass:wD,onFinish:uh,isRunning:Qi,progressStart:qD,progressStep:XD,progressEnd:QD}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class k3{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const i=this.m.get(e);return i!==void 0?i:n}getBoolean(e,n=!1){const i=this.m.get(e);return i===void 0?n:typeof i=="string"?i==="true":!!i}getNumber(e,n){const i=parseFloat(this.m.get(e));return isNaN(i)?n!==void 0?n:NaN:i}set(e,n){this.m.set(e,n)}}const $i=new k3;let N3;const Ha=t=>t&&s3(t)||N3;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O3=(t,...e)=>console.warn(`[Ionic Warning]: ${t}`,...e);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const nL=(t,e)=>{t.componentOnReady?t.componentOnReady().then(n=>e(n)):iL(()=>e(t))},M3=t=>t.componentOnReady!==void 0,F3=(t,e=[])=>{const n={};return e.forEach(i=>{t.hasAttribute(i)&&(t.getAttribute(i)!==null&&(n[i]=t.getAttribute(i)),t.removeAttribute(i))}),n},iL=t=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(t):typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t),cQ=(t,e,n)=>Math.max(t,Math.min(e,n)),Wt=(t,e)=>{if(!t){const n="ASSERT: "+e;console.error(n);debugger;throw new Error(n)}},sL=(t,e)=>{if(t??(t={}),e??(e={}),t===e)return!0;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!(i in e)||t[i]!==e[i])return!1;return!0},B3="ionViewWillEnter",U3="ionViewDidEnter",rL="ionViewWillLeave",aL="ionViewDidLeave",Yh="ionViewWillUnload",xo=t=>{t.tabIndex=-1,t.focus()},Bu=t=>t.offsetParent!==null,$3=()=>({saveViewFocus:n=>{if($i.get("focusManagerPriority",!1)){const s=document.activeElement;s!==null&&(n!=null&&n.contains(s))&&s.setAttribute(Fy,"true")}},setViewFocus:n=>{const i=$i.get("focusManagerPriority",!1);if(Array.isArray(i)&&!n.contains(document.activeElement)){const s=n.querySelector(`[${Fy}]`);if(s&&Bu(s)){xo(s);return}for(const r of i)switch(r){case"content":const a=n.querySelector('main, [role="main"]');if(a&&Bu(a)){xo(a);return}break;case"heading":const o=n.querySelector('h1, [role="heading"][aria-level="1"]');if(o&&Bu(o)){xo(o);return}break;case"banner":const l=n.querySelector('header, [role="banner"]');if(l&&Bu(l)){xo(l);return}break;default:O3(`Unrecognized focus manager priority value ${r}`);break}xo(n)}}}),Fy="ion-last-focus",H3=()=>eo(()=>import("./ios.transition-CvZqWEQG.js"),[]),V3=()=>eo(()=>import("./md.transition-utnAkJBb.js"),[]),oL=$3(),lL=t=>new Promise((e,n)=>{TE(()=>{G3(t),j3(t).then(i=>{i.animation&&i.animation.destroy(),By(t),e(i)},i=>{By(t),n(i)})})}),G3=t=>{const e=t.enteringEl,n=t.leavingEl;oL.saveViewFocus(n),X3(e,n,t.direction),t.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),dm(e,!1),e.style.setProperty("pointer-events","none"),n&&(dm(n,!1),n.style.setProperty("pointer-events","none"))},j3=async t=>{const e=await W3(t);return e&&MO.isBrowser?z3(e,t):K3(t)},By=t=>{const e=t.enteringEl,n=t.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events")),oL.setViewFocus(e)},W3=async t=>!t.leavingEl||!t.animated||t.duration===0?void 0:t.animationBuilder?t.animationBuilder:t.mode==="ios"?(await H3()).iosTransitionAnimation:(await V3()).mdTransitionAnimation,z3=async(t,e)=>{await uL(e,!0);const n=t(e.baseEl,e);cL(e.enteringEl,e.leavingEl);const i=await q3(n,e);return e.progressCallback&&e.progressCallback(void 0),i&&dL(e.enteringEl,e.leavingEl),{hasCompleted:i,animation:n}},K3=async t=>{const e=t.enteringEl,n=t.leavingEl,i=$i.get("focusManagerPriority",!1);return await uL(t,i),cL(e,n),dL(e,n),{hasCompleted:!0}},uL=async(t,e)=>{(t.deepWait!==void 0?t.deepWait:e)&&await Promise.all([cm(t.enteringEl),cm(t.leavingEl)]),await Y3(t.viewIsReady,t.enteringEl)},Y3=async(t,e)=>{t&&await t(e)},q3=(t,e)=>{const n=e.progressCallback,i=new Promise(s=>{t.onFinish(r=>s(r===1))});return n?(t.progressStart(!0),n(t)):t.play(),i},cL=(t,e)=>{Pi(e,rL),Pi(t,B3)},dL=(t,e)=>{Pi(t,U3),Pi(e,aL)},Pi=(t,e)=>{if(t){const n=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(n)}},cm=async t=>{const e=t;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(i=>iL(i));return}await Promise.all(Array.from(e.children).map(cm))}},dm=(t,e)=>{e?(t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden")):(t.hidden=!1,t.removeAttribute("aria-hidden"),t.classList.remove("ion-page-hidden"))},X3=(t,e,n)=>{t!==void 0&&(t.style.zIndex=n==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},dQ=t=>{if(t.classList.contains("ion-page"))return t;const e=t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||t};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const bd=(t,e,n,i,s)=>Z3(t[1],e[1],n[1],i[1],s).map(r=>Q3(t[0],e[0],n[0],i[0],r)),Q3=(t,e,n,i,s)=>{const r=3*e*Math.pow(s-1,2),a=-3*n*s+3*n+i*s,o=t*Math.pow(s-1,3);return s*(r+s*a)-o},Z3=(t,e,n,i,s)=>(t-=s,e-=s,n-=s,i-=s,eM(i-3*n+3*e-t,3*n-6*e+3*t,3*e-3*t,t).filter(a=>a>=0&&a<=1)),J3=(t,e,n)=>{const i=e*e-4*t*n;return i<0?[]:[(-e+Math.sqrt(i))/(2*t),(-e-Math.sqrt(i))/(2*t)]},eM=(t,e,n,i)=>{if(t===0)return J3(e,n,i);e/=t,n/=t,i/=t;const s=(3*n-e*e)/3,r=(2*e*e*e-9*e*n+27*i)/27;if(s===0)return[Math.pow(-r,1/3)];if(r===0)return[Math.sqrt(-s),-Math.sqrt(-s)];const a=Math.pow(r/2,2)+Math.pow(s/3,3);if(a===0)return[Math.pow(r/2,1/2)-e/3];if(a>0)return[Math.pow(-(r/2)+Math.sqrt(a),1/3)-Math.pow(r/2+Math.sqrt(a),1/3)-e/3];const o=Math.sqrt(Math.pow(-(s/3),3)),l=Math.acos(-(r/(2*Math.sqrt(Math.pow(-(s/3),3))))),u=2*Math.pow(o,1/3);return[u*Math.cos(l/3)-e/3,u*Math.cos((l+2*Math.PI)/3)-e/3,u*Math.cos((l+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tM=(t,e)=>typeof t=="string"&&t.length>0?Object.assign({"ion-color":!0,[`ion-color-${t}`]:!0},e):e;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fL=async(t,e,n,i,s,r)=>{var a;if(t)return t.attachViewToDom(e,n,s,i);if(typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const o=typeof n=="string"?(a=e.ownerDocument)===null||a===void 0?void 0:a.createElement(n):n;return i&&i.forEach(l=>o.classList.add(l)),s&&Object.assign(o,s),e.appendChild(o),await new Promise(l=>nL(o,l)),o},nM=(t,e)=>{if(e){if(t){const n=e.parentElement;return t.removeViewFromDom(n,e)}e.remove()}return Promise.resolve()};function sn(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const iM=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",sM=iM,rM=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,n){return new Promise(i=>{jO(()=>{const s=this.el.getBoundingClientRect(),r=s.width,a=s.height,o=Math.sqrt(r*r+a*a),l=Math.max(a,r),u=this.unbounded?l:o+oM,c=Math.floor(l*lM),d=u/c;let f=e-s.left,h=n-s.top;this.unbounded&&(f=r*.5,h=a*.5);const p=f-c*.5,g=h-c*.5,v=r*.5-f,E=a*.5-h;TE(()=>{const y=document.createElement("div");y.classList.add("ripple-effect");const T=y.style;T.top=g+"px",T.left=p+"px",T.width=T.height=c+"px",T.setProperty("--final-scale",`${d}`),T.setProperty("--translate-end",`${v}px, ${E}px`),(this.el.shadowRoot||this.el).appendChild(y),setTimeout(()=>{i(()=>{aM(y)})},325)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=Ha(this);return Ut(tu,{key:"2302f087ab1c6755355736e4ca77309c5fdcf185",role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return sM}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),aM=t=>{t.classList.add("fade-out"),setTimeout(()=>{t.remove()},200)},oM=10,lM=.5;function uM(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,rM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Uu=typeof window<"u"?window:void 0;Uu&&(Uu.CSS&&Uu.CSS.supports&&Uu.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cM=()=>{if(wt!==void 0)return wt.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dM=()=>{let t;return{lock:async()=>{const n=t;let i;return t=new Promise(s=>i=s),n!==void 0&&await n,i}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var fm;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(fm||(fm={}));var hm;(function(t){t.Body="body",t.Ionic="ionic",t.Native="native",t.None="none"})(hm||(hm={}));const fM={getEngine(){const t=cM();if(t!=null&&t.isPluginAvailable("Keyboard"))return t.Plugins.Keyboard},getResizeMode(){const t=this.getEngine();return t!=null&&t.getResizeMode?t.getResizeMode().catch(e=>{if(e.code!==fm.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const hL=t=>{if(Wh===void 0||t===hm.None||t===void 0)return null;const e=Wh.querySelector("ion-app");return e??Wh.body},Uy=t=>{const e=hL(t);return e===null?0:e.clientHeight},hM=async t=>{let e,n,i,s;const r=async()=>{const c=await fM.getResizeMode(),d=c===void 0?void 0:c.mode;e=()=>{s===void 0&&(s=Uy(d)),i=!0,a(i,d)},n=()=>{i=!1,a(i,d)},wt==null||wt.addEventListener("keyboardWillShow",e),wt==null||wt.addEventListener("keyboardWillHide",n)},a=(c,d)=>{t&&t(c,o(d))},o=c=>{if(s===0||s===Uy(c))return;const d=hL(c);if(d!==null)return new Promise(f=>{const h=()=>{d.clientHeight===s&&(p.disconnect(),f())},p=new ResizeObserver(h);p.observe(d)})},l=()=>{wt==null||wt.removeEventListener("keyboardWillShow",e),wt==null||wt.removeEventListener("keyboardWillHide",n),e=n=void 0},u=()=>i;return await r(),{init:r,destroy:l,isKeyboardVisible:u}},pL=1,mL=2,xd=3;class pm{constructor(e,n){this.component=e,this.params=n,this.state=pL}async init(e){if(this.state=mL,!this.element){const n=this.component;this.element=await fL(this.delegate,e,n,["ion-page","ion-page-invisible"],this.params)}}_destroy(){Wt(this.state!==xd,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=xd}}const $y=(t,e,n)=>!t||t.component!==e?!1:sL(t.params,n),Hy=(t,e)=>t?t instanceof pm?t:new pm(t,e):null,pM=t=>t.map(e=>e instanceof pm?e:"component"in e?Hy(e.component,e.componentProps===null?void 0:e.componentProps):Hy(e,void 0)).filter(e=>e!==null),mM=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",gM=mM,EM=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ui(this,"ionNavWillLoad",7),this.ionNavWillChange=Ui(this,"ionNavWillChange",3),this.ionNavDidChange=Ui(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=Ha(this);this.swipeGesture=$i.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await eo(()=>import("./swipe-back-DurqCtDw.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)Pi(e.element,Yh),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,n,i,s){return this.insert(-1,e,n,i,s)}insert(e,n,i,s,r){return this.insertPages(e,[{component:n,componentProps:i}],s,r)}insertPages(e,n,i,s){return this.queueTrns({insertStart:e,insertViews:n,opts:i},s)}pop(e,n){return this.removeIndex(-1,1,e,n)}popTo(e,n,i){const s={removeStart:-1,removeCount:-1,opts:n};return typeof e=="object"&&e.component?(s.removeView=e,s.removeStart=1):typeof e=="number"&&(s.removeStart=e+1),this.queueTrns(s,i)}popToRoot(e,n){return this.removeIndex(1,-1,e,n)}removeIndex(e,n=1,i,s){return this.queueTrns({removeStart:e,removeCount:n,opts:i},s)}setRoot(e,n,i,s){return this.setPages([{component:e,componentProps:n}],i,s)}setPages(e,n,i){return n??(n={}),n.animated!==!0&&(n.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:n},i)}setRouteId(e,n,i,s){const r=this.getActiveSync();if($y(r,e,n))return Promise.resolve({changed:!1,element:r.element});let a;const o=new Promise(c=>a=c);let l;const u={updateURL:!1,viewIsReady:c=>{let d;const f=new Promise(h=>d=h);return a({changed:!0,element:c,markVisible:async()=>{d(),await l}}),f}};if(i==="root")l=this.setRoot(e,n,u);else{const c=this.views.find(d=>$y(d,e,n));c?l=this.popTo(c,Object.assign(Object.assign({},u),{direction:"back",animationBuilder:s})):i==="forward"?l=this.push(e,n,Object.assign(Object.assign({},u),{animationBuilder:s})):i==="back"&&(l=this.setRoot(e,n,Object.assign(Object.assign({},u),{direction:"back",animated:!0,animationBuilder:s})))}return o}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}async getLength(){return Promise.resolve(this.views.length)}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const n=this.views,i=n.indexOf(e);return i>0?n[i-1]:void 0}async queueTrns(e,n){var i,s;if(this.isTransitioning&&(!((i=e.opts)===null||i===void 0)&&i.skipIfBusy))return!1;const r=new Promise((a,o)=>{e.resolve=a,e.reject=o});if(e.done=n,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const a=document.querySelector("ion-router");if(a){const o=await a.canTransition();if(o===!1)return!1;if(typeof o=="string")return a.push(o,e.opts.direction||"back"),!1}}return((s=e.insertViews)===null||s===void 0?void 0:s.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}if(n.done&&n.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),n.resolve(e.hasCompleted),n.opts.updateURL!==!1&&this.useRouter){const i=document.querySelector("ion-router");if(i){const s=e.direction==="back"?"back":"forward";i.navChanged(s)}}}failed(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}this.transInstr.length=0,this.fireError(e,n)}fireError(e,n){n.done&&n.done(!1,!1,e),n.reject&&!this.destroyed?n.reject(e):n.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const n=this.getActiveSync(),i=this.getEnteringView(e,n);if(!n&&!i)throw new Error("no views in the stack to be removed");i&&i.state===pL&&await i.init(this.el),this.postViewInit(i,n,e);const s=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&i!==n;s&&e.opts&&n&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(i==null?void 0:i.animationBuilder)),n.animationBuilder=e.opts.animationBuilder);let r;s?r=await this.transition(i,n,e):r={hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(n){this.failed(n,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var n,i,s;const r=this.views.length;if((n=e.opts)!==null&&n!==void 0||(e.opts={}),(i=(s=e.opts).delegate)!==null&&i!==void 0||(s.delegate=this.delegate),e.removeView!==void 0){Wt(e.removeStart!==void 0,"removeView needs removeStart"),Wt(e.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(e.removeView);if(l<0)throw new Error("removeView was not found");e.removeStart+=l}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const a=e.insertViews;if(!a)return;Wt(a.length>0,"length can not be zero");const o=pM(a);if(o.length===0)throw new Error("invalid views to insert");for(const l of o){l.delegate=e.opts.delegate;const u=l.nav;if(u&&u!==this)throw new Error("inserted view was already inserted");if(l.state===xd)throw new Error("inserted view was already destroyed")}e.insertViews=o}getEnteringView(e,n){const i=e.insertViews;if(i!==void 0)return i[i.length-1];const s=e.removeStart;if(s!==void 0){const r=this.views,a=s+e.removeCount;for(let o=r.length-1;o>=0;o--){const l=r[o];if((o<s||o>=a)&&l!==n)return l}}}postViewInit(e,n,i){var s,r,a;Wt(n||e,"Both leavingView and enteringView are null"),Wt(i.resolve,"resolve must be valid"),Wt(i.reject,"reject must be valid");const o=i.opts,{insertViews:l,removeStart:u,removeCount:c}=i;let d;if(u!==void 0&&c!==void 0){Wt(u>=0,"removeStart can not be negative"),Wt(c>=0,"removeCount can not be negative"),d=[];for(let h=u;h<u+c;h++){const p=this.views[h];p!==void 0&&p!==e&&p!==n&&d.push(p)}(s=o.direction)!==null&&s!==void 0||(o.direction="back")}const f=this.views.length+((r=l==null?void 0:l.length)!==null&&r!==void 0?r:0)-(c??0);if(Wt(f>=0,"final balance can not be negative"),f===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let h=i.insertStart;for(const p of l)this.insertViewAt(p,h),h++;i.enteringRequiresTransition&&((a=o.direction)!==null&&a!==void 0||(o.direction="forward"))}if(d&&d.length>0){for(const h of d)Pi(h.element,rL),Pi(h.element,aL),Pi(h.element,Yh);for(const h of d)this.destroyView(h)}}async transition(e,n,i){const s=i.opts,r=s.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.sbAni=d}:void 0,a=Ha(this),o=e.element,l=n&&n.element,u=Object.assign(Object.assign({mode:a,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&$i.getBoolean("animated",!0),enteringEl:o,leavingEl:l},s),{animationBuilder:s.animationBuilder||this.animation||$i.get("navAnimation")}),{hasCompleted:c}=await lL(u);return this.transitionFinish(c,e,n,s)}transitionFinish(e,n,i,s){const r=e?n:i;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:n,leavingView:i,direction:s.direction}}insertViewAt(e,n){const i=this.views,s=i.indexOf(e);s>-1?(Wt(e.nav===this,"view is not part of the nav"),i.splice(s,1),i.splice(n,0,e)):(Wt(!e.nav,"nav is used"),e.nav=this,i.splice(n,0,e))}removeView(e){Wt(e.state===mL||e.state===xd,"view state should be loaded or destroyed");const n=this.views,i=n.indexOf(e);Wt(i>-1,"view must be part of the stack"),i>=0&&n.splice(i,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const n=this.views,i=n.indexOf(e);for(let s=n.length-1;s>=0;s--){const r=n[s],a=r.element;a&&(s>i?(Pi(a,Yh),this.destroyView(r)):s<i&&dm(a,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,n,i){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let s=e?-.001:.001;e?s+=bd([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=bd([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.sbAni.progressEnd(e?1:0,s,i)}else this.gestureOrAnimationInProgress=!1}render(){return Ut("slot",{key:"e9d99a8a0b84f02f9964d8143cd5e647e43334f9"})}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return gM}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64],getLength:[64]},void 0,{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}]);function TM(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,EM);break}})}const yM=TM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Vy;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Vy||(Vy={}));const vM=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",bM=vM,xM=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ui(this,"ionNavWillLoad",7),this.ionNavWillChange=Ui(this,"ionNavWillChange",3),this.ionNavDidChange=Ui(this,"ionNavDidChange",3),this.lockController=dM(),this.gestureOrAnimationInProgress=!1,this.mode=Ha(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await eo(()=>import("./swipe-back-DurqCtDw.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),n=>{var i;return(i=this.ani)===null||i===void 0?void 0:i.progressStep(n)},(n,i,s)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let r=n?-.001:.001;n?r+=bd([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=bd([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.ani.progressEnd(n?1:0,r,s)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,n,i){const s=await this.lockController.lock();let r=!1;try{r=await this.transition(e,n,i)}catch(a){console.error(a)}return s(),r}async setRouteId(e,n,i,s){return{changed:await this.setRoot(e,n,{duration:i==="root"?0:void 0,direction:i==="back"?"back":"forward",animationBuilder:s}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,n,i){if(this.activeComponent===e&&sL(n,this.activeParams))return!1;const s=this.activeEl,r=await fL(this.delegate,this.el,e,["ion-page","ion-page-invisible"],n);return this.activeComponent=e,this.activeEl=r,this.activeParams=n,await this.commit(r,s,i),await nM(this.delegate,s),!0}async transition(e,n,i={}){if(n===e)return!1;this.ionNavWillChange.emit();const{el:s,mode:r}=this,a=this.animated&&$i.getBoolean("animated",!0),o=i.animationBuilder||this.animation||$i.get("navAnimation");return await lL(Object.assign(Object.assign({mode:r,animated:a,enteringEl:e,leavingEl:n,baseEl:s,deepWait:M3(s),progressCallback:i.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},i),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}render(){return Ut("slot",{key:"8279a453c66a766e6e383ff59842b4ae070c13a9"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return bM}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]);function SM(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,xM);break}})}const AM=SM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const CM=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",wM=CM,LM=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.07)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, var(--ion-text-color-step-350, #595959)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:56px}",IM=LM,_M=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Ui(this,"ionTabBarChanged",7),this.ionTabBarLoaded=Ui(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await hM(async(e,n)=>{e===!1&&n!==void 0&&await n,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:e,translucent:n,keyboardVisible:i}=this,s=Ha(this),r=i&&this.el.getAttribute("slot")!=="top";return Ut(tu,{key:"3a8595dd83f89e8319471a7a7f9f64b2565b384c",role:"tablist","aria-hidden":r?"true":null,class:tM(e,{[s]:!0,"tab-bar-translucent":n,"tab-bar-hidden":r})},Ut("slot",{key:"8b65eceb922f6abfa15f41046261586fb94b981f"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:wM,md:IM}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]);function RM(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,_M);break}})}const DM=RM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const PM=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:24px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){font-size:30px}',kM=PM,NM=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',OM=NM,MM=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Ui(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const n=e.target,i=this.el.parentElement;(e.composedPath().includes(i)||n!=null&&n.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},F3(this.el,["aria-label"])),this.layout===void 0&&(this.layout=$i.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:n,hasLabel:i,href:s,rel:r,target:a,layout:o,selected:l,tab:u,inheritedAttributes:c}=this,d=Ha(this),f={download:this.download,href:s,rel:r,target:a};return Ut(tu,{key:"4b528ce31f67e10ad849e0c99bd034bba675c227",onClick:this.onClick,onKeyup:this.onKeyUp,id:u!==void 0?`tab-button-${u}`:null,class:{[d]:!0,"tab-selected":l,"tab-disabled":e,"tab-has-label":i,"tab-has-icon":n,"tab-has-label-only":i&&!n,"tab-has-icon-only":n&&!i,[`tab-layout-${o}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},Ut("a",Object.assign({key:"0da8784b1b243ffaaaf04dd7adb55d6881ed0c08"},f,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},c),Ut("span",{key:"2c628e8f1ebc129f84876c01530468cb97d8bf3a",class:"button-inner"},Ut("slot",{key:"8052a171d197a7de1a7eb12b091c35f73ae1ee21"})),d==="md"&&Ut("ion-ripple-effect",{key:"4186bdb5ed045ec16f495a14fa30ac864c576227",type:"unbounded"})))}get el(){return this}static get style(){return{ios:kM,md:OM}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function FM(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,MM);break;case"ion-ripple-effect":customElements.get(e)||uM();break}})}const BM=FM;let qh;const UM=()=>{if(typeof window>"u")return new Map;if(!qh){const t=window;t.Ionicons=t.Ionicons||{},qh=t.Ionicons.map=t.Ionicons.map||new Map}return qh},$M=t=>{let e=Xh(t.src);return e||(e=gL(t.name,t.icon,t.mode,t.ios,t.md),e?HM(e,t):t.icon&&(e=Xh(t.icon),e||(e=Xh(t.icon[t.mode]),e))?e:null)},HM=(t,e)=>{const n=UM().get(t);if(n)return n;try{return WO(`svg/${t}.svg`)}catch{console.warn(`[Ionicons Warning]: Could not load icon with name "${t}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,e)}},gL=(t,e,n,i,s)=>(n=(n&&$u(n))==="ios"?"ios":"md",i&&n==="ios"?t=$u(i):s&&n==="md"?t=$u(s):(!t&&e&&!EL(e)&&(t=e),Sd(t)&&(t=$u(t))),!Sd(t)||t.trim()===""||t.replace(/[a-z]|-|\d/gi,"")!==""?null:t),Xh=t=>Sd(t)&&(t=t.trim(),EL(t))?t:null,EL=t=>t.length>0&&/(\/|\.)/.test(t),Sd=t=>typeof t=="string",$u=t=>t.toLowerCase(),VM=(t,e=[])=>{const n={};return e.forEach(i=>{t.hasAttribute(i)&&(t.getAttribute(i)!==null&&(n[i]=t.getAttribute(i)),t.removeAttribute(i))}),n},GM=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",jM=t=>{const e=document.createElement("div");e.innerHTML=t;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const n=e.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const i=n.getAttribute("class")||"";if(n.setAttribute("class",(i+" s-ion-icon").trim()),TL(n))return e.innerHTML}return""},TL=t=>{if(t.nodeType===1){if(t.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;if(Sd(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<t.childNodes.length;e++)if(!TL(t.childNodes[e]))return!1}return!0},WM=t=>t.startsWith("data:image/svg+xml"),zM=t=>t.indexOf(";utf8,")!==-1,nr=new Map,Gy=new Map;let Qh;const KM=(t,e)=>{let n=Gy.get(t);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(WM(t)&&zM(t)){Qh||(Qh=new DOMParser);const s=Qh.parseFromString(t,"text/html").querySelector("svg");return s&&nr.set(t,s.outerHTML),Promise.resolve()}else n=fetch(t).then(i=>{if(i.ok)return i.text().then(s=>{s&&e!==!1&&(s=jM(s)),nr.set(t,s||"")});nr.set(t,"")}),Gy.set(t,n);else return nr.set(t,""),Promise.resolve();return n},YM=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",qM=io(class extends no{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=XM(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=VM(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,n,i){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const s=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(s.disconnect(),this.io=void 0,i())},{rootMargin:n});s.observe(e)}else i()}loadIcon(){if(this.isVisible){const e=$M(this);e&&(nr.has(e)?this.svgContent=nr.get(e):KM(e,this.sanitize).then(()=>this.svgContent=nr.get(e)),this.didLoadIcon=!0)}this.iconName=gL(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:n,inheritedAttributes:i,el:s}=this,r=this.mode||"md",a=n?(n.includes("arrow")||n.includes("chevron"))&&e!==!1:!1,o=e||a;return Ut(tu,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},QM(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":o,"icon-rtl":o&&GM(s)})},i),this.svgContent?Ut("div",{class:"icon-inner",innerHTML:this.svgContent}):Ut("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return YM}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),XM=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",QM=t=>t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null;function ZM(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,qM);break}})}const JM=ZM,SE=$.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{},cleanupIonViewWillEnter:()=>{},cleanupIonViewDidEnter:()=>{},cleanupIonViewWillLeave:()=>{},cleanupIonViewDidLeave:()=>{}}),e6=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[],this.ionViewWillEnterDestructorCallbacks=[],this.ionViewDidEnterDestructorCallbacks=[],this.ionViewWillLeaveDestructorCallbacks=[],this.ionViewDidLeaveDestructorCallbacks=[]}onIonViewWillEnter(t){if(t.id){const e=this.ionViewWillEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillEnterCallbacks[e]=t:this.ionViewWillEnterCallbacks.push(t)}else this.ionViewWillEnterCallbacks.push(t)}teardownCallback(t,e){const n=e.filter(i=>i.id===t.id);n.length!==0&&(n.forEach(i=>{i&&typeof i.destructor=="function"&&i.destructor()}),e=e.filter(i=>i.id!==t.id))}cleanupIonViewWillEnter(t){this.teardownCallback(t,this.ionViewWillEnterDestructorCallbacks)}cleanupIonViewDidEnter(t){this.teardownCallback(t,this.ionViewDidEnterDestructorCallbacks)}cleanupIonViewWillLeave(t){this.teardownCallback(t,this.ionViewWillLeaveDestructorCallbacks)}cleanupIonViewDidLeave(t){this.teardownCallback(t,this.ionViewDidLeaveDestructorCallbacks)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewWillEnterDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewDidEnter(t){if(t.id){const e=this.ionViewDidEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidEnterCallbacks[e]=t:this.ionViewDidEnterCallbacks.push(t)}else this.ionViewDidEnterCallbacks.push(t)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewDidEnterDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewWillLeave(t){if(t.id){const e=this.ionViewWillLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillLeaveCallbacks[e]=t:this.ionViewWillLeaveCallbacks.push(t)}else this.ionViewWillLeaveCallbacks.push(t)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewWillLeaveDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewDidLeave(t){if(t.id){const e=this.ionViewDidLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidLeaveCallbacks[e]=t:this.ionViewDidLeaveCallbacks.push(t)}else this.ionViewDidLeaveCallbacks.push(t)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewDidLeaveDestructorCallbacks.push({id:t.id,destructor:e})}),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(t){this.componentCanBeDestroyedCallback=t}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Fs=$.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:t=>{typeof window<"u"&&(typeof t=="string"?window.location.pathname=t:window.history.back())},navigate:t=>{typeof window<"u"&&(window.location.pathname=t)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),t6=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),yL=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),n6=(t,e,n={})=>{if(t instanceof Element){const i=i6(t.classList,e,n);i!==""&&(t.className=i),Object.keys(e).forEach(s=>{if(!(s==="children"||s==="style"||s==="ref"||s==="class"||s==="className"||s==="forwardedRef"))if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const r=s.substring(2),a=r[0].toLowerCase()+r.substring(1);vL(a)||r6(t,a,e[s])}else t[s]=e[s],typeof e[s]==="string"&&t.setAttribute(yL(s),e[s])})}},i6=(t,e,n)=>{const i=e.className||e.class,s=n.className||n.class,r=Zh(t),a=Zh(i?i.split(" "):[]),o=Zh(s?s.split(" "):[]),l=[];return r.forEach(u=>{a.has(u)?(l.push(u),a.delete(u)):o.has(u)||l.push(u)}),a.forEach(u=>l.push(u)),l.join(" ")},s6=t=>{switch(t){case"doubleclick":return"dblclick"}return t};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const vL=t=>{if(typeof document>"u")return!0;{const e="on"+s6(t);let n=e in document;if(!n){const i=document.createElement("div");i.setAttribute(e,"return;"),n=typeof i[e]=="function"}return n}},r6=(t,e,n)=>{const i=t.__events||(t.__events={}),s=i[e];s&&t.removeEventListener(e,s),t.addEventListener(e,i[e]=function(a){n&&n.call(this,a)})},Zh=t=>{const e=new Map;return t.forEach(n=>e.set(n,n)),e},a6=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},bL=(...t)=>e=>{t.forEach(n=>{a6(n,e)})},o6=(t,e)=>{const n=(i,s)=>$.createElement(t,Object.assign({},i,{forwardedRef:s}));return n.displayName=e,$.forwardRef(n)},nu=(t,e,n,i)=>{i!==void 0&&i();const s=t6(t),r=class extends $.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){n6(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:l,style:u,className:c,ref:d}=a,f=sn(a,["children","forwardedRef","style","className","ref"]);let h=Object.keys(f).reduce((g,v)=>{const E=f[v];if(v.indexOf("on")===0&&v[2]===v[2].toUpperCase()){const y=v.substring(2).toLowerCase();typeof document<"u"&&vL(y)&&(g[v]=E)}else{const y=typeof E;(y==="string"||y==="boolean"||y==="number")&&(g[yL(v)]=E)}return g},{});const p=Object.assign(Object.assign({},h),{ref:bL(l,this.setComponentElRef),style:u});return X.createElement(t,p,o)}static get displayName(){return s}};return o6(r,s)},iu=(t,e)=>{const n=(i,s)=>$.createElement(t,Object.assign({},i,{forwardedRef:s}));return n.displayName=e,$.forwardRef(n)},AE=()=>{if(typeof window<"u"){const t=window.Ionic;if(t&&t.config)return t.config}return null};$.createContext({addOverlay:()=>{},removeOverlay:()=>{}});const l6=nu("ion-tab-button",void 0,void 0,BM),u6=nu("ion-tab-bar",void 0,void 0,DM),mm=nu("ion-router-outlet",void 0,void 0,AM),c6=nu("ion-icon",void 0,void 0,JM),CE=$.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class xL extends $.PureComponent{constructor(e){super(e),this.ionPageElementRef=$.createRef(),this.stableMergedRefs=bL(this.ionPageElementRef,this.props.forwardedRef),this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:n,children:i,routeInfo:s,forwardedRef:r}=e,a=sn(e,["className","children","routeInfo","forwardedRef"]);return $.createElement(SE.Consumer,null,o=>(this.ionLifeCycleContext=o,$.createElement("div",Object.assign({className:n?`${n} ion-page`:"ion-page",ref:this.stableMergedRefs},a),i)))}static get contextType(){return CE}}class d6 extends $.Component{constructor(e){super(e)}render(){const e=this.props,{className:n,children:i,forwardedRef:s}=e,r=sn(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?$.createElement(xL,Object.assign({className:n?`${n}`:"",routeInfo:this.context.routeInfo,forwardedRef:s},r),i):$.createElement("div",Object.assign({className:n?`ion-page ${n}`:"ion-page",ref:s},r),i)}static get displayName(){return"IonPage"}static get contextType(){return Fs}}iu(d6,"IonPage");const jy={main:0},wl=(t="main")=>{var e;const n=((e=jy[t])!==null&&e!==void 0?e:0)+1;return jy[t]=n,n.toString()},f6=(t,e)=>{const n=new WeakMap,i=`react-delegate-${wl()}`;let s=0;return{attachViewToDom:async(o,l,u,c)=>{const d=document.createElement("div");c&&d.classList.add(...c),o.appendChild(d);const f=l(u),h=`${i}-${s++}`,p=gw.createPortal(f,d,h);return n.set(d,p),t(p),Promise.resolve(d)},removeViewFromDom:(o,l)=>{const u=n.get(l);return u&&e(u),l.remove(),Promise.resolve()}}},h6=nu("ion-nav",void 0,void 0,yM),p6=t=>{var{children:e,forwardedRef:n}=t,i=sn(t,["children","forwardedRef"]);const[s,r]=X.useState([]),a=u=>r(c=>[...c,u]),o=u=>r(c=>c.filter(d=>d!==u)),l=X.useMemo(()=>f6(a,o),[]);return $.createElement(h6,Object.assign({delegate:l,ref:n},i),s)};iu(p6,"IonNav");$.createContext({activeTab:void 0,selectTab:()=>!1});const m6=typeof HTMLElement<"u"?HTMLElement:class{};class g6 extends $.Component{constructor(e){super(e),this.outletIsReady=!1,this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||nL(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:n,children:i,routeInfo:s}=e,r=sn(e,["StackManager","children","routeInfo"]);return $.createElement(SE.Consumer,null,a=>(this.ionLifeCycleContext=a,$.createElement(n,{routeInfo:s},$.createElement(mm,Object.assign({setRef:o=>this.ionRouterOutlet=o},r),i))))}static get contextType(){return CE}}class E6 extends $.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),n=this.props,{children:i,forwardedRef:s}=n,r=sn(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?r.ionPage?$.createElement(g6,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},r),i):$.createElement(e,{routeInfo:this.context.routeInfo},$.createElement(mm,Object.assign({},r,{forwardedRef:s}),i)):$.createElement(mm,Object.assign({ref:s},this.props),this.props.children)}static get contextType(){return Fs}}const T6=iu(E6,"IonRouterOutlet"),Jh=class extends $.Component{constructor(t){super(t),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const t=this.props,e=sn(t,["onClick"]);return $.createElement(l6,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}};class y6 extends $.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=i=>{};const n={};$.Children.forEach(e.children,i=>{var s,r,a,o;i!=null&&typeof i=="object"&&i.props&&(i.type===Jh||i.type.isTabButton)&&(n[i.props.tab]={originalHref:i.props.href,currentHref:i.props.href,originalRouteOptions:i.props.href===((s=e.routeInfo)===null||s===void 0?void 0:s.pathname)?(r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions:void 0,currentRouteOptions:i.props.href===((a=e.routeInfo)===null||a===void 0?void 0:a.pathname)?(o=e.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0})}),this.state={tabs:n},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,i=Object.keys(e).find(s=>{const r=e[s].originalHref;return this.props.routeInfo.pathname.startsWith(r)});i&&this.setState({activeTab:i})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const n=this.state.tabs[e];return n?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:n.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,n){var i,s,r;const a=Object.assign({},n.tabs),l=Object.keys(n.tabs).find(c=>{const d=n.tabs[c].originalHref;return e.routeInfo.pathname.startsWith(d)});$.Children.forEach(e.children,c=>{if(c!=null&&typeof c=="object"&&c.props&&(c.type===Jh||c.type.isTabButton)){const d=a[c.props.tab];(!d||d.originalHref!==c.props.href)&&(a[c.props.tab]={originalHref:c.props.href,currentHref:c.props.href,originalRouteOptions:c.props.routeOptions,currentRouteOptions:c.props.routeOptions})}});const{activeTab:u}=n;if(l&&u){const c=n.tabs[u].currentHref,d=n.tabs[u].currentRouteOptions;(l!==u||c!==((i=e.routeInfo)===null||i===void 0?void 0:i.pathname)||d!==((s=e.routeInfo)===null||s===void 0?void 0:s.routeOptions))&&(a[l]={originalHref:a[l].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:a[l].originalRouteOptions,currentRouteOptions:(r=e.routeInfo)===null||r===void 0?void 0:r.routeOptions},e.routeInfo.routeAction==="pop"&&l!==u&&(a[u]={originalHref:a[u].originalHref,currentHref:a[u].originalHref,originalRouteOptions:a[u].originalRouteOptions,currentRouteOptions:a[u].currentRouteOptions}))}return l&&e.onSetCurrentTab(l,e.routeInfo),{activeTab:l,tabs:a}}onTabButtonClick(e,n){const i=this.state.tabs[e.detail.tab],s=i.originalHref,r=e.detail.href,{activeTab:a}=this.state;n&&n(e),a===e.detail.tab?s!==r&&this.context.resetTab(e.detail.tab,s,i.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,r,e.detail.routeOptions))}renderTabButton(e){return n=>{var i,s;if(n!=null&&n.props&&(n.type===Jh||n.type.isTabButton)){const r=n.props.tab===e?(i=this.props.routeInfo)===null||i===void 0?void 0:i.pathname:this.state.tabs[n.props.tab].currentHref,a=n.props.tab===e?(s=this.props.routeInfo)===null||s===void 0?void 0:s.routeOptions:this.state.tabs[n.props.tab].currentRouteOptions;return $.cloneElement(n,{href:r,routeOptions:a,onClick:o=>this.onTabButtonClick(o,n.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return $.createElement(u6,Object.assign({},this.props,{selectedTab:e}),$.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return Fs}}const v6=$.memo(t=>{var{forwardedRef:e}=t,n=sn(t,["forwardedRef"]);const i=X.useContext(Fs);return $.createElement(y6,Object.assign({ref:e},n,{routeInfo:n.routeInfo||i.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:i.setCurrentTab}),n.children)});iu(v6,"IonTabBar");class b6 extends m6{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",b6));class x6 extends $.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,n;const i=this.props,{icon:s,ios:r,md:a,mode:o}=i,l=sn(i,["icon","ios","md","mode"]);let u;const c=AE(),d=o||(c==null?void 0:c.get("mode"));return r||a?d==="ios"?u=(e=r??a)!==null&&e!==void 0?e:s:u=(n=a??r)!==null&&n!==void 0?n:s:u=s,$.createElement(c6,Object.assign({ref:this.props.forwardedRef,icon:u},l),this.props.children)}static get contextType(){return Fs}}iu(x6,"IonIcon");class wE extends $.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!wE?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):$.createElement(e,Object.assign({},this.props))}static get contextType(){return Fs}}class SL extends $.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!SL?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):$.createElement(e,Object.assign({},this.props))}static get contextType(){return Fs}}const AL=$.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});function LE(){const t=X.useContext(AL);return X.useMemo(()=>({back:t.back,push:t.push,goBack:t.back,canGoBack:t.canGoBack,routeInfo:t.routeInfo}),[t.back,t.push,t.canGoBack,t.routeInfo])}class TQ extends $.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=P3(e.id)}setupAnimation(e){const n=this.animation;this.nodes.size>0&&n.addElement(Array.from(this.nodes.values())),Wy(n,e),zy(n,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const n=this.animation,i=this.props;Wy(n,i,e),S6(n,i,e),zy(n,i,e)}render(){const{children:e}=this.props;return $.createElement($.Fragment,null,$.Children.map(e,(n,i)=>$.cloneElement(n,{ref:s=>this.nodes.set(i,s)})))}}const Wy=(t,e={},n={})=>{const i=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in e)e.hasOwnProperty(l)&&!i.includes(l)&&e[l]!==n[l]&&t[l](e[l]);const s=e.from;s&&s!==n.from&&(Array.isArray(s)?s:[s]).forEach(u=>t.from(u.property,u.value));const r=e.to;r&&r!==n.to&&(Array.isArray(r)?r:[r]).forEach(u=>t.to(u.property,u.value));const a=e.fromTo;a&&a!==n.fromTo&&(Array.isArray(a)?a:[a]).forEach(u=>t.fromTo(u.property,u.fromValue,u.toValue));const o=e.onFinish;o&&o!==n.onFinish&&(Array.isArray(o)?o:[o]).forEach(u=>t.onFinish(u.callback,u.opts))},S6=(t,e={},n={})=>{var i,s,r,a,o;const{progressStart:l,progressStep:u,progressEnd:c}=e;l&&(((i=n.progressStart)===null||i===void 0?void 0:i.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((s=n.progressStart)===null||s===void 0?void 0:s.step)!==(l==null?void 0:l.step))&&t.progressStart(l.forceLinearEasing,l.step),u&&((r=n.progressStep)===null||r===void 0?void 0:r.step)!==(u==null?void 0:u.step)&&t.progressStep(u.step),c&&(((a=n.progressEnd)===null||a===void 0?void 0:a.playTo)!==(c==null?void 0:c.playTo)||((o=n.progressEnd)===null||o===void 0?void 0:o.step)!==(c==null?void 0:c.step)||(n==null?void 0:n.dur)!==(c==null?void 0:c.dur))&&t.progressEnd(c.playTo,c.step,c.dur)},zy=(t,e={},n={})=>{!n.play&&e.play&&t.play(),!n.pause&&e.pause&&t.pause(),!n.stop&&e.stop&&t.stop(),!n.destroy&&e.destroy&&t.destroy()},CL=$.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class Ky extends $.Component{constructor(e){super(e),this.ionLifeCycleContext=new e6,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return $.createElement(SE.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class A6{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const n=this._getRouteInfosByKey(e);n&&(n.forEach(i=>{this.locationHistory=this.locationHistory.filter(s=>s.id!==i.id)}),this.tabHistory[e]=[])}update(e){const n=this.locationHistory.findIndex(s=>s.id===e.id);n>-1&&this.locationHistory.splice(n,1,e);const i=this.tabHistory[e.tab||""];if(i){const s=i.findIndex(r=>r.id===e.id);s>-1?i.splice(s,1,e):i.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const n=this._getRouteInfosByKey(e.tab);n&&(this._areRoutesEqual(n[n.length-1],e)&&n.pop(),n.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,n){return!e||!n?!1:e.pathname===n.pathname&&e.search===n.search}_pop(e){const n=this._getRouteInfosByKey(e.tab);n&&(n.pop(),n.pop(),n.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const n=this._getRouteInfosByKey(e.tab);n&&n.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(n=>this.tabHistory[n]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let n;return e&&(n=this.tabHistory[e],n||(n=this.tabHistory[e]=[])),n}getFirstRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[0]}getCurrentRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[n.length-1]}findLastLocation(e){const n=this._getRouteInfosByKey(e.tab);if(n)for(let i=n.length-2;i>=0;i--){const s=n[i];if(s&&s.pathname===e.pushedByRoute)return s}for(let i=this.locationHistory.length-2;i>=0;i--){const s=this.locationHistory[i];if(s&&s.pathname===e.pushedByRoute)return s}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class C6 extends $.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(n,i,s,r,a)=>{this.navigate(n,i,s,a,r)},back:n=>{this.goBack(void 0,n)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,n=>{this.nativeGoBack(),n()})}goBack(e,n){this.props.onNavigateBack(e,n)}nativeGoBack(){this.props.onNativeBack()}navigate(e,n="forward",i="push",s,r,a){this.props.onNavigate(e,i,n,s,r,a)}getPageManager(){return xL}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return $.createElement(Fs.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},$.createElement(AL.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class w6{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:n}=e;this.viewStacks[n]?this.viewStacks[n].push(e):this.viewStacks[n]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:n}=e,i=this.viewStacks[n];if(i){const s=i.find(r=>r.id===e.id);s&&(s.mount=!1,this.viewStacks[n]=i.filter(r=>r.id!==s.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),n=[];return e.forEach(i=>{n.push(...this.viewStacks[i])}),n}}class L6 extends $.PureComponent{render(){return $.createElement(_c,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}const Ll=({pathname:t,componentProps:e})=>{const{exact:n,component:i}=e,s=e.path||e.from,a=kf(t,{exact:n,path:s,component:i});return a||!1};class I6 extends w6{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,n,i,s){const r={id:wl("viewItem"),outletId:e,ionPageElement:s,reactElement:n,mount:!0,ionRoute:!1};return n.type===wE&&(r.ionRoute=!0,r.disableIonPageManagement=n.props.disableIonPageManagement),r.routeData={match:Ll({pathname:i.pathname,componentProps:n.props}),childProps:n.props},r}getChildrenToRender(e,n,i){const s=this.getViewItemsForOutlet(e);return $.Children.forEach(n.props.children,a=>{const o=s.find(l=>Yy(a,l.routeData.childProps.path||l.routeData.childProps.from));o&&(o.reactElement=a)}),s.map(a=>{let o;if(a.ionRoute&&!a.disableIonPageManagement)o=$.createElement(Ky,{key:`view-${a.id}`,mount:a.mount,removeView:()=>this.remove(a)},$.cloneElement(a.reactElement,{computedMatch:a.routeData.match}));else{const l=Yy(a.reactElement,i.pathname);o=$.createElement(Ky,{key:`view-${a.id}`,mount:a.mount,removeView:()=>this.remove(a)},$.cloneElement(a.reactElement,{computedMatch:a.routeData.match})),!l&&a.routeData.match&&(a.routeData.match=void 0,a.mount=!1)}return o})}findViewItemByRouteInfo(e,n,i){const{viewItem:s,match:r}=this.findViewItemByPath(e.pathname,n);return(i===void 0||i===!0)&&s&&r&&(s.routeData.match=r),s}findLeavingViewItemByRouteInfo(e,n,i=!0){const{viewItem:s}=this.findViewItemByPath(e.lastPathname,n,i);return s}findViewItemByPathname(e,n){const{viewItem:i}=this.findViewItemByPath(e,n);return i}findViewItemByPath(e,n,i){let s,r,a;if(n)a=this.getViewItemsForOutlet(n),a.some(o),s||a.some(l);else{const u=this.getAllViewItems();u.some(o),s||u.some(l)}return{viewItem:s,match:r};function o(u){var c,d;if(i&&!u.ionRoute)return!1;if(r=Ll({pathname:e,componentProps:u.routeData.childProps}),r){const f=r.path.includes(":");if(!f||f&&r.url===((d=(c=u.routeData)===null||c===void 0?void 0:c.match)===null||d===void 0?void 0:d.url))return s=u,!0}return!1}function l(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(r={path:e,url:e,isExact:!0,params:{}},s=u,!0):!1}}}function Yy(t,e){return Ll({pathname:e,componentProps:t.props})}function _6(t){let e;if(typeof t=="string"?e=t:e=t.outerHTML,document){const n=document.createElement("div");n.innerHTML=e,n.style.zIndex="";const i=n.getElementsByTagName("ion-back-button");return i[0]&&i[0].remove(),n.firstChild}}const qy=t=>!t.classList.contains("ion-page-invisible")&&!t.classList.contains("ion-page-hidden");class R6 extends $.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=wl("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:n}=this.props.routeInfo,{pathname:i}=e.routeInfo;n!==i?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var n,i;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let s=this.context.findViewItemByRouteInfo(e,this.id),r=this.context.findLeavingViewItemByRouteInfo(e,this.id);!r&&e.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),r&&(e.routeAction==="replace"?r.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((n=e.routeOptions)===null||n===void 0)&&n.unmount&&(r.mount=!1):e.routeDirection!=="none"&&s!==r&&(r.mount=!1));const a=D6((i=this.ionRouterOutlet)===null||i===void 0?void 0:i.props.children,e);if(s?s.reactElement=a:a&&(s=this.context.createViewItem(this.id,a,e),this.context.addViewItem(s)),s&&s.ionPageElement){if(s===r&&s.routeData.match.url!==e.pathname||(!r&&this.props.routeInfo.prevRouteLastPathname&&(r=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),qy(s.ionPageElement)&&r!==void 0&&!qy(r.ionPageElement)))return;this.transitionPage(e,s,r)}else r&&!a&&!s&&r.ionPageElement&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,n){const i=this.context.findViewItemByRouteInfo(n,this.id);if(i){const s=i.ionPageElement;if(i.ionPageElement=e,i.ionRoute=!0,s===e)return}this.handlePageTransition(n)}async setupRouterOutlet(e){const n=()=>{const r=AE();if(!(r&&r.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:o}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},u=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!u&&u.mount&&u.routeData.match.path!==o.pathname},i=async()=>{const{routeInfo:r}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===r.pushedByRoute?this.prevProps.routeInfo:{pathname:r.pushedByRoute||""},o=this.context.findViewItemByRouteInfo(a,this.id,!1),l=this.context.findViewItemByRouteInfo(r,this.id,!1);return o&&l&&await this.transitionPage(r,o,l,"back",!0),Promise.resolve()},s=r=>{if(r)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:a}=this.props,o=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(o,this.id,!1),u=this.context.findViewItemByRouteInfo(a,this.id,!1);if(l!==u&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:c}=l;c.setAttribute("aria-hidden","true"),c.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:n,onStart:i,onEnd:s}}async transitionPage(e,n,i,s,r=!1){const a=async(c,d)=>{const f=this.skipTransition;f?this.skipTransition=!1:(c.classList.add("ion-page"),c.classList.add("ion-page-invisible")),await o.commit(c,d,{duration:f||u===void 0?0:void 0,direction:u,showGoBack:!!e.pushedByRoute,progressAnimation:r,animationBuilder:e.routeAnimation})},o=this.routerOutletElement,l=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,u=s??l;if(n&&n.ionPageElement&&this.routerOutletElement)if(i&&i.ionPageElement&&n===i)if(P6(i.reactElement,e.pathname,!0)){const d=_6(i.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await a(n.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await a(n.ionPageElement,void 0);else await a(n.ionPageElement,i==null?void 0:i.ionPageElement),i&&i.ionPageElement&&!r&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,n=$.Children.only(e);this.ionRouterOutlet=n;const i=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return $.createElement(CE.Provider,{value:this.stackContextValue},$.cloneElement(n,{ref:s=>{n.props.setRef&&n.props.setRef(s),n.props.forwardedRef&&(n.props.forwardedRef.current=s),this.routerOutletElement=s;const{ref:r}=n;typeof r=="function"&&r(s)}},i))}static get contextType(){return CL}}function D6(t,e){let n;return $.Children.forEach(t,i=>{Ll({pathname:e.pathname,componentProps:i.props})&&(n=i)}),n||($.Children.forEach(t,i=>{i.props.path||i.props.from||(n=i)}),n)}function P6(t,e,n){return Ll({pathname:e,componentProps:Object.assign(Object.assign({},t.props),{exact:n})})}class k6 extends $.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new A6,this.viewStack=new I6,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const n={id:wl("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(n),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:n}}handleChangeTab(e,n,i){if(!n)return;const s=this.locationHistory.getCurrentRouteInfoForTab(e),[r,a]=n.split("?");s?(this.incomingRouteParams=Object.assign(Object.assign({},s),{routeAction:"push",routeDirection:"none"}),s.pathname===r?(this.incomingRouteParams.routeOptions=i,this.props.history.push(s.pathname+(s.search||""))):(this.incomingRouteParams.pathname=r,this.incomingRouteParams.search=a?"?"+a:void 0,this.incomingRouteParams.routeOptions=i,this.props.history.push(r+(a?"?"+a:"")))):this.handleNavigate(r,"push","none",void 0,i,e)}handleHistoryChange(e,n){var i,s,r;let a;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?a=this.locationHistory.previous():a=this.locationHistory.current():a=this.locationHistory.current(),a.pathname+a.search!==e.pathname){if(!this.incomingRouteParams){if(n==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),n==="POP"){const u=this.locationHistory.current();if(u&&u.pushedByRoute){const c=this.locationHistory.findLastLocation(u);this.incomingRouteParams=Object.assign(Object.assign({},c),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((i=e.state)===null||i===void 0?void 0:i.direction)||"forward",routeOptions:(s=e.state)===null||s===void 0?void 0:s.routerOptions,tab:this.currentTab})}let l;if(!((r=this.incomingRouteParams)===null||r===void 0)&&r.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:a.pathname}),this.locationHistory.add(l);else{const u=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:wl("routeInfo")},this.incomingRouteParams),{lastPathname:a.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:a.lastPathname}),u)l.tab=a.tab,l.pushedByRoute=a.pathname;else if(l.routeAction==="pop"){const c=this.locationHistory.findLastLocation(l);l.pushedByRoute=c==null?void 0:c.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==a.tab){const c=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=c==null?void 0:c.pushedByRoute}else if(l.routeAction==="replace"){const c=this.locationHistory.current(),d=c==null?void 0:c.pushedByRoute,f=d!==void 0&&d!==l.pathname?d:l.pushedByRoute;l.lastPathname=(c==null?void 0:c.pathname)||l.lastPathname,l.prevRouteLastPathname=c==null?void 0:c.lastPathname,l.pushedByRoute=f,l.routeDirection=l.routeDirection||(c==null?void 0:c.routeDirection),l.routeAnimation=l.routeAnimation||(c==null?void 0:c.routeAnimation)}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,n,i,s,r,a){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:n,routeDirection:i,routeOptions:r,routeAnimation:s,tab:a}),n==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",n){const i=AE();e=e||i&&i.get("backButtonDefaultHref");const s=this.locationHistory.current();if(s&&s.pushedByRoute){const r=this.locationHistory.findLastLocation(s);if(r){const a=n||s.routeAnimation;if(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"pop",routeDirection:"back",routeAnimation:a}),s.lastPathname===s.pushedByRoute||r.pathname===s.pushedByRoute&&s.tab===""&&r.tab===""){const o=this.props.history;(o.goBack||o.back)()}else this.handleNavigate(r.pathname+(r.search||""),"pop","back",a)}else this.handleNavigate(e,"pop","back",n)}else this.handleNavigate(e,"pop","back",n)}handleResetTab(e,n,i){const s=this.locationHistory.getFirstRouteInfoForTab(e);if(s){const r=Object.assign({},s);r.pathname=n,r.routeOptions=i,this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(r.pathname+(r.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const n=Object.assign({},this.locationHistory.current());n.tab!==e&&(n.tab=e,this.locationHistory.update(n))}render(){return $.createElement(CL.Provider,{value:this.routeMangerContextState},$.createElement(C6,{ionRoute:L6,ionRedirect:{},stackManager:R6,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const Nf=RO(k6);Nf.displayName="IonRouter";class N6 extends $.Component{constructor(e){super(e);const{history:n}=e,i=sn(e,["history"]);this.history=n||Cw(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const i=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(i,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,i=sn(e,["children"]);return $.createElement(Ir,Object.assign({history:this.history},i),$.createElement(Nf,{registerHistoryListener:this.registerHistoryListener},n))}}class yQ extends $.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const i=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(i,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,i=sn(e,["children"]);return $.createElement(Ir,Object.assign({},i),$.createElement(Nf,{registerHistoryListener:this.registerHistoryListener},n))}}class vQ extends $.Component{constructor(e){super(e);const{history:n}=e,i=sn(e,["history"]);this.history=n||Lw(i),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const i=e.location||e,s=e.action||n;this.historyListenHandler&&this.historyListenHandler(i,s)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,i=sn(e,["children"]);return $.createElement(Ir,Object.assign({history:this.history},i),$.createElement(Nf,{registerHistoryListener:this.registerHistoryListener},n))}}var Of=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mf=typeof window>"u"||"Deno"in globalThis;function Bn(){}function O6(t,e){return typeof t=="function"?t(e):t}function M6(t){return typeof t=="number"&&t>=0&&t!==1/0}function F6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xy(t,e){return typeof t=="function"?t(e):t}function B6(t,e){return typeof t=="function"?t(e):t}function Qy(t,e){const{type:n="all",exact:i,fetchStatus:s,predicate:r,queryKey:a,stale:o}=t;if(a){if(i){if(e.queryHash!==IE(a,e.options))return!1}else if(!_l(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||s&&s!==e.state.fetchStatus||r&&!r(e))}function Zy(t,e){const{exact:n,status:i,predicate:s,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(n){if(Il(e.options.mutationKey)!==Il(r))return!1}else if(!_l(e.options.mutationKey,r))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function IE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Il)(t)}function Il(t){return JSON.stringify(t,(e,n)=>gm(n)?Object.keys(n).sort().reduce((i,s)=>(i[s]=n[s],i),{}):n)}function _l(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!_l(t[n],e[n])):!1}function wL(t,e){if(t===e)return t;const n=Jy(t)&&Jy(e);if(n||gm(t)&&gm(e)){const i=n?t:Object.keys(t),s=i.length,r=n?e:Object.keys(e),a=r.length,o=n?[]:{};let l=0;for(let u=0;u<a;u++){const c=n?u:r[u];(!n&&i.includes(c)||n)&&t[c]===void 0&&e[c]===void 0?(o[c]=void 0,l++):(o[c]=wL(t[c],e[c]),o[c]===t[c]&&t[c]!==void 0&&l++)}return s===a&&l===s?t:o}return e}function Jy(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gm(t){if(!ev(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ev(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ev(t){return Object.prototype.toString.call(t)==="[object Object]"}function U6(t){return new Promise(e=>{setTimeout(e,t)})}function $6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?wL(t,e):e}function H6(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function V6(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var LL=Symbol();function IL(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===LL?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var rr,ls,Sa,XS,G6=(XS=class extends Of{constructor(){super();_e(this,rr,void 0);_e(this,ls,void 0);_e(this,Sa,void 0);ve(this,Sa,e=>{if(!Mf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,ls)||this.setEventListener(Z(this,Sa))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,ls))==null||e.call(this),ve(this,ls,void 0))}setEventListener(e){var n;ve(this,Sa,e),(n=Z(this,ls))==null||n.call(this),ve(this,ls,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){Z(this,rr)!==e&&(ve(this,rr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,rr)=="boolean"?Z(this,rr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rr=new WeakMap,ls=new WeakMap,Sa=new WeakMap,XS),_L=new G6,Aa,us,Ca,QS,j6=(QS=class extends Of{constructor(){super();_e(this,Aa,!0);_e(this,us,void 0);_e(this,Ca,void 0);ve(this,Ca,e=>{if(!Mf&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){Z(this,us)||this.setEventListener(Z(this,Ca))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,us))==null||e.call(this),ve(this,us,void 0))}setEventListener(e){var n;ve(this,Ca,e),(n=Z(this,us))==null||n.call(this),ve(this,us,e(this.setOnline.bind(this)))}setOnline(e){Z(this,Aa)!==e&&(ve(this,Aa,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return Z(this,Aa)}},Aa=new WeakMap,us=new WeakMap,Ca=new WeakMap,QS),Ad=new j6;function W6(t){return Math.min(1e3*2**t,3e4)}function RL(t){return(t??"online")==="online"?Ad.isOnline():!0}var DL=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function e0(t){return t instanceof DL}function PL(t){let e=!1,n=0,i=!1,s,r,a;const o=new Promise((E,y)=>{r=E,a=y}),l=E=>{var y;i||(p(new DL(E)),(y=t.abort)==null||y.call(t))},u=()=>{e=!0},c=()=>{e=!1},d=()=>_L.isFocused()&&(t.networkMode==="always"||Ad.isOnline())&&t.canRun(),f=()=>RL(t.networkMode)&&t.canRun(),h=E=>{var y;i||(i=!0,(y=t.onSuccess)==null||y.call(t,E),s==null||s(),r(E))},p=E=>{var y;i||(i=!0,(y=t.onError)==null||y.call(t,E),s==null||s(),a(E))},g=()=>new Promise(E=>{var y;s=T=>{(i||d())&&E(T)},(y=t.onPause)==null||y.call(t)}).then(()=>{var E;s=void 0,i||(E=t.onContinue)==null||E.call(t)}),v=()=>{if(i)return;let E;const y=n===0?t.initialPromise:void 0;try{E=y??t.fn()}catch(T){E=Promise.reject(T)}Promise.resolve(E).then(h).catch(T=>{var C;if(i)return;const b=t.retry??(Mf?0:3),x=t.retryDelay??W6,w=typeof x=="function"?x(n,T):x,A=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,T);if(e||!A){p(T);return}n++,(C=t.onFail)==null||C.call(t,n,T),U6(w).then(()=>d()?void 0:g()).then(()=>{e?p(T):v()})})};return{promise:o,cancel:l,continue:()=>(s==null||s(),o),cancelRetry:u,continueRetry:c,canStart:f,start:()=>(f()?v():g().then(v),o)}}function z6(){let t=[],e=0,n=f=>{f()},i=f=>{f()},s=f=>setTimeout(f,0);const r=f=>{s=f},a=f=>{let h;e++;try{h=f()}finally{e--,e||u()}return h},o=f=>{e?t.push(f):s(()=>{n(f)})},l=f=>(...h)=>{o(()=>{f(...h)})},u=()=>{const f=t;t=[],f.length&&s(()=>{i(()=>{f.forEach(h=>{n(h)})})})};return{batch:a,batchCalls:l,schedule:o,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{i=f},setScheduler:r}}var Bt=z6(),ar,ZS,kL=(ZS=class{constructor(){_e(this,ar,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),M6(this.gcTime)&&ve(this,ar,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mf?1/0:5*60*1e3))}clearGcTimeout(){Z(this,ar)&&(clearTimeout(Z(this,ar)),ve(this,ar,void 0))}},ar=new WeakMap,ZS),wa,La,Sn,Ct,jl,or,Un,xi,JS,K6=(JS=class extends kL{constructor(e){super();_e(this,Un);_e(this,wa,void 0);_e(this,La,void 0);_e(this,Sn,void 0);_e(this,Ct,void 0);_e(this,jl,void 0);_e(this,or,void 0);ve(this,or,!1),ve(this,jl,e.defaultOptions),this.setOptions(e.options),this.observers=[],ve(this,Sn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ve(this,wa,q6(this.options)),this.state=e.state??Z(this,wa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Z(this,Ct))==null?void 0:e.promise}setOptions(e){this.options={...Z(this,jl),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,Sn).remove(this)}setData(e,n){const i=$6(this.state.data,e,this.options);return bt(this,Un,xi).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){bt(this,Un,xi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,s;const n=(i=Z(this,Ct))==null?void 0:i.promise;return(s=Z(this,Ct))==null||s.cancel(e),n?n.then(Bn).catch(Bn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,wa))}isActive(){return this.observers.some(e=>B6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!F6(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Z(this,Ct))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Z(this,Ct))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Z(this,Sn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Z(this,Ct)&&(Z(this,or)?Z(this,Ct).cancel({revert:!0}):Z(this,Ct).cancelRetry()),this.scheduleGc()),Z(this,Sn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bt(this,Un,xi).call(this,{type:"invalidate"})}fetch(e,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Ct))return Z(this,Ct).continueRetry(),Z(this,Ct).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ve(this,or,!0),i.signal)})},r=()=>{const d=IL(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return s(f),ve(this,or,!1),this.options.persister?this.options.persister(d,f,this):d(f)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};s(a),(l=this.options.behavior)==null||l.onFetch(a,this),ve(this,La,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&bt(this,Un,xi).call(this,{type:"fetch",meta:(c=a.fetchOptions)==null?void 0:c.meta});const o=d=>{var f,h,p,g;e0(d)&&d.silent||bt(this,Un,xi).call(this,{type:"error",error:d}),e0(d)||((h=(f=Z(this,Sn).config).onError)==null||h.call(f,d,this),(g=(p=Z(this,Sn).config).onSettled)==null||g.call(p,this.state.data,d,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return ve(this,Ct,PL({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:d=>{var f,h,p,g;if(d===void 0){o(new Error(`${this.queryHash} data is undefined`));return}this.setData(d),(h=(f=Z(this,Sn).config).onSuccess)==null||h.call(f,d,this),(g=(p=Z(this,Sn).config).onSettled)==null||g.call(p,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:o,onFail:(d,f)=>{bt(this,Un,xi).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{bt(this,Un,xi).call(this,{type:"pause"})},onContinue:()=>{bt(this,Un,xi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),Z(this,Ct).start()}},wa=new WeakMap,La=new WeakMap,Sn=new WeakMap,Ct=new WeakMap,jl=new WeakMap,or=new WeakMap,Un=new WeakSet,xi=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Y6(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return e0(s)&&s.revert&&Z(this,La)?{...Z(this,La),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Bt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Z(this,Sn).notify({query:this,type:"updated",action:e})})},JS);function Y6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RL(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function q6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ni,eA,X6=(eA=class extends Of{constructor(e={}){super();_e(this,ni,void 0);this.config=e,ve(this,ni,new Map)}build(e,n,i){const s=n.queryKey,r=n.queryHash??IE(s,n);let a=this.get(r);return a||(a=new K6({cache:this,queryKey:s,queryHash:r,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){Z(this,ni).has(e.queryHash)||(Z(this,ni).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,ni).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,ni).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,ni).get(e)}getAll(){return[...Z(this,ni).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>Qy(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>Qy(e,i)):n}notify(e){Bt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ni=new WeakMap,eA),ii,Mt,lr,si,es,tA,Q6=(tA=class extends kL{constructor(e){super();_e(this,si);_e(this,ii,void 0);_e(this,Mt,void 0);_e(this,lr,void 0);this.mutationId=e.mutationId,ve(this,Mt,e.mutationCache),ve(this,ii,[]),this.state=e.state||Z6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Z(this,ii).includes(e)||(Z(this,ii).push(e),this.clearGcTimeout(),Z(this,Mt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ve(this,ii,Z(this,ii).filter(n=>n!==e)),this.scheduleGc(),Z(this,Mt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Z(this,ii).length||(this.state.status==="pending"?this.scheduleGc():Z(this,Mt).remove(this))}continue(){var e;return((e=Z(this,lr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,r,a,o,l,u,c,d,f,h,p,g,v,E,y,T,b,x,w,A;ve(this,lr,PL({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,L)=>{bt(this,si,es).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{bt(this,si,es).call(this,{type:"pause"})},onContinue:()=>{bt(this,si,es).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,Mt).canRun(this)}));const n=this.state.status==="pending",i=!Z(this,lr).canStart();try{if(!n){bt(this,si,es).call(this,{type:"pending",variables:e,isPaused:i}),await((r=(s=Z(this,Mt).config).onMutate)==null?void 0:r.call(s,e,this));const L=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));L!==this.state.context&&bt(this,si,es).call(this,{type:"pending",context:L,variables:e,isPaused:i})}const C=await Z(this,lr).start();return await((u=(l=Z(this,Mt).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((d=(c=this.options).onSuccess)==null?void 0:d.call(c,C,e,this.state.context)),await((h=(f=Z(this,Mt).config).onSettled)==null?void 0:h.call(f,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,e,this.state.context)),bt(this,si,es).call(this,{type:"success",data:C}),C}catch(C){try{throw await((E=(v=Z(this,Mt).config).onError)==null?void 0:E.call(v,C,e,this.state.context,this)),await((T=(y=this.options).onError)==null?void 0:T.call(y,C,e,this.state.context)),await((x=(b=Z(this,Mt).config).onSettled)==null?void 0:x.call(b,void 0,C,this.state.variables,this.state.context,this)),await((A=(w=this.options).onSettled)==null?void 0:A.call(w,void 0,C,e,this.state.context)),C}finally{bt(this,si,es).call(this,{type:"error",error:C})}}finally{Z(this,Mt).runNext(this)}}},ii=new WeakMap,Mt=new WeakMap,lr=new WeakMap,si=new WeakSet,es=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Bt.batch(()=>{Z(this,ii).forEach(i=>{i.onMutationUpdate(e)}),Z(this,Mt).notify({mutation:this,type:"updated",action:e})})},tA);function Z6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rn,Wl,nA,J6=(nA=class extends Of{constructor(e={}){super();_e(this,rn,void 0);_e(this,Wl,void 0);this.config=e,ve(this,rn,new Map),ve(this,Wl,Date.now())}build(e,n,i){const s=new Q6({mutationCache:this,mutationId:++Eu(this,Wl)._,options:e.defaultMutationOptions(n),state:i});return this.add(s),s}add(e){const n=Hu(e),i=Z(this,rn).get(n)??[];i.push(e),Z(this,rn).set(n,i),this.notify({type:"added",mutation:e})}remove(e){var i;const n=Hu(e);if(Z(this,rn).has(n)){const s=(i=Z(this,rn).get(n))==null?void 0:i.filter(r=>r!==e);s&&(s.length===0?Z(this,rn).delete(n):Z(this,rn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var i;const n=(i=Z(this,rn).get(Hu(e)))==null?void 0:i.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var i;const n=(i=Z(this,rn).get(Hu(e)))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Bt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Z(this,rn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(i=>Zy(n,i))}findAll(e={}){return this.getAll().filter(n=>Zy(e,n))}notify(e){Bt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Bt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Bn))))}},rn=new WeakMap,Wl=new WeakMap,nA);function Hu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function e5(t){return{onFetch:(e,n)=>{const i=async()=>{var p,g,v,E,y;const s=e.options,r=(v=(g=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:v.direction,a=((E=e.state.data)==null?void 0:E.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},d=IL(e.options,e.fetchOptions),f=async(T,b,x)=>{if(u)return Promise.reject();if(b==null&&T.pages.length)return Promise.resolve(T);const w={queryKey:e.queryKey,pageParam:b,direction:x?"backward":"forward",meta:e.options.meta};c(w);const A=await d(w),{maxPages:C}=e.options,L=x?V6:H6;return{pages:L(T.pages,A,C),pageParams:L(T.pageParams,b,C)}};let h;if(r&&a.length){const T=r==="backward",b=T?t5:tv,x={pages:a,pageParams:o},w=b(s,x);h=await f(x,w,T)}else{h=await f(l,o[0]??s.initialPageParam);const T=t??a.length;for(let b=1;b<T;b++){const x=tv(s,h);if(x==null)break;h=await f(h,x)}}return h};e.options.persister?e.fetchFn=()=>{var s,r;return(r=(s=e.options).persister)==null?void 0:r.call(s,i,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=i}}}function tv(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function t5(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var qe,cs,ds,Ia,_a,fs,Ra,Da,iA,n5=(iA=class{constructor(t={}){_e(this,qe,void 0);_e(this,cs,void 0);_e(this,ds,void 0);_e(this,Ia,void 0);_e(this,_a,void 0);_e(this,fs,void 0);_e(this,Ra,void 0);_e(this,Da,void 0);ve(this,qe,t.queryCache||new X6),ve(this,cs,t.mutationCache||new J6),ve(this,ds,t.defaultOptions||{}),ve(this,Ia,new Map),ve(this,_a,new Map),ve(this,fs,0)}mount(){Eu(this,fs)._++,Z(this,fs)===1&&(ve(this,Ra,_L.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,qe).onFocus())})),ve(this,Da,Ad.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,qe).onOnline())})))}unmount(){var t,e;Eu(this,fs)._--,Z(this,fs)===0&&((t=Z(this,Ra))==null||t.call(this),ve(this,Ra,void 0),(e=Z(this,Da))==null||e.call(this),ve(this,Da,void 0))}isFetching(t){return Z(this,qe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,cs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,qe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),i=Z(this,qe).build(this,n);return t.revalidateIfStale&&i.isStaleByTime(Xy(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Z(this,qe).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),s=Z(this,qe).get(i.queryHash),r=s==null?void 0:s.state.data,a=O6(e,r);if(a!==void 0)return Z(this,qe).build(this,i).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Bt.batch(()=>Z(this,qe).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,qe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,qe);Bt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,qe),i={type:"active",...t};return Bt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(i,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},i=Bt.batch(()=>Z(this,qe).findAll(t).map(s=>s.cancel(n)));return Promise.all(i).then(Bn).catch(Bn)}invalidateQueries(t={},e={}){return Bt.batch(()=>{if(Z(this,qe).findAll(t).forEach(i=>{i.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},i=Bt.batch(()=>Z(this,qe).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let r=s.fetch(void 0,n);return n.throwOnError||(r=r.catch(Bn)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(i).then(Bn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,qe).build(this,e);return n.isStaleByTime(Xy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Bn).catch(Bn)}fetchInfiniteQuery(t){return t.behavior=e5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Bn).catch(Bn)}resumePausedMutations(){return Ad.isOnline()?Z(this,cs).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,qe)}getMutationCache(){return Z(this,cs)}getDefaultOptions(){return Z(this,ds)}setDefaultOptions(t){ve(this,ds,t)}setQueryDefaults(t,e){Z(this,Ia).set(Il(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,Ia).values()];let n={};return e.forEach(i=>{_l(t,i.queryKey)&&(n={...n,...i.defaultOptions})}),n}setMutationDefaults(t,e){Z(this,_a).set(Il(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,_a).values()];let n={};return e.forEach(i=>{_l(t,i.mutationKey)&&(n={...n,...i.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,ds).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=IE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===LL&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,ds).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,qe).clear(),Z(this,cs).clear()}},qe=new WeakMap,cs=new WeakMap,ds=new WeakMap,Ia=new WeakMap,_a=new WeakMap,fs=new WeakMap,Ra=new WeakMap,Da=new WeakMap,iA);const NL=X.createContext({IsType:"",setIsType:()=>"",IsStatus:{home:!1,search:!1,anime:!1,me:!1},setIsStatus:()=>{},isHidden:!1,setisHidden:()=>!0,isLoading:!1,setLoading:()=>!0});function i5({children:t}){const[e,n]=X.useState(!1),i=Fw(),[s,r]=X.useState(!1),[a,o]=X.useState(""),[l,u]=X.useState({home:!0,search:!1,anime:!1,me:!1});return X.useEffect(()=>{o(i.pathname.split("/")[1])},[i.pathname]),X.useEffect(()=>{switch(a){case"manga":r(!1),u({home:!0,search:!1,anime:!1,me:!1});return;case"watch":r(!1),u({home:!0,search:!1,anime:!1,me:!1});return;case"search":r(!1),u({home:!1,search:!0,anime:!1,me:!1});return;case"anime":r(!1),u({home:!1,search:!1,anime:!0,me:!1});return;case"watchanime":r(!1),u({home:!1,search:!1,anime:!0,me:!1});return;case"me":r(!1),u({home:!1,search:!1,anime:!1,me:!0});return;default:r(!1);return}},[a]),P.jsx(NL.Provider,{value:{IsType:a,IsStatus:l,setIsStatus:u,setIsType:o,isHidden:s,setisHidden:r,isLoading:e,setLoading:n},children:t})}const su=()=>X.useContext(NL),s5=()=>{const{IsStatus:t,setIsType:e,isHidden:n,isLoading:i}=su(),s=LE();return X.useEffect(()=>{console.log("%c NeptuneAnime %c 0.1.2 %c","color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},[]),P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:`${i?"flex":"hidden"} flex-col w-full h-screen bg-base-100 justify-center items-center animate-ease-out`,children:[P.jsx("div",{className:"loader"}),P.jsxs("div",{className:"flex mt-4",children:[P.jsx("span",{className:"jump",children:"L"}),P.jsx("span",{className:"jump delay-1",children:"O"}),P.jsx("span",{className:"jump delay-2",children:"A"}),P.jsx("span",{className:"jump delay-3",children:"D"}),P.jsx("span",{className:"jump delay-4",children:"I"}),P.jsx("span",{className:"jump delay-5",children:"N"}),P.jsx("span",{className:"jump delay-6",children:"G"})]})]}),P.jsx("div",{className:`fixed bottom-0 left-0 z-[99999] w-full h-[60px] bg-base-100 animate-fade-up ${n?"hidden":""}`,children:P.jsxs("div",{className:"grid h-full max-w-lg grid-cols-4 mx-auto font-medium",children:[P.jsxs("button",{type:"button",className:"flex flex-col items-center justify-center px-2 hover:bg-gray-700",onClick:()=>{s.push("/"),e("manga")},children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-6 ${t.home?"text-white":"text-gray-400"}`,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),P.jsx("span",{className:`text-sm ${t.home?"text-white":"text-gray-400"}`,children:"Manga"})]}),P.jsxs("button",{type:"button",className:"inline-flex flex-col items-center justify-center px-2 hover:bg-gray-700",onClick:()=>{s.push("/search"),e("search")},children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-6 ${t.search?"text-white":"text-gray-400"}`,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),P.jsx("span",{className:`text-sm ${t.search?"text-white":"text-gray-400"}`,children:"Tìm kiếm"})]}),P.jsxs("button",{type:"button",className:"inline-flex flex-col items-center justify-center px-2 hover:bg-gray-700",onClick:()=>{s.push("/anime"),e("anime")},children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-6 ${t.anime?"text-white":"text-gray-400"}`,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})}),P.jsx("span",{className:`text-sm ${t.anime?"text-white":"text-gray-400"}`,children:"Anime"})]}),P.jsxs("button",{type:"button",className:"inline-flex flex-col items-center justify-center px-2 hover:bg-gray-700",onClick:()=>{s.push("/me"),e("me")},children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-6 ${t.me?"text-white":"text-gray-400"}`,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),P.jsx("span",{className:`text-sm ${t.me?"text-white":"text-gray-400"}`,children:"Toi"})]})]})})]})},OL=X.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ff=X.createContext({}),_E=X.createContext(null),RE=typeof window<"u",r5=RE?X.useLayoutEffect:X.useEffect,ML=X.createContext({strict:!1}),Bf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),a5="framerAppearId",FL="data-"+Bf(a5),o5={skipAnimations:!1,useManualTiming:!1};function l5(t){let e=new Set,n=new Set,i=!1,s=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){r.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const h=d&&i?e:n;return c&&r.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),r.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[e,n]=[n,e],n.clear(),e.forEach(o),i=!1,s&&(s=!1,l.process(u))}};return l}const Vu=["read","resolveKeyframes","update","preRender","render","postRender"],u5=40;function BL(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Vu.reduce((E,y)=>(E[y]=l5(r),E),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=a,h=()=>{const E=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(E-s.timestamp,u5),1),s.timestamp=E,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),c.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(h))},p=()=>{n=!0,i=!0,s.isProcessing||t(h)};return{schedule:Vu.reduce((E,y)=>{const T=a[y];return E[y]=(b,x=!1,w=!1)=>(n||p(),T.schedule(b,x,w)),E},{}),cancel:E=>{for(let y=0;y<Vu.length;y++)a[Vu[y]].cancel(E)},state:s,steps:a}}const{schedule:DE,cancel:bQ}=BL(queueMicrotask,!1);function sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const UL=X.createContext({});let nv=!1;function c5(t,e,n,i,s){const{visualElement:r}=X.useContext(Ff),a=X.useContext(ML),o=X.useContext(_E),l=X.useContext(OL).reducedMotion,u=X.useRef();i=i||a.renderer,!u.current&&i&&(u.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=X.useContext(UL);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&f5(u.current,n,s,d),X.useInsertionEffect(()=>{c&&c.update(n,o)});const f=X.useRef(!!(n[FL]&&!window.HandoffComplete));return r5(()=>{c&&(c.updateFeatures(),DE.render(c.render),f.current&&c.animationState&&c.animationState.animateChanges())}),X.useEffect(()=>{c&&(!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(f.current=!1,nv||(nv=!0,queueMicrotask(d5))))}),c}function d5(){window.HandoffComplete=!0}function f5(t,e,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$L(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&sa(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}function $L(t){if(t)return t.options.allowProjection!==!1?t.projection:$L(t.parent)}function h5(t,e,n){return X.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):sa(n)&&(n.current=i))},[e])}function Rl(t){return typeof t=="string"||Array.isArray(t)}function Dl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const PE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kE=["initial",...PE];function Uf(t){return Dl(t.animate)||kE.some(e=>Rl(t[e]))}function HL(t){return!!(Uf(t)||t.variants)}function p5(t,e){if(Uf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Rl(n)?n:void 0,animate:Rl(i)?i:void 0}}return t.inherit!==!1?e:{}}function m5(t){const{initial:e,animate:n}=p5(t,X.useContext(Ff));return X.useMemo(()=>({initial:e,animate:n}),[iv(e),iv(n)])}function iv(t){return Array.isArray(t)?t.join(" "):t}const sv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Va={};for(const t in sv)Va[t]={isEnabled:e=>sv[t].some(n=>!!e[n])};function g5(t){for(const e in t)Va[e]={...Va[e],...t[e]}}const VL=X.createContext({}),E5=Symbol.for("motionComponentSymbol"),Rt=t=>t;let Em=Rt;function T5({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:s}){t&&g5(t);function r(o,l){let u;const c={...X.useContext(OL),...o,layoutId:y5(o)},{isStatic:d}=c,f=m5(o),h=i(o,d);if(!d&&RE){v5();const p=b5(c);u=p.MeasureLayout,f.visualElement=c5(s,h,c,e,p.ProjectionNode)}return P.jsxs(Ff.Provider,{value:f,children:[u&&f.visualElement?P.jsx(u,{visualElement:f.visualElement,...c}):null,n(s,o,h5(h,f.visualElement,l),h,d,f.visualElement)]})}const a=X.forwardRef(r);return a[E5]=s,a}function y5({layoutId:t}){const e=X.useContext(VL).id;return e&&t!==void 0?e+"-"+t:t}function v5(t,e){X.useContext(ML).strict}function b5(t){const{drag:e,layout:n}=Va;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function x5(t){function e(i,s={}){return T5(t(i,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const S5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NE(t){return typeof t!="string"||t.includes("-")?!1:!!(S5.indexOf(t)>-1||/[A-Z]/u.test(t))}const Cd={};function A5(t){Object.assign(Cd,t)}const ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bs=new Set(ru);function GL(t,{layout:e,layoutId:n}){return Bs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cd[t]||t==="opacity")}const _t=t=>!!(t&&t.getVelocity),jL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ds=(t,e,n)=>n>e?e:n<t?t:n,so={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ko={...so,transform:t=>Ds(0,1,t)},Gu={...so,default:1},Yo=t=>Math.round(t*1e5)/1e5,OE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,C5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,w5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function au(t){return typeof t=="string"}function L5(t){return t==null}const ou=t=>({test:e=>au(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ts=ou("deg"),fi=ou("%"),me=ou("px"),I5=ou("vh"),_5=ou("vw"),rv={...fi,parse:t=>fi.parse(t)/100,transform:t=>fi.transform(t*100)},av={...so,transform:Math.round},ME={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:Gu,scaleX:Gu,scaleY:Gu,scaleZ:Gu,skew:ts,skewX:ts,skewY:ts,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:Ko,originX:rv,originY:rv,originZ:me,zIndex:av,backgroundPositionX:me,backgroundPositionY:me,fillOpacity:Ko,strokeOpacity:Ko,numOctaves:av},R5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D5=ru.length;function P5(t,e,n){let i="",s=!0;for(let r=0;r<D5;r++){const a=ru[r],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=jL(o,ME[a]);if(!l){s=!1;const c=R5[a]||a;i+=`${c}(${u}) `}n&&(e[a]=u)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}const WL=t=>e=>typeof e=="string"&&e.startsWith(t),zL=WL("--"),k5=WL("var(--"),FE=t=>k5(t)?N5.test(t.split("/*")[0].trim()):!1,N5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function BE(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(Bs.has(l)){a=!0;continue}else if(zL(l)){s[l]=u;continue}else{const c=jL(u,ME[l]);l.startsWith("origin")?(o=!0,r[l]=c):i[l]=c}}if(e.transform||(a||n?i.transform=P5(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=r;i.transformOrigin=`${l} ${u} ${c}`}}const UE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KL(t,e,n){for(const i in e)!_t(e[i])&&!GL(i,n)&&(t[i]=e[i])}function O5({transformTemplate:t},e){return X.useMemo(()=>{const n=UE();return BE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function M5(t,e){const n=t.style||{},i={};return KL(i,n,t),Object.assign(i,O5(t,e)),i}function F5(t,e){const n={},i=M5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const B5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||B5.has(t)}let YL=t=>!wd(t);function U5(t){t&&(YL=e=>e.startsWith("on")?!wd(e):t(e))}try{U5(require("@emotion/is-prop-valid").default)}catch{}function $5(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(YL(s)||n===!0&&wd(s)||!e&&!wd(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}function ov(t,e,n){return typeof t=="string"?t:me.transform(e+n*t)}function H5(t,e,n){const i=ov(e,t.x,t.width),s=ov(n,t.y,t.height);return`${i} ${s}`}const V5={offset:"stroke-dashoffset",array:"stroke-dasharray"},G5={offset:"strokeDashoffset",array:"strokeDasharray"};function j5(t,e,n=1,i=0,s=!0){t.pathLength=1;const r=s?V5:G5;t[r.offset]=me.transform(-i);const a=me.transform(e),o=me.transform(n);t[r.array]=`${a} ${o}`}function $E(t,{attrX:e,attrY:n,attrScale:i,originX:s,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(BE(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:p}=t;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(s!==void 0||r!==void 0||h.transform)&&(h.transformOrigin=H5(p,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&j5(f,a,o,l,!1)}const qL=()=>({...UE(),attrs:{}}),HE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W5(t,e,n,i){const s=X.useMemo(()=>{const r=qL();return $E(r,e,HE(i),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};KL(r,t.style,t),s.style={...r,...s.style}}return s}function z5(t=!1){return(n,i,s,{latestValues:r},a)=>{const l=(NE(n)?W5:F5)(i,r,a,n),u=$5(i,typeof n=="string",t),c=n!==X.Fragment?{...u,...l,ref:s}:{},{children:d}=i,f=X.useMemo(()=>_t(d)?d.get():d,[d]);return X.createElement(n,{...c,children:f})}}function XL(t,{style:e,vars:n},i,s){Object.assign(t.style,e,s&&s.getProjectionStyles(i));for(const r in n)t.style.setProperty(r,n[r])}const QL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZL(t,e,n,i){XL(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(QL.has(s)?s:Bf(s),e.attrs[s])}function VE(t,e,n){var i;const{style:s}=t,r={};for(const a in s)(_t(s[a])||e.style&&_t(e.style[a])||GL(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[a]=s[a]);return n&&s&&typeof s.willChange=="string"&&(n.applyWillChange=!1),r}function JL(t,e,n){const i=VE(t,e,n);for(const s in t)if(_t(t[s])||_t(e[s])){const r=ru.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=t[s]}return i}function lv(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function GE(t,e,n,i){if(typeof e=="function"){const[s,r]=lv(i);e=e(n!==void 0?n:t.custom,s,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,r]=lv(i);e=e(n!==void 0?n:t.custom,s,r)}return e}function K5(t){const e=X.useRef(null);return e.current===null&&(e.current=t()),e.current}const Tm=t=>Array.isArray(t),Y5=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),q5=t=>Tm(t)?t[t.length-1]||0:t;function Rc(t){const e=_t(t)?t.get():t;return Y5(e)?e.toValue():e}const eI=new Set(["opacity","clipPath","filter","transform"]);function tI(t){if(Bs.has(t))return"transform";if(eI.has(t))return Bf(t)}function $f(t,e){t.indexOf(e)===-1&&t.push(e)}function Hf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function X5({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:i},s,r,a,o){const l={latestValues:Z5(s,r,a,o?!1:t,e),renderState:n()};return i&&(l.mount=u=>i(s,u,l)),l}const nI=t=>(e,n)=>{const i=X.useContext(Ff),s=X.useContext(_E),r=()=>X5(t,e,i,s,n);return n?r():K5(r)};function Q5(t,e){const n=tI(e);n&&$f(t,n)}function uv(t,e,n){const i=Array.isArray(e)?e:[e];for(let s=0;s<i.length;s++){const r=GE(t,i[s]);if(r){const{transitionEnd:a,transition:o,...l}=r;n(l,a)}}}function Z5(t,e,n,i,s){var r;const a={},o=[],l=i&&((r=t.style)===null||r===void 0?void 0:r.willChange)===void 0,u=s(t,{});for(const v in u)a[v]=Rc(u[v]);let{initial:c,animate:d}=t;const f=Uf(t),h=HL(t);e&&h&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const g=p?d:c;return g&&typeof g!="boolean"&&!Dl(g)&&uv(t,g,(v,E)=>{for(const y in v){let T=v[y];if(Array.isArray(T)){const b=p?T.length-1:0;T=T[b]}T!==null&&(a[y]=T)}for(const y in E)a[y]=E[y]}),l&&(d&&c!==!1&&!Dl(d)&&uv(t,d,v=>{for(const E in v)Q5(o,E)}),o.length&&(a.willChange=o.join(","))),a}const{schedule:Ne,cancel:qi,state:gt,steps:t0}=BL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rt,!0),J5={useVisualState:nI({scrapeMotionValuesFromProps:JL,createRenderState:qL,onMount:(t,e,{renderState:n,latestValues:i})=>{Ne.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ne.render(()=>{$E(n,i,HE(e.tagName),t.transformTemplate),ZL(e,n)})}})},eF={useVisualState:nI({applyWillChange:!0,scrapeMotionValuesFromProps:VE,createRenderState:UE})};function tF(t,{forwardMotionProps:e=!1},n,i){return{...NE(t)?J5:eF,preloadedFeatures:n,useRender:z5(e),createVisualElement:i,Component:t}}function Oi(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const iI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vf(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const nF=t=>e=>iI(e)&&t(e,Vf(e));function Hi(t,e,n,i){return Oi(t,e,nF(n),i)}const iF=(t,e)=>n=>e(t(n)),Vi=(...t)=>t.reduce(iF);function sI(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const cv=sI("dragHorizontal"),dv=sI("dragVertical");function rI(t){let e=!1;if(t==="y")e=dv();else if(t==="x")e=cv();else{const n=cv(),i=dv();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function aI(){const t=rI(!0);return t?(t(),!1):!0}class Us{constructor(e){this.isMounted=!1,this.node=e}update(){}}function fv(t,e){const n=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",s=(r,a)=>{if(r.pointerType==="touch"||aI())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const l=o[i];l&&Ne.postRender(()=>l(r,a))};return Hi(t.current,n,s,{passive:!t.getProps()[i]})}class sF extends Us{mount(){this.unmount=Vi(fv(this.node,!0),fv(this.node,!1))}unmount(){}}class rF extends Us{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vi(Oi(this.node.current,"focus",()=>this.onFocus()),Oi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const oI=(t,e)=>e?t===e?!0:oI(t,e.parentElement):!1;function n0(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Vf(n))}class aF extends Us{constructor(){super(...arguments),this.removeStartListeners=Rt,this.removeEndListeners=Rt,this.removeAccessibleListeners=Rt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=Hi(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),f=!d&&!oI(this.node.current,o.target)?c:u;f&&Ne.update(()=>f(o,l))},{passive:!(i.onTap||i.onPointerUp)}),a=Hi(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Vi(r,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=r=>{if(r.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||n0("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&Ne.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Oi(this.node.current,"keyup",a),n0("down",(o,l)=>{this.startPress(o,l)})},n=Oi(this.node.current,"keydown",e),i=()=>{this.isPressing&&n0("cancel",(r,a)=>this.cancelPress(r,a))},s=Oi(this.node.current,"blur",i);this.removeAccessibleListeners=Vi(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ne.postRender(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!aI()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ne.postRender(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Hi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Oi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vi(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ym=new WeakMap,i0=new WeakMap,oF=t=>{const e=ym.get(t.target);e&&e(t)},lF=t=>{t.forEach(oF)};function uF({root:t,...e}){const n=t||document;i0.has(n)||i0.set(n,{});const i=i0.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(lF,{root:t,...e})),i[s]}function cF(t,e,n){const i=uF(e);return ym.set(t,n),i.observe(t),()=>{ym.delete(t),i.unobserve(t)}}const dF={some:0,all:1};class fF extends Us{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:dF[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return cF(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hF(e,n))&&this.startObserver()}unmount(){}}function hF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pF={inView:{Feature:fF},tap:{Feature:aF},focus:{Feature:rF},hover:{Feature:sF}};function lI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Gf(t,e,n){const i=t.getProps();return GE(i,e,n!==void 0?n:i.custom,t)}const ws=t=>t*1e3,Gi=t=>t/1e3,mF={type:"spring",stiffness:500,damping:25,restSpeed:10},gF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),EF={type:"keyframes",duration:.8},TF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yF=(t,{keyframes:e})=>e.length>2?EF:Bs.has(t)?t.startsWith("scale")?gF(e[1]):mF:TF;function vF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function jE(t,e){return t[e]||t.default||t}const bF=t=>t!==null;function jf(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(bF),r=e&&n!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}let Dc;function xF(){Dc=void 0}const Ls={now:()=>(Dc===void 0&&Ls.set(gt.isProcessing||o5.useManualTiming?gt.timestamp:performance.now()),Dc),set:t=>{Dc=t,queueMicrotask(xF)}},uI=t=>/^0[^.\s]+$/u.test(t);function SF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uI(t):!0}const cI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),AF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CF(t){const e=AF.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function dI(t,e,n=1){const[i,s]=CF(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return cI(a)?parseFloat(a):a}return FE(s)?dI(s,e,n+1):s}const wF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),hv=t=>t===so||t===me,pv=(t,e)=>parseFloat(t.split(", ")[e]),mv=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return pv(s[1],e);{const r=i.match(/^matrix\((.+)\)$/u);return r?pv(r[1],t):0}},LF=new Set(["x","y","z"]),IF=ru.filter(t=>!LF.has(t));function _F(t){const e=[];return IF.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ga={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:mv(4,13),y:mv(5,14)};Ga.translateX=Ga.x;Ga.translateY=Ga.y;const fI=t=>e=>e.test(t),RF={test:t=>t==="auto",parse:t=>t},hI=[so,me,fi,ts,_5,I5,RF],gv=t=>hI.find(fI(t)),dr=new Set;let vm=!1,bm=!1;function pI(){if(bm){const t=Array.from(dr).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=_F(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,a])=>{var o;(o=i.getValue(r))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}bm=!1,vm=!1,dr.forEach(t=>t.complete()),dr.clear()}function mI(){dr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bm=!0)})}function DF(){mI(),pI()}class WE{constructor(e,n,i,s,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(dr.add(this),vm||(vm=!0,Ne.read(mI),Ne.resolveKeyframes(pI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),dr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,dr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const zE=(t,e)=>n=>!!(au(n)&&w5.test(n)&&n.startsWith(t)||e&&!L5(n)&&Object.prototype.hasOwnProperty.call(n,e)),gI=(t,e,n)=>i=>{if(!au(i))return i;const[s,r,a,o]=i.match(OE);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},PF=t=>Ds(0,255,t),s0={...so,transform:t=>Math.round(PF(t))},ir={test:zE("rgb","red"),parse:gI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+s0.transform(t)+", "+s0.transform(e)+", "+s0.transform(n)+", "+Yo(Ko.transform(i))+")"};function kF(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const xm={test:zE("#"),parse:kF,transform:ir.transform},ra={test:zE("hsl","hue"),parse:gI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+fi.transform(Yo(e))+", "+fi.transform(Yo(n))+", "+Yo(Ko.transform(i))+")"},Lt={test:t=>ir.test(t)||xm.test(t)||ra.test(t),parse:t=>ir.test(t)?ir.parse(t):ra.test(t)?ra.parse(t):xm.parse(t),transform:t=>au(t)?t:t.hasOwnProperty("red")?ir.transform(t):ra.transform(t)};function NF(t){var e,n;return isNaN(t)&&au(t)&&(((e=t.match(OE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(C5))===null||n===void 0?void 0:n.length)||0)>0}const EI="number",TI="color",OF="var",MF="var(",Ev="${}",FF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(FF,l=>(Lt.test(l)?(i.color.push(r),s.push(TI),n.push(Lt.parse(l))):l.startsWith(MF)?(i.var.push(r),s.push(OF),n.push(l)):(i.number.push(r),s.push(EI),n.push(parseFloat(l))),++r,Ev)).split(Ev);return{values:n,split:o,indexes:i,types:s}}function yI(t){return Pl(t).values}function vI(t){const{split:e,types:n}=Pl(t),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const o=n[a];o===EI?r+=Yo(s[a]):o===TI?r+=Lt.transform(s[a]):r+=s[a]}return r}}const BF=t=>typeof t=="number"?0:t;function UF(t){const e=yI(t);return vI(t)(e.map(BF))}const Ps={test:NF,parse:yI,createTransformer:vI,getAnimatableNone:UF},$F=new Set(["brightness","contrast","saturate","opacity"]);function HF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(OE)||[];if(!i)return t;const s=n.replace(i,"");let r=$F.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const VF=/\b([a-z-]*)\(.*?\)/gu,Sm={...Ps,getAnimatableNone:t=>{const e=t.match(VF);return e?e.map(HF).join(" "):t}},GF={...ME,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:Sm,WebkitFilter:Sm},KE=t=>GF[t];function bI(t,e){let n=KE(t);return n!==Sm&&(n=Ps),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const jF=new Set(["auto","none","0"]);function WF(t,e,n){let i=0,s;for(;i<t.length&&!s;){const r=t[i];typeof r=="string"&&!jF.has(r)&&Pl(r).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=bI(n,s)}class xI extends WE{constructor(e,n,i,s){super(e,n,i,s,s==null?void 0:s.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),FE(u))){const c=dI(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!wF.has(i)||e.length!==2)return;const[s,r]=e,a=gv(s),o=gv(r);if(a!==o)if(hv(a)&&hv(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)SF(e[s])&&i.push(s);i.length&&WF(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ga[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:s}=this;if(!n.current)return;const r=n.getValue(i);r&&r.jump(this.measuredOrigin,!1);const a=s.length-1,o=s[a];s[a]=Ga[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function SI(t){let e;return()=>(e===void 0&&(e=t()),e)}const Tv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ps.test(t)||t==="0")&&!t.startsWith("url("));function zF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KF(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=Tv(s,e),o=Tv(r,e);return!a||!o?!1:zF(t)||n==="spring"&&i}class AI{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,...o},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&DF(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!KF(e,i,s,r))if(a)this.options.duration=0;else{l==null||l(jf(e,this.options,n)),o==null||o(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function CI(t,e){return e?t*(1e3/e):0}const YF=5;function wI(t,e,n){const i=Math.max(e-YF,0);return CI(n-t(i),e-i)}const r0=.001,qF=.01,XF=10,QF=.05,ZF=1;function JF({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let s,r,a=1-e;a=Ds(QF,ZF,a),t=Ds(qF,XF,Gi(t)),a<1?(s=u=>{const c=u*a,d=c*t,f=c-n,h=Am(u,a),p=Math.exp(-d);return r0-f/h*p},r=u=>{const d=u*a*t,f=d*n+n,h=Math.pow(a,2)*Math.pow(u,2)*t,p=Math.exp(-d),g=Am(Math.pow(u,2),a);return(-s(u)+r0>0?-1:1)*((f-h)*p)/g}):(s=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-r0+c*d},r=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const o=5/t,l=t4(s,r,o);if(t=ws(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:a*2*Math.sqrt(i*u),duration:t}}}const e4=12;function t4(t,e,n){let i=n;for(let s=1;s<e4;s++)i=i-t(i)/e(i);return i}function Am(t,e){return t*Math.sqrt(1-e*e)}const n4=["duration","bounce"],i4=["stiffness","damping","mass"];function yv(t,e){return e.some(n=>t[n]!==void 0)}function s4(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!yv(t,i4)&&yv(t,n4)){const n=JF(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function LI({keyframes:t,restDelta:e,restSpeed:n,...i}){const s=t[0],r=t[t.length-1],a={done:!1,value:s},{stiffness:o,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:f}=s4({...i,velocity:-Gi(i.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(o*u)),g=r-s,v=Gi(Math.sqrt(o/u)),E=Math.abs(g)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let y;if(p<1){const T=Am(v,p);y=b=>{const x=Math.exp(-p*v*b);return r-x*((h+p*v*g)/T*Math.sin(T*b)+g*Math.cos(T*b))}}else if(p===1)y=T=>r-Math.exp(-v*T)*(g+(h+v*g)*T);else{const T=v*Math.sqrt(p*p-1);y=b=>{const x=Math.exp(-p*v*b),w=Math.min(T*b,300);return r-x*((h+p*v*g)*Math.sinh(w)+T*g*Math.cosh(w))/T}}return{calculatedDuration:f&&c||null,next:T=>{const b=y(T);if(f)a.done=T>=c;else{let x=h;T!==0&&(p<1?x=wI(y,T,b):x=0);const w=Math.abs(x)<=n,A=Math.abs(r-b)<=e;a.done=w&&A}return a.value=a.done?r:b,a}}}function vv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},h=C=>o!==void 0&&C<o||l!==void 0&&C>l,p=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let g=n*e;const v=d+g,E=a===void 0?v:a(v);E!==v&&(g=E-d);const y=C=>-g*Math.exp(-C/i),T=C=>E+y(C),b=C=>{const L=y(C),_=T(C);f.done=Math.abs(L)<=u,f.value=f.done?E:_};let x,w;const A=C=>{h(f.value)&&(x=C,w=LI({keyframes:[f.value,p(f.value)],velocity:wI(T,C,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:c}))};return A(0),{calculatedDuration:null,next:C=>{let L=!1;return!w&&x===void 0&&(L=!0,b(C),A(C)),x!==void 0&&C>=x?w.next(C-x):(!L&&b(C),f)}}}const II=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,r4=1e-7,a4=12;function o4(t,e,n,i,s){let r,a,o=0;do a=e+(n-e)/2,r=II(a,i,s)-t,r>0?n=a:e=a;while(Math.abs(r)>r4&&++o<a4);return a}function lu(t,e,n,i){if(t===e&&n===i)return Rt;const s=r=>o4(r,0,1,t,n);return r=>r===0||r===1?r:II(s(r),e,i)}const l4=lu(.42,0,1,1),u4=lu(0,0,.58,1),_I=lu(.42,0,.58,1),c4=t=>Array.isArray(t)&&typeof t[0]!="number",RI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DI=t=>e=>1-t(1-e),YE=t=>1-Math.sin(Math.acos(t)),PI=DI(YE),d4=RI(YE),kI=lu(.33,1.53,.69,.99),qE=DI(kI),f4=RI(qE),h4=t=>(t*=2)<1?.5*qE(t):.5*(2-Math.pow(2,-10*(t-1))),bv={linear:Rt,easeIn:l4,easeInOut:_I,easeOut:u4,circIn:YE,circInOut:d4,circOut:PI,backIn:qE,backInOut:f4,backOut:kI,anticipate:h4},xv=t=>{if(Array.isArray(t)){Em(t.length===4);const[e,n,i,s]=t;return lu(e,n,i,s)}else if(typeof t=="string")return Em(bv[t]!==void 0),bv[t];return t},kl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},We=(t,e,n)=>t+(e-t)*n;function a0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function p4({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,r=0,a=0;if(!e)s=r=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;s=a0(l,o,t+1/3),r=a0(l,o,t),a=a0(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Ld(t,e){return n=>n>0?e:t}const o0=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},m4=[xm,ir,ra],g4=t=>m4.find(e=>e.test(t));function Sv(t){const e=g4(t);if(!e)return!1;let n=e.parse(t);return e===ra&&(n=p4(n)),n}const Av=(t,e)=>{const n=Sv(t),i=Sv(e);if(!n||!i)return Ld(t,e);const s={...n};return r=>(s.red=o0(n.red,i.red,r),s.green=o0(n.green,i.green,r),s.blue=o0(n.blue,i.blue,r),s.alpha=We(n.alpha,i.alpha,r),ir.transform(s))},Cm=new Set(["none","hidden"]);function E4(t,e){return Cm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function T4(t,e){return n=>We(t,e,n)}function XE(t){return typeof t=="number"?T4:typeof t=="string"?FE(t)?Ld:Lt.test(t)?Av:b4:Array.isArray(t)?NI:typeof t=="object"?Lt.test(t)?Av:y4:Ld}function NI(t,e){const n=[...t],i=n.length,s=t.map((r,a)=>XE(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)n[a]=s[a](r);return n}}function y4(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=XE(t[s])(t[s],e[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function v4(t,e){var n;const i=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],o=t.indexes[a][s[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[r]=l,s[a]++}return i}const b4=(t,e)=>{const n=Ps.createTransformer(e),i=Pl(t),s=Pl(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Cm.has(t)&&!s.values.length||Cm.has(e)&&!i.values.length?E4(t,e):Vi(NI(v4(i,s),s.values),n):Ld(t,e)};function OI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?We(t,e,n):XE(t)(t,e)}function x4(t,e,n){const i=[],s=n||OI,r=t.length-1;for(let a=0;a<r;a++){let o=s(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Rt:e;o=Vi(l,o)}i.push(o)}return i}function S4(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(Em(r===e.length),r===1)return()=>e[0];if(r===2&&t[0]===t[1])return()=>e[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=x4(e,i,s),o=a.length,l=u=>{let c=0;if(o>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=kl(t[c],t[c+1],u);return a[c](d)};return n?u=>l(Ds(t[0],t[r-1],u)):l}function A4(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=kl(0,e,i);t.push(We(n,1,s))}}function C4(t){const e=[0];return A4(e,t.length-1),e}function w4(t,e){return t.map(n=>n*e)}function L4(t,e){return t.map(()=>e||_I).splice(0,t.length-1)}function Id({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=c4(i)?i.map(xv):xv(i),r={done:!1,value:e[0]},a=w4(n&&n.length===e.length?n:C4(e),t),o=S4(a,e,{ease:Array.isArray(s)?s:L4(e,s)});return{calculatedDuration:t,next:l=>(r.value=o(l),r.done=l>=t,r)}}const Cv=2e4;function I4(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Cv;)e+=n,i=t.next(e);return e>=Cv?1/0:e}const _4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ne.update(e,!0),stop:()=>qi(e),now:()=>gt.isProcessing?gt.timestamp:Ls.now()}},R4={decay:vv,inertia:vv,tween:Id,keyframes:Id,spring:LI},D4=t=>t/100;class QE extends AI{constructor({KeyframeResolver:e=WE,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:o}=this.options;o&&o()};const{name:i,motionValue:s,keyframes:r}=this.options,a=(o,l)=>this.onKeyframesResolved(o,l);i&&s&&s.owner?this.resolver=s.owner.resolveKeyframes(r,a,i,s):this.resolver=new e(r,a,i,s),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=this.options,o=R4[n]||Id;let l,u;o!==Id&&typeof e[0]!="number"&&(l=Vi(D4,OI(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});r==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=I4(c));const{calculatedDuration:d}=c,f=d+s,h=f*(i+1)-s;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=i;if(this.startTime===null)return r.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?E<0:E>c;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let T=this.currentTime,b=r;if(h){const C=Math.min(this.currentTime,c)/d;let L=Math.floor(C),_=C%1;!_&&C>=1&&(_=1),_===1&&L--,L=Math.min(L,h+1),!!(L%2)&&(p==="reverse"?(_=1-_,g&&(_-=g/d)):p==="mirror"&&(b=a)),T=Ds(0,1,_)*d}const x=y?{done:!1,value:l[0]}:b.next(T);o&&(x.value=o(x.value));let{done:w}=x;!y&&u!==null&&(w=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return A&&s!==void 0&&(x.value=jf(l,this.options,s)),v&&v(x.value),A&&this.finish(),x}get duration(){const{resolved:e}=this;return e?Gi(e.calculatedDuration):0}get time(){return Gi(this.currentTime)}set time(e){e=ws(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Gi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=_4,onPlay:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const MI=t=>Array.isArray(t)&&typeof t[0]=="number";function FI(t){return!!(!t||typeof t=="string"&&t in ZE||MI(t)||Array.isArray(t)&&t.every(FI))}const Po=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,ZE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Po([0,.65,.55,1]),circOut:Po([.55,0,1,.45]),backIn:Po([.31,.01,.66,-.59]),backOut:Po([.33,1.53,.69,.99])};function P4(t){return BI(t)||ZE.easeOut}function BI(t){if(t)return MI(t)?Po(t):Array.isArray(t)?t.map(P4):ZE[t]}function k4(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=BI(o);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:i,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"})}const N4=SI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_d=10,O4=2e4;function M4(t){return t.type==="spring"||!FI(t.ease)}function F4(t,e){const n=new QE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const s=[];let r=0;for(;!i.done&&r<O4;)i=n.sample(r),s.push(i.value),r+=_d;return{times:void 0,keyframes:s,duration:r-_d,ease:"linear"}}class wv extends AI{constructor(e){super(e);const{name:n,motionValue:i,keyframes:s}=this.options;this.resolver=new xI(s,(r,a)=>this.onKeyframesResolved(r,a),n,i),this.resolver.scheduleResolve()}initPlayback(e,n){var i;let{duration:s=300,times:r,ease:a,type:o,motionValue:l,name:u}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(M4(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,...p}=this.options,g=F4(e,p);e=g.keyframes,e.length===1&&(e[1]=e[0]),s=g.duration,r=g.times,a=g.ease,o="keyframes"}const c=k4(l.owner.current,u,e,{...this.options,duration:s,times:r,ease:a});return c.startTime=Ls.now(),this.pendingTimeline?(c.timeline=this.pendingTimeline,this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;l.set(jf(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:s,times:r,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Gi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Gi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=ws(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Rt;const{animation:i}=n;i.timeline=e,i.onfinish=null}return Rt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:s,type:r,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,...f}=this.options,h=new QE({...f,keyframes:i,duration:s,type:r,ease:a,times:o,isGenerator:!0}),p=ws(this.time);u.setWithVelocity(h.sample(p-_d).value,h.sample(p).value,_d)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:s,repeatType:r,damping:a,type:o}=e;return N4()&&i&&eI.has(i)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&r!=="mirror"&&a!==0&&o!=="inertia"}}function B4(t,e){let n;const i=()=>{const{currentTime:s}=e,a=(s===null?0:s.value)/100;n!==a&&t(a),n=a};return Ne.update(i,!0),()=>qi(i)}const U4=SI(()=>window.ScrollTimeline!==void 0);class $4{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e){const n=this.animations.map(i=>{if(U4()&&i.attachTimeline)i.attachTimeline(e);else return i.pause(),B4(s=>{i.time=i.duration*s},e)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const JE=(t,e,n,i={},s,r,a)=>o=>{const l=jE(i,t)||{},u=l.delay||i.delay||0;let{elapsed:c=0}=i;c=c-ws(u);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-c,onUpdate:h=>{e.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete(),a&&a()},onStop:a,name:t,motionValue:e,element:r?void 0:s};vF(l)||(d={...d,...yF(t,d)}),d.duration&&(d.duration=ws(d.duration)),d.repeatDelay&&(d.repeatDelay=ws(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!r&&e.get()!==void 0){const h=jf(d.keyframes,l);if(h!==void 0)return Ne.update(()=>{d.onUpdate(h),d.onComplete()}),new $4([])}return!r&&wv.supports(d)?new wv(d):new QE(d)};class e1{constructor(){this.subscriptions=[]}add(e){return $f(this.subscriptions,e),()=>Hf(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lv=30,H4=t=>!isNaN(parseFloat(t));class UI{constructor(e,n={}){this.version="11.3.21",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Ls.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ls.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=H4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new e1);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lv);return CI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nl(t,e){return new UI(t,e)}function V4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nl(n))}function G4(t,e){const n=Gf(t,e);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r){const o=q5(r[a]);V4(t,a,o)}}function $I(t){return t.getProps()[FL]}class j4 extends UI{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const n=tI(e);if(!n)return;const i=this.counts.get(n)||0;this.counts.set(n,i+1),i===0&&(this.output.push(n),this.update());let s=!1;return()=>{if(s)return;s=!0;const r=this.counts.get(n)-1;this.counts.set(n,r),r===0&&(Hf(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function W4(t){return!!(_t(t)&&t.add)}function wm(t,e){var n;if(!t.applyWillChange)return;let i=t.getValue("willChange");if(!i&&!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&(i=new j4("auto"),t.addValue("willChange",i)),W4(i))return i.add(e)}function z4({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function HI(t,e,{delay:n=0,transitionOverride:i,type:s}={}){var r;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(r=t.latestValues[d])!==null&&r!==void 0?r:null),h=l[d];if(h===void 0||c&&z4(c,d))continue;const p={delay:n,elapsed:0,...jE(a||{},d)};let g=!1;if(window.HandoffAppearAnimations){const E=$I(t);if(E){const y=window.HandoffAppearAnimations(E,d,f,Ne);y!==null&&(p.elapsed=y,g=!0)}}f.start(JE(d,f,h,t.shouldReduceMotion&&Bs.has(d)?{type:!1}:p,t,g,wm(t,d)));const v=f.animation;v&&u.push(v)}return o&&Promise.all(u).then(()=>{Ne.update(()=>{o&&G4(t,o)})}),u}function Lm(t,e,n={}){var i;const s=Gf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const a=s?()=>Promise.all(HI(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=r;return K4(t,e,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(n.delay)])}function K4(t,e,n=0,i=0,s=1,r){const a=[],o=(t.variantChildren.size-1)*i,l=s===1?(u=0)=>u*i:(u=0)=>o-u*i;return Array.from(t.variantChildren).sort(Y4).forEach((u,c)=>{u.notify("AnimationStart",e),a.push(Lm(u,e,{...r,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Y4(t,e){return t.sortNodePosition(e)}function q4(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Lm(t,r,n));i=Promise.all(s)}else if(typeof e=="string")i=Lm(t,e,n);else{const s=typeof e=="function"?Gf(t,e,n.custom):e;i=Promise.all(HI(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const X4=[...PE].reverse(),Q4=PE.length;function Z4(t){return e=>Promise.all(e.map(({animation:n,options:i})=>q4(t,n,i)))}function J4(t){let e=Z4(t),n=Iv(),i=!0;const s=l=>(u,c)=>{var d;const f=Gf(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...g}=f;u={...u,...g,...p}}return u};function r(l){e=l(t)}function a(l){const u=t.getProps(),c=t.getVariantContext(!0)||{},d=[],f=new Set;let h={},p=1/0;for(let v=0;v<Q4;v++){const E=X4[v],y=n[E],T=u[E]!==void 0?u[E]:c[E],b=Rl(T),x=E===l?y.isActive:null;x===!1&&(p=v);let w=T===c[E]&&T!==u[E]&&b;if(w&&i&&t.manuallyAnimateOnMount&&(w=!1),y.protectedKeys={...h},!y.isActive&&x===null||!T&&!y.prevProp||Dl(T)||typeof T=="boolean")continue;let C=eB(y.prevProp,T)||E===l&&y.isActive&&!w&&b||v>p&&b,L=!1;const _=Array.isArray(T)?T:[T];let N=_.reduce(s(E),{});x===!1&&(N={});const{prevResolvedValues:j={}}=y,U={...j,...N},J=q=>{C=!0,f.has(q)&&(L=!0,f.delete(q)),y.needsAnimating[q]=!0;const te=t.getValue(q);te&&(te.liveStyle=!1)};for(const q in U){const te=N[q],ce=j[q];if(h.hasOwnProperty(q))continue;let Y=!1;Tm(te)&&Tm(ce)?Y=!lI(te,ce):Y=te!==ce,Y?te!=null?J(q):f.add(q):te!==void 0&&f.has(q)?J(q):y.protectedKeys[q]=!0}y.prevProp=T,y.prevResolvedValues=N,y.isActive&&(h={...h,...N}),i&&t.blockInitialAnimation&&(C=!1),C&&(!w||L)&&d.push(..._.map(q=>({animation:q,options:{type:E}})))}if(f.size){const v={};f.forEach(E=>{const y=t.getBaseTarget(E),T=t.getValue(E);T&&(T.liveStyle=!0),v[E]=y??null}),d.push({animation:v})}let g=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>n,reset:()=>{n=Iv(),i=!0}}}function eB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!lI(e,t):!1}function Vs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Iv(){return{animate:Vs(!0),whileInView:Vs(),whileHover:Vs(),whileTap:Vs(),whileDrag:Vs(),whileFocus:Vs(),exit:Vs()}}class tB extends Us{constructor(e){super(e),e.animationState||(e.animationState=J4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Dl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let nB=0;class iB extends Us{constructor(){super(...arguments),this.id=nB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sB={animation:{Feature:tB},exit:{Feature:iB}},_v=(t,e)=>Math.abs(t-e);function rB(t,e){const n=_v(t.x,e.x),i=_v(t.y,e.y);return Math.sqrt(n**2+i**2)}class VI{constructor(e,n,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=u0(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=rB(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:g}=gt;this.history.push({...p,timestamp:g});const{onStart:v,onMove:E}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=l0(f,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=u0(d.type==="pointercancel"?this.lastMoveEventInfo:l0(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,v),p&&p(d,v)},!iI(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.contextWindow=s||window;const a=Vf(e),o=l0(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=gt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,u0(o,this.history)),this.removeListeners=Vi(Hi(this.contextWindow,"pointermove",this.handlePointerMove),Hi(this.contextWindow,"pointerup",this.handlePointerUp),Hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qi(this.updatePoint)}}function l0(t,e){return e?{point:e(t.point)}:t}function Rv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function u0({point:t},e){return{point:t,delta:Rv(t,GI(e)),offset:Rv(t,aB(e)),velocity:oB(e,.1)}}function aB(t){return t[0]}function GI(t){return t[t.length-1]}function oB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=GI(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>ws(e)));)n--;if(!i)return{x:0,y:0};const r=Gi(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const jI=1e-4,lB=1-jI,uB=1+jI,WI=.01,cB=0-WI,dB=0+WI;function pn(t){return t.max-t.min}function fB(t,e,n){return Math.abs(t-e)<=n}function Dv(t,e,n,i=.5){t.origin=i,t.originPoint=We(e.min,e.max,t.origin),t.scale=pn(n)/pn(e),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(t.scale>=lB&&t.scale<=uB||isNaN(t.scale))&&(t.scale=1),(t.translate>=cB&&t.translate<=dB||isNaN(t.translate))&&(t.translate=0)}function qo(t,e,n,i){Dv(t.x,e.x,n.x,i?i.originX:void 0),Dv(t.y,e.y,n.y,i?i.originY:void 0)}function Pv(t,e,n){t.min=n.min+e.min,t.max=t.min+pn(e)}function hB(t,e,n){Pv(t.x,e.x,n.x),Pv(t.y,e.y,n.y)}function kv(t,e,n){t.min=e.min-n.min,t.max=t.min+pn(e)}function Xo(t,e,n){kv(t.x,e.x,n.x),kv(t.y,e.y,n.y)}function pB(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?We(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?We(n,t,i.max):Math.min(t,n)),t}function Nv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mB(t,{top:e,left:n,bottom:i,right:s}){return{x:Nv(t.x,n,s),y:Nv(t.y,e,i)}}function Ov(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function gB(t,e){return{x:Ov(t.x,e.x),y:Ov(t.y,e.y)}}function EB(t,e){let n=.5;const i=pn(t),s=pn(e);return s>i?n=kl(e.min,e.max-i,t.min):i>s&&(n=kl(t.min,t.max-s,e.min)),Ds(0,1,n)}function TB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Im=.35;function yB(t=Im){return t===!1?t=0:t===!0&&(t=Im),{x:Mv(t,"left","right"),y:Mv(t,"top","bottom")}}function Mv(t,e,n){return{min:Fv(t,e),max:Fv(t,n)}}function Fv(t,e){return typeof t=="number"?t:t[e]||0}const Bv=()=>({translate:0,scale:1,origin:0,originPoint:0}),aa=()=>({x:Bv(),y:Bv()}),Uv=()=>({min:0,max:0}),Ze=()=>({x:Uv(),y:Uv()});function xn(t){return[t("x"),t("y")]}function zI({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function vB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function bB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function c0(t){return t===void 0||t===1}function _m({scale:t,scaleX:e,scaleY:n}){return!c0(t)||!c0(e)||!c0(n)}function Ks(t){return _m(t)||KI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function KI(t){return $v(t.x)||$v(t.y)}function $v(t){return t&&t!=="0%"}function Rd(t,e,n){const i=t-n,s=e*i;return n+s}function Hv(t,e,n,i,s){return s!==void 0&&(t=Rd(t,s,i)),Rd(t,n,i)+e}function Rm(t,e=0,n=1,i,s){t.min=Hv(t.min,e,n,i,s),t.max=Hv(t.max,e,n,i,s)}function YI(t,{x:e,y:n}){Rm(t.x,e.translate,e.scale,e.originPoint),Rm(t.y,n.translate,n.scale,n.originPoint)}const Vv=.999999999999,Gv=1.0000000000001;function xB(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=n[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&la(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,YI(t,a)),i&&Ks(r.latestValues)&&la(t,r.latestValues))}e.x<Gv&&e.x>Vv&&(e.x=1),e.y<Gv&&e.y>Vv&&(e.y=1)}function oa(t,e){t.min=t.min+e,t.max=t.max+e}function jv(t,e,n,i,s=.5){const r=We(t.min,t.max,s);Rm(t,e,n,r,i)}function la(t,e){jv(t.x,e.x,e.scaleX,e.scale,e.originX),jv(t.y,e.y,e.scaleY,e.scale,e.originY)}function qI(t,e){return zI(bB(t.getBoundingClientRect(),e))}function SB(t,e,n){const i=qI(t,n),{scroll:s}=e;return s&&(oa(i.x,s.offset.x),oa(i.y,s.offset.y)),i}const XI=({current:t})=>t?t.ownerDocument.defaultView:null,AB=new WeakMap;class CB{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ze(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vf(c,"page").point)},r=(c,d)=>{var f;const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rI(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(E=>{let y=this.getAxisMotionValue(E).get()||0;if(fi.test(y)){const{projection:T}=this.visualElement;if(T&&T.layout){const b=T.layout.layoutBox[E];b&&(y=pn(b)*(parseFloat(y)/100))}}this.originPoint[E]=y}),g&&Ne.postRender(()=>g(c,d)),(f=this.removeWillChange)===null||f===void 0||f.call(this),this.removeWillChange=wm(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:v}=d;if(h&&this.currentDirection===null){this.currentDirection=wB(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&g(c,d)},o=(c,d)=>this.stop(c,d),l=()=>xn(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new VI(e,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:XI(this.visualElement)})}stop(e,n){var i;(i=this.removeWillChange)===null||i===void 0||i.call(this);const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Ne.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!ju(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=pB(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;n&&sa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=mB(s.layoutBox,n):this.constraints=!1,this.elastic=yB(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&xn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=TB(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!sa(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=SB(i,s.root,this.visualElement.getTransformPagePoint());let a=gB(s.layout.layoutBox,r);if(n){const o=n(vB(a));this.hasMutatedConstraints=!!o,o&&(a=zI(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=xn(c=>{if(!ju(c,n,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const f=s?200:1e6,h=s?40:1e7,p={type:"inertia",velocity:i?e[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(JE(e,i,0,n,this.visualElement,!1,wm(this.visualElement,e)))}stopAnimation(){xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){xn(n=>{const{drag:i}=this.getProps();if(!ju(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];r.set(e[n]-We(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!sa(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=EB({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),xn(a=>{if(!ju(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(We(l,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;AB.set(this.visualElement,this);const e=this.visualElement.current,n=Hi(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();sa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ne.read(i);const a=Oi(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(xn(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),n(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=Im,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function ju(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class LB extends Us{constructor(e){super(e),this.removeGroupControls=Rt,this.removeListeners=Rt,this.controls=new CB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wv=t=>(e,n)=>{t&&Ne.postRender(()=>t(e,n))};class IB extends Us{constructor(){super(...arguments),this.removePointerDownListener=Rt}onPointerDown(e){this.session=new VI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Wv(e),onStart:Wv(n),onMove:i,onEnd:(r,a)=>{delete this.session,s&&Ne.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Hi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _B(){const t=X.useContext(_E);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,s=X.useId();X.useEffect(()=>i(s),[]);const r=X.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,r]:[!0]}const Pc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const So={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const n=zv(t,e.target.x),i=zv(t,e.target.y);return`${n}% ${i}%`}},RB={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=Ps.parse(t);if(s.length>5)return i;const r=Ps.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const u=We(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),r(s)}};class DB extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;A5(PB),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Pc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,a=i.projection;return a&&(a.isPresent=r,s||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Ne.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QI(t){const[e,n]=_B(),i=X.useContext(VL);return P.jsx(DB,{...t,layoutGroup:i,switchLayoutGroup:X.useContext(UL),isPresent:e,safeToRemove:n})}const PB={borderRadius:{...So,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:So,borderTopRightRadius:So,borderBottomLeftRadius:So,borderBottomRightRadius:So,boxShadow:RB},ZI=["TopLeft","TopRight","BottomLeft","BottomRight"],kB=ZI.length,Kv=t=>typeof t=="string"?parseFloat(t):t,Yv=t=>typeof t=="number"||me.test(t);function NB(t,e,n,i,s,r){s?(t.opacity=We(0,n.opacity!==void 0?n.opacity:1,OB(i)),t.opacityExit=We(e.opacity!==void 0?e.opacity:1,0,MB(i))):r&&(t.opacity=We(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<kB;a++){const o=`border${ZI[a]}Radius`;let l=qv(e,o),u=qv(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Yv(l)===Yv(u)?(t[o]=Math.max(We(Kv(l),Kv(u),i),0),(fi.test(u)||fi.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,i))}function qv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OB=JI(0,.5,PI),MB=JI(.5,.95,Rt);function JI(t,e,n){return i=>i<t?0:i>e?1:n(kl(t,e,i))}function Xv(t,e){t.min=e.min,t.max=e.max}function vn(t,e){Xv(t.x,e.x),Xv(t.y,e.y)}function Qv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Zv(t,e,n,i,s){return t-=e,t=Rd(t,1/n,i),s!==void 0&&(t=Rd(t,1/s,i)),t}function FB(t,e=0,n=1,i=.5,s,r=t,a=t){if(fi.test(e)&&(e=parseFloat(e),e=We(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=We(r.min,r.max,i);t===r&&(o-=e),t.min=Zv(t.min,e,n,o,s),t.max=Zv(t.max,e,n,o,s)}function Jv(t,e,[n,i,s],r,a){FB(t,e[n],e[i],e[s],e.scale,r,a)}const BB=["x","scaleX","originX"],UB=["y","scaleY","originY"];function eb(t,e,n,i){Jv(t.x,e,BB,n?n.x:void 0,i?i.x:void 0),Jv(t.y,e,UB,n?n.y:void 0,i?i.y:void 0)}function tb(t){return t.translate===0&&t.scale===1}function e_(t){return tb(t.x)&&tb(t.y)}function nb(t,e){return t.min===e.min&&t.max===e.max}function $B(t,e){return nb(t.x,e.x)&&nb(t.y,e.y)}function ib(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function t_(t,e){return ib(t.x,e.x)&&ib(t.y,e.y)}function sb(t){return pn(t.x)/pn(t.y)}function rb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class HB{constructor(){this.members=[]}add(e){$f(this.members,e),e.scheduleRender()}remove(e){if(Hf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VB(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;u&&(i=`perspective(${u}px) ${i}`),c&&(i+=`rotate(${c}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),h&&(i+=`skewX(${h}deg) `),p&&(i+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const GB=(t,e)=>t.depth-e.depth;class jB{constructor(){this.children=[],this.isDirty=!1}add(e){$f(this.children,e),this.isDirty=!0}remove(e){Hf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GB),this.isDirty=!1,this.children.forEach(e)}}function WB(t,e){const n=Ls.now(),i=({timestamp:s})=>{const r=s-n;r>=e&&(qi(i),t(r-e))};return Ne.read(i,!0),()=>qi(i)}function zB(t){return t instanceof SVGElement&&t.tagName!=="svg"}function KB(t,e,n){const i=_t(t)?t:Nl(t);return i.start(JE("",i,e,n)),i.animation}const Ys={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ko=typeof window<"u"&&window.MotionDebug!==void 0,d0=["","X","Y","Z"],YB={visibility:"hidden"},ab=1e3;let qB=0;function f0(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function n_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return!1;const{visualElement:e}=t.options;return e?$I(e)?!0:t.parent&&!t.parent.hasCheckedOptimisedAppear?n_(t.parent):!1:!1}function i_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=qB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ko&&(Ys.totalNodes=Ys.resolvedTargetDeltas=Ys.recalculatedProjection=0),this.nodes.forEach(ZB),this.nodes.forEach(i8),this.nodes.forEach(s8),this.nodes.forEach(JB),ko&&window.MotionDebug.record(Ys)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jB)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new e1),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zB(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=WB(f,250),Pc.hasAnimatedSinceResize&&(Pc.hasAnimatedSinceResize=!1,this.nodes.forEach(lb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||u8,{onLayoutAnimationStart:v,onLayoutAnimationComplete:E}=c.getProps(),y=!this.targetLayout||!t_(this.targetLayout,p)||h,T=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,T);const b={...jE(g,"layout"),onPlay:v,onComplete:E};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||lb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(r8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&n_(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ob);return}this.isUpdating||this.nodes.forEach(t8),this.isUpdating=!1,this.nodes.forEach(n8),this.nodes.forEach(XB),this.nodes.forEach(QB),this.clearAllSnapshots();const o=Ls.now();gt.delta=Ds(0,1e3/60,o-gt.timestamp),gt.timestamp=o,gt.isProcessing=!0,t0.update.process(gt),t0.preRender.process(gt),t0.render.process(gt),gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(e8),this.sharedNodes.forEach(a8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!e_(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||Ks(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),c8(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Ze();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(d8))){const{scroll:c}=this.root;c&&(oa(l.x,c.offset.x),oa(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=Ze();if(vn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&vn(l,a),oa(l.x,d.offset.x),oa(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Ze();vn(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&la(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ks(c.latestValues)&&la(l,c.latestValues)}return Ks(this.latestValues)&&la(l,this.latestValues),l}removeTransform(a){const o=Ze();vn(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ks(u.latestValues))continue;_m(u.latestValues)&&u.updateSnapshot();const c=Ze(),d=u.measurePageBox();vn(c,d),eb(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ks(this.latestValues)&&eb(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=gt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Xo(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ze(),this.targetWithTransforms=Ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vn(this.target,this.layout.layoutBox),YI(this.target,this.targetDelta)):vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Xo(this.relativeTargetOrigin,this.target,h.target),vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ko&&Ys.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_m(this.parent.latestValues)||KI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;vn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;xB(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ze());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qv(this.prevProjectionDelta.x,this.projectionDelta.x),Qv(this.prevProjectionDelta.y,this.projectionDelta.y)),qo(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!rb(this.projectionDelta.x,this.prevProjectionDelta.x)||!rb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),ko&&Ys.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=aa(),this.projectionDelta=aa(),this.projectionDeltaWithTransform=aa()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Ze(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,v=this.getStack(),E=!v||v.members.length<=1,y=!!(g&&!E&&this.options.crossfade===!0&&!this.path.some(l8));this.animationProgress=0;let T;this.mixTargetDelta=b=>{const x=b/1e3;ub(d.x,a.x,x),ub(d.y,a.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),o8(this.relativeTarget,this.relativeTargetOrigin,f,x),T&&$B(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ze()),vn(T,this.relativeTarget)),g&&(this.animationValues=c,NB(c,u,this.latestValues,x,y,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{Pc.hasAnimatedSinceResize=!0,this.currentAnimation=KB(0,ab,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ab),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&s_(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ze();const d=pn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=pn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}vn(o,l),la(o,c),qo(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new HB),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&f0("z",a,u,this.animationValues);for(let c=0;c<d0.length;c++)f0(`rotate${d0[c]}`,a,u,this.animationValues),f0(`skew${d0[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YB;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Rc(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Rc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ks(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=VB(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Cd){if(f[g]===void 0)continue;const{correct:v,applyTo:E}=Cd[g],y=u.transform==="none"?f[g]:v(f[g],d);if(E){const T=E.length;for(let b=0;b<T;b++)u[E[b]]=y}else u[g]=y}return this.options.layoutId&&(u.pointerEvents=d===this?Rc(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(ob),this.root.sharedNodes.clear()}}}function XB(t){t.updateLayout()}function QB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:r}=t.options,a=n.source!==t.layout.source;r==="size"?xn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=pn(f);f.min=i[d].min,f.max=f.min+h}):s_(r,n.layoutBox,i)&&xn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=pn(i[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const o=aa();qo(o,i,n.layoutBox);const l=aa();a?qo(l,t.applyTransform(s,!0),n.measuredBox):qo(l,i,n.layoutBox);const u=!e_(o);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=Ze();Xo(p,n.layoutBox,f.layoutBox);const g=Ze();Xo(g,i,h.layoutBox),t_(p,g)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function ZB(t){ko&&Ys.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function e8(t){t.clearSnapshot()}function ob(t){t.clearMeasurements()}function t8(t){t.isLayoutDirty=!1}function n8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function i8(t){t.resolveTargetDelta()}function s8(t){t.calcProjection()}function r8(t){t.resetSkewAndRotation()}function a8(t){t.removeLeadSnapshot()}function ub(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cb(t,e,n,i){t.min=We(e.min,n.min,i),t.max=We(e.max,n.max,i)}function o8(t,e,n,i){cb(t.x,e.x,n.x,i),cb(t.y,e.y,n.y,i)}function l8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const u8={duration:.45,ease:[.4,0,.1,1]},db=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fb=db("applewebkit/")&&!db("chrome/")?Math.round:Rt;function hb(t){t.min=fb(t.min),t.max=fb(t.max)}function c8(t){hb(t.x),hb(t.y)}function s_(t,e,n){return t==="position"||t==="preserve-aspect"&&!fB(sb(e),sb(n),.2)}function d8(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const f8=i_({attachResizeListener:(t,e)=>Oi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h0={current:void 0},r_=i_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!h0.current){const t=new f8({});t.mount(window),t.setOptions({layoutScroll:!0}),h0.current=t}return h0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),h8={pan:{Feature:IB},drag:{Feature:LB,ProjectionNode:r_,MeasureLayout:QI}},Dm={current:null},a_={current:!1};function p8(){if(a_.current=!0,!!RE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dm.current=t.matches;t.addListener(e),e()}else Dm.current=!1}function m8(t,e,n){for(const i in e){const s=e[i],r=n[i];if(_t(s))t.addValue(i,s);else if(_t(r))t.addValue(i,Nl(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Nl(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const pb=new WeakMap,g8=[...hI,Lt,Ps],E8=t=>g8.find(fI(t)),mb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],T8=kE.length;class y8{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.applyWillChange=!1,this.resolveKeyframes=(f,h,p,g)=>new this.KeyframeResolver(f,h,p,g,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=WE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Ne.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=Uf(n),this.isVariantNode=HL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const h=d[f];l[f]!==void 0&&_t(h)&&h.set(l[f],!1)}}mount(e){this.current=e,pb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),a_.current||p8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pb.delete(this.current),this.projection&&this.projection.unmount(),qi(this.notifyUpdate),qi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){const i=Bs.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ne.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Va){const n=Va[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<mb.length;i++){const s=mb[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=m8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<T8;i++){const s=kE[i],r=this.props[s];(Rl(r)||r===!1)&&(n[s]=r)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Nl(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(cI(s)||uI(s))?s=parseFloat(s):!E8(s)&&Ps.test(n)&&(s=bI(e,n)),this.setBaseTarget(e,_t(s)?s.get():s)),_t(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const a=GE(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(s=a[e])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!_t(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new e1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class o_ extends y8{constructor(){super(...arguments),this.KeyframeResolver=xI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}}function v8(t){return window.getComputedStyle(t)}class b8 extends o_{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=XL}readValueFromInstance(e,n){if(Bs.has(n)){const i=KE(n);return i&&i.default||0}else{const i=v8(e),s=(zL(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qI(e,n)}build(e,n,i){BE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return VE(e,n,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_t(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class x8 extends o_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ze}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bs.has(n)){const i=KE(n);return i&&i.default||0}return n=QL.has(n)?n:Bf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return JL(e,n,i)}build(e,n,i){$E(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,s){ZL(e,n,i,s)}mount(e){this.isSVGTag=HE(e.tagName),super.mount(e)}}const S8=(t,e)=>NE(t)?new x8(e):new b8(e,{allowProjection:t!==X.Fragment}),A8={layout:{ProjectionNode:r_,MeasureLayout:QI}},C8={...sB,...pF,...h8,...A8},w8=x5((t,e)=>tF(t,e,C8,S8)),L8={hidden:{opacity:0,x:0,y:20},enter:{opacity:1,x:0,y:0},exit:{opacity:0,x:-0,y:20}},l_=({children:t,style:e})=>P.jsx(w8.article,{initial:"hidden",animate:"enter",exit:"exit",variants:L8,transition:{duration:.5,type:"easeInOut"},style:e,children:t}),Wf="https://nettruyenww.com",I8="https://nettruyenww.com/Comic/Services/ComicService.asmx/ProcessChapterList?comicId=",uu="https://animevietsub.pub",_8=`${uu}/ajax/player?v=2019a`;function vr(t){return{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9","accept-language":"vi-VN,vi;q=0.9,en;q=0.8,ja;q=0.7","cache-control":"max-age=0",dnt:"1","sec-ch-ua":'"Google Chrome";v="105", "Not)A;Brand";v="8", "Chromium";v="105"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"Windows","sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","sec-gpc":"1","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36",referer:t??Wf}}/*! Capacitor: https://capacitorjs.com/ - MIT License */const R8=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},i=(r,a)=>{n.platforms.set(r,a)},s=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=i,n.setPlatform=s,n},D8=t=>t.CapacitorPlatforms=R8(t),u_=D8(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});u_.addPlatform;u_.setPlatform;var ja;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ja||(ja={}));class p0 extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}}const P8=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},k8=t=>{var e,n,i,s,r;const a=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},l=o.Plugins=o.Plugins||{},u=t.CapacitorPlatforms,c=()=>a!==null?a.name:P8(t),d=((e=u==null?void 0:u.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||c,f=()=>d()!=="web",h=((n=u==null?void 0:u.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||f,p=A=>{const C=b.get(A);return!!(C!=null&&C.platforms.has(d())||E(A))},g=((i=u==null?void 0:u.currentPlatform)===null||i===void 0?void 0:i.isPluginAvailable)||p,v=A=>{var C;return(C=o.PluginHeaders)===null||C===void 0?void 0:C.find(L=>L.name===A)},E=((s=u==null?void 0:u.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||v,y=A=>t.console.error(A),T=(A,C,L)=>Promise.reject(`${L} does not have an implementation of "${C}".`),b=new Map,x=(A,C={})=>{const L=b.get(A);if(L)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),L.proxy;const _=d(),N=E(A);let j;const U=async()=>(!j&&_ in C?j=typeof C[_]=="function"?j=await C[_]():j=C[_]:a!==null&&!j&&"web"in C&&(j=typeof C.web=="function"?j=await C.web():j=C.web),j),J=(k,z)=>{var G,se;if(N){const re=N==null?void 0:N.methods.find(de=>z===de.name);if(re)return re.rtype==="promise"?de=>o.nativePromise(A,z.toString(),de):(de,ge)=>o.nativeCallback(A,z.toString(),de,ge);if(k)return(G=k[z])===null||G===void 0?void 0:G.bind(k)}else{if(k)return(se=k[z])===null||se===void 0?void 0:se.bind(k);throw new p0(`"${A}" plugin is not implemented on ${_}`,ja.Unimplemented)}},q=k=>{let z;const G=(...se)=>{const re=U().then(de=>{const ge=J(de,k);if(ge){const Se=ge(...se);return z=Se==null?void 0:Se.remove,Se}else throw new p0(`"${A}.${k}()" is not implemented on ${_}`,ja.Unimplemented)});return k==="addListener"&&(re.remove=async()=>z()),re};return G.toString=()=>`${k.toString()}() { [capacitor code] }`,Object.defineProperty(G,"name",{value:k,writable:!1,configurable:!1}),G},te=q("addListener"),ce=q("removeListener"),Y=(k,z)=>{const G=te({eventName:k},z),se=async()=>{const de=await G;ce({eventName:k,callbackId:de},z)},re=new Promise(de=>G.then(()=>de({remove:se})));return re.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await se()},re},O=new Proxy({},{get(k,z){switch(z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?Y:te;case"removeListener":return ce;default:return q(z)}}});return l[A]=O,b.set(A,{name:A,proxy:O,platforms:new Set([...Object.keys(C),...N?[_]:[]])}),O},w=((r=u==null?void 0:u.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||x;return o.convertFileSrc||(o.convertFileSrc=A=>A),o.getPlatform=d,o.handleError=y,o.isNativePlatform=h,o.isPluginAvailable=g,o.pluginMethodNoop=T,o.registerPlugin=w,o.Exception=p0,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},N8=t=>t.Capacitor=k8(t),Dd=N8(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),zf=Dd.registerPlugin;Dd.Plugins;class c_{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),i&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,i){const s=this.listeners[e];if(!s){if(i){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new Dd.Exception(e,ja.Unimplemented)}unavailable(e="not available"){return new Dd.Exception(e,ja.Unavailable)}async removeListener(e,n){const i=this.listeners[e];if(!i)return;const s=i.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}}const gb=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Eb=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class O8 extends c_{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Eb(s).trim(),r=Eb(r).trim(),n[s]=r}),n}async setCookie(e){try{const n=gb(e.key),i=gb(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${s}; path=${r}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}zf("CapacitorCookies",{web:()=>new O8});const M8=async t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const s=i.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>n(s),i.readAsDataURL(t)}),F8=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,r,a)=>(s[r]=t[e[a]],s),{})},B8=(t,e=!0)=>t?Object.entries(t).reduce((i,s)=>{const[r,a]=s;let o,l;return Array.isArray(a)?(l="",a.forEach(u=>{o=e?encodeURIComponent(u):u,l+=`${r}=${o}&`}),l.slice(0,-1)):(o=e?encodeURIComponent(a):a,l=`${r}=${o}`),`${i}&${l}`},"").substr(1):null,U8=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=F8(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[a,o]of Object.entries(t.data||{}))r.set(a,o);n.body=r.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((o,l)=>{r.append(l,o)});else for(const o of Object.keys(t.data))r.append(o,t.data[o]);n.body=r;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class $8 extends c_{async request(e){const n=U8(e,e.webFetchExtra),i=B8(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,r=await fetch(s,n),a=r.headers.get("content-type")||"";let{responseType:o="text"}=r.ok?e:{};a.includes("application/json")&&(o="json");let l,u;switch(o){case"arraybuffer":case"blob":u=await r.blob(),l=await M8(u);break;case"json":l=await r.json();break;case"document":case"text":default:l=await r.text()}const c={};return r.headers.forEach((d,f)=>{c[f]=d}),{data:l,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}const Ei=zf("CapacitorHttp",{web:()=>new $8}),t1={xml:!1,decodeEntities:!0},Tb={_useHtmlParser2:!0,xmlMode:!0};function Pm(t){return t!=null&&t.xml?typeof t.xml=="boolean"?Tb:{...Tb,...t.xml}:t??void 0}var Ie;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(Ie||(Ie={}));function H8(t){return t.type===Ie.Tag||t.type===Ie.Script||t.type===Ie.Style}const V8=Ie.Root,G8=Ie.Text,j8=Ie.Directive,W8=Ie.Comment,z8=Ie.Script,K8=Ie.Style,Y8=Ie.Tag,q8=Ie.CDATA,X8=Ie.Doctype;class d_{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Pd(this,e)}}class n1 extends d_{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class Ol extends n1{constructor(){super(...arguments),this.type=Ie.Text}get nodeType(){return 3}}class i1 extends n1{constructor(){super(...arguments),this.type=Ie.Comment}get nodeType(){return 8}}class s1 extends n1{constructor(e,n){super(n),this.name=e,this.type=Ie.Directive}get nodeType(){return 1}}class r1 extends d_{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class f_ extends r1{constructor(){super(...arguments),this.type=Ie.CDATA}get nodeType(){return 4}}class br extends r1{constructor(){super(...arguments),this.type=Ie.Root}get nodeType(){return 9}}let a1=class extends r1{constructor(e,n,i=[],s=e==="script"?Ie.Script:e==="style"?Ie.Style:Ie.Tag){super(i),this.name=e,this.attribs=n,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var n,i;return{name:e,value:this.attribs[e],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[e],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[e]}})}};function Te(t){return H8(t)}function Kf(t){return t.type===Ie.CDATA}function hi(t){return t.type===Ie.Text}function Yf(t){return t.type===Ie.Comment}function km(t){return t.type===Ie.Directive}function Rr(t){return t.type===Ie.Root}function ft(t){return Object.prototype.hasOwnProperty.call(t,"children")}function Pd(t,e=!1){let n;if(hi(t))n=new Ol(t.data);else if(Yf(t))n=new i1(t.data);else if(Te(t)){const i=e?m0(t.children):[],s=new a1(t.name,{...t.attribs},i);i.forEach(r=>r.parent=s),t.namespace!=null&&(s.namespace=t.namespace),t["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...t["x-attribsPrefix"]}),n=s}else if(Kf(t)){const i=e?m0(t.children):[],s=new f_(i);i.forEach(r=>r.parent=s),n=s}else if(Rr(t)){const i=e?m0(t.children):[],s=new br(i);i.forEach(r=>r.parent=s),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),n=s}else if(km(t)){const i=new s1(t.name,t.data);t["x-name"]!=null&&(i["x-name"]=t["x-name"],i["x-publicId"]=t["x-publicId"],i["x-systemId"]=t["x-systemId"]),n=i}else throw new Error(`Not implemented yet: ${t.type}`);return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}function m0(t){const e=t.map(n=>Pd(n,!0));for(let n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}const yb={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Q8{constructor(e,n,i){this.dom=[],this.root=new br(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=yb),typeof e=="object"&&(n=e,e=void 0),this.callback=e??null,this.options=n??yb,this.elementCB=i??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new br(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,n){const i=this.options.xmlMode?Ie.Tag:void 0,s=new a1(e,n,void 0,i);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:n}=this;if(n&&n.type===Ie.Text)n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new Ol(e);this.addNode(i),this.lastNode=i}}oncomment(e){if(this.lastNode&&this.lastNode.type===Ie.Comment){this.lastNode.data+=e;return}const n=new i1(e);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Ol(""),n=new f_([e]);this.addNode(n),e.parent=n,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,n){const i=new s1(e,n);this.addNode(i)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),n.children.push(e),i&&(e.prev=i,i.next=e),e.parent=n,this.lastNode=null}}const wi=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),h_=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(t=>t.charCodeAt(0)));var g0;const Z8=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Nm=(g0=String.fromCodePoint)!==null&&g0!==void 0?g0:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function p_(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Z8.get(t))!==null&&e!==void 0?e:t}var ct;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ct||(ct={}));const J8=32;var dn;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(dn||(dn={}));function Om(t){return t>=ct.ZERO&&t<=ct.NINE}function eU(t){return t>=ct.UPPER_A&&t<=ct.UPPER_F||t>=ct.LOWER_A&&t<=ct.LOWER_F}function tU(t){return t>=ct.UPPER_A&&t<=ct.UPPER_Z||t>=ct.LOWER_A&&t<=ct.LOWER_Z||Om(t)}function nU(t){return t===ct.EQUALS||tU(t)}var ot;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(ot||(ot={}));var Xs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Xs||(Xs={}));class iU{constructor(e,n,i){this.decodeTree=e,this.emitCodePoint=n,this.errors=i,this.state=ot.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Xs.Strict}startEntity(e){this.decodeMode=e,this.state=ot.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case ot.EntityStart:return e.charCodeAt(n)===ct.NUM?(this.state=ot.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=ot.NamedEntity,this.stateNamedEntity(e,n));case ot.NumericStart:return this.stateNumericStart(e,n);case ot.NumericDecimal:return this.stateNumericDecimal(e,n);case ot.NumericHex:return this.stateNumericHex(e,n);case ot.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|J8)===ct.LOWER_X?(this.state=ot.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=ot.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,i,s){if(n!==i){const r=i-n;this.result=this.result*Math.pow(s,r)+parseInt(e.substr(n,r),s),this.consumed+=r}}stateNumericHex(e,n){const i=n;for(;n<e.length;){const s=e.charCodeAt(n);if(Om(s)||eU(s))n+=1;else return this.addToNumericResult(e,i,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,i,n,16),-1}stateNumericDecimal(e,n){const i=n;for(;n<e.length;){const s=e.charCodeAt(n);if(Om(s))n+=1;else return this.addToNumericResult(e,i,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,i,n,10),-1}emitNumericEntity(e,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ct.SEMI)this.consumed+=1;else if(this.decodeMode===Xs.Strict)return 0;return this.emitCodePoint(p_(this.result),this.consumed),this.errors&&(e!==ct.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:i}=this;let s=i[this.treeIndex],r=(s&dn.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const a=e.charCodeAt(n);if(this.treeIndex=o1(i,s,this.treeIndex+Math.max(1,r),a),this.treeIndex<0)return this.result===0||this.decodeMode===Xs.Attribute&&(r===0||nU(a))?0:this.emitNotTerminatedNamedEntity();if(s=i[this.treeIndex],r=(s&dn.VALUE_LENGTH)>>14,r!==0){if(a===ct.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==Xs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:i}=this,s=(i[n]&dn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,i){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~dn.VALUE_LENGTH:s[e+1],i),n===3&&this.emitCodePoint(s[e+2],i),i}end(){var e;switch(this.state){case ot.NamedEntity:return this.result!==0&&(this.decodeMode!==Xs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ot.NumericDecimal:return this.emitNumericEntity(0,2);case ot.NumericHex:return this.emitNumericEntity(0,3);case ot.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ot.EntityStart:return 0}}}function m_(t){let e="";const n=new iU(t,i=>e+=Nm(i));return function(s,r){let a=0,o=0;for(;(o=s.indexOf("&",o))>=0;){e+=s.slice(a,o),n.startEntity(r);const u=n.write(s,o+1);if(u<0){a=o+n.end();break}a=o+u,o=u===0?a+1:a}const l=e+s.slice(a);return e="",l}}function o1(t,e,n,i){const s=(e&dn.BRANCH_LENGTH)>>7,r=e&dn.JUMP_TABLE;if(s===0)return r!==0&&i===r?n:-1;if(r){const l=i-r;return l<0||l>=s?-1:t[n+l]-1}let a=n,o=a+s-1;for(;a<=o;){const l=a+o>>>1,u=t[l];if(u<i)a=l+1;else if(u>i)o=l-1;else return t[l+s]}return-1}m_(wi);m_(h_);const vb=/["&'<>$\x80-\uFFFF]/g,sU=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),rU=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function g_(t){let e="",n=0,i;for(;(i=vb.exec(t))!==null;){const s=i.index,r=t.charCodeAt(s),a=sU.get(r);a!==void 0?(e+=t.substring(n,s)+a,n=s+1):(e+=`${t.substring(n,s)}&#x${rU(t,s).toString(16)};`,n=vb.lastIndex+=+((r&64512)===55296))}return e+t.substr(n)}function E_(t,e){return function(i){let s,r=0,a="";for(;s=t.exec(i);)r!==s.index&&(a+=i.substring(r,s.index)),a+=e.get(s[0].charCodeAt(0)),r=s.index+1;return a+i.substring(r)}}const T_=E_(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),y_=E_(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),aU=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),oU=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),lU=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function uU(t){return t.replace(/"/g,"&quot;")}function cU(t,e){var n;if(!t)return;const i=((n=e.encodeEntities)!==null&&n!==void 0?n:e.decodeEntities)===!1?uU:e.xmlMode||e.encodeEntities!=="utf8"?g_:T_;return Object.keys(t).map(s=>{var r,a;const o=(r=t[s])!==null&&r!==void 0?r:"";return e.xmlMode==="foreign"&&(s=(a=oU.get(s))!==null&&a!==void 0?a:s),!e.emptyAttrs&&!e.xmlMode&&o===""?s:`${s}="${i(o)}"`}).join(" ")}const bb=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function qf(t,e={}){const n="length"in t?t:[t];let i="";for(let s=0;s<n.length;s++)i+=dU(n[s],e);return i}function dU(t,e){switch(t.type){case V8:return qf(t.children,e);case X8:case j8:return mU(t);case W8:return TU(t);case q8:return EU(t);case z8:case K8:case Y8:return pU(t,e);case G8:return gU(t,e)}}const fU=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),hU=new Set(["svg","math"]);function pU(t,e){var n;e.xmlMode==="foreign"&&(t.name=(n=aU.get(t.name))!==null&&n!==void 0?n:t.name,t.parent&&fU.has(t.parent.name)&&(e={...e,xmlMode:!1})),!e.xmlMode&&hU.has(t.name)&&(e={...e,xmlMode:"foreign"});let i=`<${t.name}`;const s=cU(t.attribs,e);return s&&(i+=` ${s}`),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&bb.has(t.name))?(e.xmlMode||(i+=" "),i+="/>"):(i+=">",t.children.length>0&&(i+=qf(t.children,e)),(e.xmlMode||!bb.has(t.name))&&(i+=`</${t.name}>`)),i}function mU(t){return`<${t.data}>`}function gU(t,e){var n;let i=t.data||"";return((n=e.encodeEntities)!==null&&n!==void 0?n:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&lU.has(t.parent.name))&&(i=e.xmlMode||e.encodeEntities!=="utf8"?g_(i):y_(i)),i}function EU(t){return`<![CDATA[${t.children[0].data}]]>`}function TU(t){return`<!--${t.data}-->`}function v_(t,e){return qf(t,e)}function yU(t,e){return ft(t)?t.children.map(n=>v_(n,e)).join(""):""}function kc(t){return Array.isArray(t)?t.map(kc).join(""):Te(t)?t.name==="br"?`
`:kc(t.children):Kf(t)?kc(t.children):hi(t)?t.data:""}function Wa(t){return Array.isArray(t)?t.map(Wa).join(""):ft(t)&&!Yf(t)?Wa(t.children):hi(t)?t.data:""}function kd(t){return Array.isArray(t)?t.map(kd).join(""):ft(t)&&(t.type===Ie.Tag||Kf(t))?kd(t.children):hi(t)?t.data:""}function Xf(t){return ft(t)?t.children:[]}function b_(t){return t.parent||null}function x_(t){const e=b_(t);if(e!=null)return Xf(e);const n=[t];let{prev:i,next:s}=t;for(;i!=null;)n.unshift(i),{prev:i}=i;for(;s!=null;)n.push(s),{next:s}=s;return n}function vU(t,e){var n;return(n=t.attribs)===null||n===void 0?void 0:n[e]}function bU(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}function xU(t){return t.name}function l1(t){let{next:e}=t;for(;e!==null&&!Te(e);)({next:e}=e);return e}function u1(t){let{prev:e}=t;for(;e!==null&&!Te(e);)({prev:e}=e);return e}function Dr(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){const e=t.parent.children,n=e.lastIndexOf(t);n>=0&&e.splice(n,1)}t.next=null,t.prev=null,t.parent=null}function SU(t,e){const n=e.prev=t.prev;n&&(n.next=e);const i=e.next=t.next;i&&(i.prev=e);const s=e.parent=t.parent;if(s){const r=s.children;r[r.lastIndexOf(t)]=e,t.parent=null}}function AU(t,e){if(Dr(e),e.next=null,e.parent=t,t.children.push(e)>1){const n=t.children[t.children.length-2];n.next=e,e.prev=n}else e.prev=null}function CU(t,e){Dr(e);const{parent:n}=t,i=t.next;if(e.next=i,e.prev=t,t.next=e,e.parent=n,i){if(i.prev=e,n){const s=n.children;s.splice(s.lastIndexOf(i),0,e)}}else n&&n.children.push(e)}function wU(t,e){if(Dr(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){const n=t.children[1];n.prev=e,e.next=n}else e.next=null}function LU(t,e){Dr(e);const{parent:n}=t;if(n){const i=n.children;i.splice(i.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=n,e.prev=t.prev,e.next=t,t.prev=e}function Qf(t,e,n=!0,i=1/0){return c1(t,Array.isArray(e)?e:[e],n,i)}function c1(t,e,n,i){const s=[],r=[e],a=[0];for(;;){if(a[0]>=r[0].length){if(a.length===1)return s;r.shift(),a.shift();continue}const o=r[0][a[0]++];if(t(o)&&(s.push(o),--i<=0))return s;n&&ft(o)&&o.children.length>0&&(a.unshift(0),r.unshift(o.children))}}function IU(t,e){return e.find(t)}function d1(t,e,n=!0){let i=null;for(let s=0;s<e.length&&!i;s++){const r=e[s];if(Te(r))t(r)?i=r:n&&r.children.length>0&&(i=d1(t,r.children,!0));else continue}return i}function S_(t,e){return e.some(n=>Te(n)&&(t(n)||S_(t,n.children)))}function _U(t,e){const n=[],i=[e],s=[0];for(;;){if(s[0]>=i[0].length){if(i.length===1)return n;i.shift(),s.shift();continue}const r=i[0][s[0]++];Te(r)&&(t(r)&&n.push(r),r.children.length>0&&(s.unshift(0),i.unshift(r.children)))}}const Nd={tag_name(t){return typeof t=="function"?e=>Te(e)&&t(e.name):t==="*"?Te:e=>Te(e)&&e.name===t},tag_type(t){return typeof t=="function"?e=>t(e.type):e=>e.type===t},tag_contains(t){return typeof t=="function"?e=>hi(e)&&t(e.data):e=>hi(e)&&e.data===t}};function A_(t,e){return typeof e=="function"?n=>Te(n)&&e(n.attribs[t]):n=>Te(n)&&n.attribs[t]===e}function RU(t,e){return n=>t(n)||e(n)}function C_(t){const e=Object.keys(t).map(n=>{const i=t[n];return Object.prototype.hasOwnProperty.call(Nd,n)?Nd[n](i):A_(n,i)});return e.length===0?null:e.reduce(RU)}function DU(t,e){const n=C_(t);return n?n(e):!0}function PU(t,e,n,i=1/0){const s=C_(t);return s?Qf(s,e,n,i):[]}function kU(t,e,n=!0){return Array.isArray(e)||(e=[e]),d1(A_("id",t),e,n)}function ro(t,e,n=!0,i=1/0){return Qf(Nd.tag_name(t),e,n,i)}function NU(t,e,n=!0,i=1/0){return Qf(Nd.tag_type(t),e,n,i)}function OU(t){let e=t.length;for(;--e>=0;){const n=t[e];if(e>0&&t.lastIndexOf(n,e-1)>=0){t.splice(e,1);continue}for(let i=n.parent;i;i=i.parent)if(t.includes(i)){t.splice(e,1);break}}return t}var Cn;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(Cn||(Cn={}));function w_(t,e){const n=[],i=[];if(t===e)return 0;let s=ft(t)?t:t.parent;for(;s;)n.unshift(s),s=s.parent;for(s=ft(e)?e:e.parent;s;)i.unshift(s),s=s.parent;const r=Math.min(n.length,i.length);let a=0;for(;a<r&&n[a]===i[a];)a++;if(a===0)return Cn.DISCONNECTED;const o=n[a-1],l=o.children,u=n[a],c=i[a];return l.indexOf(u)>l.indexOf(c)?o===e?Cn.FOLLOWING|Cn.CONTAINED_BY:Cn.FOLLOWING:o===t?Cn.PRECEDING|Cn.CONTAINS:Cn.PRECEDING}function ao(t){return t=t.filter((e,n,i)=>!i.includes(e,n+1)),t.sort((e,n)=>{const i=w_(e,n);return i&Cn.PRECEDING?-1:i&Cn.FOLLOWING?1:0}),t}function MU(t){const e=Od(HU,t);return e?e.name==="feed"?FU(e):BU(e):null}function FU(t){var e;const n=t.children,i={type:"atom",items:ro("entry",n).map(a=>{var o;const{children:l}=a,u={media:L_(l)};Yt(u,"id","id",l),Yt(u,"title","title",l);const c=(o=Od("link",l))===null||o===void 0?void 0:o.attribs.href;c&&(u.link=c);const d=ms("summary",l)||ms("content",l);d&&(u.description=d);const f=ms("updated",l);return f&&(u.pubDate=new Date(f)),u})};Yt(i,"id","id",n),Yt(i,"title","title",n);const s=(e=Od("link",n))===null||e===void 0?void 0:e.attribs.href;s&&(i.link=s),Yt(i,"description","subtitle",n);const r=ms("updated",n);return r&&(i.updated=new Date(r)),Yt(i,"author","email",n,!0),i}function BU(t){var e,n;const i=(n=(e=Od("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&n!==void 0?n:[],s={type:t.name.substr(0,3),id:"",items:ro("item",t.children).map(a=>{const{children:o}=a,l={media:L_(o)};Yt(l,"id","guid",o),Yt(l,"title","title",o),Yt(l,"link","link",o),Yt(l,"description","description",o);const u=ms("pubDate",o)||ms("dc:date",o);return u&&(l.pubDate=new Date(u)),l})};Yt(s,"title","title",i),Yt(s,"link","link",i),Yt(s,"description","description",i);const r=ms("lastBuildDate",i);return r&&(s.updated=new Date(r)),Yt(s,"author","managingEditor",i,!0),s}const UU=["url","type","lang"],$U=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function L_(t){return ro("media:content",t).map(e=>{const{attribs:n}=e,i={medium:n.medium,isDefault:!!n.isDefault};for(const s of UU)n[s]&&(i[s]=n[s]);for(const s of $U)n[s]&&(i[s]=parseInt(n[s],10));return n.expression&&(i.expression=n.expression),i})}function Od(t,e){return ro(t,e,!0,1)[0]}function ms(t,e,n=!1){return Wa(ro(t,e,n,1)).trim()}function Yt(t,e,n,i,s=!1){const r=ms(n,i,s);r&&(t[e]=r)}function HU(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}const Zf=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Cn},append:CU,appendChild:AU,compareDocumentPosition:w_,existsOne:S_,filter:Qf,find:c1,findAll:_U,findOne:d1,findOneChild:IU,getAttributeValue:vU,getChildren:Xf,getElementById:kU,getElements:PU,getElementsByTagName:ro,getElementsByTagType:NU,getFeed:MU,getInnerHTML:yU,getName:xU,getOuterHTML:v_,getParent:b_,getSiblings:x_,getText:kc,hasAttrib:bU,hasChildren:ft,innerText:kd,isCDATA:Kf,isComment:Yf,isDocument:Rr,isTag:Te,isText:hi,nextElementSibling:l1,prepend:LU,prependChild:wU,prevElementSibling:u1,removeElement:Dr,removeSubsets:OU,replaceElement:SU,testElement:DU,textContent:Wa,uniqueSort:ao},Symbol.toStringTag,{value:"Module"}));function I_(t,e,n){return t?t(e??t._root.children,null,void 0,n).toString():""}function VU(t,e){return typeof t=="object"&&t!=null&&!("length"in t)&&!("type"in t)}function GU(t,e){const n=VU(t)?(e=t,void 0):t,i={...t1,...this===null||this===void 0?void 0:this._options,...Pm(e??{})};return I_(this,n,i)}function jU(t){const e={...this._options,xmlMode:!0};return I_(this,t,e)}function Ml(t){const e=t||(this?this.root():[]);let n="";for(let i=0;i<e.length;i++)n+=Wa(e[i]);return n}function WU(t,e,n=typeof e=="boolean"?e:!1){if(!t||typeof t!="string")return null;typeof e=="boolean"&&(n=e);const i=this.load(t,t1,!1);return n||i("script").remove(),i.root()[0].children.slice()}function zU(){return this(this._root)}function __(t,e){if(e===t)return!1;let n=e;for(;n&&n!==n.parent;)if(n=n.parent,n===t)return!0;return!1}function KU(t,e){if(!xb(t)||!xb(e))return;let n=t.length;const i=+e.length;for(let s=0;s<i;s++)t[n++]=e[s];return t.length=n,t}function xb(t){if(Array.isArray(t))return!0;if(typeof t!="object"||!Object.prototype.hasOwnProperty.call(t,"length")||typeof t.length!="number"||t.length<0)return!1;for(let e=0;e<t.length;e++)if(!(e in t))return!1;return!0}const YU=Object.freeze(Object.defineProperty({__proto__:null,contains:__,html:GU,merge:KU,parseHTML:WU,root:zU,text:Ml,xml:jU},Symbol.toStringTag,{value:"Module"}));function pi(t){return t.cheerio!=null}function qU(t){return t.replace(/[_.-](\w|$)/g,(e,n)=>n.toUpperCase())}function XU(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function Ye(t,e){const n=t.length;for(let i=0;i<n;i++)e(t[i],i);return t}function Mm(t){const e="length"in t?Array.prototype.map.call(t,i=>Pd(i,!0)):[Pd(t,!0)],n=new br(e);return e.forEach(i=>{i.parent=n}),e}var Qs;(function(t){t[t.LowerA=97]="LowerA",t[t.LowerZ=122]="LowerZ",t[t.UpperA=65]="UpperA",t[t.UpperZ=90]="UpperZ",t[t.Exclamation=33]="Exclamation"})(Qs||(Qs={}));function Fm(t){const e=t.indexOf("<");if(e<0||e>t.length-3)return!1;const n=t.charCodeAt(e+1);return(n>=Qs.LowerA&&n<=Qs.LowerZ||n>=Qs.UpperA&&n<=Qs.UpperZ||n===Qs.Exclamation)&&t.includes(">",e+2)}const Ta=Object.prototype.hasOwnProperty,Fl=/\s+/,E0="data-",Sb={null:null,true:!0,false:!1},f1=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,QU=/^{[^]*}$|^\[[^]*]$/;function Md(t,e,n){var i;if(!(!t||!Te(t))){if((i=t.attribs)!==null&&i!==void 0||(t.attribs={}),!e)return t.attribs;if(Ta.call(t.attribs,e))return!n&&f1.test(e)?e:t.attribs[e];if(t.name==="option"&&e==="value")return Ml(t.children);if(t.name==="input"&&(t.attribs.type==="radio"||t.attribs.type==="checkbox")&&e==="value")return"on"}}function ya(t,e,n){n===null?R_(t,e):t.attribs[e]=`${n}`}function ZU(t,e){if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t!="string")throw new Error("Bad combination of arguments.");return Ye(this,(n,i)=>{Te(n)&&ya(n,t,e.call(n,i,n.attribs[t]))})}return Ye(this,n=>{Te(n)&&(typeof t=="object"?Object.keys(t).forEach(i=>{const s=t[i];ya(n,i,s)}):ya(n,t,e))})}return arguments.length>1?this:Md(this[0],t,this.options.xmlMode)}function Ab(t,e,n){return e in t?t[e]:!n&&f1.test(e)?Md(t,e,!1)!==void 0:Md(t,e,n)}function T0(t,e,n,i){e in t?t[e]=n:ya(t,e,!i&&f1.test(e)?n?"":null:`${n}`)}function JU(t,e){var n;if(typeof t=="string"&&e===void 0){const i=this[0];if(!i||!Te(i))return;switch(t){case"style":{const s=this.css(),r=Object.keys(s);return r.forEach((a,o)=>{s[o]=a}),s.length=r.length,s}case"tagName":case"nodeName":return i.name.toUpperCase();case"href":case"src":{const s=(n=i.attribs)===null||n===void 0?void 0:n[t];return typeof URL<"u"&&(t==="href"&&(i.tagName==="a"||i.name==="link")||t==="src"&&(i.tagName==="img"||i.tagName==="iframe"||i.tagName==="audio"||i.tagName==="video"||i.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return kd(i);case"textContent":return Wa(i);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return Ab(i,t,this.options.xmlMode)}}if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t=="object")throw new Error("Bad combination of arguments.");return Ye(this,(i,s)=>{Te(i)&&T0(i,t,e.call(i,s,Ab(i,t,this.options.xmlMode)),this.options.xmlMode)})}return Ye(this,i=>{Te(i)&&(typeof t=="object"?Object.keys(t).forEach(s=>{const r=t[s];T0(i,s,r,this.options.xmlMode)}):T0(i,t,e,this.options.xmlMode))})}}function Cb(t,e,n){var i;const s=t;(i=s.data)!==null&&i!==void 0||(s.data={}),typeof e=="object"?Object.assign(s.data,e):typeof e=="string"&&n!==void 0&&(s.data[e]=n)}function wb(t,e){let n,i,s;e==null?(n=Object.keys(t.attribs).filter(r=>r.startsWith(E0)),i=n.map(r=>qU(r.slice(E0.length)))):(n=[E0+XU(e)],i=[e]);for(let r=0;r<n.length;++r){const a=n[r],o=i[r];if(Ta.call(t.attribs,a)&&!Ta.call(t.data,o)){if(s=t.attribs[a],Ta.call(Sb,s))s=Sb[s];else if(s===String(Number(s)))s=Number(s);else if(QU.test(s))try{s=JSON.parse(s)}catch{}t.data[o]=s}}return e==null?t.data:s}function e$(t,e){var n;const i=this[0];if(!i||!Te(i))return;const s=i;return(n=s.data)!==null&&n!==void 0||(s.data={}),t?typeof t=="object"||e!==void 0?(Ye(this,r=>{Te(r)&&(typeof t=="object"?Cb(r,t):Cb(r,t,e))}),this):Ta.call(s.data,t)?s.data[t]:wb(s,t):wb(s)}function t$(t){const e=arguments.length===0,n=this[0];if(!n||!Te(n))return e?void 0:this;switch(n.name){case"textarea":return this.text(t);case"select":{const i=this.find("option:selected");if(!e){if(this.attr("multiple")==null&&typeof t=="object")return this;this.find("option").removeAttr("selected");const s=typeof t!="object"?[t]:t;for(let r=0;r<s.length;r++)this.find(`option[value="${s[r]}"]`).attr("selected","");return this}return this.attr("multiple")?i.toArray().map(s=>Ml(s.children)):i.attr("value")}case"input":case"option":return e?this.attr("value"):this.attr("value",t)}}function R_(t,e){!t.attribs||!Ta.call(t.attribs,e)||delete t.attribs[e]}function Fd(t){return t?t.trim().split(Fl):[]}function n$(t){const e=Fd(t);for(let n=0;n<e.length;n++)Ye(this,i=>{Te(i)&&R_(i,e[n])});return this}function i$(t){return this.toArray().some(e=>{const n=Te(e)&&e.attribs.class;let i=-1;if(n&&t.length)for(;(i=n.indexOf(t,i+1))>-1;){const s=i+t.length;if((i===0||Fl.test(n[i-1]))&&(s===n.length||Fl.test(n[s])))return!0}return!1})}function D_(t){if(typeof t=="function")return Ye(this,(i,s)=>{if(Te(i)){const r=i.attribs.class||"";D_.call([i],t.call(i,s,r))}});if(!t||typeof t!="string")return this;const e=t.split(Fl),n=this.length;for(let i=0;i<n;i++){const s=this[i];if(!Te(s))continue;const r=Md(s,"class",!1);if(!r)ya(s,"class",e.join(" ").trim());else{let a=` ${r} `;for(let o=0;o<e.length;o++){const l=`${e[o]} `;a.includes(` ${l}`)||(a+=l)}ya(s,"class",a.trim())}}return this}function P_(t){if(typeof t=="function")return Ye(this,(s,r)=>{Te(s)&&P_.call([s],t.call(s,r,s.attribs.class||""))});const e=Fd(t),n=e.length,i=arguments.length===0;return Ye(this,s=>{if(Te(s))if(i)s.attribs.class="";else{const r=Fd(s.attribs.class);let a=!1;for(let o=0;o<n;o++){const l=r.indexOf(e[o]);l>=0&&(r.splice(l,1),a=!0,o--)}a&&(s.attribs.class=r.join(" "))}})}function k_(t,e){if(typeof t=="function")return Ye(this,(a,o)=>{Te(a)&&k_.call([a],t.call(a,o,a.attribs.class||"",e),e)});if(!t||typeof t!="string")return this;const n=t.split(Fl),i=n.length,s=typeof e=="boolean"?e?1:-1:0,r=this.length;for(let a=0;a<r;a++){const o=this[a];if(!Te(o))continue;const l=Fd(o.attribs.class);for(let u=0;u<i;u++){const c=l.indexOf(n[u]);s>=0&&c<0?l.push(n[u]):s<=0&&c>=0&&l.splice(c,1)}o.attribs.class=l.join(" ")}return this}const s$=Object.freeze(Object.defineProperty({__proto__:null,addClass:D_,attr:ZU,data:e$,hasClass:i$,prop:JU,removeAttr:n$,removeClass:P_,toggleClass:k_,val:t$},Symbol.toStringTag,{value:"Module"}));var fe;(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(fe||(fe={}));var st;(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(st||(st={}));const Lb=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,r$=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,a$=new Map([[126,st.Element],[94,st.Start],[36,st.End],[42,st.Any],[33,st.Not],[124,st.Hyphen]]),o$=new Set(["has","not","matches","is","where","host","host-context"]);function Qo(t){switch(t.type){case fe.Adjacent:case fe.Child:case fe.Descendant:case fe.Parent:case fe.Sibling:case fe.ColumnCombinator:return!0;default:return!1}}const l$=new Set(["contains","icontains"]);function u$(t,e,n){const i=parseInt(e,16)-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)}function Ao(t){return t.replace(r$,u$)}function y0(t){return t===39||t===34}function Ib(t){return t===32||t===9||t===10||t===12||t===13}function Jf(t){const e=[],n=N_(e,`${t}`,0);if(n<t.length)throw new Error(`Unmatched selector: ${t.slice(n)}`);return e}function N_(t,e,n){let i=[];function s(f){const h=e.slice(n+f).match(Lb);if(!h)throw new Error(`Expected name, found ${e.slice(n)}`);const[p]=h;return n+=f+p.length,Ao(p)}function r(f){for(n+=f;n<e.length&&Ib(e.charCodeAt(n));)n++}function a(){n+=1;const f=n;let h=1;for(;h>0&&n<e.length;n++)e.charCodeAt(n)===40&&!o(n)?h++:e.charCodeAt(n)===41&&!o(n)&&h--;if(h)throw new Error("Parenthesis not matched");return Ao(e.slice(f,n-1))}function o(f){let h=0;for(;e.charCodeAt(--f)===92;)h++;return(h&1)===1}function l(){if(i.length>0&&Qo(i[i.length-1]))throw new Error("Did not expect successive traversals.")}function u(f){if(i.length>0&&i[i.length-1].type===fe.Descendant){i[i.length-1].type=f;return}l(),i.push({type:f})}function c(f,h){i.push({type:fe.Attribute,name:f,action:h,value:s(1),namespace:null,ignoreCase:"quirks"})}function d(){if(i.length&&i[i.length-1].type===fe.Descendant&&i.pop(),i.length===0)throw new Error("Empty sub-selector");t.push(i)}if(r(0),e.length===n)return n;e:for(;n<e.length;){const f=e.charCodeAt(n);switch(f){case 32:case 9:case 10:case 12:case 13:{(i.length===0||i[0].type!==fe.Descendant)&&(l(),i.push({type:fe.Descendant})),r(1);break}case 62:{u(fe.Child),r(1);break}case 60:{u(fe.Parent),r(1);break}case 126:{u(fe.Sibling),r(1);break}case 43:{u(fe.Adjacent),r(1);break}case 46:{c("class",st.Element);break}case 35:{c("id",st.Equals);break}case 91:{r(1);let h,p=null;e.charCodeAt(n)===124?h=s(1):e.startsWith("*|",n)?(p="*",h=s(2)):(h=s(0),e.charCodeAt(n)===124&&e.charCodeAt(n+1)!==61&&(p=h,h=s(1))),r(0);let g=st.Exists;const v=a$.get(e.charCodeAt(n));if(v){if(g=v,e.charCodeAt(n+1)!==61)throw new Error("Expected `=`");r(2)}else e.charCodeAt(n)===61&&(g=st.Equals,r(1));let E="",y=null;if(g!=="exists"){if(y0(e.charCodeAt(n))){const x=e.charCodeAt(n);let w=n+1;for(;w<e.length&&(e.charCodeAt(w)!==x||o(w));)w+=1;if(e.charCodeAt(w)!==x)throw new Error("Attribute value didn't end");E=Ao(e.slice(n+1,w)),n=w+1}else{const x=n;for(;n<e.length&&(!Ib(e.charCodeAt(n))&&e.charCodeAt(n)!==93||o(n));)n+=1;E=Ao(e.slice(x,n))}r(0);const b=e.charCodeAt(n)|32;b===115?(y=!1,r(1)):b===105&&(y=!0,r(1))}if(e.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const T={type:fe.Attribute,name:h,action:g,value:E,namespace:p,ignoreCase:y};i.push(T);break}case 58:{if(e.charCodeAt(n+1)===58){i.push({type:fe.PseudoElement,name:s(2).toLowerCase(),data:e.charCodeAt(n)===40?a():null});continue}const h=s(1).toLowerCase();let p=null;if(e.charCodeAt(n)===40)if(o$.has(h)){if(y0(e.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${h} cannot be quoted`);if(p=[],n=N_(p,e,n+1),e.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${h} (${e})`);n+=1}else{if(p=a(),l$.has(h)){const g=p.charCodeAt(0);g===p.charCodeAt(p.length-1)&&y0(g)&&(p=p.slice(1,-1))}p=Ao(p)}i.push({type:fe.Pseudo,name:h,data:p});break}case 44:{d(),i=[],r(1);break}default:{if(e.startsWith("/*",n)){const g=e.indexOf("*/",n+2);if(g<0)throw new Error("Comment was not terminated");n=g+2,i.length===0&&r(0);break}let h=null,p;if(f===42)n+=1,p="*";else if(f===124){if(p="",e.charCodeAt(n+1)===124){u(fe.ColumnCombinator),r(2);break}}else if(Lb.test(e.slice(n)))p=s(0);else break e;e.charCodeAt(n)===124&&e.charCodeAt(n+1)!==124&&(h=p,e.charCodeAt(n+1)===42?(p="*",n+=2):p=s(1)),i.push(p==="*"?{type:fe.Universal,namespace:h}:{type:fe.Tag,name:p,namespace:h})}}}return d(),n}var Bd={trueFunc:function(){return!0},falseFunc:function(){return!1}};const xe=zl(Bd),O_=new Map([[fe.Universal,50],[fe.Tag,30],[fe.Attribute,1],[fe.Pseudo,0]]);function h1(t){return!O_.has(t.type)}const c$=new Map([[st.Exists,10],[st.Equals,8],[st.Not,7],[st.Start,6],[st.End,6],[st.Any,5]]);function d$(t){const e=t.map(M_);for(let n=1;n<t.length;n++){const i=e[n];if(!(i<0))for(let s=n-1;s>=0&&i<e[s];s--){const r=t[s+1];t[s+1]=t[s],t[s]=r,e[s+1]=e[s],e[s]=i}}}function M_(t){var e,n;let i=(e=O_.get(t.type))!==null&&e!==void 0?e:-1;return t.type===fe.Attribute?(i=(n=c$.get(t.action))!==null&&n!==void 0?n:4,t.action===st.Equals&&t.name==="id"&&(i=9),t.ignoreCase&&(i>>=1)):t.type===fe.Pseudo&&(t.data?t.name==="has"||t.name==="contains"?i=0:Array.isArray(t.data)?(i=Math.min(...t.data.map(s=>Math.min(...s.map(M_)))),i<0&&(i=0)):i=2:i=3),i}const f$=/[-[\]{}()*+?.,\\^$|#\s]/g;function _b(t){return t.replace(f$,"\\$&")}const h$=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Gs(t,e){return typeof t.ignoreCase=="boolean"?t.ignoreCase:t.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&h$.has(t.name)}const p$={equals(t,e,n){const{adapter:i}=n,{name:s}=e;let{value:r}=e;return Gs(e,n)?(r=r.toLowerCase(),a=>{const o=i.getAttributeValue(a,s);return o!=null&&o.length===r.length&&o.toLowerCase()===r&&t(a)}):a=>i.getAttributeValue(a,s)===r&&t(a)},hyphen(t,e,n){const{adapter:i}=n,{name:s}=e;let{value:r}=e;const a=r.length;return Gs(e,n)?(r=r.toLowerCase(),function(l){const u=i.getAttributeValue(l,s);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a).toLowerCase()===r&&t(l)}):function(l){const u=i.getAttributeValue(l,s);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a)===r&&t(l)}},element(t,e,n){const{adapter:i}=n,{name:s,value:r}=e;if(/\s/.test(r))return xe.falseFunc;const a=new RegExp(`(?:^|\\s)${_b(r)}(?:$|\\s)`,Gs(e,n)?"i":"");return function(l){const u=i.getAttributeValue(l,s);return u!=null&&u.length>=r.length&&a.test(u)&&t(l)}},exists(t,{name:e},{adapter:n}){return i=>n.hasAttrib(i,e)&&t(i)},start(t,e,n){const{adapter:i}=n,{name:s}=e;let{value:r}=e;const a=r.length;return a===0?xe.falseFunc:Gs(e,n)?(r=r.toLowerCase(),o=>{const l=i.getAttributeValue(o,s);return l!=null&&l.length>=a&&l.substr(0,a).toLowerCase()===r&&t(o)}):o=>{var l;return!!(!((l=i.getAttributeValue(o,s))===null||l===void 0)&&l.startsWith(r))&&t(o)}},end(t,e,n){const{adapter:i}=n,{name:s}=e;let{value:r}=e;const a=-r.length;return a===0?xe.falseFunc:Gs(e,n)?(r=r.toLowerCase(),o=>{var l;return((l=i.getAttributeValue(o,s))===null||l===void 0?void 0:l.substr(a).toLowerCase())===r&&t(o)}):o=>{var l;return!!(!((l=i.getAttributeValue(o,s))===null||l===void 0)&&l.endsWith(r))&&t(o)}},any(t,e,n){const{adapter:i}=n,{name:s,value:r}=e;if(r==="")return xe.falseFunc;if(Gs(e,n)){const a=new RegExp(_b(r),"i");return function(l){const u=i.getAttributeValue(l,s);return u!=null&&u.length>=r.length&&a.test(u)&&t(l)}}return a=>{var o;return!!(!((o=i.getAttributeValue(a,s))===null||o===void 0)&&o.includes(r))&&t(a)}},not(t,e,n){const{adapter:i}=n,{name:s}=e;let{value:r}=e;return r===""?a=>!!i.getAttributeValue(a,s)&&t(a):Gs(e,n)?(r=r.toLowerCase(),a=>{const o=i.getAttributeValue(a,s);return(o==null||o.length!==r.length||o.toLowerCase()!==r)&&t(a)}):a=>i.getAttributeValue(a,s)!==r&&t(a)}},m$=new Set([9,10,12,13,32]),Rb=48,g$=57;function E$(t){if(t=t.trim().toLowerCase(),t==="even")return[2,0];if(t==="odd")return[2,1];let e=0,n=0,i=r(),s=a();if(e<t.length&&t.charAt(e)==="n"&&(e++,n=i*(s??1),o(),e<t.length?(i=r(),o(),s=a()):i=s=0),s===null||e<t.length)throw new Error(`n-th rule couldn't be parsed ('${t}')`);return[n,i*s];function r(){return t.charAt(e)==="-"?(e++,-1):(t.charAt(e)==="+"&&e++,1)}function a(){const l=e;let u=0;for(;e<t.length&&t.charCodeAt(e)>=Rb&&t.charCodeAt(e)<=g$;)u=u*10+(t.charCodeAt(e)-Rb),e++;return e===l?null:u}function o(){for(;e<t.length&&m$.has(t.charCodeAt(e));)e++}}function T$(t){const e=t[0],n=t[1]-1;if(n<0&&e<=0)return xe.falseFunc;if(e===-1)return r=>r<=n;if(e===0)return r=>r===n;if(e===1)return n<0?xe.trueFunc:r=>r>=n;const i=Math.abs(e),s=(n%i+i)%i;return e>1?r=>r>=n&&r%i===s:r=>r<=n&&r%i===s}function Wu(t){return T$(E$(t))}function zu(t,e){return n=>{const i=e.getParent(n);return i!=null&&e.isTag(i)&&t(n)}}const Bm={contains(t,e,{adapter:n}){return function(s){return t(s)&&n.getText(s).includes(e)}},icontains(t,e,{adapter:n}){const i=e.toLowerCase();return function(r){return t(r)&&n.getText(r).toLowerCase().includes(i)}},"nth-child"(t,e,{adapter:n,equals:i}){const s=Wu(e);return s===xe.falseFunc?xe.falseFunc:s===xe.trueFunc?zu(t,n):function(a){const o=n.getSiblings(a);let l=0;for(let u=0;u<o.length&&!i(a,o[u]);u++)n.isTag(o[u])&&l++;return s(l)&&t(a)}},"nth-last-child"(t,e,{adapter:n,equals:i}){const s=Wu(e);return s===xe.falseFunc?xe.falseFunc:s===xe.trueFunc?zu(t,n):function(a){const o=n.getSiblings(a);let l=0;for(let u=o.length-1;u>=0&&!i(a,o[u]);u--)n.isTag(o[u])&&l++;return s(l)&&t(a)}},"nth-of-type"(t,e,{adapter:n,equals:i}){const s=Wu(e);return s===xe.falseFunc?xe.falseFunc:s===xe.trueFunc?zu(t,n):function(a){const o=n.getSiblings(a);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(i(a,c))break;n.isTag(c)&&n.getName(c)===n.getName(a)&&l++}return s(l)&&t(a)}},"nth-last-of-type"(t,e,{adapter:n,equals:i}){const s=Wu(e);return s===xe.falseFunc?xe.falseFunc:s===xe.trueFunc?zu(t,n):function(a){const o=n.getSiblings(a);let l=0;for(let u=o.length-1;u>=0;u--){const c=o[u];if(i(a,c))break;n.isTag(c)&&n.getName(c)===n.getName(a)&&l++}return s(l)&&t(a)}},root(t,e,{adapter:n}){return i=>{const s=n.getParent(i);return(s==null||!n.isTag(s))&&t(i)}},scope(t,e,n,i){const{equals:s}=n;return!i||i.length===0?Bm.root(t,e,n):i.length===1?r=>s(i[0],r)&&t(r):r=>i.includes(r)&&t(r)},hover:v0("isHovered"),visited:v0("isVisited"),active:v0("isActive")};function v0(t){return function(n,i,{adapter:s}){const r=s[t];return typeof r!="function"?xe.falseFunc:function(o){return r(o)&&n(o)}}}const Db={empty(t,{adapter:e}){return!e.getChildren(t).some(n=>e.isTag(n)||e.getText(n)!=="")},"first-child"(t,{adapter:e,equals:n}){if(e.prevElementSibling)return e.prevElementSibling(t)==null;const i=e.getSiblings(t).find(s=>e.isTag(s));return i!=null&&n(t,i)},"last-child"(t,{adapter:e,equals:n}){const i=e.getSiblings(t);for(let s=i.length-1;s>=0;s--){if(n(t,i[s]))return!0;if(e.isTag(i[s]))break}return!1},"first-of-type"(t,{adapter:e,equals:n}){const i=e.getSiblings(t),s=e.getName(t);for(let r=0;r<i.length;r++){const a=i[r];if(n(t,a))return!0;if(e.isTag(a)&&e.getName(a)===s)break}return!1},"last-of-type"(t,{adapter:e,equals:n}){const i=e.getSiblings(t),s=e.getName(t);for(let r=i.length-1;r>=0;r--){const a=i[r];if(n(t,a))return!0;if(e.isTag(a)&&e.getName(a)===s)break}return!1},"only-of-type"(t,{adapter:e,equals:n}){const i=e.getName(t);return e.getSiblings(t).every(s=>n(t,s)||!e.isTag(s)||e.getName(s)!==i)},"only-child"(t,{adapter:e,equals:n}){return e.getSiblings(t).every(i=>n(t,i)||!e.isTag(i))}};function Pb(t,e,n,i){if(n===null){if(t.length>i)throw new Error(`Pseudo-class :${e} requires an argument`)}else if(t.length===i)throw new Error(`Pseudo-class :${e} doesn't have any arguments`)}const y$={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},F_={};function v$(t,e){return t===xe.falseFunc?xe.falseFunc:n=>e.isTag(n)&&t(n)}function B_(t,e){const n=e.getSiblings(t);if(n.length<=1)return[];const i=n.indexOf(t);return i<0||i===n.length-1?[]:n.slice(i+1).filter(e.isTag)}function Um(t){return{xmlMode:!!t.xmlMode,lowerCaseAttributeNames:!!t.lowerCaseAttributeNames,lowerCaseTags:!!t.lowerCaseTags,quirksMode:!!t.quirksMode,cacheResults:!!t.cacheResults,pseudos:t.pseudos,adapter:t.adapter,equals:t.equals}}const b0=(t,e,n,i,s)=>{const r=s(e,Um(n),i);return r===xe.trueFunc?t:r===xe.falseFunc?xe.falseFunc:a=>r(a)&&t(a)},x0={is:b0,matches:b0,where:b0,not(t,e,n,i,s){const r=s(e,Um(n),i);return r===xe.falseFunc?t:r===xe.trueFunc?xe.falseFunc:a=>!r(a)&&t(a)},has(t,e,n,i,s){const{adapter:r}=n,a=Um(n);a.relativeSelector=!0;const o=e.some(c=>c.some(h1))?[F_]:void 0,l=s(e,a,o);if(l===xe.falseFunc)return xe.falseFunc;const u=v$(l,r);if(o&&l!==xe.trueFunc){const{shouldTestNextSiblings:c=!1}=l;return d=>{if(!t(d))return!1;o[0]=d;const f=r.getChildren(d),h=c?[...f,...B_(d,r)]:f;return r.existsOne(u,h)}}return c=>t(c)&&r.existsOne(u,r.getChildren(c))}};function b$(t,e,n,i,s){var r;const{name:a,data:o}=e;if(Array.isArray(o)){if(!(a in x0))throw new Error(`Unknown pseudo-class :${a}(${o})`);return x0[a](t,o,n,i,s)}const l=(r=n.pseudos)===null||r===void 0?void 0:r[a],u=typeof l=="string"?l:y$[a];if(typeof u=="string"){if(o!=null)throw new Error(`Pseudo ${a} doesn't have any arguments`);const c=Jf(u);return x0.is(t,c,n,i,s)}if(typeof l=="function")return Pb(l,a,o,1),c=>l(c,o)&&t(c);if(a in Bm)return Bm[a](t,o,n,i);if(a in Db){const c=Db[a];return Pb(c,a,o,2),d=>c(d,n,o)&&t(d)}throw new Error(`Unknown pseudo-class :${a}`)}function S0(t,e){const n=e.getParent(t);return n&&e.isTag(n)?n:null}function x$(t,e,n,i,s){const{adapter:r,equals:a}=n;switch(e.type){case fe.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case fe.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case fe.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),p$[e.action](t,e,n)}case fe.Pseudo:return b$(t,e,n,i,s);case fe.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=e;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(u){return r.getName(u)===o&&t(u)}}case fe.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(u){let c=u;for(;c=S0(c,r);)if(t(c))return!0;return!1};const o=new WeakSet;return function(u){let c=u;for(;c=S0(c,r);)if(!o.has(c)){if(r.isTag(c)&&t(c))return!0;o.add(c)}return!1}}case"_flexibleDescendant":return function(l){let u=l;do if(t(u))return!0;while(u=S0(u,r));return!1};case fe.Parent:return function(l){return r.getChildren(l).some(u=>r.isTag(u)&&t(u))};case fe.Child:return function(l){const u=r.getParent(l);return u!=null&&r.isTag(u)&&t(u)};case fe.Sibling:return function(l){const u=r.getSiblings(l);for(let c=0;c<u.length;c++){const d=u[c];if(a(l,d))break;if(r.isTag(d)&&t(d))return!0}return!1};case fe.Adjacent:return r.prevElementSibling?function(l){const u=r.prevElementSibling(l);return u!=null&&t(u)}:function(l){const u=r.getSiblings(l);let c;for(let d=0;d<u.length;d++){const f=u[d];if(a(l,f))break;r.isTag(f)&&(c=f)}return!!c&&t(c)};case fe.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return t}}}function U_(t){return t.type===fe.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some(e=>e.some(U_)))}const S$={type:fe.Descendant},A$={type:"_flexibleDescendant"},C$={type:fe.Pseudo,name:"scope",data:null};function w$(t,{adapter:e},n){const i=!!(n!=null&&n.every(s=>{const r=e.isTag(s)&&e.getParent(s);return s===F_||r&&e.isTag(r)}));for(const s of t){if(!(s.length>0&&h1(s[0])&&s[0].type!==fe.Descendant))if(i&&!s.some(U_))s.unshift(S$);else continue;s.unshift(C$)}}function $_(t,e,n){var i;t.forEach(d$),n=(i=e.context)!==null&&i!==void 0?i:n;const s=Array.isArray(n),r=n&&(Array.isArray(n)?n:[n]);if(e.relativeSelector!==!1)w$(t,e,r);else if(t.some(l=>l.length>0&&h1(l[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const o=t.map(l=>{if(l.length>=2){const[u,c]=l;u.type!==fe.Pseudo||u.name!=="scope"||(s&&c.type===fe.Descendant?l[1]=A$:(c.type===fe.Adjacent||c.type===fe.Sibling)&&(a=!0))}return L$(l,e,r)}).reduce(I$,xe.falseFunc);return o.shouldTestNextSiblings=a,o}function L$(t,e,n){var i;return t.reduce((s,r)=>s===xe.falseFunc?xe.falseFunc:x$(s,r,e,n,$_),(i=e.rootFunc)!==null&&i!==void 0?i:xe.trueFunc)}function I$(t,e){return e===xe.falseFunc||t===xe.trueFunc?t:t===xe.falseFunc||e===xe.trueFunc?e:function(i){return t(i)||e(i)}}const H_=(t,e)=>t===e,_$={adapter:Zf,equals:H_};function R$(t){var e,n,i,s;const r=t??_$;return(e=r.adapter)!==null&&e!==void 0||(r.adapter=Zf),(n=r.equals)!==null&&n!==void 0||(r.equals=(s=(i=r.adapter)===null||i===void 0?void 0:i.equals)!==null&&s!==void 0?s:H_),r}function D$(t){return function(n,i,s){const r=R$(i);return t(n,r,s)}}const p1=D$($_);function V_(t,e,n=!1){return n&&(t=P$(t,e)),Array.isArray(t)?e.removeSubsets(t):e.getChildren(t)}function P$(t,e){const n=Array.isArray(t)?t.slice(0):[t],i=n.length;for(let s=0;s<i;s++){const r=B_(n[s],e);n.push(...r)}return n}const k$=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function Ud(t){return t.type!=="pseudo"?!1:k$.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(e=>e.some(Ud)):!1}function N$(t,e,n){const i=e!=null?parseInt(e,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(i)?i>=0?i+1:1/0:0;case"lt":return isFinite(i)?i>=0?Math.min(i,n):1/0:0;case"gt":return isFinite(i)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}function O$(t){for(;t.parent;)t=t.parent;return t}function m1(t){const e=[],n=[];for(const i of t)i.some(Ud)?e.push(i):n.push(i);return[n,e]}const M$={type:fe.Universal,namespace:null},F$={type:fe.Pseudo,name:"scope",data:null};function G_(t,e,n={}){return j_([t],e,n)}function j_(t,e,n={}){if(typeof e=="function")return t.some(e);const[i,s]=m1(Jf(e));return i.length>0&&t.some(p1(i,n))||s.some(r=>K_(r,t,n).length>0)}function B$(t,e,n,i){const s=typeof n=="string"?parseInt(n,10):NaN;switch(t){case"first":case"lt":return e;case"last":return e.length>0?[e[e.length-1]]:e;case"nth":case"eq":return isFinite(s)&&Math.abs(s)<e.length?[s<0?e[e.length+s]:e[s]]:[];case"gt":return isFinite(s)?e.slice(s+1):[];case"even":return e.filter((r,a)=>a%2===0);case"odd":return e.filter((r,a)=>a%2===1);case"not":{const r=new Set(z_(n,e,i));return e.filter(a=>!r.has(a))}}}function W_(t,e,n={}){return z_(Jf(t),e,n)}function z_(t,e,n){if(e.length===0)return[];const[i,s]=m1(t);let r;if(i.length){const a=Hm(e,i,n);if(s.length===0)return a;a.length&&(r=new Set(a))}for(let a=0;a<s.length&&(r==null?void 0:r.size)!==e.length;a++){const o=s[a];if((r?e.filter(c=>Te(c)&&!r.has(c)):e).length===0)break;const u=K_(o,e,n);if(u.length)if(r)u.forEach(c=>r.add(c));else{if(a===s.length-1)return u;r=new Set(u)}}return typeof r<"u"?r.size===e.length?e:e.filter(a=>r.has(a)):[]}function K_(t,e,n){var i;if(t.some(Qo)){const s=(i=n.root)!==null&&i!==void 0?i:O$(e[0]),r={...n,context:e,relativeSelector:!1};return t.push(F$),$d(s,t,r,!0,e.length)}return $d(e,t,n,!1,e.length)}function U$(t,e,n={},i=1/0){if(typeof t=="function")return Y_(e,t);const[s,r]=m1(Jf(t)),a=r.map(o=>$d(e,o,n,!0,i));return s.length&&a.push($m(e,s,n,i)),a.length===0?[]:a.length===1?a[0]:ao(a.reduce((o,l)=>[...o,...l]))}function $d(t,e,n,i,s){const r=e.findIndex(Ud),a=e.slice(0,r),o=e[r],l=e.length-1===r?s:1/0,u=N$(o.name,o.data,l);if(u===0)return[];const d=(a.length===0&&!Array.isArray(t)?Xf(t).filter(Te):a.length===0?(Array.isArray(t)?t:[t]).filter(Te):i||a.some(Qo)?$m(t,[a],n,u):Hm(t,[a],n)).slice(0,u);let f=B$(o.name,d,o.data,n);if(f.length===0||e.length===r+1)return f;const h=e.slice(r+1),p=h.some(Qo);if(p){if(Qo(h[0])){const{type:g}=h[0];(g===fe.Sibling||g===fe.Adjacent)&&(f=V_(f,Zf,!0)),h.unshift(M$)}n={...n,relativeSelector:!1,rootFunc:g=>f.includes(g)}}else n.rootFunc&&n.rootFunc!==Bd.trueFunc&&(n={...n,rootFunc:Bd.trueFunc});return h.some(Ud)?$d(f,h,n,!1,s):p?$m(f,[h],n,s):Hm(f,[h],n)}function $m(t,e,n,i){const s=p1(e,n,t);return Y_(t,s,i)}function Y_(t,e,n=1/0){const i=V_(t,Zf,e.shouldTestNextSiblings);return c1(s=>Te(s)&&e(s),i,!0,n)}function Hm(t,e,n){const i=(Array.isArray(t)?t:[t]).filter(Te);if(i.length===0)return i;const s=p1(e,n);return s===Bd.trueFunc?i:i.filter(s)}const $$=/^\s*[~+]/;function H$(t){var e;if(!t)return this._make([]);const n=this.toArray();if(typeof t!="string"){const r=pi(t)?t.toArray():[t];return this._make(r.filter(a=>n.some(o=>__(o,a))))}const i=$$.test(t)?n:this.children().toArray(),s={context:n,root:(e=this._root)===null||e===void 0?void 0:e[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(U$(t,i,s))}function g1(t){return function(e,...n){return function(i){var s;let r=t(e,this);return i&&(r=y1(r,i,this.options.xmlMode,(s=this._root)===null||s===void 0?void 0:s[0])),this._make(this.length>1&&r.length>1?n.reduce((a,o)=>o(a),r):r)}}}const cu=g1((t,e)=>{const n=[];for(let i=0;i<e.length;i++){const s=t(e[i]);n.push(s)}return new Array().concat(...n)}),E1=g1((t,e)=>{const n=[];for(let i=0;i<e.length;i++){const s=t(e[i]);s!==null&&n.push(s)}return n});function T1(t,...e){let n=null;const i=g1((s,r)=>{const a=[];return Ye(r,o=>{for(let l;(l=s(o))&&!(n!=null&&n(l,a.length));o=l)a.push(l)}),a})(t,...e);return function(s,r){n=typeof s=="string"?o=>G_(o,s,this.options):s?du(s):null;const a=i.call(this,r);return n=null,a}}function oo(t){return Array.from(new Set(t))}const V$=E1(({parent:t})=>t&&!Rr(t)?t:null,oo),G$=cu(t=>{const e=[];for(;t.parent&&!Rr(t.parent);)e.push(t.parent),t=t.parent;return e},ao,t=>t.reverse()),j$=T1(({parent:t})=>t&&!Rr(t)?t:null,ao,t=>t.reverse());function W$(t){var e;const n=[];if(!t)return this._make(n);const i={xmlMode:this.options.xmlMode,root:(e=this._root)===null||e===void 0?void 0:e[0]},s=typeof t=="string"?r=>G_(r,t,i):du(t);return Ye(this,r=>{for(;r&&Te(r);){if(s(r,0)){n.includes(r)||n.push(r);break}r=r.parent}}),this._make(n)}const z$=E1(t=>l1(t)),K$=cu(t=>{const e=[];for(;t.next;)t=t.next,Te(t)&&e.push(t);return e},oo),Y$=T1(t=>l1(t),oo),q$=E1(t=>u1(t)),X$=cu(t=>{const e=[];for(;t.prev;)t=t.prev,Te(t)&&e.push(t);return e},oo),Q$=T1(t=>u1(t),oo),Z$=cu(t=>x_(t).filter(e=>Te(e)&&e!==t),ao),J$=cu(t=>Xf(t).filter(Te),oo);function e9(){const t=this.toArray().reduce((e,n)=>ft(n)?e.concat(n.children):e,[]);return this._make(t)}function t9(t){let e=0;const n=this.length;for(;e<n&&t.call(this[e],e,this[e])!==!1;)++e;return this}function n9(t){let e=[];for(let n=0;n<this.length;n++){const i=this[n],s=t.call(i,n,i);s!=null&&(e=e.concat(s))}return this._make(e)}function du(t){return typeof t=="function"?(e,n)=>t.call(e,n,e):pi(t)?e=>Array.prototype.includes.call(t,e):function(e){return t===e}}function i9(t){var e;return this._make(y1(this.toArray(),t,this.options.xmlMode,(e=this._root)===null||e===void 0?void 0:e[0]))}function y1(t,e,n,i){return typeof e=="string"?W_(e,t,{xmlMode:n,root:i}):t.filter(du(e))}function s9(t){const e=this.toArray();return typeof t=="string"?j_(e.filter(Te),t,this.options):t?e.some(du(t)):!1}function r9(t){let e=this.toArray();if(typeof t=="string"){const n=new Set(W_(t,e,this.options));e=e.filter(i=>!n.has(i))}else{const n=du(t);e=e.filter((i,s)=>!n(i,s))}return this._make(e)}function a9(t){return this.filter(typeof t=="string"?`:has(${t})`:(e,n)=>this._make(n).find(t).length>0)}function o9(){return this.length>1?this._make(this[0]):this}function l9(){return this.length>0?this._make(this[this.length-1]):this}function u9(t){var e;return t=+t,t===0&&this.length<=1?this:(t<0&&(t=this.length+t),this._make((e=this[t])!==null&&e!==void 0?e:[]))}function c9(t){return t==null?this.toArray():this[t<0?this.length+t:t]}function d9(){return Array.prototype.slice.call(this)}function f9(t){let e,n;return t==null?(e=this.parent().children(),n=this[0]):typeof t=="string"?(e=this._make(t),n=this[0]):(e=this,n=pi(t)?t[0]:t),Array.prototype.indexOf.call(e,n)}function h9(t,e){return this._make(Array.prototype.slice.call(this,t,e))}function p9(){var t;return(t=this.prevObject)!==null&&t!==void 0?t:this._make([])}function m9(t,e){const n=this._make(t,e),i=ao([...this.get(),...n.get()]);return this._make(i)}function g9(t){return this.prevObject?this.add(t?this.prevObject.filter(t):this.prevObject):this}const E9=Object.freeze(Object.defineProperty({__proto__:null,add:m9,addBack:g9,children:J$,closest:W$,contents:e9,each:t9,end:p9,eq:u9,filter:i9,filterArray:y1,find:H$,first:o9,get:c9,has:a9,index:f9,is:s9,last:l9,map:n9,next:z$,nextAll:K$,nextUntil:Y$,not:r9,parent:V$,parents:G$,parentsUntil:j$,prev:q$,prevAll:X$,prevUntil:Q$,siblings:Z$,slice:h9,toArray:d9},Symbol.toStringTag,{value:"Module"}));function T9(t){return function(n,i,s,r){if(typeof Buffer<"u"&&Buffer.isBuffer(n)&&(n=n.toString()),typeof n=="string")return t(n,i,s,r);const a=n;if(!Array.isArray(a)&&Rr(a))return a;const o=new br([]);return xr(a,o),o}}function xr(t,e){const n=Array.isArray(t)?t:[t];e?e.children=n:e=null;for(let i=0;i<n.length;i++){const s=n[i];s.parent&&s.parent.children!==n&&Dr(s),e?(s.prev=n[i-1]||null,s.next=n[i+1]||null):s.prev=s.next=null,s.parent=e}return e}function y9(t,e){return t==null?[]:pi(t)?e?Mm(t.get()):t.get():Array.isArray(t)?t.reduce((n,i)=>n.concat(this._makeDomArray(i,e)),[]):typeof t=="string"?this._parse(t,this.options,!1,null).children:e?Mm([t]):[t]}function q_(t){return function(...e){const n=this.length-1;return Ye(this,(i,s)=>{if(!ft(i))return;const r=typeof e[0]=="function"?e[0].call(i,s,this._render(i.children)):e,a=this._makeDomArray(r,s<n);t(a,i.children,i)})}}function $s(t,e,n,i,s){var r,a;const o=[e,n,...i],l=e===0?null:t[e-1],u=e+n>=t.length?null:t[e+n];for(let c=0;c<i.length;++c){const d=i[c],f=d.parent;if(f){const p=f.children.indexOf(d);p>-1&&(f.children.splice(p,1),s===f&&e>p&&o[0]--)}d.parent=s,d.prev&&(d.prev.next=(r=d.next)!==null&&r!==void 0?r:null),d.next&&(d.next.prev=(a=d.prev)!==null&&a!==void 0?a:null),d.prev=c===0?l:i[c-1],d.next=c===i.length-1?u:i[c+1]}return l&&(l.next=i[0]),u&&(u.prev=i[i.length-1]),t.splice(...o)}function v9(t){return(pi(t)?t:this._make(t)).append(this),this}function b9(t){return(pi(t)?t:this._make(t)).prepend(this),this}const x9=q_((t,e,n)=>{$s(e,e.length,0,t,n)}),S9=q_((t,e,n)=>{$s(e,0,0,t,n)});function X_(t){return function(e){const n=this.length-1,i=this.parents().last();for(let s=0;s<this.length;s++){const r=this[s],a=typeof e=="function"?e.call(r,s,r):typeof e=="string"&&!Fm(e)?i.find(e).clone():e,[o]=this._makeDomArray(a,s<n);if(!o||!ft(o))continue;let l=o,u=0;for(;u<l.children.length;){const c=l.children[u];Te(c)?(l=c,u=0):u++}t(r,l,[o])}return this}}const A9=X_((t,e,n)=>{const{parent:i}=t;if(!i)return;const s=i.children,r=s.indexOf(t);xr([t],e),$s(s,r,0,n,i)}),C9=X_((t,e,n)=>{ft(t)&&(xr(t.children,e),xr(n,t))});function w9(t){return this.parent(t).not("body").each((e,n)=>{this._make(n).replaceWith(n.children)}),this}function L9(t){const e=this[0];if(e){const n=this._make(typeof t=="function"?t.call(e,0,e):t).insertBefore(e);let i;for(let r=0;r<n.length;r++)n[r].type==="tag"&&(i=n[r]);let s=0;for(;i&&s<i.children.length;){const r=i.children[s];r.type==="tag"?(i=r,s=0):s++}i&&this._make(i).append(this)}return this}function I9(...t){const e=this.length-1;return Ye(this,(n,i)=>{const{parent:s}=n;if(!ft(n)||!s)return;const r=s.children,a=r.indexOf(n);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(n,i,this._render(n.children)):t,l=this._makeDomArray(o,i<e);$s(r,a+1,0,l,s)})}function _9(t){typeof t=="string"&&(t=this._make(t)),this.remove();const e=[];return this._makeDomArray(t).forEach(n=>{const i=this.clone().toArray(),{parent:s}=n;if(!s)return;const r=s.children,a=r.indexOf(n);a<0||($s(r,a+1,0,i,s),e.push(...i))}),this._make(e)}function R9(...t){const e=this.length-1;return Ye(this,(n,i)=>{const{parent:s}=n;if(!ft(n)||!s)return;const r=s.children,a=r.indexOf(n);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(n,i,this._render(n.children)):t,l=this._makeDomArray(o,i<e);$s(r,a,0,l,s)})}function D9(t){const e=this._make(t);this.remove();const n=[];return Ye(e,i=>{const s=this.clone().toArray(),{parent:r}=i;if(!r)return;const a=r.children,o=a.indexOf(i);o<0||($s(a,o,0,s,r),n.push(...s))}),this._make(n)}function P9(t){const e=t?this.filter(t):this;return Ye(e,n=>{Dr(n),n.prev=n.next=n.parent=null}),this}function k9(t){return Ye(this,(e,n)=>{const{parent:i}=e;if(!i)return;const s=i.children,r=typeof t=="function"?t.call(e,n,e):t,a=this._makeDomArray(r);xr(a,null);const o=s.indexOf(e);$s(s,o,1,a,i),a.includes(e)||(e.parent=e.prev=e.next=null)})}function N9(){return Ye(this,t=>{ft(t)&&(t.children.forEach(e=>{e.next=e.prev=e.parent=null}),t.children.length=0)})}function O9(t){if(t===void 0){const e=this[0];return!e||!ft(e)?null:this._render(e.children)}return Ye(this,e=>{if(!ft(e))return;e.children.forEach(i=>{i.next=i.prev=i.parent=null});const n=pi(t)?t.toArray():this._parse(`${t}`,this.options,!1,e).children;xr(n,e)})}function M9(){return this._render(this)}function F9(t){return t===void 0?Ml(this):typeof t=="function"?Ye(this,(e,n)=>this._make(e).text(t.call(e,n,Ml([e])))):Ye(this,e=>{if(!ft(e))return;e.children.forEach(i=>{i.next=i.prev=i.parent=null});const n=new Ol(`${t}`);xr(n,e)})}function B9(){return this._make(Mm(this.get()))}const U9=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:y9,after:I9,append:x9,appendTo:v9,before:R9,clone:B9,empty:N9,html:O9,insertAfter:_9,insertBefore:D9,prepend:S9,prependTo:b9,remove:P9,replaceWith:k9,text:F9,toString:M9,unwrap:w9,wrap:A9,wrapAll:L9,wrapInner:C9},Symbol.toStringTag,{value:"Module"}));function $9(t,e){if(t!=null&&e!=null||typeof t=="object"&&!Array.isArray(t))return Ye(this,(n,i)=>{Te(n)&&Q_(n,t,e,i)});if(this.length!==0)return Z_(this[0],t)}function Q_(t,e,n,i){if(typeof e=="string"){const s=Z_(t),r=typeof n=="function"?n.call(t,i,s[e]):n;r===""?delete s[e]:r!=null&&(s[e]=r),t.attribs.style=H9(s)}else typeof e=="object"&&Object.keys(e).forEach((s,r)=>{Q_(t,s,e[s],r)})}function Z_(t,e){if(!t||!Te(t))return;const n=V9(t.attribs.style);if(typeof e=="string")return n[e];if(Array.isArray(e)){const i={};return e.forEach(s=>{n[s]!=null&&(i[s]=n[s])}),i}return n}function H9(t){return Object.keys(t).reduce((e,n)=>`${e}${e?" ":""}${n}: ${t[n]};`,"")}function V9(t){if(t=(t||"").trim(),!t)return{};const e={};let n;for(const i of t.split(";")){const s=i.indexOf(":");if(s<1||s===i.length-1){const r=i.trimEnd();r.length>0&&n!==void 0&&(e[n]+=`;${r}`)}else n=i.slice(0,s).trim(),e[n]=i.slice(s+1).trim()}return e}const G9=Object.freeze(Object.defineProperty({__proto__:null,css:$9},Symbol.toStringTag,{value:"Module"})),kb="input,select,textarea,keygen",j9=/%20/g,Nb=/\r?\n/g;function W9(){return this.serializeArray().map(n=>`${encodeURIComponent(n.name)}=${encodeURIComponent(n.value)}`).join("&").replace(j9,"+")}function z9(){return this.map((t,e)=>{const n=this._make(e);return Te(e)&&e.name==="form"?n.find(kb).toArray():n.filter(kb).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((t,e)=>{var n;const i=this._make(e),s=i.attr("name"),r=(n=i.val())!==null&&n!==void 0?n:"";return Array.isArray(r)?r.map(a=>({name:s,value:a.replace(Nb,`\r
`)})):{name:s,value:r.replace(Nb,`\r
`)}}).toArray()}const K9=Object.freeze(Object.defineProperty({__proto__:null,serialize:W9,serializeArray:z9},Symbol.toStringTag,{value:"Module"}));class fu{constructor(e,n,i){if(this.length=0,this.options=i,this._root=n,e){for(let s=0;s<e.length;s++)this[s]=e[s];this.length=e.length}}}fu.prototype.cheerio="[cheerio object]";fu.prototype.splice=Array.prototype.splice;fu.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(fu.prototype,s$,E9,U9,G9,K9);function Y9(t,e){return function n(i,s,r=!0){if(i==null)throw new Error("cheerio.load() expects a string");const a={...t1,...Pm(s)},o=t(i,a,r,null);class l extends fu{_make(d,f){const h=u(d,f);return h.prevObject=this,h}_parse(d,f,h,p){return t(d,f,h,p)}_render(d){return e(d,this.options)}}function u(c,d,f=o,h){if(c&&pi(c))return c;const p={...a,...Pm(h)},g=typeof f=="string"?[t(f,p,!1,null)]:"length"in f?f:[f],v=pi(g)?g:new l(g,null,p);if(v._root=v,!c)return new l(void 0,v,p);const E=typeof c=="string"&&Fm(c)?t(c,p,!1,null).children:q9(c)?[c]:Array.isArray(c)?c:void 0,y=new l(E,v,p);if(E)return y;if(typeof c!="string")throw new Error("Unexpected type of selector");let T=c;const b=d?typeof d=="string"?Fm(d)?new l([t(d,p,!1,null)],v,p):(T=`${d} ${T}`,v):pi(d)?d:new l(Array.isArray(d)?d:[d],v,p):v;return b?b.find(T):y}return Object.assign(u,YU,{load:n,_root:o,_options:a,fn:l.prototype,prototype:l.prototype}),u}}function q9(t){return!!t.name||t.type==="root"||t.type==="text"||t.type==="comment"}const X9=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),He="�";var I;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",t[t.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_F=102]="LATIN_SMALL_F",t[t.LATIN_SMALL_X=120]="LATIN_SMALL_X",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",t[t.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(I=I||(I={}));const Gt={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function J_(t){return t>=55296&&t<=57343}function Q9(t){return t>=56320&&t<=57343}function Z9(t,e){return(t-55296)*1024+9216+e}function eR(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function tR(t){return t>=64976&&t<=65007||X9.has(t)}var V;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(V=V||(V={}));const J9=65536;class eH{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=J9,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:n,col:i,offset:s}=this;return{code:e,startLine:n,endLine:n,startCol:i,endCol:i,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Q9(n))return this.pos++,this._addGap(),Z9(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,I.EOF;return this._err(V.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let i=0;i<e.length;i++)if((this.html.charCodeAt(this.pos+i)|32)!==e.charCodeAt(i))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,I.EOF;const i=this.html.charCodeAt(n);return i===I.CARRIAGE_RETURN?I.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,I.EOF;let e=this.html.charCodeAt(this.pos);return e===I.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,I.LINE_FEED):e===I.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,J_(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===I.LINE_FEED||e===I.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){eR(e)?this._err(V.controlCharacterInInputStream):tR(e)&&this._err(V.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var we;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(we=we||(we={}));function nR(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}var K;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(K=K||(K={}));var Is;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Is=Is||(Is={}));var Xt;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Xt=Xt||(Xt={}));var F;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(F=F||(F={}));var m;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SECTION=94]="SECTION",t[t.SELECT=95]="SELECT",t[t.SOURCE=96]="SOURCE",t[t.SMALL=97]="SMALL",t[t.SPAN=98]="SPAN",t[t.STRIKE=99]="STRIKE",t[t.STRONG=100]="STRONG",t[t.STYLE=101]="STYLE",t[t.SUB=102]="SUB",t[t.SUMMARY=103]="SUMMARY",t[t.SUP=104]="SUP",t[t.TABLE=105]="TABLE",t[t.TBODY=106]="TBODY",t[t.TEMPLATE=107]="TEMPLATE",t[t.TEXTAREA=108]="TEXTAREA",t[t.TFOOT=109]="TFOOT",t[t.TD=110]="TD",t[t.TH=111]="TH",t[t.THEAD=112]="THEAD",t[t.TITLE=113]="TITLE",t[t.TR=114]="TR",t[t.TRACK=115]="TRACK",t[t.TT=116]="TT",t[t.U=117]="U",t[t.UL=118]="UL",t[t.SVG=119]="SVG",t[t.VAR=120]="VAR",t[t.WBR=121]="WBR",t[t.XMP=122]="XMP"})(m=m||(m={}));const tH=new Map([[F.A,m.A],[F.ADDRESS,m.ADDRESS],[F.ANNOTATION_XML,m.ANNOTATION_XML],[F.APPLET,m.APPLET],[F.AREA,m.AREA],[F.ARTICLE,m.ARTICLE],[F.ASIDE,m.ASIDE],[F.B,m.B],[F.BASE,m.BASE],[F.BASEFONT,m.BASEFONT],[F.BGSOUND,m.BGSOUND],[F.BIG,m.BIG],[F.BLOCKQUOTE,m.BLOCKQUOTE],[F.BODY,m.BODY],[F.BR,m.BR],[F.BUTTON,m.BUTTON],[F.CAPTION,m.CAPTION],[F.CENTER,m.CENTER],[F.CODE,m.CODE],[F.COL,m.COL],[F.COLGROUP,m.COLGROUP],[F.DD,m.DD],[F.DESC,m.DESC],[F.DETAILS,m.DETAILS],[F.DIALOG,m.DIALOG],[F.DIR,m.DIR],[F.DIV,m.DIV],[F.DL,m.DL],[F.DT,m.DT],[F.EM,m.EM],[F.EMBED,m.EMBED],[F.FIELDSET,m.FIELDSET],[F.FIGCAPTION,m.FIGCAPTION],[F.FIGURE,m.FIGURE],[F.FONT,m.FONT],[F.FOOTER,m.FOOTER],[F.FOREIGN_OBJECT,m.FOREIGN_OBJECT],[F.FORM,m.FORM],[F.FRAME,m.FRAME],[F.FRAMESET,m.FRAMESET],[F.H1,m.H1],[F.H2,m.H2],[F.H3,m.H3],[F.H4,m.H4],[F.H5,m.H5],[F.H6,m.H6],[F.HEAD,m.HEAD],[F.HEADER,m.HEADER],[F.HGROUP,m.HGROUP],[F.HR,m.HR],[F.HTML,m.HTML],[F.I,m.I],[F.IMG,m.IMG],[F.IMAGE,m.IMAGE],[F.INPUT,m.INPUT],[F.IFRAME,m.IFRAME],[F.KEYGEN,m.KEYGEN],[F.LABEL,m.LABEL],[F.LI,m.LI],[F.LINK,m.LINK],[F.LISTING,m.LISTING],[F.MAIN,m.MAIN],[F.MALIGNMARK,m.MALIGNMARK],[F.MARQUEE,m.MARQUEE],[F.MATH,m.MATH],[F.MENU,m.MENU],[F.META,m.META],[F.MGLYPH,m.MGLYPH],[F.MI,m.MI],[F.MO,m.MO],[F.MN,m.MN],[F.MS,m.MS],[F.MTEXT,m.MTEXT],[F.NAV,m.NAV],[F.NOBR,m.NOBR],[F.NOFRAMES,m.NOFRAMES],[F.NOEMBED,m.NOEMBED],[F.NOSCRIPT,m.NOSCRIPT],[F.OBJECT,m.OBJECT],[F.OL,m.OL],[F.OPTGROUP,m.OPTGROUP],[F.OPTION,m.OPTION],[F.P,m.P],[F.PARAM,m.PARAM],[F.PLAINTEXT,m.PLAINTEXT],[F.PRE,m.PRE],[F.RB,m.RB],[F.RP,m.RP],[F.RT,m.RT],[F.RTC,m.RTC],[F.RUBY,m.RUBY],[F.S,m.S],[F.SCRIPT,m.SCRIPT],[F.SECTION,m.SECTION],[F.SELECT,m.SELECT],[F.SOURCE,m.SOURCE],[F.SMALL,m.SMALL],[F.SPAN,m.SPAN],[F.STRIKE,m.STRIKE],[F.STRONG,m.STRONG],[F.STYLE,m.STYLE],[F.SUB,m.SUB],[F.SUMMARY,m.SUMMARY],[F.SUP,m.SUP],[F.TABLE,m.TABLE],[F.TBODY,m.TBODY],[F.TEMPLATE,m.TEMPLATE],[F.TEXTAREA,m.TEXTAREA],[F.TFOOT,m.TFOOT],[F.TD,m.TD],[F.TH,m.TH],[F.THEAD,m.THEAD],[F.TITLE,m.TITLE],[F.TR,m.TR],[F.TRACK,m.TRACK],[F.TT,m.TT],[F.U,m.U],[F.UL,m.UL],[F.SVG,m.SVG],[F.VAR,m.VAR],[F.WBR,m.WBR],[F.XMP,m.XMP]]);function eh(t){var e;return(e=tH.get(t))!==null&&e!==void 0?e:m.UNKNOWN}const ne=m,nH={[K.HTML]:new Set([ne.ADDRESS,ne.APPLET,ne.AREA,ne.ARTICLE,ne.ASIDE,ne.BASE,ne.BASEFONT,ne.BGSOUND,ne.BLOCKQUOTE,ne.BODY,ne.BR,ne.BUTTON,ne.CAPTION,ne.CENTER,ne.COL,ne.COLGROUP,ne.DD,ne.DETAILS,ne.DIR,ne.DIV,ne.DL,ne.DT,ne.EMBED,ne.FIELDSET,ne.FIGCAPTION,ne.FIGURE,ne.FOOTER,ne.FORM,ne.FRAME,ne.FRAMESET,ne.H1,ne.H2,ne.H3,ne.H4,ne.H5,ne.H6,ne.HEAD,ne.HEADER,ne.HGROUP,ne.HR,ne.HTML,ne.IFRAME,ne.IMG,ne.INPUT,ne.LI,ne.LINK,ne.LISTING,ne.MAIN,ne.MARQUEE,ne.MENU,ne.META,ne.NAV,ne.NOEMBED,ne.NOFRAMES,ne.NOSCRIPT,ne.OBJECT,ne.OL,ne.P,ne.PARAM,ne.PLAINTEXT,ne.PRE,ne.SCRIPT,ne.SECTION,ne.SELECT,ne.SOURCE,ne.STYLE,ne.SUMMARY,ne.TABLE,ne.TBODY,ne.TD,ne.TEMPLATE,ne.TEXTAREA,ne.TFOOT,ne.TH,ne.THEAD,ne.TITLE,ne.TR,ne.TRACK,ne.UL,ne.WBR,ne.XMP]),[K.MATHML]:new Set([ne.MI,ne.MO,ne.MN,ne.MS,ne.MTEXT,ne.ANNOTATION_XML]),[K.SVG]:new Set([ne.TITLE,ne.FOREIGN_OBJECT,ne.DESC]),[K.XLINK]:new Set,[K.XML]:new Set,[K.XMLNS]:new Set};function iR(t){return t===ne.H1||t===ne.H2||t===ne.H3||t===ne.H4||t===ne.H5||t===ne.H6}const iH=new Set([F.STYLE,F.SCRIPT,F.XMP,F.IFRAME,F.NOEMBED,F.NOFRAMES,F.PLAINTEXT]);function sH(t,e){return iH.has(t)||e&&t===F.NOSCRIPT}const rH=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var R;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",t[t.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",t[t.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",t[t.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",t[t.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",t[t.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(R||(R={}));const Zt={DATA:R.DATA,RCDATA:R.RCDATA,RAWTEXT:R.RAWTEXT,SCRIPT_DATA:R.SCRIPT_DATA,PLAINTEXT:R.PLAINTEXT,CDATA_SECTION:R.CDATA_SECTION};function Zo(t){return t>=I.DIGIT_0&&t<=I.DIGIT_9}function No(t){return t>=I.LATIN_CAPITAL_A&&t<=I.LATIN_CAPITAL_Z}function aH(t){return t>=I.LATIN_SMALL_A&&t<=I.LATIN_SMALL_Z}function ns(t){return aH(t)||No(t)}function Vm(t){return ns(t)||Zo(t)}function sR(t){return t>=I.LATIN_CAPITAL_A&&t<=I.LATIN_CAPITAL_F}function rR(t){return t>=I.LATIN_SMALL_A&&t<=I.LATIN_SMALL_F}function oH(t){return Zo(t)||sR(t)||rR(t)}function Ku(t){return t+32}function aR(t){return t===I.SPACE||t===I.LINE_FEED||t===I.TABULATION||t===I.FORM_FEED}function lH(t){return t===I.EQUALS_SIGN||Vm(t)}function Ob(t){return aR(t)||t===I.SOLIDUS||t===I.GREATER_THAN_SIGN}let uH=class{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=R.DATA,this.returnState=R.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new eH(n),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var n,i;(i=(n=this.handler).onParseError)===null||i===void 0||i.call(n,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,n,i){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||i==null||i()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,n){this.state=e,this._callState(n)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:we.START_TAG,tagName:"",tagID:m.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:we.END_TAG,tagName:"",tagID:m.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:we.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:we.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const i=this.currentToken;if(nR(i,this.currentAttr.name)===null){if(i.attrs.push(this.currentAttr),i.location&&this.currentLocation){const s=(e=(n=i.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(V.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=eh(e.tagName),e.type===we.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(V.endTagWithAttributes),e.selfClosing&&this._err(V.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case we.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case we.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case we.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:we.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==e)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(e,n)}_emitCodePoint(e){const n=aR(e)?we.WHITESPACE_CHARACTER:e===I.NULL?we.NULL_CHARACTER:we.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(we.CHARACTER,e)}_matchNamedCharacterReference(e){let n=null,i=0,s=!1;for(let r=0,a=wi[0];r>=0&&(r=o1(wi,a,r+1,e),!(r<0));e=this._consume()){i+=1,a=wi[r];const o=a&dn.VALUE_LENGTH;if(o){const l=(o>>14)-1;if(e!==I.SEMICOLON&&this._isCharacterReferenceInAttribute()&&lH(this.preprocessor.peek(1))?(n=[I.AMPERSAND],r+=l):(n=l===0?[wi[r]&~dn.VALUE_LENGTH]:l===1?[wi[++r]]:[wi[++r],wi[++r]],i=0,s=e!==I.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(i),s&&!this.preprocessor.endOfChunkHit&&this._err(V.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===R.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case R.DATA:{this._stateData(e);break}case R.RCDATA:{this._stateRcdata(e);break}case R.RAWTEXT:{this._stateRawtext(e);break}case R.SCRIPT_DATA:{this._stateScriptData(e);break}case R.PLAINTEXT:{this._statePlaintext(e);break}case R.TAG_OPEN:{this._stateTagOpen(e);break}case R.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case R.TAG_NAME:{this._stateTagName(e);break}case R.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case R.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case R.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case R.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case R.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case R.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case R.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case R.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case R.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case R.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case R.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case R.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case R.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case R.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case R.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case R.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case R.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case R.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case R.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case R.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case R.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case R.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case R.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case R.BOGUS_COMMENT:{this._stateBogusComment(e);break}case R.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case R.COMMENT_START:{this._stateCommentStart(e);break}case R.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case R.COMMENT:{this._stateComment(e);break}case R.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case R.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case R.COMMENT_END:{this._stateCommentEnd(e);break}case R.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case R.DOCTYPE:{this._stateDoctype(e);break}case R.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case R.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case R.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case R.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case R.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case R.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case R.CDATA_SECTION:{this._stateCdataSection(e);break}case R.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case R.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case R.CHARACTER_REFERENCE:{this._stateCharacterReference(e);break}case R.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(e);break}case R.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}case R.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(e);break}case R.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(e);break}case R.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(e);break}case R.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(e);break}case R.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case I.LESS_THAN_SIGN:{this.state=R.TAG_OPEN;break}case I.AMPERSAND:{this.returnState=R.DATA,this.state=R.CHARACTER_REFERENCE;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitCodePoint(e);break}case I.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case I.AMPERSAND:{this.returnState=R.RCDATA,this.state=R.CHARACTER_REFERENCE;break}case I.LESS_THAN_SIGN:{this.state=R.RCDATA_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case I.LESS_THAN_SIGN:{this.state=R.RAWTEXT_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ns(e))this._createStartTagToken(),this.state=R.TAG_NAME,this._stateTagName(e);else switch(e){case I.EXCLAMATION_MARK:{this.state=R.MARKUP_DECLARATION_OPEN;break}case I.SOLIDUS:{this.state=R.END_TAG_OPEN;break}case I.QUESTION_MARK:{this._err(V.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e);break}case I.EOF:{this._err(V.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(V.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=R.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ns(e))this._createEndTagToken(),this.state=R.TAG_NAME,this._stateTagName(e);else switch(e){case I.GREATER_THAN_SIGN:{this._err(V.missingEndTagName),this.state=R.DATA;break}case I.EOF:{this._err(V.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(V.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.BEFORE_ATTRIBUTE_NAME;break}case I.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.tagName+=He;break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(No(e)?Ku(e):e)}}_stateRcdataLessThanSign(e){e===I.SOLIDUS?this.state=R.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ns(e)?(this.state=R.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=R.BEFORE_ATTRIBUTE_NAME,!1;case I.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=R.SELF_CLOSING_START_TAG,!1;case I.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=R.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===I.SOLIDUS?this.state=R.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ns(e)?(this.state=R.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case I.SOLIDUS:{this.state=R.SCRIPT_DATA_END_TAG_OPEN;break}case I.EXCLAMATION_MARK:{this.state=R.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=R.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ns(e)?(this.state=R.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===I.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===I.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case I.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case I.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case I.HYPHEN_MINUS:{this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case I.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===I.SOLIDUS?this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ns(e)?(this._emitChars("<"),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ns(e)?(this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Gt.SCRIPT,!1)&&Ob(this.preprocessor.peek(Gt.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Gt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case I.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case I.NULL:{this._err(V.unexpectedNullCharacter),this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case I.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case I.HYPHEN_MINUS:{this._emitChars("-");break}case I.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case I.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(He);break}case I.EOF:{this._err(V.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===I.SOLIDUS?(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Gt.SCRIPT,!1)&&Ob(this.preprocessor.peek(Gt.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Gt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.SOLIDUS:case I.GREATER_THAN_SIGN:case I.EOF:{this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case I.EQUALS_SIGN:{this._err(V.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=R.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:case I.SOLIDUS:case I.GREATER_THAN_SIGN:case I.EOF:{this._leaveAttrName(),this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case I.EQUALS_SIGN:{this._leaveAttrName(),this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case I.QUOTATION_MARK:case I.APOSTROPHE:case I.LESS_THAN_SIGN:{this._err(V.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.currentAttr.name+=He;break}default:this.currentAttr.name+=String.fromCodePoint(No(e)?Ku(e):e)}}_stateAfterAttributeName(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case I.EQUALS_SIGN:{this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.QUOTATION_MARK:{this.state=R.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case I.APOSTROPHE:{this.state=R.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case I.GREATER_THAN_SIGN:{this._err(V.missingAttributeValue),this.state=R.DATA,this.emitCurrentTagToken();break}default:this.state=R.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case I.QUOTATION_MARK:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case I.AMPERSAND:{this.returnState=R.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=R.CHARACTER_REFERENCE;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.currentAttr.value+=He;break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case I.APOSTROPHE:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case I.AMPERSAND:{this.returnState=R.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=R.CHARACTER_REFERENCE;break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.currentAttr.value+=He;break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case I.AMPERSAND:{this.returnState=R.ATTRIBUTE_VALUE_UNQUOTED,this.state=R.CHARACTER_REFERENCE;break}case I.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case I.NULL:{this._err(V.unexpectedNullCharacter),this.currentAttr.value+=He;break}case I.QUOTATION_MARK:case I.APOSTROPHE:case I.LESS_THAN_SIGN:case I.EQUALS_SIGN:case I.GRAVE_ACCENT:{this._err(V.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case I.SOLIDUS:{this._leaveAttrValue(),this.state=R.SELF_CLOSING_START_TAG;break}case I.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this._err(V.missingWhitespaceBetweenAttributes),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case I.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=R.DATA,this.emitCurrentTagToken();break}case I.EOF:{this._err(V.eofInTag),this._emitEOFToken();break}default:this._err(V.unexpectedSolidusInTag),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(n);break}case I.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.data+=He;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Gt.DASH_DASH,!0)?(this._createCommentToken(Gt.DASH_DASH.length+1),this.state=R.COMMENT_START):this._consumeSequenceIfMatch(Gt.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Gt.DOCTYPE.length+1),this.state=R.DOCTYPE):this._consumeSequenceIfMatch(Gt.CDATA_START,!0)?this.inForeignNode?this.state=R.CDATA_SECTION:(this._err(V.cdataInHtmlContent),this._createCommentToken(Gt.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=R.BOGUS_COMMENT):this._ensureHibernation()||(this._err(V.incorrectlyOpenedComment),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case I.HYPHEN_MINUS:{this.state=R.COMMENT_START_DASH;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptClosingOfEmptyComment),this.state=R.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=R.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case I.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptClosingOfEmptyComment),this.state=R.DATA,this.emitCurrentComment(n);break}case I.EOF:{this._err(V.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=R.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case I.HYPHEN_MINUS:{this.state=R.COMMENT_END_DASH;break}case I.LESS_THAN_SIGN:{n.data+="<",this.state=R.COMMENT_LESS_THAN_SIGN;break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.data+=He;break}case I.EOF:{this._err(V.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case I.EXCLAMATION_MARK:{n.data+="!",this.state=R.COMMENT_LESS_THAN_SIGN_BANG;break}case I.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=R.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===I.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=R.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===I.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=R.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==I.GREATER_THAN_SIGN&&e!==I.EOF&&this._err(V.nestedComment),this.state=R.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case I.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case I.EOF:{this._err(V.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=R.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(n);break}case I.EXCLAMATION_MARK:{this.state=R.COMMENT_END_BANG;break}case I.HYPHEN_MINUS:{n.data+="-";break}case I.EOF:{this._err(V.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=R.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case I.HYPHEN_MINUS:{n.data+="--!",this.state=R.COMMENT_END_DASH;break}case I.GREATER_THAN_SIGN:{this._err(V.incorrectlyClosedComment),this.state=R.DATA,this.emitCurrentComment(n);break}case I.EOF:{this._err(V.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=R.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_NAME;break}case I.GREATER_THAN_SIGN:{this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case I.EOF:{this._err(V.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingWhitespaceBeforeDoctypeName),this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(No(e))this._createDoctypeToken(String.fromCharCode(Ku(e))),this.state=R.DOCTYPE_NAME;else switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.NULL:{this._err(V.unexpectedNullCharacter),this._createDoctypeToken(He),this.state=R.DOCTYPE_NAME;break}case I.GREATER_THAN_SIGN:{this._err(V.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=R.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.AFTER_DOCTYPE_NAME;break}case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.name+=He;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(No(e)?Ku(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Gt.PUBLIC,!1)?this.state=R.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Gt.SYSTEM,!1)?this.state=R.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(V.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case I.QUOTATION_MARK:{this._err(V.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{this._err(V.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case I.GREATER_THAN_SIGN:{this._err(V.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.QUOTATION_MARK:{n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case I.GREATER_THAN_SIGN:{this._err(V.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case I.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.publicId+=He;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case I.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.publicId+=He;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case I.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.QUOTATION_MARK:{this._err(V.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{this._err(V.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.QUOTATION_MARK:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case I.QUOTATION_MARK:{this._err(V.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{this._err(V.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case I.GREATER_THAN_SIGN:{this._err(V.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.QUOTATION_MARK:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case I.APOSTROPHE:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case I.GREATER_THAN_SIGN:{this._err(V.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case I.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.systemId+=He;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case I.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case I.NULL:{this._err(V.unexpectedNullCharacter),n.systemId+=He;break}case I.GREATER_THAN_SIGN:{this._err(V.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case I.SPACE:case I.LINE_FEED:case I.TABULATION:case I.FORM_FEED:break;case I.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.EOF:{this._err(V.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(V.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case I.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case I.NULL:{this._err(V.unexpectedNullCharacter);break}case I.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case I.RIGHT_SQUARE_BRACKET:{this.state=R.CDATA_SECTION_BRACKET;break}case I.EOF:{this._err(V.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===I.RIGHT_SQUARE_BRACKET?this.state=R.CDATA_SECTION_END:(this._emitChars("]"),this.state=R.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case I.GREATER_THAN_SIGN:{this.state=R.DATA;break}case I.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=R.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===I.NUMBER_SIGN?this.state=R.NUMERIC_CHARACTER_REFERENCE:Vm(e)?(this.state=R.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(I.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const n=this._matchNamedCharacterReference(e);if(!this._ensureHibernation())if(n){for(let i=0;i<n.length;i++)this._flushCodePointConsumedAsCharacterReference(n[i]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(I.AMPERSAND),this.state=R.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){Vm(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===I.SEMICOLON&&this._err(V.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===I.LATIN_SMALL_X||e===I.LATIN_CAPITAL_X?this.state=R.HEXADEMICAL_CHARACTER_REFERENCE_START:Zo(e)?(this.state=R.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(V.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(I.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(I.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){oH(e)?(this.state=R.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e)):(this._err(V.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(I.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(I.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(e){sR(e)?this.charRefCode=this.charRefCode*16+e-55:rR(e)?this.charRefCode=this.charRefCode*16+e-87:Zo(e)?this.charRefCode=this.charRefCode*16+e-48:e===I.SEMICOLON?this.state=R.NUMERIC_CHARACTER_REFERENCE_END:(this._err(V.missingSemicolonAfterCharacterReference),this.state=R.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){Zo(e)?this.charRefCode=this.charRefCode*10+e-48:e===I.SEMICOLON?this.state=R.NUMERIC_CHARACTER_REFERENCE_END:(this._err(V.missingSemicolonAfterCharacterReference),this.state=R.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===I.NULL)this._err(V.nullCharacterReference),this.charRefCode=I.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(V.characterReferenceOutsideUnicodeRange),this.charRefCode=I.REPLACEMENT_CHARACTER;else if(J_(this.charRefCode))this._err(V.surrogateCharacterReference),this.charRefCode=I.REPLACEMENT_CHARACTER;else if(tR(this.charRefCode))this._err(V.noncharacterCharacterReference);else if(eR(this.charRefCode)||this.charRefCode===I.CARRIAGE_RETURN){this._err(V.controlCharacterReference);const n=rH.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}};const oR=new Set([m.DD,m.DT,m.LI,m.OPTGROUP,m.OPTION,m.P,m.RB,m.RP,m.RT,m.RTC]),Mb=new Set([...oR,m.CAPTION,m.COLGROUP,m.TBODY,m.TD,m.TFOOT,m.TH,m.THEAD,m.TR]),Yu=new Map([[m.APPLET,K.HTML],[m.CAPTION,K.HTML],[m.HTML,K.HTML],[m.MARQUEE,K.HTML],[m.OBJECT,K.HTML],[m.TABLE,K.HTML],[m.TD,K.HTML],[m.TEMPLATE,K.HTML],[m.TH,K.HTML],[m.ANNOTATION_XML,K.MATHML],[m.MI,K.MATHML],[m.MN,K.MATHML],[m.MO,K.MATHML],[m.MS,K.MATHML],[m.MTEXT,K.MATHML],[m.DESC,K.SVG],[m.FOREIGN_OBJECT,K.SVG],[m.TITLE,K.SVG]]),cH=[m.H1,m.H2,m.H3,m.H4,m.H5,m.H6],dH=[m.TR,m.TEMPLATE,m.HTML],fH=[m.TBODY,m.TFOOT,m.THEAD,m.TEMPLATE,m.HTML],hH=[m.TABLE,m.TEMPLATE,m.HTML],pH=[m.TD,m.TH];class mH{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=m.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===m.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===K.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const i=this._indexOf(e);this.items[i]=n,i===this.stackTop&&(this.current=n)}insertAfter(e,n,i){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,i),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==K.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const i=this._indexOfTagNames(e,n);this.shortenToLength(i<0?0:i)}popUntilNumberedHeaderPopped(){this.popUntilPopped(cH,K.HTML)}popUntilTableCellPopped(){this.popUntilPopped(pH,K.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let i=this.stackTop;i>=0;i--)if(e.includes(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===n)return i;return-1}clearBackTo(e,n){const i=this._indexOfTagNames(e,n);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(hH,K.HTML)}clearBackToTableBodyContext(){this.clearBackTo(fH,K.HTML)}clearBackToTableRowContext(){this.clearBackTo(dH,K.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===m.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===m.HTML}hasInScope(e){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n],s=this.treeAdapter.getNamespaceURI(this.items[n]);if(i===e&&s===K.HTML)return!0;if(Yu.get(i)===s)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e],i=this.treeAdapter.getNamespaceURI(this.items[e]);if(iR(n)&&i===K.HTML)return!0;if(Yu.get(n)===i)return!1}return!0}hasInListItemScope(e){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n],s=this.treeAdapter.getNamespaceURI(this.items[n]);if(i===e&&s===K.HTML)return!0;if((i===m.UL||i===m.OL)&&s===K.HTML||Yu.get(i)===s)return!1}return!0}hasInButtonScope(e){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n],s=this.treeAdapter.getNamespaceURI(this.items[n]);if(i===e&&s===K.HTML)return!0;if(i===m.BUTTON&&s===K.HTML||Yu.get(i)===s)return!1}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===K.HTML){if(i===e)return!0;if(i===m.TABLE||i===m.TEMPLATE||i===m.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===K.HTML){if(n===m.TBODY||n===m.THEAD||n===m.TFOOT)return!0;if(n===m.TABLE||n===m.HTML)return!1}}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===K.HTML){if(i===e)return!0;if(i!==m.OPTION&&i!==m.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;oR.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Mb.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&Mb.has(this.currentTagId);)this.pop()}}const A0=3;var Vn;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Vn=Vn||(Vn={}));const Fb={type:Vn.Marker};class gH{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const i=[],s=n.length,r=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const l=this.entries[o];if(l.type===Vn.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===r&&this.treeAdapter.getNamespaceURI(u)===a){const c=this.treeAdapter.getAttrList(u);c.length===s&&i.push({idx:o,attrs:c})}}return i}_ensureNoahArkCondition(e){if(this.entries.length<A0)return;const n=this.treeAdapter.getAttrList(e),i=this._getNoahArkConditionCandidates(e,n);if(i.length<A0)return;const s=new Map(n.map(a=>[a.name,a.value]));let r=0;for(let a=0;a<i.length;a++){const o=i[a];o.attrs.every(l=>s.get(l.name)===l.value)&&(r+=1,r>=A0&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(Fb)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Vn.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:Vn.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(Fb);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(i=>i.type===Vn.Marker||this.treeAdapter.getTagName(i.element)===e);return n&&n.type===Vn.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Vn.Element&&n.element===e)}}function Bb(t){return{nodeName:"#text",value:t,parentNode:null}}const Zs={createDocument(){return{nodeName:"#document",mode:Xt.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const i=t.childNodes.indexOf(n);t.childNodes.splice(i,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,i){const s=t.childNodes.find(r=>r.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=i;else{const r={nodeName:"#documentType",name:e,publicId:n,systemId:i,parentNode:null};Zs.appendChild(t,r)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Zs.isTextNode(n)){n.value+=e;return}}Zs.appendChild(t,Bb(e))},insertTextBefore(t,e,n){const i=t.childNodes[t.childNodes.indexOf(n)-1];i&&Zs.isTextNode(i)?i.value+=e:Zs.insertBefore(t,Bb(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(i=>i.name));for(let i=0;i<e.length;i++)n.has(e[i].name)||t.attrs.push(e[i])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},lR="html",EH="about:legacy-compat",TH="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",uR=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],yH=[...uR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],vH=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),cR=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],bH=[...cR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Ub(t,e){return e.some(n=>t.startsWith(n))}function xH(t){return t.name===lR&&t.publicId===null&&(t.systemId===null||t.systemId===EH)}function SH(t){if(t.name!==lR)return Xt.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===TH)return Xt.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),vH.has(n))return Xt.QUIRKS;let i=e===null?yH:uR;if(Ub(n,i))return Xt.QUIRKS;if(i=e===null?cR:bH,Ub(n,i))return Xt.LIMITED_QUIRKS}return Xt.NO_QUIRKS}const $b={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},AH="definitionurl",CH="definitionURL",wH=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),LH=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:K.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:K.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:K.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:K.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:K.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:K.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:K.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:K.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:K.XML}],["xml:space",{prefix:"xml",name:"space",namespace:K.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:K.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:K.XMLNS}]]),IH=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),_H=new Set([m.B,m.BIG,m.BLOCKQUOTE,m.BODY,m.BR,m.CENTER,m.CODE,m.DD,m.DIV,m.DL,m.DT,m.EM,m.EMBED,m.H1,m.H2,m.H3,m.H4,m.H5,m.H6,m.HEAD,m.HR,m.I,m.IMG,m.LI,m.LISTING,m.MENU,m.META,m.NOBR,m.OL,m.P,m.PRE,m.RUBY,m.S,m.SMALL,m.SPAN,m.STRONG,m.STRIKE,m.SUB,m.SUP,m.TABLE,m.TT,m.U,m.UL,m.VAR]);function RH(t){const e=t.tagID;return e===m.FONT&&t.attrs.some(({name:i})=>i===Is.COLOR||i===Is.SIZE||i===Is.FACE)||_H.has(e)}function dR(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===AH){t.attrs[e].name=CH;break}}function fR(t){for(let e=0;e<t.attrs.length;e++){const n=wH.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function v1(t){for(let e=0;e<t.attrs.length;e++){const n=LH.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function DH(t){const e=IH.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=eh(t.tagName))}function PH(t,e){return e===K.MATHML&&(t===m.MI||t===m.MO||t===m.MN||t===m.MS||t===m.MTEXT)}function kH(t,e,n){if(e===K.MATHML&&t===m.ANNOTATION_XML){for(let i=0;i<n.length;i++)if(n[i].name===Is.ENCODING){const s=n[i].value.toLowerCase();return s===$b.TEXT_HTML||s===$b.APPLICATION_XML}}return e===K.SVG&&(t===m.FOREIGN_OBJECT||t===m.DESC||t===m.TITLE)}function NH(t,e,n,i){return(!i||i===K.HTML)&&kH(t,e,n)||(!i||i===K.MATHML)&&PH(t,e)}const OH="hidden",MH=8,FH=3;var D;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(D||(D={}));const BH={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},hR=new Set([m.TABLE,m.TBODY,m.TFOOT,m.THEAD,m.TR]),Hb={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Zs,onParseError:null};let pR=class{constructor(e,n,i=null,s=null){this.fragmentContext=i,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=D.INITIAL,this.originalInsertionMode=D.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Hb,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new uH(this.options,this),this.activeFormattingElements=new gH(this.treeAdapter),this.fragmentContextID=i?eh(this.treeAdapter.getTagName(i)):m.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new mH(this.document,this.treeAdapter,this)}static parse(e,n){const i=new this(n);return i.tokenizer.write(e,!0),i.document}static getFragmentParser(e,n){const i={...Hb,...n};e??(e=i.treeAdapter.createElement(F.TEMPLATE,K.HTML,[]));const s=i.treeAdapter.createElement("documentmock",K.HTML,[]),r=new this(i,s,e);return r.fragmentContextID===m.TEMPLATE&&r.tmplInsertionModeStack.unshift(D.IN_TEMPLATE),r._initTokenizerForFragmentParsing(),r._insertFakeRootElement(),r._resetInsertionMode(),r._findFormInFragmentContext(),r}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,i){var s;if(!this.onParseError)return;const r=(s=e.location)!==null&&s!==void 0?s:BH,a={code:n,startLine:r.startLine,startCol:r.startCol,startOffset:r.startOffset,endLine:i?r.startLine:r.endLine,endCol:i?r.startCol:r.endCol,endOffset:i?r.startOffset:r.endOffset};this.onParseError(a)}onItemPush(e,n,i){var s,r;(r=(s=this.treeAdapter).onItemPush)===null||r===void 0||r.call(s,e),i&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var i,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(i=this.treeAdapter).onItemPop)===null||s===void 0||s.call(i,e,this.openElements.current),n){let r,a;this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,a=this.fragmentContextID):{current:r,currentTagId:a}=this.openElements,this._setContextModes(r,a)}}_setContextModes(e,n){const i=e===this.document||this.treeAdapter.getNamespaceURI(e)===K.HTML;this.currentNotInHTML=!i,this.tokenizer.inForeignNode=!i&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,K.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=D.TEXT}switchToPlaintextParsing(){this.insertionMode=D.TEXT,this.originalInsertionMode=D.IN_BODY,this.tokenizer.state=Zt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===F.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==K.HTML))switch(this.fragmentContextID){case m.TITLE:case m.TEXTAREA:{this.tokenizer.state=Zt.RCDATA;break}case m.STYLE:case m.XMP:case m.IFRAME:case m.NOEMBED:case m.NOFRAMES:case m.NOSCRIPT:{this.tokenizer.state=Zt.RAWTEXT;break}case m.SCRIPT:{this.tokenizer.state=Zt.SCRIPT_DATA;break}case m.PLAINTEXT:{this.tokenizer.state=Zt.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",i=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,i,s),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const i=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,i)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const i=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(i,e)}}_appendElement(e,n){const i=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(i,e.location)}_insertElement(e,n){const i=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(i,e.location),this.openElements.push(i,e.tagID)}_insertFakeElement(e,n){const i=this.treeAdapter.createElement(e,K.HTML,[]);this._attachElementToTree(i,null),this.openElements.push(i,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,K.HTML,e.attrs),i=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,i),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(F.HTML,K.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,m.HTML)}_appendCommentNode(e,n){const i=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,i),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}_insertCharacters(e){let n,i;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:i}=this._findFosterParentingLocation(),i?this.treeAdapter.insertTextBefore(n,e.chars,i):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),r=i?s.lastIndexOf(i):s.length,a=s[r-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:l,endCol:u,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,n){for(let i=this.treeAdapter.getFirstChild(e);i;i=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(i),this.treeAdapter.appendChild(n,i)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const i=n.location,s=this.treeAdapter.getTagName(e),r=n.type===we.END_TAG&&s===n.tagName?{endTag:{...i},endLine:i.endLine,endCol:i.endCol,endOffset:i.endOffset}:{endLine:i.startLine,endCol:i.startCol,endOffset:i.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,r)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,i;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,i=this.fragmentContextID):{current:n,currentTagId:i}=this.openElements,e.tagID===m.SVG&&this.treeAdapter.getTagName(n)===F.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===K.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===m.MGLYPH||e.tagID===m.MALIGNMARK)&&!this._isIntegrationPoint(i,n,K.HTML)}_processToken(e){switch(e.type){case we.CHARACTER:{this.onCharacter(e);break}case we.NULL_CHARACTER:{this.onNullCharacter(e);break}case we.COMMENT:{this.onComment(e);break}case we.DOCTYPE:{this.onDoctype(e);break}case we.START_TAG:{this._processStartTag(e);break}case we.END_TAG:{this.onEndTag(e);break}case we.EOF:{this.onEof(e);break}case we.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,i){const s=this.treeAdapter.getNamespaceURI(n),r=this.treeAdapter.getAttrList(n);return NH(e,s,r,i)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===Vn.Marker||this.openElements.contains(s.element)),i=n<0?e-1:n-1;for(let s=i;s>=0;s--){const r=this.activeFormattingElements.entries[s];this._insertElement(r.token,this.treeAdapter.getNamespaceURI(r.element)),r.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=D.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(m.P),this.openElements.popUntilTagNamePopped(m.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case m.TR:{this.insertionMode=D.IN_ROW;return}case m.TBODY:case m.THEAD:case m.TFOOT:{this.insertionMode=D.IN_TABLE_BODY;return}case m.CAPTION:{this.insertionMode=D.IN_CAPTION;return}case m.COLGROUP:{this.insertionMode=D.IN_COLUMN_GROUP;return}case m.TABLE:{this.insertionMode=D.IN_TABLE;return}case m.BODY:{this.insertionMode=D.IN_BODY;return}case m.FRAMESET:{this.insertionMode=D.IN_FRAMESET;return}case m.SELECT:{this._resetInsertionModeForSelect(e);return}case m.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case m.HTML:{this.insertionMode=this.headElement?D.AFTER_HEAD:D.BEFORE_HEAD;return}case m.TD:case m.TH:{if(e>0){this.insertionMode=D.IN_CELL;return}break}case m.HEAD:{if(e>0){this.insertionMode=D.IN_HEAD;return}break}}this.insertionMode=D.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const i=this.openElements.tagIDs[n];if(i===m.TEMPLATE)break;if(i===m.TABLE){this.insertionMode=D.IN_SELECT_IN_TABLE;return}}this.insertionMode=D.IN_SELECT}_isElementCausesFosterParenting(e){return hR.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case m.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===K.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case m.TABLE:{const i=this.treeAdapter.getParentNode(n);return i?{parent:i,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const i=this.treeAdapter.getNamespaceURI(e);return nH[i].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){pV(this,e);return}switch(this.insertionMode){case D.INITIAL:{Co(this,e);break}case D.BEFORE_HTML:{Jo(this,e);break}case D.BEFORE_HEAD:{el(this,e);break}case D.IN_HEAD:{tl(this,e);break}case D.IN_HEAD_NO_SCRIPT:{nl(this,e);break}case D.AFTER_HEAD:{il(this,e);break}case D.IN_BODY:case D.IN_CAPTION:case D.IN_CELL:case D.IN_TEMPLATE:{gR(this,e);break}case D.TEXT:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{C0(this,e);break}case D.IN_TABLE_TEXT:{xR(this,e);break}case D.IN_COLUMN_GROUP:{Hd(this,e);break}case D.AFTER_BODY:{Vd(this,e);break}case D.AFTER_AFTER_BODY:{Nc(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hV(this,e);return}switch(this.insertionMode){case D.INITIAL:{Co(this,e);break}case D.BEFORE_HTML:{Jo(this,e);break}case D.BEFORE_HEAD:{el(this,e);break}case D.IN_HEAD:{tl(this,e);break}case D.IN_HEAD_NO_SCRIPT:{nl(this,e);break}case D.AFTER_HEAD:{il(this,e);break}case D.TEXT:{this._insertCharacters(e);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{C0(this,e);break}case D.IN_COLUMN_GROUP:{Hd(this,e);break}case D.AFTER_BODY:{Vd(this,e);break}case D.AFTER_AFTER_BODY:{Nc(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){Gm(this,e);return}switch(this.insertionMode){case D.INITIAL:case D.BEFORE_HTML:case D.BEFORE_HEAD:case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:case D.IN_BODY:case D.IN_TABLE:case D.IN_CAPTION:case D.IN_COLUMN_GROUP:case D.IN_TABLE_BODY:case D.IN_ROW:case D.IN_CELL:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:case D.IN_TEMPLATE:case D.IN_FRAMESET:case D.AFTER_FRAMESET:{Gm(this,e);break}case D.IN_TABLE_TEXT:{wo(this,e);break}case D.AFTER_BODY:{WH(this,e);break}case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{zH(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case D.INITIAL:{KH(this,e);break}case D.BEFORE_HEAD:case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:{this._err(e,V.misplacedDoctype);break}case D.IN_TABLE_TEXT:{wo(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,V.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?mV(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case D.INITIAL:{Co(this,e);break}case D.BEFORE_HTML:{YH(this,e);break}case D.BEFORE_HEAD:{XH(this,e);break}case D.IN_HEAD:{qn(this,e);break}case D.IN_HEAD_NO_SCRIPT:{JH(this,e);break}case D.AFTER_HEAD:{t7(this,e);break}case D.IN_BODY:{kt(this,e);break}case D.IN_TABLE:{za(this,e);break}case D.IN_TABLE_TEXT:{wo(this,e);break}case D.IN_CAPTION:{Q7(this,e);break}case D.IN_COLUMN_GROUP:{S1(this,e);break}case D.IN_TABLE_BODY:{ih(this,e);break}case D.IN_ROW:{sh(this,e);break}case D.IN_CELL:{eV(this,e);break}case D.IN_SELECT:{CR(this,e);break}case D.IN_SELECT_IN_TABLE:{nV(this,e);break}case D.IN_TEMPLATE:{sV(this,e);break}case D.AFTER_BODY:{aV(this,e);break}case D.IN_FRAMESET:{oV(this,e);break}case D.AFTER_FRAMESET:{uV(this,e);break}case D.AFTER_AFTER_BODY:{dV(this,e);break}case D.AFTER_AFTER_FRAMESET:{fV(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?gV(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case D.INITIAL:{Co(this,e);break}case D.BEFORE_HTML:{qH(this,e);break}case D.BEFORE_HEAD:{QH(this,e);break}case D.IN_HEAD:{ZH(this,e);break}case D.IN_HEAD_NO_SCRIPT:{e7(this,e);break}case D.AFTER_HEAD:{n7(this,e);break}case D.IN_BODY:{nh(this,e);break}case D.TEXT:{H7(this,e);break}case D.IN_TABLE:{Bl(this,e);break}case D.IN_TABLE_TEXT:{wo(this,e);break}case D.IN_CAPTION:{Z7(this,e);break}case D.IN_COLUMN_GROUP:{J7(this,e);break}case D.IN_TABLE_BODY:{jm(this,e);break}case D.IN_ROW:{AR(this,e);break}case D.IN_CELL:{tV(this,e);break}case D.IN_SELECT:{wR(this,e);break}case D.IN_SELECT_IN_TABLE:{iV(this,e);break}case D.IN_TEMPLATE:{rV(this,e);break}case D.AFTER_BODY:{IR(this,e);break}case D.IN_FRAMESET:{lV(this,e);break}case D.AFTER_FRAMESET:{cV(this,e);break}case D.AFTER_AFTER_BODY:{Nc(this,e);break}}}onEof(e){switch(this.insertionMode){case D.INITIAL:{Co(this,e);break}case D.BEFORE_HTML:{Jo(this,e);break}case D.BEFORE_HEAD:{el(this,e);break}case D.IN_HEAD:{tl(this,e);break}case D.IN_HEAD_NO_SCRIPT:{nl(this,e);break}case D.AFTER_HEAD:{il(this,e);break}case D.IN_BODY:case D.IN_TABLE:case D.IN_CAPTION:case D.IN_COLUMN_GROUP:case D.IN_TABLE_BODY:case D.IN_ROW:case D.IN_CELL:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:{vR(this,e);break}case D.TEXT:{V7(this,e);break}case D.IN_TABLE_TEXT:{wo(this,e);break}case D.IN_TEMPLATE:{LR(this,e);break}case D.AFTER_BODY:case D.IN_FRAMESET:case D.AFTER_FRAMESET:case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{x1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===I.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:case D.TEXT:case D.IN_COLUMN_GROUP:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:case D.IN_FRAMESET:case D.AFTER_FRAMESET:{this._insertCharacters(e);break}case D.IN_BODY:case D.IN_CAPTION:case D.IN_CELL:case D.IN_TEMPLATE:case D.AFTER_BODY:case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{mR(this,e);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{C0(this,e);break}case D.IN_TABLE_TEXT:{bR(this,e);break}}}};function UH(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):yR(t,e),n}function $H(t,e){let n=null,i=t.openElements.stackTop;for(;i>=0;i--){const s=t.openElements.items[i];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[i])&&(n=s)}return n||(t.openElements.shortenToLength(i<0?0:i),t.activeFormattingElements.removeEntry(e)),n}function HH(t,e,n){let i=e,s=t.openElements.getCommonAncestor(e);for(let r=0,a=s;a!==n;r++,a=s){s=t.openElements.getCommonAncestor(a);const o=t.activeFormattingElements.getElementEntry(a),l=o&&r>=FH;!o||l?(l&&t.activeFormattingElements.removeEntry(o),t.openElements.remove(a)):(a=VH(t,o),i===e&&(t.activeFormattingElements.bookmark=o),t.treeAdapter.detachNode(i),t.treeAdapter.appendChild(a,i),i=a)}return i}function VH(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),i=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,i),e.element=i,i}function GH(t,e,n){const i=t.treeAdapter.getTagName(e),s=eh(i);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const r=t.treeAdapter.getNamespaceURI(e);s===m.TEMPLATE&&r===K.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function jH(t,e,n){const i=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,r=t.treeAdapter.createElement(s.tagName,i,s.attrs);t._adoptNodes(e,r),t.treeAdapter.appendChild(e,r),t.activeFormattingElements.insertElementAfterBookmark(r,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,r,s.tagID)}function b1(t,e){for(let n=0;n<MH;n++){const i=UH(t,e);if(!i)break;const s=$H(t,i);if(!s)break;t.activeFormattingElements.bookmark=i;const r=HH(t,s,i.element),a=t.openElements.getCommonAncestor(i.element);t.treeAdapter.detachNode(r),a&&GH(t,a,r),jH(t,s,i)}}function Gm(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function WH(t,e){t._appendCommentNode(e,t.openElements.items[0])}function zH(t,e){t._appendCommentNode(e,t.document)}function x1(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let i=t.openElements.stackTop;i>=n;i--)t._setEndLocation(t.openElements.items[i],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const i=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(i);if(s&&!s.endTag&&(t._setEndLocation(i,e),t.openElements.stackTop>=1)){const r=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(r);a&&!a.endTag&&t._setEndLocation(r,e)}}}}function KH(t,e){t._setDocumentType(e);const n=e.forceQuirks?Xt.QUIRKS:SH(e);xH(e)||t._err(e,V.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=D.BEFORE_HTML}function Co(t,e){t._err(e,V.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Xt.QUIRKS),t.insertionMode=D.BEFORE_HTML,t._processToken(e)}function YH(t,e){e.tagID===m.HTML?(t._insertElement(e,K.HTML),t.insertionMode=D.BEFORE_HEAD):Jo(t,e)}function qH(t,e){const n=e.tagID;(n===m.HTML||n===m.HEAD||n===m.BODY||n===m.BR)&&Jo(t,e)}function Jo(t,e){t._insertFakeRootElement(),t.insertionMode=D.BEFORE_HEAD,t._processToken(e)}function XH(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.HEAD:{t._insertElement(e,K.HTML),t.headElement=t.openElements.current,t.insertionMode=D.IN_HEAD;break}default:el(t,e)}}function QH(t,e){const n=e.tagID;n===m.HEAD||n===m.BODY||n===m.HTML||n===m.BR?el(t,e):t._err(e,V.endTagWithoutMatchingOpenElement)}function el(t,e){t._insertFakeElement(F.HEAD,m.HEAD),t.headElement=t.openElements.current,t.insertionMode=D.IN_HEAD,t._processToken(e)}function qn(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.BASE:case m.BASEFONT:case m.BGSOUND:case m.LINK:case m.META:{t._appendElement(e,K.HTML),e.ackSelfClosing=!0;break}case m.TITLE:{t._switchToTextParsing(e,Zt.RCDATA);break}case m.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Zt.RAWTEXT):(t._insertElement(e,K.HTML),t.insertionMode=D.IN_HEAD_NO_SCRIPT);break}case m.NOFRAMES:case m.STYLE:{t._switchToTextParsing(e,Zt.RAWTEXT);break}case m.SCRIPT:{t._switchToTextParsing(e,Zt.SCRIPT_DATA);break}case m.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=D.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(D.IN_TEMPLATE);break}case m.HEAD:{t._err(e,V.misplacedStartTagForHeadElement);break}default:tl(t,e)}}function ZH(t,e){switch(e.tagID){case m.HEAD:{t.openElements.pop(),t.insertionMode=D.AFTER_HEAD;break}case m.BODY:case m.BR:case m.HTML:{tl(t,e);break}case m.TEMPLATE:{Pr(t,e);break}default:t._err(e,V.endTagWithoutMatchingOpenElement)}}function Pr(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==m.TEMPLATE&&t._err(e,V.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(m.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,V.endTagWithoutMatchingOpenElement)}function tl(t,e){t.openElements.pop(),t.insertionMode=D.AFTER_HEAD,t._processToken(e)}function JH(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.BASEFONT:case m.BGSOUND:case m.HEAD:case m.LINK:case m.META:case m.NOFRAMES:case m.STYLE:{qn(t,e);break}case m.NOSCRIPT:{t._err(e,V.nestedNoscriptInHead);break}default:nl(t,e)}}function e7(t,e){switch(e.tagID){case m.NOSCRIPT:{t.openElements.pop(),t.insertionMode=D.IN_HEAD;break}case m.BR:{nl(t,e);break}default:t._err(e,V.endTagWithoutMatchingOpenElement)}}function nl(t,e){const n=e.type===we.EOF?V.openElementsLeftAfterEof:V.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=D.IN_HEAD,t._processToken(e)}function t7(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.BODY:{t._insertElement(e,K.HTML),t.framesetOk=!1,t.insertionMode=D.IN_BODY;break}case m.FRAMESET:{t._insertElement(e,K.HTML),t.insertionMode=D.IN_FRAMESET;break}case m.BASE:case m.BASEFONT:case m.BGSOUND:case m.LINK:case m.META:case m.NOFRAMES:case m.SCRIPT:case m.STYLE:case m.TEMPLATE:case m.TITLE:{t._err(e,V.abandonedHeadElementChild),t.openElements.push(t.headElement,m.HEAD),qn(t,e),t.openElements.remove(t.headElement);break}case m.HEAD:{t._err(e,V.misplacedStartTagForHeadElement);break}default:il(t,e)}}function n7(t,e){switch(e.tagID){case m.BODY:case m.HTML:case m.BR:{il(t,e);break}case m.TEMPLATE:{Pr(t,e);break}default:t._err(e,V.endTagWithoutMatchingOpenElement)}}function il(t,e){t._insertFakeElement(F.BODY,m.BODY),t.insertionMode=D.IN_BODY,th(t,e)}function th(t,e){switch(e.type){case we.CHARACTER:{gR(t,e);break}case we.WHITESPACE_CHARACTER:{mR(t,e);break}case we.COMMENT:{Gm(t,e);break}case we.START_TAG:{kt(t,e);break}case we.END_TAG:{nh(t,e);break}case we.EOF:{vR(t,e);break}}}function mR(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function gR(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function i7(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function s7(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function r7(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_FRAMESET)}function a7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML)}function o7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),iR(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,K.HTML)}function l7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function u7(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML),n||(t.formElement=t.openElements.current))}function c7(t,e){t.framesetOk=!1;const n=e.tagID;for(let i=t.openElements.stackTop;i>=0;i--){const s=t.openElements.tagIDs[i];if(n===m.LI&&s===m.LI||(n===m.DD||n===m.DT)&&(s===m.DD||s===m.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==m.ADDRESS&&s!==m.DIV&&s!==m.P&&t._isSpecialElement(t.openElements.items[i],s))break}t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML)}function d7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML),t.tokenizer.state=Zt.PLAINTEXT}function f7(t,e){t.openElements.hasInScope(m.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(m.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML),t.framesetOk=!1}function h7(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(F.A);n&&(b1(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function p7(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function m7(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(m.NOBR)&&(b1(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,K.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function g7(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function E7(t,e){t.treeAdapter.getDocumentMode(t.document)!==Xt.QUIRKS&&t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._insertElement(e,K.HTML),t.framesetOk=!1,t.insertionMode=D.IN_TABLE}function ER(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,K.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function TR(t){const e=nR(t,Is.TYPE);return e!=null&&e.toLowerCase()===OH}function T7(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,K.HTML),TR(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function y7(t,e){t._appendElement(e,K.HTML),e.ackSelfClosing=!0}function v7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._appendElement(e,K.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function b7(t,e){e.tagName=F.IMG,e.tagID=m.IMG,ER(t,e)}function x7(t,e){t._insertElement(e,K.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Zt.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=D.TEXT}function S7(t,e){t.openElements.hasInButtonScope(m.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Zt.RAWTEXT)}function A7(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Zt.RAWTEXT)}function Vb(t,e){t._switchToTextParsing(e,Zt.RAWTEXT)}function C7(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===D.IN_TABLE||t.insertionMode===D.IN_CAPTION||t.insertionMode===D.IN_TABLE_BODY||t.insertionMode===D.IN_ROW||t.insertionMode===D.IN_CELL?D.IN_SELECT_IN_TABLE:D.IN_SELECT}function w7(t,e){t.openElements.currentTagId===m.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML)}function L7(t,e){t.openElements.hasInScope(m.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,K.HTML)}function I7(t,e){t.openElements.hasInScope(m.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(m.RTC),t._insertElement(e,K.HTML)}function _7(t,e){t._reconstructActiveFormattingElements(),dR(e),v1(e),e.selfClosing?t._appendElement(e,K.MATHML):t._insertElement(e,K.MATHML),e.ackSelfClosing=!0}function R7(t,e){t._reconstructActiveFormattingElements(),fR(e),v1(e),e.selfClosing?t._appendElement(e,K.SVG):t._insertElement(e,K.SVG),e.ackSelfClosing=!0}function Gb(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,K.HTML)}function kt(t,e){switch(e.tagID){case m.I:case m.S:case m.B:case m.U:case m.EM:case m.TT:case m.BIG:case m.CODE:case m.FONT:case m.SMALL:case m.STRIKE:case m.STRONG:{p7(t,e);break}case m.A:{h7(t,e);break}case m.H1:case m.H2:case m.H3:case m.H4:case m.H5:case m.H6:{o7(t,e);break}case m.P:case m.DL:case m.OL:case m.UL:case m.DIV:case m.DIR:case m.NAV:case m.MAIN:case m.MENU:case m.ASIDE:case m.CENTER:case m.FIGURE:case m.FOOTER:case m.HEADER:case m.HGROUP:case m.DIALOG:case m.DETAILS:case m.ADDRESS:case m.ARTICLE:case m.SECTION:case m.SUMMARY:case m.FIELDSET:case m.BLOCKQUOTE:case m.FIGCAPTION:{a7(t,e);break}case m.LI:case m.DD:case m.DT:{c7(t,e);break}case m.BR:case m.IMG:case m.WBR:case m.AREA:case m.EMBED:case m.KEYGEN:{ER(t,e);break}case m.HR:{v7(t,e);break}case m.RB:case m.RTC:{L7(t,e);break}case m.RT:case m.RP:{I7(t,e);break}case m.PRE:case m.LISTING:{l7(t,e);break}case m.XMP:{S7(t,e);break}case m.SVG:{R7(t,e);break}case m.HTML:{i7(t,e);break}case m.BASE:case m.LINK:case m.META:case m.STYLE:case m.TITLE:case m.SCRIPT:case m.BGSOUND:case m.BASEFONT:case m.TEMPLATE:{qn(t,e);break}case m.BODY:{s7(t,e);break}case m.FORM:{u7(t,e);break}case m.NOBR:{m7(t,e);break}case m.MATH:{_7(t,e);break}case m.TABLE:{E7(t,e);break}case m.INPUT:{T7(t,e);break}case m.PARAM:case m.TRACK:case m.SOURCE:{y7(t,e);break}case m.IMAGE:{b7(t,e);break}case m.BUTTON:{f7(t,e);break}case m.APPLET:case m.OBJECT:case m.MARQUEE:{g7(t,e);break}case m.IFRAME:{A7(t,e);break}case m.SELECT:{C7(t,e);break}case m.OPTION:case m.OPTGROUP:{w7(t,e);break}case m.NOEMBED:{Vb(t,e);break}case m.FRAMESET:{r7(t,e);break}case m.TEXTAREA:{x7(t,e);break}case m.NOSCRIPT:{t.options.scriptingEnabled?Vb(t,e):Gb(t,e);break}case m.PLAINTEXT:{d7(t,e);break}case m.COL:case m.TH:case m.TD:case m.TR:case m.HEAD:case m.FRAME:case m.TBODY:case m.TFOOT:case m.THEAD:case m.CAPTION:case m.COLGROUP:break;default:Gb(t,e)}}function D7(t,e){if(t.openElements.hasInScope(m.BODY)&&(t.insertionMode=D.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function P7(t,e){t.openElements.hasInScope(m.BODY)&&(t.insertionMode=D.AFTER_BODY,IR(t,e))}function k7(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function N7(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(m.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(m.FORM):n&&t.openElements.remove(n))}function O7(t){t.openElements.hasInButtonScope(m.P)||t._insertFakeElement(F.P,m.P),t._closePElement()}function M7(t){t.openElements.hasInListItemScope(m.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(m.LI),t.openElements.popUntilTagNamePopped(m.LI))}function F7(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function B7(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function U7(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function $7(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(F.BR,m.BR),t.openElements.pop(),t.framesetOk=!1}function yR(t,e){const n=e.tagName,i=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const r=t.openElements.items[s],a=t.openElements.tagIDs[s];if(i===a&&(i!==m.UNKNOWN||t.treeAdapter.getTagName(r)===n)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(r,a))break}}function nh(t,e){switch(e.tagID){case m.A:case m.B:case m.I:case m.S:case m.U:case m.EM:case m.TT:case m.BIG:case m.CODE:case m.FONT:case m.NOBR:case m.SMALL:case m.STRIKE:case m.STRONG:{b1(t,e);break}case m.P:{O7(t);break}case m.DL:case m.UL:case m.OL:case m.DIR:case m.DIV:case m.NAV:case m.PRE:case m.MAIN:case m.MENU:case m.ASIDE:case m.BUTTON:case m.CENTER:case m.FIGURE:case m.FOOTER:case m.HEADER:case m.HGROUP:case m.DIALOG:case m.ADDRESS:case m.ARTICLE:case m.DETAILS:case m.SECTION:case m.SUMMARY:case m.LISTING:case m.FIELDSET:case m.BLOCKQUOTE:case m.FIGCAPTION:{k7(t,e);break}case m.LI:{M7(t);break}case m.DD:case m.DT:{F7(t,e);break}case m.H1:case m.H2:case m.H3:case m.H4:case m.H5:case m.H6:{B7(t);break}case m.BR:{$7(t);break}case m.BODY:{D7(t,e);break}case m.HTML:{P7(t,e);break}case m.FORM:{N7(t);break}case m.APPLET:case m.OBJECT:case m.MARQUEE:{U7(t,e);break}case m.TEMPLATE:{Pr(t,e);break}default:yR(t,e)}}function vR(t,e){t.tmplInsertionModeStack.length>0?LR(t,e):x1(t,e)}function H7(t,e){var n;e.tagID===m.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function V7(t,e){t._err(e,V.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function C0(t,e){if(hR.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=D.IN_TABLE_TEXT,e.type){case we.CHARACTER:{xR(t,e);break}case we.WHITESPACE_CHARACTER:{bR(t,e);break}}else hu(t,e)}function G7(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_CAPTION}function j7(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_COLUMN_GROUP}function W7(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(F.COLGROUP,m.COLGROUP),t.insertionMode=D.IN_COLUMN_GROUP,S1(t,e)}function z7(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_TABLE_BODY}function K7(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(F.TBODY,m.TBODY),t.insertionMode=D.IN_TABLE_BODY,ih(t,e)}function Y7(t,e){t.openElements.hasInTableScope(m.TABLE)&&(t.openElements.popUntilTagNamePopped(m.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function q7(t,e){TR(e)?t._appendElement(e,K.HTML):hu(t,e),e.ackSelfClosing=!0}function X7(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,K.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function za(t,e){switch(e.tagID){case m.TD:case m.TH:case m.TR:{K7(t,e);break}case m.STYLE:case m.SCRIPT:case m.TEMPLATE:{qn(t,e);break}case m.COL:{W7(t,e);break}case m.FORM:{X7(t,e);break}case m.TABLE:{Y7(t,e);break}case m.TBODY:case m.TFOOT:case m.THEAD:{z7(t,e);break}case m.INPUT:{q7(t,e);break}case m.CAPTION:{G7(t,e);break}case m.COLGROUP:{j7(t,e);break}default:hu(t,e)}}function Bl(t,e){switch(e.tagID){case m.TABLE:{t.openElements.hasInTableScope(m.TABLE)&&(t.openElements.popUntilTagNamePopped(m.TABLE),t._resetInsertionMode());break}case m.TEMPLATE:{Pr(t,e);break}case m.BODY:case m.CAPTION:case m.COL:case m.COLGROUP:case m.HTML:case m.TBODY:case m.TD:case m.TFOOT:case m.TH:case m.THEAD:case m.TR:break;default:hu(t,e)}}function hu(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,th(t,e),t.fosterParentingEnabled=n}function bR(t,e){t.pendingCharacterTokens.push(e)}function xR(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function wo(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)hu(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const SR=new Set([m.CAPTION,m.COL,m.COLGROUP,m.TBODY,m.TD,m.TFOOT,m.TH,m.THEAD,m.TR]);function Q7(t,e){const n=e.tagID;SR.has(n)?t.openElements.hasInTableScope(m.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(m.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=D.IN_TABLE,za(t,e)):kt(t,e)}function Z7(t,e){const n=e.tagID;switch(n){case m.CAPTION:case m.TABLE:{t.openElements.hasInTableScope(m.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(m.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=D.IN_TABLE,n===m.TABLE&&Bl(t,e));break}case m.BODY:case m.COL:case m.COLGROUP:case m.HTML:case m.TBODY:case m.TD:case m.TFOOT:case m.TH:case m.THEAD:case m.TR:break;default:nh(t,e)}}function S1(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.COL:{t._appendElement(e,K.HTML),e.ackSelfClosing=!0;break}case m.TEMPLATE:{qn(t,e);break}default:Hd(t,e)}}function J7(t,e){switch(e.tagID){case m.COLGROUP:{t.openElements.currentTagId===m.COLGROUP&&(t.openElements.pop(),t.insertionMode=D.IN_TABLE);break}case m.TEMPLATE:{Pr(t,e);break}case m.COL:break;default:Hd(t,e)}}function Hd(t,e){t.openElements.currentTagId===m.COLGROUP&&(t.openElements.pop(),t.insertionMode=D.IN_TABLE,t._processToken(e))}function ih(t,e){switch(e.tagID){case m.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_ROW;break}case m.TH:case m.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(F.TR,m.TR),t.insertionMode=D.IN_ROW,sh(t,e);break}case m.CAPTION:case m.COL:case m.COLGROUP:case m.TBODY:case m.TFOOT:case m.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE,za(t,e));break}default:za(t,e)}}function jm(t,e){const n=e.tagID;switch(e.tagID){case m.TBODY:case m.TFOOT:case m.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE);break}case m.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE,Bl(t,e));break}case m.BODY:case m.CAPTION:case m.COL:case m.COLGROUP:case m.HTML:case m.TD:case m.TH:case m.TR:break;default:Bl(t,e)}}function sh(t,e){switch(e.tagID){case m.TH:case m.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,K.HTML),t.insertionMode=D.IN_CELL,t.activeFormattingElements.insertMarker();break}case m.CAPTION:case m.COL:case m.COLGROUP:case m.TBODY:case m.TFOOT:case m.THEAD:case m.TR:{t.openElements.hasInTableScope(m.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE_BODY,ih(t,e));break}default:za(t,e)}}function AR(t,e){switch(e.tagID){case m.TR:{t.openElements.hasInTableScope(m.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE_BODY);break}case m.TABLE:{t.openElements.hasInTableScope(m.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE_BODY,jm(t,e));break}case m.TBODY:case m.TFOOT:case m.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(m.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=D.IN_TABLE_BODY,jm(t,e));break}case m.BODY:case m.CAPTION:case m.COL:case m.COLGROUP:case m.HTML:case m.TD:case m.TH:break;default:Bl(t,e)}}function eV(t,e){const n=e.tagID;SR.has(n)?(t.openElements.hasInTableScope(m.TD)||t.openElements.hasInTableScope(m.TH))&&(t._closeTableCell(),sh(t,e)):kt(t,e)}function tV(t,e){const n=e.tagID;switch(n){case m.TD:case m.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=D.IN_ROW);break}case m.TABLE:case m.TBODY:case m.TFOOT:case m.THEAD:case m.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),AR(t,e));break}case m.BODY:case m.CAPTION:case m.COL:case m.COLGROUP:case m.HTML:break;default:nh(t,e)}}function CR(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.OPTION:{t.openElements.currentTagId===m.OPTION&&t.openElements.pop(),t._insertElement(e,K.HTML);break}case m.OPTGROUP:{t.openElements.currentTagId===m.OPTION&&t.openElements.pop(),t.openElements.currentTagId===m.OPTGROUP&&t.openElements.pop(),t._insertElement(e,K.HTML);break}case m.INPUT:case m.KEYGEN:case m.TEXTAREA:case m.SELECT:{t.openElements.hasInSelectScope(m.SELECT)&&(t.openElements.popUntilTagNamePopped(m.SELECT),t._resetInsertionMode(),e.tagID!==m.SELECT&&t._processStartTag(e));break}case m.SCRIPT:case m.TEMPLATE:{qn(t,e);break}}}function wR(t,e){switch(e.tagID){case m.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===m.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===m.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===m.OPTGROUP&&t.openElements.pop();break}case m.OPTION:{t.openElements.currentTagId===m.OPTION&&t.openElements.pop();break}case m.SELECT:{t.openElements.hasInSelectScope(m.SELECT)&&(t.openElements.popUntilTagNamePopped(m.SELECT),t._resetInsertionMode());break}case m.TEMPLATE:{Pr(t,e);break}}}function nV(t,e){const n=e.tagID;n===m.CAPTION||n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR||n===m.TD||n===m.TH?(t.openElements.popUntilTagNamePopped(m.SELECT),t._resetInsertionMode(),t._processStartTag(e)):CR(t,e)}function iV(t,e){const n=e.tagID;n===m.CAPTION||n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR||n===m.TD||n===m.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(m.SELECT),t._resetInsertionMode(),t.onEndTag(e)):wR(t,e)}function sV(t,e){switch(e.tagID){case m.BASE:case m.BASEFONT:case m.BGSOUND:case m.LINK:case m.META:case m.NOFRAMES:case m.SCRIPT:case m.STYLE:case m.TEMPLATE:case m.TITLE:{qn(t,e);break}case m.CAPTION:case m.COLGROUP:case m.TBODY:case m.TFOOT:case m.THEAD:{t.tmplInsertionModeStack[0]=D.IN_TABLE,t.insertionMode=D.IN_TABLE,za(t,e);break}case m.COL:{t.tmplInsertionModeStack[0]=D.IN_COLUMN_GROUP,t.insertionMode=D.IN_COLUMN_GROUP,S1(t,e);break}case m.TR:{t.tmplInsertionModeStack[0]=D.IN_TABLE_BODY,t.insertionMode=D.IN_TABLE_BODY,ih(t,e);break}case m.TD:case m.TH:{t.tmplInsertionModeStack[0]=D.IN_ROW,t.insertionMode=D.IN_ROW,sh(t,e);break}default:t.tmplInsertionModeStack[0]=D.IN_BODY,t.insertionMode=D.IN_BODY,kt(t,e)}}function rV(t,e){e.tagID===m.TEMPLATE&&Pr(t,e)}function LR(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(m.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):x1(t,e)}function aV(t,e){e.tagID===m.HTML?kt(t,e):Vd(t,e)}function IR(t,e){var n;if(e.tagID===m.HTML){if(t.fragmentContext||(t.insertionMode=D.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===m.HTML){t._setEndLocation(t.openElements.items[0],e);const i=t.openElements.items[1];i&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&t._setEndLocation(i,e)}}else Vd(t,e)}function Vd(t,e){t.insertionMode=D.IN_BODY,th(t,e)}function oV(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.FRAMESET:{t._insertElement(e,K.HTML);break}case m.FRAME:{t._appendElement(e,K.HTML),e.ackSelfClosing=!0;break}case m.NOFRAMES:{qn(t,e);break}}}function lV(t,e){e.tagID===m.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==m.FRAMESET&&(t.insertionMode=D.AFTER_FRAMESET))}function uV(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.NOFRAMES:{qn(t,e);break}}}function cV(t,e){e.tagID===m.HTML&&(t.insertionMode=D.AFTER_AFTER_FRAMESET)}function dV(t,e){e.tagID===m.HTML?kt(t,e):Nc(t,e)}function Nc(t,e){t.insertionMode=D.IN_BODY,th(t,e)}function fV(t,e){switch(e.tagID){case m.HTML:{kt(t,e);break}case m.NOFRAMES:{qn(t,e);break}}}function hV(t,e){e.chars=He,t._insertCharacters(e)}function pV(t,e){t._insertCharacters(e),t.framesetOk=!1}function _R(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==K.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function mV(t,e){if(RH(e))_R(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),i=t.treeAdapter.getNamespaceURI(n);i===K.MATHML?dR(e):i===K.SVG&&(DH(e),fR(e)),v1(e),e.selfClosing?t._appendElement(e,i):t._insertElement(e,i),e.ackSelfClosing=!0}}function gV(t,e){if(e.tagID===m.P||e.tagID===m.BR){_R(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const i=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(i)===K.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(i);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}const EV=new Set([F.AREA,F.BASE,F.BASEFONT,F.BGSOUND,F.BR,F.COL,F.EMBED,F.FRAME,F.HR,F.IMG,F.INPUT,F.KEYGEN,F.LINK,F.META,F.PARAM,F.SOURCE,F.TRACK,F.WBR]);function TV(t,e){return e.treeAdapter.isElementNode(t)&&e.treeAdapter.getNamespaceURI(t)===K.HTML&&EV.has(e.treeAdapter.getTagName(t))}const yV={treeAdapter:Zs,scriptingEnabled:!0};function vV(t,e){const n={...yV,...e};return RR(t,n)}function bV(t,e){let n="";const i=e.treeAdapter.isElementNode(t)&&e.treeAdapter.getTagName(t)===F.TEMPLATE&&e.treeAdapter.getNamespaceURI(t)===K.HTML?e.treeAdapter.getTemplateContent(t):t,s=e.treeAdapter.getChildNodes(i);if(s)for(const r of s)n+=RR(r,e);return n}function RR(t,e){return e.treeAdapter.isElementNode(t)?xV(t,e):e.treeAdapter.isTextNode(t)?AV(t,e):e.treeAdapter.isCommentNode(t)?CV(t,e):e.treeAdapter.isDocumentTypeNode(t)?wV(t,e):""}function xV(t,e){const n=e.treeAdapter.getTagName(t);return`<${n}${SV(t,e)}>${TV(t,e)?"":`${bV(t,e)}</${n}>`}`}function SV(t,{treeAdapter:e}){let n="";for(const i of e.getAttrList(t)){if(n+=" ",!i.namespace)n+=i.name;else switch(i.namespace){case K.XML:{n+=`xml:${i.name}`;break}case K.XMLNS:{i.name!=="xmlns"&&(n+="xmlns:"),n+=i.name;break}case K.XLINK:{n+=`xlink:${i.name}`;break}default:n+=`${i.prefix}:${i.name}`}n+=`="${T_(i.value)}"`}return n}function AV(t,e){const{treeAdapter:n}=e,i=n.getTextNodeContent(t),s=n.getParentNode(t),r=s&&n.isElementNode(s)&&n.getTagName(s);return r&&n.getNamespaceURI(s)===K.HTML&&sH(r,e.scriptingEnabled)?i:y_(i)}function CV(t,{treeAdapter:e}){return`<!--${e.getCommentNodeContent(t)}-->`}function wV(t,{treeAdapter:e}){return`<!DOCTYPE ${e.getDocumentTypeNodeName(t)}>`}function LV(t,e){return pR.parse(t,e)}function IV(t,e,n){typeof t=="string"&&(n=e,e=t,t=null);const i=pR.getFragmentParser(t,n);return i.tokenizer.write(e,!0),i.getFragment()}function jb(t){return new Ol(t)}function Wb(t){const e=t.includes('"')?"'":'"';return e+t+e}function _V(t,e,n){let i="!DOCTYPE ";return t&&(i+=t),e?i+=` PUBLIC ${Wb(e)}`:n&&(i+=" SYSTEM"),n&&(i+=` ${Wb(n)}`),i}const ua={isCommentNode:Yf,isElementNode:Te,isTextNode:hi,createDocument(){const t=new br([]);return t["x-mode"]=Xt.NO_QUIRKS,t},createDocumentFragment(){return new br([])},createElement(t,e,n){const i=Object.create(null),s=Object.create(null),r=Object.create(null);for(let o=0;o<n.length;o++){const l=n[o].name;i[l]=n[o].value,s[l]=n[o].namespace,r[l]=n[o].prefix}const a=new a1(t,i,[]);return a.namespace=e,a["x-attribsNamespace"]=s,a["x-attribsPrefix"]=r,a},createCommentNode(t){return new i1(t)},appendChild(t,e){const n=t.children[t.children.length-1];n&&(n.next=e,e.prev=n),t.children.push(e),e.parent=t},insertBefore(t,e,n){const i=t.children.indexOf(n),{prev:s}=n;s&&(s.next=e,e.prev=s),n.prev=e,e.next=n,t.children.splice(i,0,e),e.parent=t},setTemplateContent(t,e){ua.appendChild(t,e)},getTemplateContent(t){return t.children[0]},setDocumentType(t,e,n,i){const s=_V(e,n,i);let r=t.children.find(a=>km(a)&&a.name==="!doctype");r?r.data=s??null:(r=new s1("!doctype",s),ua.appendChild(t,r)),r["x-name"]=e??void 0,r["x-publicId"]=n??void 0,r["x-systemId"]=i??void 0},setDocumentMode(t,e){t["x-mode"]=e},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const e=t.parent.children.indexOf(t),{prev:n,next:i}=t;t.prev=null,t.next=null,n&&(n.next=i),i&&(i.prev=n),t.parent.children.splice(e,1),t.parent=null}},insertText(t,e){const n=t.children[t.children.length-1];n&&hi(n)?n.data+=e:ua.appendChild(t,jb(e))},insertTextBefore(t,e,n){const i=t.children[t.children.indexOf(n)-1];i&&hi(i)?i.data+=e:ua.insertBefore(t,jb(e),n)},adoptAttributes(t,e){for(let n=0;n<e.length;n++){const i=e[n].name;typeof t.attribs[i]>"u"&&(t.attribs[i]=e[n].value,t["x-attribsNamespace"][i]=e[n].namespace,t["x-attribsPrefix"][i]=e[n].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var e;return(e=t["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(t){var e;return(e=t["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(t){var e;return(e=t["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(t){return km(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,e){e&&(t.startIndex=e.startOffset,t.endIndex=e.endOffset),t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){e.endOffset!=null&&(t.endIndex=e.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...e}}};function RV(t,e,n,i){const s={scriptingEnabled:typeof e.scriptingEnabled=="boolean"?e.scriptingEnabled:!0,treeAdapter:ua,sourceCodeLocationInfo:e.sourceCodeLocationInfo};return n?LV(t,s):IV(i,t,s)}const DV={treeAdapter:ua};function PV(t){const e="length"in t?t:[t];for(let i=0;i<e.length;i+=1){const s=e[i];Rr(s)&&Array.prototype.splice.call(e,i,1,...s.children)}let n="";for(let i=0;i<e.length;i+=1){const s=e[i];n+=vV(s,DV)}return n}var ae;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(ae||(ae={}));var Q;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.SpecialStartSequence=23]="SpecialStartSequence",t[t.InSpecialTag=24]="InSpecialTag",t[t.BeforeEntity=25]="BeforeEntity",t[t.BeforeNumericEntity=26]="BeforeNumericEntity",t[t.InNamedEntity=27]="InNamedEntity",t[t.InNumericEntity=28]="InNumericEntity",t[t.InHexEntity=29]="InHexEntity"})(Q||(Q={}));function Si(t){return t===ae.Space||t===ae.NewLine||t===ae.Tab||t===ae.FormFeed||t===ae.CarriageReturn}function qu(t){return t===ae.Slash||t===ae.Gt||Si(t)}function zb(t){return t>=ae.Zero&&t<=ae.Nine}function kV(t){return t>=ae.LowerA&&t<=ae.LowerZ||t>=ae.UpperA&&t<=ae.UpperZ}function NV(t){return t>=ae.UpperA&&t<=ae.UpperF||t>=ae.LowerA&&t<=ae.LowerF}var oi;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(oi||(oi={}));const jt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class OV{constructor({xmlMode:e=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=Q.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Q.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=n,this.entityTrie=e?h_:wi}reset(){this.state=Q.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Q.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===ae.Lt||!this.decodeEntities&&this.fastForwardTo(ae.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Q.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===ae.Amp&&(this.state=Q.BeforeEntity)}stateSpecialStartSequence(e){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?qu(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Q.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===ae.Gt||Si(e)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===jt.TitleEnd?this.decodeEntities&&e===ae.Amp&&(this.state=Q.BeforeEntity):this.fastForwardTo(ae.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===ae.Lt)}stateCDATASequence(e){e===jt.Cdata[this.sequenceIndex]?++this.sequenceIndex===jt.Cdata.length&&(this.state=Q.InCommentLike,this.currentSequence=jt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Q.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===jt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Q.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!qu(e):kV(e)}startSpecial(e,n){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=n,this.state=Q.SpecialStartSequence}stateBeforeTagName(e){if(e===ae.ExclamationMark)this.state=Q.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===ae.Questionmark)this.state=Q.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const n=e|32;this.sectionStart=this.index,!this.xmlMode&&n===jt.TitleEnd[2]?this.startSpecial(jt.TitleEnd,3):this.state=!this.xmlMode&&n===jt.ScriptEnd[2]?Q.BeforeSpecialS:Q.InTagName}else e===ae.Slash?this.state=Q.BeforeClosingTagName:(this.state=Q.Text,this.stateText(e))}stateInTagName(e){qu(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Q.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){Si(e)||(e===ae.Gt?this.state=Q.Text:(this.state=this.isTagStartChar(e)?Q.InClosingTagName:Q.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===ae.Gt||Si(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Q.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.state=Q.Text,this.baseState=Q.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===ae.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Q.InSpecialTag,this.sequenceIndex=0):this.state=Q.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===ae.Slash?this.state=Q.InSelfClosingTag:Si(e)||(this.state=Q.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===ae.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Q.Text,this.baseState=Q.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Si(e)||(this.state=Q.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===ae.Eq||qu(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Q.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===ae.Eq?this.state=Q.BeforeAttributeValue:e===ae.Slash||e===ae.Gt?(this.cbs.onattribend(oi.NoValue,this.index),this.state=Q.BeforeAttributeName,this.stateBeforeAttributeName(e)):Si(e)||(this.cbs.onattribend(oi.NoValue,this.index),this.state=Q.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===ae.DoubleQuote?(this.state=Q.InAttributeValueDq,this.sectionStart=this.index+1):e===ae.SingleQuote?(this.state=Q.InAttributeValueSq,this.sectionStart=this.index+1):Si(e)||(this.sectionStart=this.index,this.state=Q.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,n){e===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ae.DoubleQuote?oi.Double:oi.Single,this.index),this.state=Q.BeforeAttributeName):this.decodeEntities&&e===ae.Amp&&(this.baseState=this.state,this.state=Q.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,ae.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,ae.SingleQuote)}stateInAttributeValueNoQuotes(e){Si(e)||e===ae.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(oi.Unquoted,this.index),this.state=Q.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===ae.Amp&&(this.baseState=this.state,this.state=Q.BeforeEntity)}stateBeforeDeclaration(e){e===ae.OpeningSquareBracket?(this.state=Q.CDATASequence,this.sequenceIndex=0):this.state=e===ae.Dash?Q.BeforeComment:Q.InDeclaration}stateInDeclaration(e){(e===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Q.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Q.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===ae.Dash?(this.state=Q.InCommentLike,this.currentSequence=jt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Q.InDeclaration}stateInSpecialComment(e){(e===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Q.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const n=e|32;n===jt.ScriptEnd[3]?this.startSpecial(jt.ScriptEnd,4):n===jt.StyleEnd[3]?this.startSpecial(jt.StyleEnd,4):(this.state=Q.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===ae.Number?this.state=Q.BeforeNumericEntity:e===ae.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=Q.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=o1(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&dn.VALUE_LENGTH;if(n){const i=(n>>14)-1;if(!this.allowLegacyEntity()&&e!==ae.Semi)this.trieIndex+=i;else{const s=this.index-this.entityExcess+1;s>this.sectionStart&&this.emitPartial(this.sectionStart,s),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,i===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&dn.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~dn.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(e|32)===ae.LowerX?(this.entityExcess++,this.state=Q.InHexEntity):(this.state=Q.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const n=this.index-this.entityExcess-1;n+2+ +(this.state===Q.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(e),this.emitCodePoint(p_(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===ae.Semi?this.emitNumericEntity(!0):zb(e)?(this.entityResult=this.entityResult*10+(e-ae.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===ae.Semi?this.emitNumericEntity(!0):zb(e)?(this.entityResult=this.entityResult*16+(e-ae.Zero),this.entityExcess++):NV(e)?(this.entityResult=this.entityResult*16+((e|32)-ae.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===Q.Text||this.baseState===Q.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===Q.Text||this.state===Q.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Q.InAttributeValueDq||this.state===Q.InAttributeValueSq||this.state===Q.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Q.Text:{this.stateText(e);break}case Q.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case Q.InSpecialTag:{this.stateInSpecialTag(e);break}case Q.CDATASequence:{this.stateCDATASequence(e);break}case Q.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case Q.InAttributeName:{this.stateInAttributeName(e);break}case Q.InCommentLike:{this.stateInCommentLike(e);break}case Q.InSpecialComment:{this.stateInSpecialComment(e);break}case Q.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case Q.InTagName:{this.stateInTagName(e);break}case Q.InClosingTagName:{this.stateInClosingTagName(e);break}case Q.BeforeTagName:{this.stateBeforeTagName(e);break}case Q.AfterAttributeName:{this.stateAfterAttributeName(e);break}case Q.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case Q.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case Q.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case Q.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case Q.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case Q.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case Q.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case Q.InDeclaration:{this.stateInDeclaration(e);break}case Q.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case Q.BeforeComment:{this.stateBeforeComment(e);break}case Q.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case Q.InNamedEntity:{this.stateInNamedEntity(e);break}case Q.BeforeEntity:{this.stateBeforeEntity(e);break}case Q.InHexEntity:{this.stateInHexEntity(e);break}case Q.InNumericEntity:{this.stateInNumericEntity(e);break}default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===Q.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===Q.InCommentLike?this.currentSequence===jt.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===Q.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Q.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Q.InTagName||this.state===Q.BeforeAttributeName||this.state===Q.BeforeAttributeValue||this.state===Q.AfterAttributeName||this.state===Q.InAttributeName||this.state===Q.InAttributeValueSq||this.state===Q.InAttributeValueDq||this.state===Q.InAttributeValueNq||this.state===Q.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,n){this.baseState!==Q.Text&&this.baseState!==Q.InSpecialTag?this.cbs.onattribdata(e,n):this.cbs.ontext(e,n)}emitCodePoint(e){this.baseState!==Q.Text&&this.baseState!==Q.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const Mr=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ke=new Set(["p"]),Kb=new Set(["thead","tbody"]),Yb=new Set(["dd","dt"]),qb=new Set(["rt","rp"]),MV=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",ke],["h1",ke],["h2",ke],["h3",ke],["h4",ke],["h5",ke],["h6",ke],["select",Mr],["input",Mr],["output",Mr],["button",Mr],["datalist",Mr],["textarea",Mr],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Yb],["dt",Yb],["address",ke],["article",ke],["aside",ke],["blockquote",ke],["details",ke],["div",ke],["dl",ke],["fieldset",ke],["figcaption",ke],["figure",ke],["footer",ke],["form",ke],["header",ke],["hr",ke],["main",ke],["nav",ke],["ol",ke],["pre",ke],["section",ke],["table",ke],["ul",ke],["rt",qb],["rp",qb],["tbody",Kb],["tfoot",Kb]]),FV=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Xb=new Set(["math","svg"]),Qb=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),BV=/\s|\//;class UV{constructor(e,n={}){var i,s,r,a,o;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:!n.xmlMode,this.lowerCaseAttributeNames=(s=n.lowerCaseAttributeNames)!==null&&s!==void 0?s:!n.xmlMode,this.tokenizer=new((r=n.Tokenizer)!==null&&r!==void 0?r:OV)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}ontext(e,n){var i,s;const r=this.getSlice(e,n);this.endIndex=n-1,(s=(i=this.cbs).ontext)===null||s===void 0||s.call(i,r),this.startIndex=n}ontextentity(e){var n,i;const s=this.tokenizer.getSectionStart();this.endIndex=s-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,Nm(e)),this.startIndex=s}isVoidElement(e){return!this.options.xmlMode&&FV.has(e)}onopentagname(e,n){this.endIndex=n;let i=this.getSlice(e,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(e){var n,i,s,r;this.openTagStart=this.startIndex,this.tagname=e;const a=!this.options.xmlMode&&MV.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const o=this.stack.pop();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,o,!0)}this.isVoidElement(e)||(this.stack.push(e),Xb.has(e)?this.foreignContext.push(!0):Qb.has(e)&&this.foreignContext.push(!1)),(r=(s=this.cbs).onopentagname)===null||r===void 0||r.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,n){var i,s,r,a,o,l;this.endIndex=n;let u=this.getSlice(e,n);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),(Xb.has(u)||Qb.has(u))&&this.foreignContext.pop(),this.isVoidElement(u))!this.options.xmlMode&&u==="br"&&((s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,"br"),(a=(r=this.cbs).onopentag)===null||a===void 0||a.call(r,"br",{},!0),(l=(o=this.cbs).onclosetag)===null||l===void 0||l.call(o,"br",!1));else{const c=this.stack.lastIndexOf(u);if(c!==-1)if(this.cbs.onclosetag){let d=this.stack.length-c;for(;d--;)this.cbs.onclosetag(this.stack.pop(),d!==0)}else this.stack.length=c;else!this.options.xmlMode&&u==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var n,i;const s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,s,!e),this.stack.pop())}onattribname(e,n){this.startIndex=e;const i=this.getSlice(e,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(e,n){this.attribvalue+=this.getSlice(e,n)}onattribentity(e){this.attribvalue+=Nm(e)}onattribend(e,n){var i,s;this.endIndex=n,(s=(i=this.cbs).onattribute)===null||s===void 0||s.call(i,this.attribname,this.attribvalue,e===oi.Double?'"':e===oi.Single?"'":e===oi.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const n=e.search(BV);let i=n<0?e:e.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(e,n){this.endIndex=n;const i=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(i);this.cbs.onprocessinginstruction(`!${s}`,`!${i}`)}this.startIndex=n+1}onprocessinginstruction(e,n){this.endIndex=n;const i=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(i);this.cbs.onprocessinginstruction(`?${s}`,`?${i}`)}this.startIndex=n+1}oncomment(e,n,i){var s,r,a,o;this.endIndex=n,(r=(s=this.cbs).oncomment)===null||r===void 0||r.call(s,this.getSlice(e,n-i)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=n+1}oncdata(e,n,i){var s,r,a,o,l,u,c,d,f,h;this.endIndex=n;const p=this.getSlice(e,n-i);this.options.xmlMode||this.options.recognizeCDATA?((r=(s=this.cbs).oncdatastart)===null||r===void 0||r.call(s),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,p),(u=(l=this.cbs).oncdataend)===null||u===void 0||u.call(l)):((d=(c=this.cbs).oncomment)===null||d===void 0||d.call(c,`[CDATA[${p}]]`),(h=(f=this.cbs).oncommentend)===null||h===void 0||h.call(f)),this.startIndex=n+1}onend(){var e,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(n=(e=this.cbs).onend)===null||n===void 0||n.call(e)}reset(){var e,n,i,s;(n=(e=this.cbs).onreset)===null||n===void 0||n.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(s=(i=this.cbs).onparserinit)===null||s===void 0||s.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,n){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(e-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}function $V(t,e){const n=new Q8(void 0,e);return new UV(n,e).end(t),n.root}const HV=T9((t,e,n,i)=>e.xmlMode||e._useHtmlParser2?$V(t,e):RV(t,e,n,i)),lo=Y9(HV,(t,e)=>e.xmlMode||e._useHtmlParser2?qf(t,e):PV(t));lo([]);const fr=({url:t})=>{if(t)return t.search("truyen-tranh")>0?t.slice(t.search("truyen-tranh")+13):t.slice(t.search("phim")+5)};typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;var VV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",GV=Array.prototype.slice.call(VV);(t=>{let e={};return t.forEach((n,i)=>e[n]=i),e})(GV);String.fromCharCode.bind(String);typeof Uint8Array.from=="function"&&Uint8Array.from.bind(Uint8Array);typeof navigator<"u"&&(navigator==null||navigator.userAgent.includes("Firefox"));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Zb;JSON.parse((Zb=document.documentElement.dataset.httpAllow)!=null?Zb:"false");var Jb;(Jb=document.documentElement.dataset.httpVersion)!=null;var ex;JSON.parse((ex=document.documentElement.dataset.tabsApi)!=null?ex:"false");var tx;JSON.parse((tx=document.documentElement.dataset.customReferer)!=null?tx:"false");const DR=async({comicId:t})=>await Ei.get({url:I8+`${t}`,responseType:"json",headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9","accept-language":"vi-VN,vi;q=0.9,en;q=0.8,ja;q=0.7","cache-control":"max-age=0",dnt:"1","sec-ch-ua":'"Google Chrome";v="105", "Not)A;Brand";v="8", "Chromium";v="105"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"Windows","sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","sec-gpc":"1","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36",referer:Wf}}).then(e=>{const n=[];return e.data.chapters.forEach(i=>{n.push({name:i.name,chapterId:i.chapterId,url:fr({url:i.url})??""})}),{success:e.data.success,chapters:n}}),jV=async(t,e,n)=>{const i=[],s=await DR({comicId:e});s.chapters.map((u,c)=>{u.chapterId===Number(n)&&i.push({preChap:c===s.chapters.length-1?void 0:s.chapters[c+1].name,preHref:c===s.chapters.length-1?void 0:s.chapters[c+1].url,nextChap:c===0?void 0:s.chapters[c-1].name,nextHref:c===0?void 0:s.chapters[c-1].url})});const r=[],a=lo(t),o=a(".top").find(".txt-primary").find("a").text(),l=a(".top").find(".txt-primary").find("span").text();return a(".page-chapter").find("img").map(async(u,c)=>{r.push({page:u,image:c.attribs["data-src"]})}),{title:o,chapter:l,listImage:r,listChapter:s,nextAndpreChap:i}},WV=async({manga:t,chapter:e,chapterId:n})=>{const i=await Ei.get({url:`${Wf}/truyen-tranh/${t}/${e}/${n}`,responseType:"text",headers:vr(void 0)});return{data:jV(i.data,localStorage.getItem("comicId")??"",n)}};function zV(t){return`https://manga-proxy-fwy13.deno.dev/?url=${encodeURIComponent(t)}&headers=${encodeURIComponent(`{"referer": "${Wf}"}`)}`}const KV=()=>{const t=LE(),{setisHidden:e,setLoading:n}=su(),i=Bw(),[s,r]=X.useState([]),a=X.useRef(),o=X.useRef(),[l,u]=X.useState(0),[c,d]=X.useState(0),[f,h]=X.useState(!0),[p,g]=X.useState(!0),[v,E]=X.useState(),y=async()=>{const{data:b}=await WV({manga:i.manga,chapter:i.chapter,chapterId:i.chap});E(await b)},T=()=>{var C,L;const x=Math.abs((C=a.current)==null?void 0:C.getBoundingClientRect().top)/(((L=a.current)==null?void 0:L.getBoundingClientRect().height)-document.documentElement.clientHeight)*100,w=(v==null?void 0:v.listImage.length)??0,A=Math.floor(w*Math.floor(x)/100);d(A),u(Math.floor(x))};return X.useEffect(()=>{DR({comicId:localStorage.getItem("comicId")??""}).then(b=>{r(b.chapters)}),y()},[]),X.useEffect(()=>{n(!!f)},[f]),P.jsx("main",{className:"relative h-full",children:v?P.jsxs(l_,{style:{width:"100%",height:"100%"},children:[P.jsx("dialog",{ref:o,className:"modal",children:P.jsxs("div",{className:"modal-box h-[70%] rounded",children:[P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsx("h3",{className:"font-bold text-lg text-gray-200",children:"Danh sách chương"}),P.jsx("form",{method:"dialog",children:P.jsx("button",{className:"btn btn-circle bg-transparent border-transparent hover:border-transparent",children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-8 text-white",children:P.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})})})})]}),P.jsx("div",{className:"flex flex-col gap-2 h-full p-2",children:s.map((b,x)=>P.jsxs("div",{onClick:()=>{t.push(`/watch/${b.url}`),window.location.reload()},className:"cursor-pointer text-gray-100 border-b border-gray-600 flex justify-between items-center",children:[P.jsx("span",{children:b.name}),P.jsx("button",{className:"btn bg-transparent btn-circle hover:text-white border-transparent hover:border-transparent",children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:P.jsx("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})})})]},x))})]})}),P.jsxs("div",{className:"flex items-center flex-col h-screen overflow-y-auto",onScroll:T,children:[P.jsx("section",{className:"flex w-auto h-auto flex-col",ref:a,onClick:()=>{g(!p)},children:v.listImage.map((b,x)=>P.jsx("img",{src:zV(b.image),alt:`${b.page}`,className:"w-auto h-auto",onLoad:()=>{e(!0),h(!1)}},x))}),P.jsxs("div",{className:`fixed ${p?"flex":"hidden"} top-0 w-full h-auto hero-overlay animate-fade-down animate-ease-in-out items-center p-1`,children:[P.jsx("button",{className:"btn btn-circle bg-transparent border-transparent hover:bg-[#0000001f] hover:border-transparent",onClick:()=>{const b=localStorage.getItem("currentManga");t.push(b??"".split("-").length>0?`/manga/${b}`:"/")},children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 font-bold text-white",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})})}),P.jsxs("div",{className:"flex flex-col text-white font-bold w-full",children:[P.jsx("h2",{className:"text-md two-line",children:v.title}),P.jsx("span",{children:v.chapter.slice(1)})]}),P.jsx("div",{className:"flex justify-end w-full",children:P.jsx("button",{onClick:()=>{o.current.showModal()},className:"btn btn-circle bg-transparent border-transparent hover:bg-[#0000001f] hover:border-transparent",children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-8 text-white",children:P.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})})})})]}),P.jsxs("div",{className:`fixed z-10 bottom-0 justify-center items-center gap-4 left-0 w-full p-1 h-auto animate-fade-up animate-ease-in-out ${p?"flex":"hidden"}`,children:[P.jsx("button",{className:"btn btn-circle overlay border-transparent hover:bg-[#0000001f] hover:border-transparent",disabled:v.nextAndpreChap[0].preHref===void 0,onClick:()=>{t.push(`/watch/${v.nextAndpreChap[0].preHref}`),window.location.reload()},children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6 text-white",children:P.jsx("path",{d:"M9.195 18.44c1.25.714 2.805-.189 2.805-1.629v-2.34l6.945 3.968c1.25.715 2.805-.188 2.805-1.628V8.69c0-1.44-1.555-2.343-2.805-1.628L12 11.029v-2.34c0-1.44-1.555-2.343-2.805-1.628l-7.108 4.061c-1.26.72-1.26 2.536 0 3.256l7.108 4.061Z"})})}),P.jsxs("div",{className:"w-[70%] rounded-md p-2 hero-overlay flex items-center justify-center gap-4 text-white",onClick:()=>{var b,x;console.log((b=a.current)==null?void 0:b.getBoundingClientRect().top),(x=a.current)==null||x.scrollTo({top:-2766.363525390625})},children:[P.jsxs("span",{className:`${l<=40?"text-error":l<=70?"text-warning":"text-success"} font-bold`,children:[l<10?`0${l}`:l,"%"]}),P.jsx("progress",{className:`progress ${l<=40?"progress-error":l<=70?"progress-warning":"progress-success"} w-full`,value:l,max:"100"}),P.jsxs("span",{className:"font-bold",children:[c<10?`0${c}`:c,"/",v.listImage.length]})]}),P.jsx("button",{className:"btn btn-circle overlay border-transparent hover:bg-[#0000001f] hover:border-transparent",disabled:v.nextAndpreChap[0].nextHref===void 0,onClick:()=>{t.push(`/watch/${v.nextAndpreChap[0].nextHref}`),window.location.reload()},children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6 text-white",children:P.jsx("path",{d:"M5.055 7.06C3.805 6.347 2.25 7.25 2.25 8.69v8.122c0 1.44 1.555 2.343 2.805 1.628L12 14.471v2.34c0 1.44 1.555 2.343 2.805 1.628l7.108-4.061c1.26-.72 1.26-2.536 0-3.256l-7.108-4.061C13.555 6.346 12 7.249 12 8.689v2.34L5.055 7.061Z"})})})]})]})]}):""})},YV=t=>{const e=lo(t),n=[],i=[],s=[];return e("#hot-home").find(".MovieList").find("li").each((r,a)=>{const o=e("img",a).attr("src"),l=e("a",a).attr("href"),u=e(".Title",a).text(),c=e(".Info",a).find(".Vote").text(),d=e(".Info",a).find(".Time").text(),f=e(".Info",a).find(".Date").text();n.push({title:u,href:fr({url:l})??"",image:o??"",vote:c,currentEp:d,date:f})}),e("#single-home").find(".MovieList").find("li").each((r,a)=>{const o=e("img",a).attr("src"),l=e("a",a).attr("href"),u=e(".Title",a).text(),c=e(".Info",a).find(".Vote").text(),d=e(".Info",a).find(".Time").text(),f=e(".Info",a).find(".Date").text();i.push({title:u,href:fr({url:l})??"",image:o??"",vote:c,currentEp:d,date:f})}),e("#new-home").find(".MovieList").find("li").each((r,a)=>{const o=e("img",a).attr("src"),l=e("a",a).attr("href"),u=e(".Title",a).text(),c=e(".Info",a).find(".Vote").text(),d=e(".Info",a).find(".Time").text(),f=e(".Info",a).find(".Date").text(),h=e(".Image",a).find(".b").text();s.push({title:u,href:fr({url:l})??"",image:o??"",vote:c,currentEp:d,date:f,timeSchedule:h})}),{listRecommend:n,commingSoon:s,newUpdate:i}},qV=async()=>{const t=await Ei.get({url:uu,responseType:"text",headers:vr(void 0)});return{data:YV(t.data)}},XV=()=>{const[t,e]=X.useState(),{setLoading:n}=su(),i=r=>{var a,o,l;return`${new Date((a=r.timeSchedule)==null?void 0:a.split("-")[0],(o=r.timeSchedule)==null?void 0:o.split("-")[1],(l=r.timeSchedule)==null?void 0:l.split("-")[2]).toLocaleString("vi-VN").split(" ")[1]}`},s=async()=>{e((await qV()).data)};return X.useEffect(()=>{n(!0),s()},[]),P.jsxs("div",{className:"p-2",children:[P.jsx("h3",{className:"text-gray-50 mb-2",children:"Đề xuất"}),P.jsx("div",{className:"grid grid-cols-3 gap-2 w-full h-full",children:t==null?void 0:t.listRecommend.map((r,a)=>P.jsx(zo,{to:`/watchanime/${r.href}`,children:P.jsxs("div",{className:"flex flex-col w-full h-auto items-center",children:[P.jsxs("div",{className:"relative",children:[P.jsx("img",{src:r.image,alt:r.title,onLoad:()=>{n(!1)},className:"w-full object-cover h-[150px] rounded-md"}),P.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#00000023]"}),P.jsxs("h1",{className:"text-sm absolute bottom-0 w-full z-50 text-white h-[25px] ml-2 rounded-b-md",children:["Tập ",r.currentEp.split("/")[0]]})]}),P.jsx("div",{className:"w-full",children:P.jsx("h3",{className:"text-[15px] w-full font-[500] two-line",children:r.title})})]})},a))}),P.jsx("h3",{className:"text-gray-50 my-2",children:"Mới cập nhật"}),P.jsx("div",{className:"grid grid-cols-3 gap-2 w-full h-full",children:t==null?void 0:t.newUpdate.map((r,a)=>P.jsx(zo,{to:`/watchanime/${r.href}`,children:P.jsxs("div",{className:"flex flex-col w-full h-auto items-center",children:[P.jsxs("div",{className:"relative",children:[P.jsx("img",{src:r.image,alt:r.title,className:"w-full object-cover h-[150px] rounded-md"}),P.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#00000023]"}),P.jsxs("h1",{className:"text-sm absolute bottom-0 w-full z-50 text-white h-[25px] ml-2 rounded-b-md",children:["Tập ",r.currentEp.split("/")[0]]})]}),P.jsx("div",{className:"w-full",children:P.jsx("h3",{className:"text-[15px] w-full font-[500] two-line",children:r.title})})]})},a))}),P.jsx("h3",{className:"text-gray-50 my-2",children:"Sắp chiếu"}),P.jsx("div",{className:"grid grid-cols-3 gap-2 w-full h-full",children:t==null?void 0:t.commingSoon.map((r,a)=>{var o;return P.jsx(zo,{to:`/watchanime/${r.href}`,children:P.jsxs("div",{className:"flex flex-col w-full h-auto items-center",children:[P.jsxs("div",{className:"relative",children:[P.jsx("img",{src:r.image,alt:r.title,className:"w-full object-cover h-[150px] rounded-md"}),P.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#00000036]"}),P.jsx("h1",{className:"text-center text-sm absolute bottom-0 w-full z-50 text-white h-[25px] rounded-b-md",children:((o=r.timeSchedule)==null?void 0:o.split("-").length)>1?`${Number(i(r).split("/")[0])-10<=0?`0${i(r).split("/")[0]}`:i(r).split("/")[0]} - ${i(r).split("/")[0].length>2?`0${i(r).split("/")[1]}`:i(r).split("/")[1]} - ${i(r).split("/")[2]}`:"Sắp chiếu"})]}),P.jsx("div",{className:"w-full",children:P.jsx("h3",{className:"text-[15px] w-full font-[500] two-line",children:r.title})})]})},a)})}),P.jsx("div",{className:"h-[70px]"})]})},QV=t=>{const e=lo(t),n=[];return e(".MovieListSldCn").find(".TPostMv").each((i,s)=>{const r=e("img",s).attr("src"),a=e(".TPost").find("a").attr("href"),o=e(".Title",s).text(),l=e(".Info",s).find(".Vote").text(),u=e(".Info",s).find(".Time").text(),c=e(".Info",s).find(".Date").text(),d=e(".Description",s).find("p")[0].children[0].data.replace(`
`,""),f=e(".Description",s).find(".Studio").text(),h=[];e(".Description",s).find(".Genre").find("a").each((p,g)=>{h.push({url:e(g).attr("href")??"",name:e(g).text()})}),n.push({title:o,href:fr({url:a})??"",image:r??"",vote:l,currentEp:u,date:c,description:d,studio:f,genres:h})}),n},ZV=async()=>{const t=await Ei.get({url:uu,responseType:"text",headers:vr(void 0)});return{data:QV(t.data)}};function nx(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function A1(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:nx(e[n])&&nx(t[n])&&Object.keys(e[n]).length>0&&A1(t[n],e[n])})}const PR={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function uo(){const t=typeof document<"u"?document:{};return A1(t,PR),t}const JV={document:PR,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Tn(){const t=typeof window<"u"?window:{};return A1(t,JV),t}function eG(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function tG(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Wm(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function Gd(){return Date.now()}function nG(t){const e=Tn();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function iG(t,e){e===void 0&&(e="x");const n=Tn();let i,s,r;const a=nG(t);return n.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),r=new n.WebKitCSSMatrix(s==="none"?"":s)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?s=r.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?s=r.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function Xu(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function sG(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function ln(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(i!=null&&!sG(i)){const s=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,a=s.length;r<a;r+=1){const o=s[r],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(Xu(t[o])&&Xu(i[o])?i[o].__swiper__?t[o]=i[o]:ln(t[o],i[o]):!Xu(t[o])&&Xu(i[o])?(t[o]={},i[o].__swiper__?t[o]=i[o]:ln(t[o],i[o])):t[o]=i[o])}}}return t}function Qu(t,e,n){t.style.setProperty(e,n)}function kR(t){let{swiper:e,targetPosition:n,side:i}=t;const s=Tn(),r=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=n>r?"next":"prev",c=(f,h)=>u==="next"&&f>=h||u==="prev"&&f<=h,d=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),h=.5-Math.cos(f*Math.PI)/2;let p=r+h*(n-r);if(c(p,n)&&(p=n),e.wrapperEl.scrollTo({[i]:p}),c(p,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function Mi(t,e){e===void 0&&(e="");const n=[...t.children];return t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(i=>i.matches(e)):n}function rG(t,e){const n=e.contains(t);return!n&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(t):n}function jd(t){try{console.warn(t);return}catch{}}function zm(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:eG(e)),n}function aG(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function oG(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function gs(t,e){return Tn().getComputedStyle(t,null).getPropertyValue(e)}function ix(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function lG(t,e){const n=[];let i=t.parentElement;for(;i;)n.push(i),i=i.parentElement;return n}function sx(t,e,n){const i=Tn();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let w0;function uG(){const t=Tn(),e=uo();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function NR(){return w0||(w0=uG()),w0}let L0;function cG(t){let{userAgent:e}=t===void 0?{}:t;const n=NR(),i=Tn(),s=i.navigator.platform,r=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,u=r.match(/(Android);?[\s\/]+([\d.]+)?/);let c=r.match(/(iPad).*OS\s([\d_]+)/);const d=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=s==="Win32";let p=s==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&n.touch&&g.indexOf(`${o}x${l}`)>=0&&(c=r.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!h&&(a.os="android",a.android=!0),(c||f||d)&&(a.os="ios",a.ios=!0),a}function OR(t){return t===void 0&&(t={}),L0||(L0=cG(t)),L0}let I0;function dG(){const t=Tn(),e=OR();let n=!1;function i(){const o=t.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(i()){const o=String(t.navigator.userAgent);if(o.includes("Version/")){const[l,u]=o.split("Version/")[1].split(" ")[0].split(".").map(c=>Number(c));n=l<16||l===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),r=i(),a=r||s&&e.ios;return{isSafari:n||r,needPerspectiveFix:n,need3dFix:a,isWebView:s}}function fG(){return I0||(I0=dG()),I0}function hG(t){let{swiper:e,on:n,emit:i}=t;const s=Tn();let r=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(d=>{a=s.requestAnimationFrame(()=>{const{width:f,height:h}=e;let p=f,g=h;d.forEach(v=>{let{contentBoxSize:E,contentRect:y,target:T}=v;T&&T!==e.el||(p=y?y.width:(E[0]||E).inlineSize,g=y?y.height:(E[0]||E).blockSize)}),(p!==f||g!==h)&&o()})}),r.observe(e.el))},u=()=>{a&&s.cancelAnimationFrame(a),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},c=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",c)}),n("destroy",()=>{u(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",c)})}function pG(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=[],a=Tn(),o=function(c,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,h=new f(p=>{if(e.__preventObserver__)return;if(p.length===1){s("observerUpdate",p[0]);return}const g=function(){s("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(g):a.setTimeout(g,0)});h.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),r.push(h)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=lG(e.hostEl);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},u=()=>{r.forEach(c=>{c.disconnect()}),r.splice(0,r.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",u)}var mG={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=n?"unshift":"push";return t.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][s](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(){i.off(t,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e.apply(i,a)}return s.__emitterProxy=e,i.on(t,s,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&n.eventsListeners[i].splice(r,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,i;for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],n=r.slice(1,r.length),i=t):(e=r[0].events,n=r[0].data,i=r[0].context||t),n.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(i,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(u=>{u.apply(i,n)})}),t}};function gG(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(gs(i,"padding-left")||0,10)-parseInt(gs(i,"padding-right")||0,10),n=n-parseInt(gs(i,"padding-top")||0,10)-parseInt(gs(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function EG(){const t=this;function e(_,N){return parseFloat(_.getPropertyValue(t.getDirectionLabel(N))||0)}const n=t.params,{wrapperEl:i,slidesEl:s,size:r,rtlTranslate:a,wrongRTL:o}=t,l=t.virtual&&n.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,c=Mi(s,`.${t.params.slideClass}, swiper-slide`),d=l?t.virtual.slides.length:c.length;let f=[];const h=[],p=[];let g=n.slidesOffsetBefore;typeof g=="function"&&(g=n.slidesOffsetBefore.call(t));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(t));const E=t.snapGrid.length,y=t.slidesGrid.length;let T=n.spaceBetween,b=-g,x=0,w=0;if(typeof r>"u")return;typeof T=="string"&&T.indexOf("%")>=0?T=parseFloat(T.replace("%",""))/100*r:typeof T=="string"&&(T=parseFloat(T)),t.virtualSize=-T,c.forEach(_=>{a?_.style.marginLeft="":_.style.marginRight="",_.style.marginBottom="",_.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Qu(i,"--swiper-centered-offset-before",""),Qu(i,"--swiper-centered-offset-after",""));const A=n.grid&&n.grid.rows>1&&t.grid;A?t.grid.initSlides(c):t.grid&&t.grid.unsetSlides();let C;const L=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(_=>typeof n.breakpoints[_].slidesPerView<"u").length>0;for(let _=0;_<d;_+=1){C=0;let N;if(c[_]&&(N=c[_]),A&&t.grid.updateSlide(_,N,c),!(c[_]&&gs(N,"display")==="none")){if(n.slidesPerView==="auto"){L&&(c[_].style[t.getDirectionLabel("width")]="");const j=getComputedStyle(N),U=N.style.transform,J=N.style.webkitTransform;if(U&&(N.style.transform="none"),J&&(N.style.webkitTransform="none"),n.roundLengths)C=t.isHorizontal()?sx(N,"width"):sx(N,"height");else{const q=e(j,"width"),te=e(j,"padding-left"),ce=e(j,"padding-right"),Y=e(j,"margin-left"),O=e(j,"margin-right"),k=j.getPropertyValue("box-sizing");if(k&&k==="border-box")C=q+Y+O;else{const{clientWidth:z,offsetWidth:G}=N;C=q+te+ce+Y+O+(G-z)}}U&&(N.style.transform=U),J&&(N.style.webkitTransform=J),n.roundLengths&&(C=Math.floor(C))}else C=(r-(n.slidesPerView-1)*T)/n.slidesPerView,n.roundLengths&&(C=Math.floor(C)),c[_]&&(c[_].style[t.getDirectionLabel("width")]=`${C}px`);c[_]&&(c[_].swiperSlideSize=C),p.push(C),n.centeredSlides?(b=b+C/2+x/2+T,x===0&&_!==0&&(b=b-r/2-T),_===0&&(b=b-r/2-T),Math.abs(b)<1/1e3&&(b=0),n.roundLengths&&(b=Math.floor(b)),w%n.slidesPerGroup===0&&f.push(b),h.push(b)):(n.roundLengths&&(b=Math.floor(b)),(w-Math.min(t.params.slidesPerGroupSkip,w))%t.params.slidesPerGroup===0&&f.push(b),h.push(b),b=b+C+T),t.virtualSize+=C+T,x=C,w+=1}}if(t.virtualSize=Math.max(t.virtualSize,r)+v,a&&o&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${t.virtualSize+T}px`),n.setWrapperSize&&(i.style[t.getDirectionLabel("width")]=`${t.virtualSize+T}px`),A&&t.grid.updateWrapperSize(C,f),!n.centeredSlides){const _=[];for(let N=0;N<f.length;N+=1){let j=f[N];n.roundLengths&&(j=Math.floor(j)),f[N]<=t.virtualSize-r&&_.push(j)}f=_,Math.floor(t.virtualSize-r)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-r)}if(l&&n.loop){const _=p[0]+T;if(n.slidesPerGroup>1){const N=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),j=_*n.slidesPerGroup;for(let U=0;U<N;U+=1)f.push(f[f.length-1]+j)}for(let N=0;N<t.virtual.slidesBefore+t.virtual.slidesAfter;N+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+_),h.push(h[h.length-1]+_),t.virtualSize+=_}if(f.length===0&&(f=[0]),T!==0){const _=t.isHorizontal()&&a?"marginLeft":t.getDirectionLabel("marginRight");c.filter((N,j)=>!n.cssMode||n.loop?!0:j!==c.length-1).forEach(N=>{N.style[_]=`${T}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let _=0;p.forEach(j=>{_+=j+(T||0)}),_-=T;const N=_-r;f=f.map(j=>j<=0?-g:j>N?N+v:j)}if(n.centerInsufficientSlides){let _=0;p.forEach(j=>{_+=j+(T||0)}),_-=T;const N=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(_+N<r){const j=(r-_-N)/2;f.forEach((U,J)=>{f[J]=U-j}),h.forEach((U,J)=>{h[J]=U+j})}}if(Object.assign(t,{slides:c,snapGrid:f,slidesGrid:h,slidesSizesGrid:p}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Qu(i,"--swiper-centered-offset-before",`${-f[0]}px`),Qu(i,"--swiper-centered-offset-after",`${t.size/2-p[p.length-1]/2}px`);const _=-t.snapGrid[0],N=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(j=>j+_),t.slidesGrid=t.slidesGrid.map(j=>j+N)}if(d!==u&&t.emit("slidesLengthChange"),f.length!==E&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),h.length!==y&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const _=`${n.containerModifierClass}backface-hidden`,N=t.el.classList.contains(_);d<=n.maxBackfaceHiddenSlides?N||t.el.classList.add(_):N&&t.el.classList.remove(_)}}function TG(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{n.push(o)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const o=e.activeIndex+r;if(o>e.slides.length&&!i)break;n.push(a(o))}else n.push(a(e.activeIndex));for(r=0;r<n.length;r+=1)if(typeof n[r]<"u"){const o=n[r].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function yG(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}const rx=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function vG(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:i,rtlTranslate:s,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;s&&(a=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=n.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const u=i[l];let c=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=i[0].swiperSlideOffset);const d=(a+(n.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),f=(a-r[0]+(n.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),h=-(a-c),p=h+e.slidesSizesGrid[l],g=h>=0&&h<=e.size-e.slidesSizesGrid[l],v=h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size;v&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),rx(u,v,n.slideVisibleClass),rx(u,g,n.slideFullyVisibleClass),u.progress=s?-d:d,u.originalProgress=s?-f:f}}function bG(t){const e=this;if(typeof t>"u"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:a,progressLoop:o}=e;const l=r,u=a;if(i===0)s=0,r=!0,a=!0;else{s=(t-e.minTranslate())/i;const c=Math.abs(t-e.minTranslate())<1,d=Math.abs(t-e.maxTranslate())<1;r=c||s<=0,a=d||s>=1,c&&(s=0),d&&(s=1)}if(n.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[c],h=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(t);g>=f?o=(g-f)/p:o=(g+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:r,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),r&&!l&&e.emit("reachBeginning toEdge"),a&&!u&&e.emit("reachEnd toEdge"),(l&&!r||u&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}const _0=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function xG(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:s}=t,r=t.virtual&&n.virtual.enabled,a=t.grid&&n.grid&&n.grid.rows>1,o=d=>Mi(i,`.${n.slideClass}${d}, swiper-slide${d}`)[0];let l,u,c;if(r)if(n.loop){let d=s-t.virtual.slidesBefore;d<0&&(d=t.virtual.slides.length+d),d>=t.virtual.slides.length&&(d-=t.virtual.slides.length),l=o(`[data-swiper-slide-index="${d}"]`)}else l=o(`[data-swiper-slide-index="${s}"]`);else a?(l=e.filter(d=>d.column===s)[0],c=e.filter(d=>d.column===s+1)[0],u=e.filter(d=>d.column===s-1)[0]):l=e[s];l&&(a||(c=oG(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!c&&(c=e[0]),u=aG(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(d=>{_0(d,d===l,n.slideActiveClass),_0(d,d===c,n.slideNextClass),_0(d,d===u,n.slidePrevClass)}),t.emitSlidesClasses()}const Oc=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){let s=i.querySelector(`.${t.params.lazyPreloaderClass}`);!s&&t.isElement&&(i.shadowRoot?s=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(s=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},R0=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Km=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),s=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((l,u)=>a+i+u)),t.slides.forEach((l,u)=>{o.includes(l.column)&&R0(t,u)});return}const r=s+i-1;if(t.params.rewind||t.params.loop)for(let a=s-e;a<=r+e;a+=1){const o=(a%n+n)%n;(o<s||o>r)&&R0(t,o)}else for(let a=Math.max(s-e,0);a<=Math.min(r+e,n-1);a+=1)a!==s&&(a>r||a<s)&&R0(t,a)};function SG(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?s=r:i>=e[r]&&i<e[r+1]&&(s=r+1):i>=e[r]&&(s=r);return n.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function AG(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:r,realIndex:a,snapIndex:o}=e;let l=t,u;const c=h=>{let p=h-e.virtual.slidesBefore;return p<0&&(p=e.virtual.slides.length+p),p>=e.virtual.slides.length&&(p-=e.virtual.slides.length),p};if(typeof l>"u"&&(l=SG(e)),i.indexOf(n)>=0)u=i.indexOf(n);else{const h=Math.min(s.slidesPerGroupSkip,l);u=h+Math.floor((l-h)/s.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),l===r&&!e.params.loop){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=c(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let f;if(e.virtual&&s.virtual.enabled&&s.loop)f=c(l);else if(d){const h=e.slides.filter(g=>g.column===l)[0];let p=parseInt(h.getAttribute("data-swiper-slide-index"),10);Number.isNaN(p)&&(p=Math.max(e.slides.indexOf(h),0)),f=Math.floor(p/s.grid.rows)}else if(e.slides[l]){const h=e.slides[l].getAttribute("data-swiper-slide-index");h?f=parseInt(h,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:o,snapIndex:u,previousRealIndex:a,realIndex:f,previousIndex:r,activeIndex:l}),e.initialized&&Km(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function CG(t,e){const n=this,i=n.params;let s=t.closest(`.${i.slideClass}, swiper-slide`);!s&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(o=>{!s&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(s=o)});let r=!1,a;if(s){for(let o=0;o<n.slides.length;o+=1)if(n.slides[o]===s){r=!0,a=o;break}}if(s&&r)n.clickedSlide=s,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=a;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var wG={updateSize:gG,updateSlides:EG,updateAutoHeight:TG,updateSlidesOffset:yG,updateSlidesProgress:vG,updateProgress:bG,updateSlidesClasses:xG,updateActiveIndex:AG,updateClickedSlide:CG};function LG(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:i,translate:s,wrapperEl:r}=e;if(n.virtualTranslate)return i?-s:s;if(n.cssMode)return s;let a=iG(r,t);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function IG(t,e){const n=this,{rtlTranslate:i,params:s,wrapperEl:r,progress:a}=n;let o=0,l=0;const u=0;n.isHorizontal()?o=i?-t:t:l=t,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?o:l,s.cssMode?r[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-o:-l:s.virtualTranslate||(n.isHorizontal()?o-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),r.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`);let c;const d=n.maxTranslate()-n.minTranslate();d===0?c=0:c=(t-n.minTranslate())/d,c!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function _G(){return-this.snapGrid[0]}function RG(){return-this.snapGrid[this.snapGrid.length-1]}function DG(t,e,n,i,s){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),i===void 0&&(i=!0);const r=this,{params:a,wrapperEl:o}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const l=r.minTranslate(),u=r.maxTranslate();let c;if(i&&t>l?c=l:i&&t<u?c=u:c=t,r.updateProgress(c),a.cssMode){const d=r.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else{if(!r.support.smoothScroll)return kR({swiper:r,targetPosition:-c,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(c),n&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(c),n&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(f){!r||r.destroyed||f.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,n&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var PG={getTranslate:LG,setTranslate:IG,minTranslate:_G,maxTranslate:RG,translateTo:DG};function kG(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function MR(t){let{swiper:e,runCallbacks:n,direction:i,step:s}=t;const{activeIndex:r,previousIndex:a}=e;let o=i;if(o||(r>a?o="next":r<a?o="prev":o="reset"),e.emit(`transition${s}`),n&&r!==a){if(o==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function NG(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),MR({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function OG(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),MR({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var MG={setTransition:kG,transitionStart:NG,transitionEnd:OG};function FG(t,e,n,i,s){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const r=this;let a=t;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:f,wrapperEl:h,enabled:p}=r;if(!p&&!i&&!s||r.destroyed||r.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);const g=Math.min(r.params.slidesPerGroupSkip,a);let v=g+Math.floor((a-g)/r.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const E=-l[v];if(o.normalizeSlideIndex)for(let T=0;T<u.length;T+=1){const b=-Math.floor(E*100),x=Math.floor(u[T]*100),w=Math.floor(u[T+1]*100);typeof u[T+1]<"u"?b>=x&&b<w-(w-x)/2?a=T:b>=x&&b<w&&(a=T+1):b>=x&&(a=T)}if(r.initialized&&a!==d&&(!r.allowSlideNext&&(f?E>r.translate&&E>r.minTranslate():E<r.translate&&E<r.minTranslate())||!r.allowSlidePrev&&E>r.translate&&E>r.maxTranslate()&&(d||0)!==a))return!1;a!==(c||0)&&n&&r.emit("beforeSlideChangeStart"),r.updateProgress(E);let y;if(a>d?y="next":a<d?y="prev":y="reset",f&&-E===r.translate||!f&&E===r.translate)return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),o.effect!=="slide"&&r.setTranslate(E),y!=="reset"&&(r.transitionStart(n,y),r.transitionEnd(n,y)),!1;if(o.cssMode){const T=r.isHorizontal(),b=f?E:-E;if(e===0){const x=r.virtual&&r.params.virtual.enabled;x&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),x&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[T?"scrollLeft":"scrollTop"]=b})):h[T?"scrollLeft":"scrollTop"]=b,x&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1})}else{if(!r.support.smoothScroll)return kR({swiper:r,targetPosition:b,side:T?"left":"top"}),!0;h.scrollTo({[T?"left":"top"]:b,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(E),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(n,y),e===0?r.transitionEnd(n,y):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(b){!r||r.destroyed||b.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(n,y))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function BG(t,e,n,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let a=t;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)a=a+s.virtual.slidesBefore;else{let o;if(r){const f=a*s.params.grid.rows;o=s.slides.filter(h=>h.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=s.getSlideIndexByData(a);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u}=s.params;let c=s.params.slidesPerView;c==="auto"?c=s.slidesPerViewDynamic():(c=Math.ceil(parseFloat(s.params.slidesPerView,10)),u&&c%2===0&&(c=c+1));let d=l-o<c;if(u&&(d=d||o<Math.ceil(c/2)),i&&u&&s.params.slidesPerView!=="auto"&&!r&&(d=!1),d){const f=u?o<s.activeIndex?"prev":"next":o-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?o+1:o-l+1,slideRealIndex:f==="next"?s.realIndex:void 0})}if(r){const f=a*s.params.grid.rows;a=s.slides.filter(h=>h.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=s.getSlideIndexByData(a)}return requestAnimationFrame(()=>{s.slideTo(a,e,n,i)}),s}function UG(t,e,n){e===void 0&&(e=!0);const i=this,{enabled:s,params:r,animating:a}=i;if(!s||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);let o=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<r.slidesPerGroupSkip?1:o,u=i.virtual&&r.virtual.enabled;if(r.loop){if(a&&!u&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,t,e,n)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+l,t,e,n)}function $G(t,e,n){e===void 0&&(e=!0);const i=this,{params:s,snapGrid:r,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=i;if(!l||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);const c=i.virtual&&s.virtual.enabled;if(s.loop){if(u&&!c&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function f(E){return E<0?-Math.floor(Math.abs(E)):Math.floor(E)}const h=f(d),p=r.map(E=>f(E));let g=r[p.indexOf(h)-1];if(typeof g>"u"&&s.cssMode){let E;r.forEach((y,T)=>{h>=y&&(E=T)}),typeof E<"u"&&(g=r[E>0?E-1:E])}let v=0;if(typeof g<"u"&&(v=a.indexOf(g),v<0&&(v=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(v=v-i.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),s.rewind&&i.isBeginning){const E=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(E,t,e,n)}else if(s.loop&&i.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(v,t,e,n)}),!0;return i.slideTo(v,t,e,n)}function HG(t,e,n){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof t>"u"&&(t=i.params.speed),i.slideTo(i.activeIndex,t,e,n)}function VG(t,e,n,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);let r=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){const u=s.snapGrid[o],c=s.snapGrid[o+1];l-u>(c-u)*i&&(r+=s.params.slidesPerGroup)}else{const u=s.snapGrid[o-1],c=s.snapGrid[o];l-u<=(c-u)*i&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,t,e,n)}function GG(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let s=t.clickedIndex,r;const a=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;r=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<t.loopedSlides-i/2||s>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),s=t.getSlideIndex(Mi(n,`${a}[data-swiper-slide-index="${r}"]`)[0]),Wm(()=>{t.slideTo(s)})):t.slideTo(s):s>t.slides.length-i?(t.loopFix(),s=t.getSlideIndex(Mi(n,`${a}[data-swiper-slide-index="${r}"]`)[0]),Wm(()=>{t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}var jG={slideTo:FG,slideToLoop:BG,slideNext:UG,slidePrev:$G,slideReset:HG,slideToClosest:VG,slideToClickedSlide:GG};function WG(t){const e=this,{params:n,slidesEl:i}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{Mi(i,`.${n.slideClass}, swiper-slide`).forEach((d,f)=>{d.setAttribute("data-swiper-slide-index",f)})},r=e.grid&&n.grid&&n.grid.rows>1,a=n.slidesPerGroup*(r?n.grid.rows:1),o=e.slides.length%a!==0,l=r&&e.slides.length%n.grid.rows!==0,u=c=>{for(let d=0;d<c;d+=1){const f=e.isElement?zm("swiper-slide",[n.slideBlankClass]):zm("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(f)}};if(o){if(n.loopAddBlankSlides){const c=a-e.slides.length%a;u(c),e.recalcSlides(),e.updateSlides()}else jd("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(n.loopAddBlankSlides){const c=n.grid.rows-e.slides.length%n.grid.rows;u(c),e.recalcSlides(),e.updateSlides()}else jd("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function zG(t){let{slideRealIndex:e,slideTo:n=!0,direction:i,setTranslate:s,activeSlideIndex:r,byController:a,byMousewheel:o}=t===void 0?{}:t;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:f,params:h}=l,{centeredSlides:p}=h;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&h.virtual.enabled){n&&(!h.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):h.centeredSlides&&l.snapIndex<h.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}let g=h.slidesPerView;g==="auto"?g=l.slidesPerViewDynamic():(g=Math.ceil(parseFloat(h.slidesPerView,10)),p&&g%2===0&&(g=g+1));const v=h.slidesPerGroupAuto?g:h.slidesPerGroup;let E=v;E%v!==0&&(E+=v-E%v),E+=h.loopAdditionalSlides,l.loopedSlides=E;const y=l.grid&&h.grid&&h.grid.rows>1;u.length<g+E?jd("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&h.grid.fill==="row"&&jd("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const T=[],b=[];let x=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(u.filter(U=>U.classList.contains(h.slideActiveClass))[0]):x=r;const w=i==="next"||!i,A=i==="prev"||!i;let C=0,L=0;const _=y?Math.ceil(u.length/h.grid.rows):u.length,j=(y?u[r].column:r)+(p&&typeof s>"u"?-g/2+.5:0);if(j<E){C=Math.max(E-j,v);for(let U=0;U<E-j;U+=1){const J=U-Math.floor(U/_)*_;if(y){const q=_-J-1;for(let te=u.length-1;te>=0;te-=1)u[te].column===q&&T.push(te)}else T.push(_-J-1)}}else if(j+g>_-E){L=Math.max(j-(_-E*2),v);for(let U=0;U<L;U+=1){const J=U-Math.floor(U/_)*_;y?u.forEach((q,te)=>{q.column===J&&b.push(te)}):b.push(J)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),A&&T.forEach(U=>{u[U].swiperLoopMoveDOM=!0,f.prepend(u[U]),u[U].swiperLoopMoveDOM=!1}),w&&b.forEach(U=>{u[U].swiperLoopMoveDOM=!0,f.append(u[U]),u[U].swiperLoopMoveDOM=!1}),l.recalcSlides(),h.slidesPerView==="auto"?l.updateSlides():y&&(T.length>0&&A||b.length>0&&w)&&l.slides.forEach((U,J)=>{l.grid.updateSlide(J,U,l.slides)}),h.watchSlidesProgress&&l.updateSlidesOffset(),n){if(T.length>0&&A){if(typeof e>"u"){const U=l.slidesGrid[x],q=l.slidesGrid[x+C]-U;o?l.setTranslate(l.translate-q):(l.slideTo(x+Math.ceil(C),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-q,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-q))}else if(s){const U=y?T.length/h.grid.rows:T.length;l.slideTo(l.activeIndex+U,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(b.length>0&&w)if(typeof e>"u"){const U=l.slidesGrid[x],q=l.slidesGrid[x-L]-U;o?l.setTranslate(l.translate-q):(l.slideTo(x-L,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-q,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-q))}else{const U=y?b.length/h.grid.rows:b.length;l.slideTo(l.activeIndex-U,0,!1,!0)}}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const U={slideRealIndex:e,direction:i,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(J=>{!J.destroyed&&J.params.loop&&J.loopFix({...U,slideTo:J.params.slidesPerView===h.slidesPerView?n:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...U,slideTo:l.controller.control.params.slidesPerView===h.slidesPerView?n:!1})}l.emit("loopFix")}function KG(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[r]=s}),t.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{n.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var YG={loopCreate:WG,loopFix:zG,loopDestroy:KG};function qG(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function XG(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var QG={setGrabCursor:qG,unsetGrabCursor:XG};function ZG(t,e){e===void 0&&(e=this);function n(i){if(!i||i===uo()||i===Tn())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(t);return!s&&!i.getRootNode?null:s||n(i.getRootNode().host)}return n(e)}function ax(t,e,n){const i=Tn(),{params:s}=t,r=s.edgeSwipeDetection,a=s.edgeSwipeThreshold;return r&&(n<=a||n>=i.innerWidth-a)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function JG(t){const e=this,n=uo();let i=t;i.originalEvent&&(i=i.originalEvent);const s=e.touchEventsData;if(i.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==i.pointerId)return;s.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(s.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){ax(e,i,i.targetTouches[0].pageX);return}const{params:r,touches:a,enabled:o}=e;if(!o||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!rG(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||s.isTouched&&s.isMoved)return;const u=!!r.noSwipingClass&&r.noSwipingClass!=="",c=i.composedPath?i.composedPath():i.path;u&&i.target&&i.target.shadowRoot&&c&&(l=c[0]);const d=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(f?ZG(d,l):l.closest(d))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const h=a.currentX,p=a.currentY;if(!ax(e,i,h))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=h,a.startY=p,s.touchStartTime=Gd(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let g=!0;l.matches(s.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),n.activeElement&&n.activeElement.matches(s.focusableElements)&&n.activeElement!==l&&n.activeElement.blur();const v=g&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||v)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function ej(t){const e=uo(),n=this,i=n.touchEventsData,{params:s,touches:r,rtlTranslate:a,enabled:o}=n;if(!o||!s.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].filter(w=>w.identifier===i.touchId)[0],!u||u.identifier!==i.touchId)return}else u=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}const c=u.pageX,d=u.pageY;if(l.preventedByNestedSwiper){r.startX=c,r.startY=d;return}if(!n.allowTouchMove){l.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d}),i.touchStartTime=Gd());return}if(s.touchReleaseOnEdges&&!s.loop){if(n.isVertical()){if(d<r.startY&&n.translate<=n.maxTranslate()||d>r.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(c<r.startX&&n.translate<=n.maxTranslate()||c>r.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=c,r.currentY=d;const f=r.currentX-r.startX,h=r.currentY-r.startY;if(n.params.threshold&&Math.sqrt(f**2+h**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let w;n.isHorizontal()&&r.currentY===r.startY||n.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:f*f+h*h>=25&&(w=Math.atan2(Math.abs(h),Math.abs(f))*180/Math.PI,i.isScrolling=n.isHorizontal()?w>s.touchAngle:90-w>s.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let p=n.isHorizontal()?f:h,g=n.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(p=Math.abs(p)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),r.diff=p,p*=s.touchRatio,a&&(p=-p,g=-g);const v=n.touchesDirection;n.swipeDirection=p>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";const E=n.params.loop&&!s.cssMode,y=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(E&&y&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const w=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(w)}i.allowMomentumBounce=!1,s.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let T;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&v!==n.touchesDirection&&E&&y&&Math.abs(p)>=1){Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=p+i.startTranslate;let b=!0,x=s.resistanceRatio;if(s.touchReleaseOnEdges&&(x=0),p>0?(E&&y&&!T&&i.allowThresholdMove&&i.currentTranslate>(s.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+p)**x))):p<0&&(E&&y&&!T&&i.allowThresholdMove&&i.currentTranslate<(s.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(s.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-p)**x))),b&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(p)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=n.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&n.freeMode||s.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function tj(t){const e=this,n=e.touchEventsData;let i=t;i.originalEvent&&(i=i.originalEvent);let s;if(i.type==="touchend"||i.type==="touchcancel"){if(s=[...i.changedTouches].filter(x=>x.identifier===n.touchId)[0],!s||s.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;s=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:u,enabled:c}=e;if(!c||!a.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&a.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}a.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=Gd(),f=d-n.touchStartTime;if(e.allowClick){const x=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(x&&x[0]||i.target,x),e.emit("tap click",i),f<300&&d-n.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(n.lastClickTime=Gd(),Wm(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||o.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let h;if(a.followFinger?h=l?e.translate:-e.translate:h=-n.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}const p=h>=-e.maxTranslate()&&!e.params.loop;let g=0,v=e.slidesSizesGrid[0];for(let x=0;x<u.length;x+=x<a.slidesPerGroupSkip?1:a.slidesPerGroup){const w=x<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof u[x+w]<"u"?(p||h>=u[x]&&h<u[x+w])&&(g=x,v=u[x+w]-u[x]):(p||h>=u[x])&&(g=x,v=u[u.length-1]-u[u.length-2])}let E=null,y=null;a.rewind&&(e.isBeginning?y=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(E=0));const T=(h-u[g])/v,b=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(T>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?E:g+b):e.slideTo(g)),e.swipeDirection==="prev"&&(T>1-a.longSwipesRatio?e.slideTo(g+b):y!==null&&T<0&&Math.abs(T)>a.longSwipesRatio?e.slideTo(y):e.slideTo(g))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(g+b):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(E!==null?E:g+b),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:g))}}function ox(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:s,snapGrid:r}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!o?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=s,t.allowSlideNext=i,t.params.watchOverflow&&r!==t.snapGrid&&t.checkOverflow()}function nj(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function ij(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let s;const r=t.maxTranslate()-t.minTranslate();r===0?s=0:s=(t.translate-t.minTranslate())/r,s!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function sj(t){const e=this;Oc(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function rj(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const FR=(t,e)=>{const n=uo(),{params:i,el:s,wrapperEl:r,device:a}=t,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;!s||typeof s=="string"||(n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:o}),s[l]("touchstart",t.onTouchStart,{passive:!1}),s[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:o}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:o}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[l]("click",t.onClick,!0),i.cssMode&&r[l]("scroll",t.onScroll),i.updateOnWindowResize?t[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",ox,!0):t[u]("observerUpdate",ox,!0),s[l]("load",t.onLoad,{capture:!0}))};function aj(){const t=this,{params:e}=t;t.onTouchStart=JG.bind(t),t.onTouchMove=ej.bind(t),t.onTouchEnd=tj.bind(t),t.onDocumentTouchStart=rj.bind(t),e.cssMode&&(t.onScroll=ij.bind(t)),t.onClick=nj.bind(t),t.onLoad=sj.bind(t),FR(t,"on")}function oj(){FR(this,"off")}var lj={attachEvents:aj,detachEvents:oj};const lx=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function uj(){const t=this,{realIndex:e,initialized:n,params:i,el:s}=t,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const a=t.getBreakpoint(r,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const l=(a in r?r[a]:void 0)||t.originalParams,u=lx(t,i),c=lx(t,l),d=t.params.grabCursor,f=l.grabCursor,h=i.enabled;u&&!c?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&c&&(s.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),d&&!f?t.unsetGrabCursor():!d&&f&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(T=>{if(typeof l[T]>"u")return;const b=i[T]&&i[T].enabled,x=l[T]&&l[T].enabled;b&&!x&&t[T].disable(),!b&&x&&t[T].enable()});const p=l.direction&&l.direction!==i.direction,g=i.loop&&(l.slidesPerView!==i.slidesPerView||p),v=i.loop;p&&n&&t.changeDirection(),ln(t.params,l);const E=t.params.enabled,y=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),h&&!E?t.disable():!h&&E&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",l),n&&(g?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!v&&y?(t.loopCreate(e),t.updateSlides()):v&&!y&&t.loopDestroy()),t.emit("breakpoint",l)}function cj(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let i=!1;const s=Tn(),r=e==="window"?s.innerHeight:n.clientHeight,a=Object.keys(t).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:r*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:u}=a[o];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(i=l):u<=n.clientWidth&&(i=l)}return i||"max"}var dj={setBreakpoint:uj,getBreakpoint:cj};function fj(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&n.push(e+s)}):typeof i=="string"&&n.push(e+i)}),n}function hj(){const t=this,{classNames:e,params:n,rtl:i,el:s,device:r}=t,a=fj(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),s.classList.add(...e),t.emitContainerClasses()}function pj(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var mj={addClasses:hj,removeClasses:pj};function gj(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const s=t.slides.length-1,r=t.slidesGrid[s]+t.slidesSizesGrid[s]+i*2;t.isLocked=t.size>r}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var Ej={checkOverflow:gj},Ym={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Tj(t,e){return function(i){i===void 0&&(i={});const s=Object.keys(i)[0],r=i[s];if(typeof r!="object"||r===null){ln(e,i);return}if(t[s]===!0&&(t[s]={enabled:!0}),s==="navigation"&&t[s]&&t[s].enabled&&!t[s].prevEl&&!t[s].nextEl&&(t[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&t[s]&&t[s].enabled&&!t[s].el&&(t[s].auto=!0),!(s in t&&"enabled"in r)){ln(e,i);return}typeof t[s]=="object"&&!("enabled"in t[s])&&(t[s].enabled=!0),t[s]||(t[s]={enabled:!1}),ln(e,i)}}const D0={eventsEmitter:mG,update:wG,translate:PG,transition:MG,slide:jG,loop:YG,grabCursor:QG,events:lj,breakpoints:dj,checkOverflow:Ej,classes:mj},P0={};let C1=class Ai{constructor(){let e,n;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?n=s[0]:[e,n]=s,n||(n={}),n=ln({},n),e&&!n.el&&(n.el=e);const a=uo();if(n.el&&typeof n.el=="string"&&a.querySelectorAll(n.el).length>1){const c=[];return a.querySelectorAll(n.el).forEach(d=>{const f=ln({},n,{el:d});c.push(new Ai(f))}),c}const o=this;o.__swiper__=!0,o.support=NR(),o.device=OR({userAgent:n.userAgent}),o.browser=fG(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],n.modules&&Array.isArray(n.modules)&&o.modules.push(...n.modules);const l={};o.modules.forEach(c=>{c({params:n,swiper:o,extendParams:Tj(n,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=ln({},Ym,l);return o.params=ln({},u,P0,n),o.originalParams=ln({},o.params),o.passedParams=ln({},n),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:i}=this,s=Mi(n,`.${i.slideClass}, swiper-slide`),r=ix(s[0]);return ix(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=Mi(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),a=(i.maxTranslate()-s)*e+s;i.translateTo(a,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);n.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const i=this,{params:s,slides:r,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:u}=i;let c=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=r[u]?Math.ceil(r[u].swiperSlideSize):0,f;for(let h=u+1;h<r.length;h+=1)r[h]&&!f&&(d+=Math.ceil(r[h].swiperSlideSize),c+=1,d>l&&(f=!0));for(let h=u-1;h>=0;h-=1)r[h]&&!f&&(d+=r[h].swiperSlideSize,c+=1,d>l&&(f=!0))}else if(e==="current")for(let d=u+1;d<r.length;d+=1)(n?a[d]+o[d]-a[u]<l:a[d]-a[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)a[u]-a[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Oc(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(a.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const s=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):Mi(i,s())[0];return!a&&n.params.createElements&&(a=zm("div",n.params.wrapperClass),i.append(a),Mi(i,`.${n.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(n,{el:i,wrapperEl:a,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||gs(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||gs(i,"direction")==="rtl"),wrongRTL:gs(a,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const s=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&s.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?Oc(n,r):r.addEventListener("load",a=>{Oc(n,a.target)})}),Km(n),n.initialized=!0,Km(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const i=this,{params:s,el:r,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),n&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),tG(i)),i.destroyed=!0),null}static extendDefaults(e){ln(P0,e)}static get extendedDefaults(){return P0}static get defaults(){return Ym}static installModule(e){Ai.prototype.__modules__||(Ai.prototype.__modules__=[]);const n=Ai.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Ai.installModule(n)),Ai):(Ai.installModule(e),Ai)}};Object.keys(D0).forEach(t=>{Object.keys(D0[t]).forEach(e=>{C1.prototype[e]=D0[t][e]})});C1.use([hG,pG]);const BR=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Sr(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function va(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:Sr(e[i])&&Sr(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:va(t[i],e[i]):t[i]=e[i]})}function UR(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function $R(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function HR(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function VR(t){t===void 0&&(t="");const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function yj(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function vj(t){let{swiper:e,slides:n,passedParams:i,changedParams:s,nextEl:r,prevEl:a,scrollbarEl:o,paginationEl:l}=t;const u=s.filter(L=>L!=="children"&&L!=="direction"&&L!=="wrapperClass"),{params:c,pagination:d,navigation:f,scrollbar:h,virtual:p,thumbs:g}=e;let v,E,y,T,b,x,w,A;s.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(v=!0),s.includes("controller")&&i.controller&&i.controller.control&&c.controller&&!c.controller.control&&(E=!0),s.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(y=!0),s.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(T=!0),s.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||r)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(b=!0);const C=L=>{e[L]&&(e[L].destroy(),L==="navigation"?(e.isElement&&(e[L].prevEl.remove(),e[L].nextEl.remove()),c[L].prevEl=void 0,c[L].nextEl=void 0,e[L].prevEl=void 0,e[L].nextEl=void 0):(e.isElement&&e[L].el.remove(),c[L].el=void 0,e[L].el=void 0))};s.includes("loop")&&e.isElement&&(c.loop&&!i.loop?x=!0:!c.loop&&i.loop?w=!0:A=!0),u.forEach(L=>{if(Sr(c[L])&&Sr(i[L]))Object.assign(c[L],i[L]),(L==="navigation"||L==="pagination"||L==="scrollbar")&&"enabled"in i[L]&&!i[L].enabled&&C(L);else{const _=i[L];(_===!0||_===!1)&&(L==="navigation"||L==="pagination"||L==="scrollbar")?_===!1&&C(L):c[L]=i[L]}}),u.includes("controller")&&!E&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),s.includes("children")&&n&&p&&c.virtual.enabled?(p.slides=n,p.update(!0)):s.includes("virtual")&&p&&c.virtual.enabled&&(n&&(p.slides=n),p.update(!0)),s.includes("children")&&n&&c.loop&&(A=!0),v&&g.init()&&g.update(!0),E&&(e.controller.control=c.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(c.pagination.el=l),d.init(),d.render(),d.update()),T&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),b&&(e.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),r.innerHTML=e.hostEl.constructor.nextButtonSvg,r.part.add("button-next"),e.el.appendChild(r)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),r&&(c.navigation.nextEl=r),a&&(c.navigation.prevEl=a),f.init(),f.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),s.includes("direction")&&e.changeDirection(i.direction,!1),(x||A)&&e.loopDestroy(),(w||A)&&e.loopCreate(),e.update()}function bj(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},i={},s={};va(n,Ym),n._emitClasses=!0,n.init=!1;const r={},a=BR.map(l=>l.replace(/_/,"")),o=Object.assign({},t);return Object.keys(o).forEach(l=>{typeof t[l]>"u"||(a.indexOf(l)>=0?Sr(t[l])?(n[l]={},s[l]={},va(n[l],t[l]),va(s[l],t[l])):(n[l]=t[l],s[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:r[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:s,rest:r,events:i}}function xj(t,e){let{el:n,nextEl:i,prevEl:s,paginationEl:r,scrollbarEl:a,swiper:o}=t;UR(e)&&i&&s&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=s,o.originalParams.navigation.prevEl=s),$R(e)&&r&&(o.params.pagination.el=r,o.originalParams.pagination.el=r),HR(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(n)}function Sj(t,e,n,i,s){const r=[];if(!e)return r;const a=l=>{r.indexOf(l)<0&&r.push(l)};if(n&&i){const l=i.map(s),u=n.map(s);l.join("")!==u.join("")&&a("children"),i.length!==n.length&&a("children")}return BR.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(Sr(t[l])&&Sr(e[l])){const u=Object.keys(t[l]),c=Object.keys(e[l]);u.length!==c.length?a(l):(u.forEach(d=>{t[l][d]!==e[l][d]&&a(l)}),c.forEach(d=>{t[l][d]!==e[l][d]&&a(l)}))}else t[l]!==e[l]&&a(l)}),r}const Aj=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wd.apply(this,arguments)}function GR(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function jR(t){const e=[];return $.Children.toArray(t).forEach(n=>{GR(n)?e.push(n):n.props&&n.props.children&&jR(n.props.children).forEach(i=>e.push(i))}),e}function Cj(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return $.Children.toArray(t).forEach(i=>{if(GR(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const s=jR(i.props.children);s.length>0?s.forEach(r=>e.push(r)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function wj(t,e,n){if(!n)return null;const i=c=>{let d=c;return c<0?d=e.length+c:d>=e.length&&(d=d-e.length),d},s=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:r,to:a}=n,o=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,u=[];for(let c=o;c<l;c+=1)c>=r&&c<=a&&u.push(e[i(c)]);return u.map((c,d)=>$.cloneElement(c,{swiper:t,style:s,key:c.props.virtualIndex||c.key||`slide-${d}`}))}function sl(t,e){return typeof window>"u"?X.useEffect(t,e):X.useLayoutEffect(t,e)}const ux=X.createContext(null),Lj=X.createContext(null),WR=X.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:s="div",children:r,onSwiper:a,...o}=t===void 0?{}:t,l=!1;const[u,c]=X.useState("swiper"),[d,f]=X.useState(null),[h,p]=X.useState(!1),g=X.useRef(!1),v=X.useRef(null),E=X.useRef(null),y=X.useRef(null),T=X.useRef(null),b=X.useRef(null),x=X.useRef(null),w=X.useRef(null),A=X.useRef(null),{params:C,passedParams:L,rest:_,events:N}=bj(o),{slides:j,slots:U}=Cj(r),J=()=>{p(!h)};Object.assign(C.on,{_containerClasses(O,k){c(k)}});const q=()=>{Object.assign(C.on,N),l=!0;const O={...C};if(delete O.wrapperClass,E.current=new C1(O),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=j;const k={cache:!1,slides:j,renderExternal:f,renderExternalUpdate:!1};va(E.current.params.virtual,k),va(E.current.originalParams.virtual,k)}};v.current||q(),E.current&&E.current.on("_beforeBreakpoint",J);const te=()=>{l||!N||!E.current||Object.keys(N).forEach(O=>{E.current.on(O,N[O])})},ce=()=>{!N||!E.current||Object.keys(N).forEach(O=>{E.current.off(O,N[O])})};X.useEffect(()=>()=>{E.current&&E.current.off("_beforeBreakpoint",J)}),X.useEffect(()=>{!g.current&&E.current&&(E.current.emitSlidesClasses(),g.current=!0)}),sl(()=>{if(e&&(e.current=v.current),!!v.current)return E.current.destroyed&&q(),xj({el:v.current,nextEl:b.current,prevEl:x.current,paginationEl:w.current,scrollbarEl:A.current,swiper:E.current},C),a&&!E.current.destroyed&&a(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}},[]),sl(()=>{te();const O=Sj(L,y.current,j,T.current,k=>k.key);return y.current=L,T.current=j,O.length&&E.current&&!E.current.destroyed&&vj({swiper:E.current,slides:j,passedParams:L,changedParams:O,nextEl:b.current,prevEl:x.current,scrollbarEl:A.current,paginationEl:w.current}),()=>{ce()}}),sl(()=>{Aj(E.current)},[d]);function Y(){return C.virtual?wj(E.current,j,d):j.map((O,k)=>$.cloneElement(O,{swiper:E.current,swiperSlideIndex:k}))}return $.createElement(i,Wd({ref:v,className:VR(`${u}${n?` ${n}`:""}`)},_),$.createElement(Lj.Provider,{value:E.current},U["container-start"],$.createElement(s,{className:yj(C.wrapperClass)},U["wrapper-start"],Y(),U["wrapper-end"]),UR(C)&&$.createElement($.Fragment,null,$.createElement("div",{ref:x,className:"swiper-button-prev"}),$.createElement("div",{ref:b,className:"swiper-button-next"})),HR(C)&&$.createElement("div",{ref:A,className:"swiper-scrollbar"}),$R(C)&&$.createElement("div",{ref:w,className:"swiper-pagination"}),U["container-end"]))});WR.displayName="Swiper";const zR=X.forwardRef(function(t,e){let{tag:n="div",children:i,className:s="",swiper:r,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:u,...c}=t===void 0?{}:t;const d=X.useRef(null),[f,h]=X.useState("swiper-slide"),[p,g]=X.useState(!1);function v(b,x,w){x===d.current&&h(w)}sl(()=>{if(typeof u<"u"&&(d.current.swiperSlideIndex=u),e&&(e.current=d.current),!(!d.current||!r)){if(r.destroyed){f!=="swiper-slide"&&h("swiper-slide");return}return r.on("_slideClass",v),()=>{r&&r.off("_slideClass",v)}}}),sl(()=>{r&&d.current&&!r.destroyed&&h(r.getSlideClasses(d.current))},[r]);const E={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},y=()=>typeof i=="function"?i(E):i,T=()=>{g(!0)};return $.createElement(n,Wd({ref:d,className:VR(`${f}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:T},c),a&&$.createElement(ux.Provider,{value:E},$.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},y(),o&&!p&&$.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&$.createElement(ux.Provider,{value:E},y(),o&&!p&&$.createElement("div",{className:"swiper-lazy-preloader"})))});zR.displayName="SwiperSlide";const Ij=()=>{const[t,e]=X.useState(),n=async()=>{e((await ZV()).data)};return X.useEffect(()=>{n()},[]),P.jsx(WR,{className:"h-[35%]",children:t==null?void 0:t.map((i,s)=>P.jsx(zR,{children:P.jsxs(zo,{to:`/watchanime/${i.href}`,className:"w-full h-full relative",children:[P.jsx("img",{src:i.image,alt:i.title,className:"absolute left-0 w-full h-full object-cover object-top"}),P.jsx("div",{className:"absolute left-0 w-full h-full object-cover object-top hero-overlay"}),P.jsx("div",{className:"flex w-full h-full px-1 text-white justify-center items-center",children:P.jsx("div",{className:"flex gap-4 p-2 w-full h-full",children:P.jsxs("div",{className:"fixed flex flex-col gap-2 w-full h-full top-[25%]",children:[P.jsx("h2",{className:"text-xl w-full font-[500] two-line",children:i.title}),P.jsxs("h3",{className:"flex gap-2 items-center",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-5 text-[#00c234]",children:P.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"})}),i.vote," | ",i.date," | ",i.currentEp]}),P.jsx("div",{className:"flex gap-4 text-md w-[80%] two-line",children:i.genres.map((r,a)=>P.jsxs("span",{className:"text-[#00c234] font-bold",children:[r.name,a===i.genres.length-1?"":P.jsx("span",{className:"text-white",children:","})," "]},a))}),P.jsx("div",{className:"mt-[-10px] w-full two-line h-12",children:P.jsx("p",{children:i.description})})]})})})]})},s))})},_j=()=>{const{isLoading:t}=su();return P.jsxs(l_,{style:{display:t?"none":"",width:"100%",height:"100vh",overflowY:"auto"},children:[P.jsx(Ij,{}),P.jsx(XV,{})]})};function Rj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KR={exports:{}};(function(t,e){(function(n){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var f=o.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):u;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=s.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var g={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)g.path=h.path,f.params||(g.params=h.params,f.query||(g.query=h.query));else{var v=h.path,E=v.substring(0,v.lastIndexOf("/")+1)+f.path;g.path=o.normalizePath(E)}return g.path===null&&(g.path=c.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(g)},parseURL:function(l){var u=i.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()})(KR);var w1=KR.exports;function cx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cx(Object(n),!0).forEach(function(i){kj(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pj(t){var e=Dj(t,"string");return typeof e=="symbol"?e:String(e)}function kj(t,e,n){return e=Pj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tt(){return tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tt.apply(this,arguments)}const le=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Nj=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=Oj},Oj=Number.MAX_SAFE_INTEGER||9007199254740991;let S=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),Ee=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),H=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const qs=function(){},qm={trace:qs,debug:qs,log:qs,warn:qs,info:qs,error:qs};let rl=qm;function Mj(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):qs}function Fj(t,...e){e.forEach(function(n){rl[n]=t[n]?t[n].bind(t):Mj(n)})}function Bj(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){Fj(t,"debug","log","info","warn","error");try{rl.log(`Debug logs enabled for "${e}" in hls.js version 1.5.15`)}catch{rl=qm}}else rl=qm}const M=rl,Uj=/^(\d+)x(\d+)$/,dx=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ge{constructor(e){typeof e=="string"&&(e=Ge.parseAttrList(e)),tt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const i=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;s++)i[s]=parseInt(n.slice(s*2,s*2+2),16);return i}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const i=this[e];return i?parseFloat(i):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=Uj.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const i={},s='"';for(dx.lastIndex=0;(n=dx.exec(e))!==null;){let r=n[2];r.indexOf(s)===0&&r.lastIndexOf(s)===r.length-1&&(r=r.slice(1,-1));const a=n[1].trim();i[a]=r}return i}}function $j(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function Hj(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class YR{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const i=n.attr;for(const s in i)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==i[s]){M.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=tt(new Ge({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=new Date(this.attr["END-DATE"]);le(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(le(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&le(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class rh{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Re={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class qR{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Re.AUDIO]:null,[Re.VIDEO]:null,[Re.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const i=e.split("@",2);let s;i.length===1?s=(n==null?void 0:n.byteRangeEndOffset)||0:s=parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=w1.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class k0 extends qR{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new rh,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!le(this.programDateTime))return null;const e=le(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,i,s,r,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:n,endPTS:i,startDTS:s,endDTS:r,partial:a};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,r)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Re.AUDIO]=null,e[Re.VIDEO]=null,e[Re.AUDIOVIDEO]=null}}class Vj extends qR{constructor(e,n,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new rh,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=s;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const Gj=10;class jj{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?le(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Gj}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function L1(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function Wj(t){const e=Xm(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function zj(t){const e=function(i,s,r){const a=i[s];i[s]=i[r],i[r]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function Kj(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),s=i[i.length-1].split(",");if(s.length===2){const r=s[0]==="base64",a=s[1];r?(i.splice(-1,1),n=L1(a)):n=Wj(a)}}return n}function Xm(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const Ka=typeof self<"u"?self:void 0;var Me={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Qt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function fx(t){switch(t){case Qt.FAIRPLAY:return Me.FAIRPLAY;case Qt.PLAYREADY:return Me.PLAYREADY;case Qt.WIDEVINE:return Me.WIDEVINE;case Qt.CLEARKEY:return Me.CLEARKEY}}var Oo={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function hx(t){if(t===Oo.WIDEVINE)return Me.WIDEVINE;if(t===Oo.PLAYREADY)return Me.PLAYREADY;if(t===Oo.CENC||t===Oo.CLEARKEY)return Me.CLEARKEY}function px(t){switch(t){case Me.FAIRPLAY:return Qt.FAIRPLAY;case Me.PLAYREADY:return Qt.PLAYREADY;case Me.WIDEVINE:return Qt.WIDEVINE;case Me.CLEARKEY:return Qt.CLEARKEY}}function N0(t){const{drmSystems:e,widevineLicenseUrl:n}=t,i=e?[Me.FAIRPLAY,Me.WIDEVINE,Me.PLAYREADY,Me.CLEARKEY].filter(s=>!!e[s]):[];return!i[Me.WIDEVINE]&&n&&i.push(Me.WIDEVINE),i}const XR=function(t){return Ka!=null&&(t=Ka.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Yj(t,e,n,i){let s;switch(t){case Me.FAIRPLAY:s=["cenc","sinf"];break;case Me.WIDEVINE:case Me.PLAYREADY:s=["cenc"];break;case Me.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return qj(s,e,n,i)}function qj(t,e,n,i){return[{initDataTypes:t,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs="${r}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:n.map(r=>({contentType:`video/mp4; codecs="${r}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function hr(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const I1=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,QR=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Ul=(t,e)=>{const n=e;let i=0;for(;I1(t,e);){i+=10;const s=ah(t,e+6);i+=s,QR(t,e+10)&&(i+=10),e+=i}if(i>0)return t.subarray(n,n+i)},ah=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},Xj=(t,e)=>I1(t,e)&&ah(t,e+6)+10<=t.length-e,_1=t=>{const e=JR(t);for(let n=0;n<e.length;n++){const i=e[n];if(ZR(i))return nW(i)}},ZR=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",Qj=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=ah(t,4),i=10;return{type:e,size:n,data:t.subarray(i,i+n)}},JR=t=>{let e=0;const n=[];for(;I1(t,e);){const i=ah(t,e+6);e+=10;const s=e+i;for(;e+8<s;){const r=Qj(t.subarray(e)),a=Zj(r);a&&n.push(a),e+=r.size+10}QR(t,e)&&(e+=10)}return n},Zj=t=>t.type==="PRIV"?Jj(t):t.type[0]==="W"?tW(t):eW(t),Jj=t=>{if(t.size<2)return;const e=mi(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},eW=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const i=mi(t.data.subarray(n),!0);n+=i.length+1;const s=mi(t.data.subarray(n));return{key:t.type,info:i,data:s}}const e=mi(t.data.subarray(1));return{key:t.type,data:e}},tW=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const i=mi(t.data.subarray(n),!0);n+=i.length+1;const s=mi(t.data.subarray(n));return{key:t.type,info:i,data:s}}const e=mi(t.data);return{key:t.type,data:e}},nW=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=4772185884e-2),Math.round(i)}},mi=(t,e=!1)=>{const n=iW();if(n){const u=n.decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const i=t.length;let s,r,a,o="",l=0;for(;l<i;){if(s=t[l++],s===0&&e)return o;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(s);break;case 12:case 13:r=t[l++],o+=String.fromCharCode((s&31)<<6|r&63);break;case 14:r=t[l++],a=t[l++],o+=String.fromCharCode((s&15)<<12|(r&63)<<6|(a&63)<<0);break}}return o};let O0;function iW(){if(!navigator.userAgent.includes("PlayStation 4"))return!O0&&typeof self.TextDecoder<"u"&&(O0=new self.TextDecoder("utf-8")),O0}const ti={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let i=t[n].toString(16);i.length<2&&(i="0"+i),e+=i}return e}},zd=Math.pow(2,32)-1,sW=[].push,e2={video:1,audio:2,id3:3,text:4};function nt(t){return String.fromCharCode.apply(null,t)}function t2(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function he(t,e){const n=n2(t,e);return n<0?4294967296+n:n}function mx(t,e){let n=he(t,e);return n*=Math.pow(2,32),n+=he(t,e+4),n}function n2(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function M0(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function rW(t){const e=t.byteLength;for(let n=0;n<e;){const i=he(t,n);if(i>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=i>1?n+i:e}return!1}function ye(t,e){const n=[];if(!e.length)return n;const i=t.byteLength;for(let s=0;s<i;){const r=he(t,s),a=nt(t.subarray(s+4,s+8)),o=r>1?s+r:i;if(a===e[0])if(e.length===1)n.push(t.subarray(s+8,o));else{const l=ye(t.subarray(s+8,o),e.slice(1));l.length&&sW.apply(n,l)}s=o}return n}function aW(t){const e=[],n=t[0];let i=8;const s=he(t,i);i+=4;let r=0,a=0;n===0?(r=he(t,i),a=he(t,i+4),i+=8):(r=mx(t,i),a=mx(t,i+8),i+=16),i+=2;let o=t.length+a;const l=t2(t,i);i+=2;for(let u=0;u<l;u++){let c=i;const d=he(t,c);c+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return M.warn("SIDX has hierarchical references (not supported)"),null;const p=he(t,c);c+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:o,end:o+f-1}}),o+=f,c+=4,i=c}return{earliestPresentationTime:r,timescale:s,version:n,referencesCount:l,references:e}}function i2(t){const e=[],n=ye(t,["moov","trak"]);for(let s=0;s<n.length;s++){const r=n[s],a=ye(r,["tkhd"])[0];if(a){let o=a[0];const l=he(a,o===0?12:20),u=ye(r,["mdia","mdhd"])[0];if(u){o=u[0];const c=he(u,o===0?12:20),d=ye(r,["mdia","hdlr"])[0];if(d){const f=nt(d.subarray(8,12)),h={soun:Re.AUDIO,vide:Re.VIDEO}[f];if(h){const p=ye(r,["mdia","minf","stbl","stsd"])[0],g=oW(p);e[l]={timescale:c,type:h},e[h]=ht({timescale:c,id:l},g)}}}}}return ye(t,["moov","mvex","trex"]).forEach(s=>{const r=he(s,4),a=e[r];a&&(a.default={duration:he(s,12),flags:he(s,20)})}),e}function oW(t){const e=t.subarray(8),n=e.subarray(86),i=nt(e.subarray(4,8));let s=i;const r=i==="enca"||i==="encv";if(r){const o=ye(e,[i])[0].subarray(i==="enca"?28:78);ye(o,["sinf"]).forEach(u=>{const c=ye(u,["schm"])[0];if(c){const d=nt(c.subarray(4,8));if(d==="cbcs"||d==="cenc"){const f=ye(u,["frma"])[0];f&&(s=nt(f))}}})}switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const a=ye(n,["avcC"])[0];s+="."+Zu(a[1])+Zu(a[2])+Zu(a[3]);break}case"mp4a":{const a=ye(e,[i])[0],o=ye(a.subarray(28),["esds"])[0];if(o&&o.length>12){let l=4;if(o[l++]!==3)break;l=F0(o,l),l+=2;const u=o[l++];if(u&128&&(l+=2),u&64&&(l+=o[l++]),o[l++]!==4)break;l=F0(o,l);const c=o[l++];if(c===64)s+="."+Zu(c);else break;if(l+=12,o[l++]!==5)break;l=F0(o,l);const d=o[l++];let f=(d&248)>>3;f===31&&(f+=1+((d&7)<<3)+((o[l]&224)>>5)),s+="."+f}break}case"hvc1":case"hev1":{const a=ye(n,["hvcC"])[0],o=a[1],l=["","A","B","C"][o>>6],u=o&31,c=he(a,2),d=(o&32)>>5?"H":"L",f=a[12],h=a.subarray(6,12);s+="."+l+u,s+="."+c.toString(16).toUpperCase(),s+="."+d+f;let p="";for(let g=h.length;g--;){const v=h[g];(v||p)&&(p="."+v.toString(16).toUpperCase()+p)}s+=p;break}case"dvh1":case"dvhe":{const a=ye(n,["dvcC"])[0],o=a[2]>>1&127,l=a[2]<<5&32|a[3]>>3&31;s+="."+Zn(o)+"."+Zn(l);break}case"vp09":{const a=ye(n,["vpcC"])[0],o=a[4],l=a[5],u=a[6]>>4&15;s+="."+Zn(o)+"."+Zn(l)+"."+Zn(u);break}case"av01":{const a=ye(n,["av1C"])[0],o=a[1]>>>5,l=a[1]&31,u=a[2]>>>7?"H":"M",c=(a[2]&64)>>6,d=(a[2]&32)>>5,f=o===2&&c?d?12:10:c?10:8,h=(a[2]&16)>>4,p=(a[2]&8)>>3,g=(a[2]&4)>>2,v=a[2]&3;s+="."+o+"."+Zn(l)+u+"."+Zn(f)+"."+h+"."+p+g+v+"."+Zn(1)+"."+Zn(1)+"."+Zn(1)+"."+0;break}}return{codec:s,encrypted:r}}function F0(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Zu(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Zn(t){return(t<10?"0":"")+t}function lW(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&ye(t,["moov","trak"]).forEach(s=>{const a=ye(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=ye(a,["enca"]);const l=o.length>0;l||(o=ye(a,["encv"])),o.forEach(u=>{const c=l?u.subarray(28):u.subarray(78);ye(c,["sinf"]).forEach(f=>{const h=s2(f);if(h){const p=h.subarray(8,24);p.some(g=>g!==0)||(M.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${ti.hexDump(p)} -> ${ti.hexDump(n)}`),h.set(n,8))}})})}),t}function s2(t){const e=ye(t,["schm"])[0];if(e){const n=nt(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return ye(t,["schi","tenc"])[0]}return null}function uW(t,e){return ye(e,["moof","traf"]).reduce((n,i)=>{const s=ye(i,["tfdt"])[0],r=s[0],a=ye(i,["tfhd"]).reduce((o,l)=>{const u=he(l,4),c=t[u];if(c){let d=he(s,4);if(r===1){if(d===zd)return M.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=zd+1,d+=he(s,8)}const f=c.timescale||9e4,h=d/f;if(le(h)&&(o===null||h<o))return h}return o},null);return a!==null&&le(a)&&(n===null||a<n)?a:n},null)}function cW(t,e){let n=0,i=0,s=0;const r=ye(t,["moof","traf"]);for(let a=0;a<r.length;a++){const o=r[a],l=ye(o,["tfhd"])[0],u=he(l,4),c=e[u];if(!c)continue;const d=c.default,f=he(l,0)|(d==null?void 0:d.flags);let h=d==null?void 0:d.duration;f&8&&(f&2?h=he(l,12):h=he(l,8));const p=c.timescale||9e4,g=ye(o,["trun"]);for(let v=0;v<g.length;v++){if(n=dW(g[v]),!n&&h){const E=he(g[v],4);n=h*E}c.type===Re.VIDEO?i+=n/p:c.type===Re.AUDIO&&(s+=n/p)}}if(i===0&&s===0){let a=1/0,o=0,l=0;const u=ye(t,["sidx"]);for(let c=0;c<u.length;c++){const d=aW(u[c]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const f=d.references.reduce((h,p)=>h+p.info.duration||0,0);o=Math.max(o,f+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&le(l))return l}return i||s}function dW(t){const e=he(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let i=0;const s=he(t,4);for(let r=0;r<s;r++){if(e&256){const a=he(t,n);i+=a,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return i}function fW(t,e,n){ye(e,["moof","traf"]).forEach(i=>{ye(i,["tfhd"]).forEach(s=>{const r=he(s,4),a=t[r];if(!a)return;const o=a.timescale||9e4;ye(i,["tfdt"]).forEach(l=>{const u=l[0],c=n*o;if(c){let d=he(l,4);if(u===0)d-=c,d=Math.max(d,0),M0(l,4,d);else{d*=Math.pow(2,32),d+=he(l,8),d-=c,d=Math.max(d,0);const f=Math.floor(d/(zd+1)),h=Math.floor(d%(zd+1));M0(l,4,f),M0(l,8,h)}}})})})}function hW(t){const e={valid:null,remainder:null},n=ye(t,["moof"]);if(n.length<2)return e.remainder=t,e;const i=n[n.length-1];return e.valid=hr(t,0,i.byteOffset-8),e.remainder=hr(t,i.byteOffset-8),e}function kn(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function gx(t,e){const n=[],i=e.samples,s=e.timescale,r=e.id;let a=!1;return ye(i,["moof"]).map(l=>{const u=l.byteOffset-8;ye(l,["traf"]).map(d=>{const f=ye(d,["tfdt"]).map(h=>{const p=h[0];let g=he(h,4);return p===1&&(g*=Math.pow(2,32),g+=he(h,8)),g/s})[0];return f!==void 0&&(t=f),ye(d,["tfhd"]).map(h=>{const p=he(h,4),g=he(h,0)&16777215,v=(g&1)!==0,E=(g&2)!==0,y=(g&8)!==0;let T=0;const b=(g&16)!==0;let x=0;const w=(g&32)!==0;let A=8;p===r&&(v&&(A+=8),E&&(A+=4),y&&(T=he(h,A),A+=4),b&&(x=he(h,A),A+=4),w&&(A+=4),e.type==="video"&&(a=pW(e.codec)),ye(d,["trun"]).map(C=>{const L=C[0],_=he(C,0)&16777215,N=(_&1)!==0;let j=0;const U=(_&4)!==0,J=(_&256)!==0;let q=0;const te=(_&512)!==0;let ce=0;const Y=(_&1024)!==0,O=(_&2048)!==0;let k=0;const z=he(C,4);let G=8;N&&(j=he(C,G),G+=4),U&&(G+=4);let se=j+u;for(let re=0;re<z;re++){if(J?(q=he(C,G),G+=4):q=T,te?(ce=he(C,G),G+=4):ce=x,Y&&(G+=4),O&&(L===0?k=he(C,G):k=n2(C,G),G+=4),e.type===Re.VIDEO){let de=0;for(;de<ce;){const ge=he(i,se);if(se+=4,mW(a,i[se])){const Se=i.subarray(se,se+ge);r2(Se,a?2:1,t+k/s,n)}se+=ge,de+=ge+4}}t+=q/s}}))})})}),n}function pW(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function mW(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function r2(t,e,n,i){const s=a2(t);let r=0;r+=e;let a=0,o=0,l=0;for(;r<s.length;){a=0;do{if(r>=s.length)break;l=s[r++],a+=l}while(l===255);o=0;do{if(r>=s.length)break;l=s[r++],o+=l}while(l===255);const u=s.length-r;let c=r;if(o<u)r+=o;else if(o>u){M.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(a===4){if(s[c++]===181){const f=t2(s,c);if(c+=2,f===49){const h=he(s,c);if(c+=4,h===1195456820){const p=s[c++];if(p===3){const g=s[c++],v=31&g,E=64&g,y=E?2+v*3:0,T=new Uint8Array(y);if(E){T[0]=g;for(let b=1;b<y;b++)T[b]=s[c++]}i.push({type:p,payloadType:a,pts:n,bytes:T})}}}}}else if(a===5&&o>16){const d=[];for(let p=0;p<16;p++){const g=s[c++].toString(16);d.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=o-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=s[c++];i.push({payloadType:a,pts:n,uuid:d.join(""),userData:mi(h),userDataBytes:h})}}}function a2(t){const e=t.byteLength,n=[];let i=1;for(;i<e-2;)t[i]===0&&t[i+1]===0&&t[i+2]===3?(n.push(i+2),i+=2):i++;if(n.length===0)return t;const s=e-n.length,r=new Uint8Array(s);let a=0;for(i=0;i<s;a++,i++)a===n[0]&&(a++,n.shift()),r[i]=t[a];return r}function gW(t){const e=t[0];let n="",i="",s=0,r=0,a=0,o=0,l=0,u=0;if(e===0){for(;nt(t.subarray(u,u+1))!=="\0";)n+=nt(t.subarray(u,u+1)),u+=1;for(n+=nt(t.subarray(u,u+1)),u+=1;nt(t.subarray(u,u+1))!=="\0";)i+=nt(t.subarray(u,u+1)),u+=1;i+=nt(t.subarray(u,u+1)),u+=1,s=he(t,12),r=he(t,16),o=he(t,20),l=he(t,24),u=28}else if(e===1){u+=4,s=he(t,u),u+=4;const d=he(t,u);u+=4;const f=he(t,u);for(u+=4,a=2**32*d+f,Nj(a)||(a=Number.MAX_SAFE_INTEGER,M.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=he(t,u),u+=4,l=he(t,u),u+=4;nt(t.subarray(u,u+1))!=="\0";)n+=nt(t.subarray(u,u+1)),u+=1;for(n+=nt(t.subarray(u,u+1)),u+=1;nt(t.subarray(u,u+1))!=="\0";)i+=nt(t.subarray(u,u+1)),u+=1;i+=nt(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:i,timeScale:s,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:l,payload:c}}function EW(t,...e){const n=e.length;let i=8,s=n;for(;s--;)i+=e[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(t,4),s=0,i=8;s<n;s++)r.set(e[s],i),i+=e[s].byteLength;return r}function TW(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let i,s;i=0,s=new Uint8Array;let r;i>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),EW([112,115,115,104],new Uint8Array([i,0,0,0]),t,r,s,a,n||new Uint8Array)}function yW(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let i=0;for(;i+32<n;){const s=new DataView(t,i),r=vW(s);e.push(r),i+=r.size}}return e}function vW(t){const e=t.getUint32(0),n=t.byteOffset,i=t.byteLength;if(i<e)return{offset:n,size:i};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const r=t.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:n,size:e};const a=t.buffer,o=ti.hexDump(new Uint8Array(a,n+12,16)),l=t.getUint32(28);let u=null,c=null;if(r===0){if(e-32<l||l<22)return{offset:n,size:e};c=new Uint8Array(a,n+32,l)}else if(r===1){if(!l||i<n+32+l*16+16)return{offset:n,size:e};u=[];for(let d=0;d<l;d++)u.push(new Uint8Array(a,n+32+d*16,16))}return{version:r,systemId:o,kids:u,data:c,offset:n,size:e}}let Ju={};class $l{static clearKeyUriToKeyIdMap(){Ju={}}constructor(e,n,i,s=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Qt.FAIRPLAY:case Qt.WIDEVINE:case Qt.PLAYREADY:case Qt.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&M.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=bW(e);return new $l(this.method,this.uri,"identity",this.keyFormatVersions,i)}const n=Kj(this.uri);if(n)switch(this.keyFormat){case Qt.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Qt.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=TW(i,null,n);const s=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),r=String.fromCharCode.apply(null,Array.from(s)),a=r.substring(r.indexOf("<"),r.length),u=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(u){const c=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(c){const d=L1(c).subarray(0,16);zj(d),this.keyId=d}}break}default:{let i=n.subarray(0,16);if(i.length!==16){const s=new Uint8Array(16);s.set(i,16-i.length),i=s}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=Ju[this.uri];if(!i){const s=Object.keys(Ju).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,s),Ju[this.uri]=i}this.keyId=i}return this}}function bW(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const o2=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ex(t){return o2.test(t)}function zt(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let i=n.length;i--;){const s=n[i],r=e[s];r&&(e[s]=Qm(t,r))}}function Qm(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(o2,i=>{const s=i.substring(2,i.length-1),r=n==null?void 0:n[s];return r===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),i):r})}return e}function Tx(t,e,n){let i=t.variableList;i||(t.variableList=i={});let s,r;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const a=new self.URL(n).searchParams;if(a.has(s))r=a.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${n}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=e.NAME,r=e.VALUE;s in i?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):i[s]=r||""}function xW(t,e,n){const i=e.IMPORT;if(n&&i in n){let s=t.variableList;s||(t.variableList=s={}),s[i]=n[i]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function Ar(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function SW(t){return typeof self<"u"&&t===self.ManagedMediaSource}const Kd={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function AW(t,e){const n=Kd[e];return!!n&&!!n[t.slice(0,4)]}function B0(t,e,n=!0){return!t.split(",").some(i=>!l2(i,e,n))}function l2(t,e,n=!0){var i;const s=Ar(n);return(i=s==null?void 0:s.isTypeSupported(Hl(t,e)))!=null?i:!1}function Hl(t,e){return`${e}/mp4;codecs="${t}"`}function yx(t){if(t){const e=t.substring(0,4);return Kd.video[e]}return 2}function Yd(t){return t.split(",").reduce((e,n)=>{const i=Kd.video[n];return i?(i*2+e)/(e?3:2):(Kd.audio[n]+e)/(e?2:1)},0)}const U0={};function CW(t,e=!0){if(U0[t])return U0[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let i=0;i<n.length;i++)if(l2(n[i],"audio",e))return U0[t]=n[i],n[i];return t}const wW=/flac|opus/i;function qd(t,e=!0){return t.replace(wW,n=>CW(n.toLowerCase(),e))}function vx(t,e){return t&&t!=="mp4a"?t:e&&e.split(",")[0]}function LW(t){const e=t.split(",");for(let n=0;n<e.length;n++){const i=e[n].split(".");if(i.length>2){let s=i.shift()+".";s+=parseInt(i.shift()).toString(16),s+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[n]=s}}return e.join(",")}const bx=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,xx=/#EXT-X-MEDIA:(.*)/g,IW=/^#EXT(?:INF|-X-TARGETDURATION):/m,Sx=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),_W=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class li{static findGroup(e,n){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===n)return s}}static resolve(e,n){return w1.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return IW.test(e)}static parseMasterPlaylist(e,n){const i=Ex(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];bx.lastIndex=0;let a;for(;(a=bx.exec(e))!=null;)if(a[1]){var o;const u=new Ge(a[1]);zt(s,u,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const c=Qm(s,a[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:li.resolve(c,n)},f=u.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),RW(u.CODECS,d),(o=d.unknownCodecs)!=null&&o.length||r.push(d),s.levels.push(d)}else if(a[3]){const u=a[3],c=a[4];switch(u){case"SESSION-DATA":{const d=new Ge(c);zt(s,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=Ax(c,n,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):M.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new Ge(c);zt(s,d,["NAME","VALUE","QUERYPARAM"]),Tx(s,d,n)}break}case"CONTENT-STEERING":{const d=new Ge(c);zt(s,d,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:li.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Cx(c);break}}}const l=r.length>0&&r.length<s.levels.length;return s.levels=l?r:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,n,i){let s;const r={},a=i.levels,o={AUDIO:a.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:a.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(xx.lastIndex=0;(s=xx.exec(e))!==null;){const u=new Ge(s[1]),c=u.TYPE;if(c){const d=o[c],f=r[c]||[];r[c]=f,zt(i,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const h=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],g=u.CHANNELS,v=u.CHARACTERISTICS,E=u["INSTREAM-ID"],y={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||h||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:h,url:u.URI?li.resolve(u.URI,n):""};if(p&&(y.assocLang=p),g&&(y.channels=g),v&&(y.characteristics=v),E&&(y.instreamId=E),d!=null&&d.length){const T=li.findGroup(d,y.groupId)||d[0];wx(y,T,"audioCodec"),wx(y,T,"textCodec")}f.push(y)}}return r}static parseLevelPlaylist(e,n,i,s,r,a){const o=new jj(n),l=o.fragments;let u=null,c=0,d=0,f=0,h=0,p=null,g=new k0(s,n),v,E,y,T=-1,b=!1,x=null;for(Sx.lastIndex=0,o.m3u8=e,o.hasVariableRefs=Ex(e);(v=Sx.exec(e))!==null;){b&&(b=!1,g=new k0(s,n),g.start=f,g.sn=c,g.cc=h,g.level=i,u&&(g.initSegment=u,g.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,x&&(g.setByteRange(x),x=null)));const L=v[1];if(L){g.duration=parseFloat(L);const _=(" "+v[2]).slice(1);g.title=_||null,g.tagList.push(_?["INF",L,_]:["INF",L])}else if(v[3]){if(le(g.duration)){g.start=f,y&&_x(g,y,o),g.sn=c,g.level=i,g.cc=h,l.push(g);const _=(" "+v[3]).slice(1);g.relurl=Qm(o,_),Lx(g,p),p=g,f+=g.duration,c++,d=0,b=!0}}else if(v[4]){const _=(" "+v[4]).slice(1);p?g.setByteRange(_,p):g.setByteRange(_)}else if(v[5])g.rawProgramDateTime=(" "+v[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),T===-1&&(T=l.length);else{if(v=v[0].match(_W),!v){M.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<v.length&&!(typeof v[E]<"u");E++);const _=(" "+v[E]).slice(1),N=(" "+v[E+1]).slice(1),j=v[E+2]?(" "+v[E+2]).slice(1):"";switch(_){case"PLAYLIST-TYPE":o.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":c=o.startSN=parseInt(N);break;case"SKIP":{const U=new Ge(N);zt(o,U,["RECENTLY-REMOVED-DATERANGES"]);const J=U.decimalInteger("SKIPPED-SEGMENTS");if(le(J)){o.skippedSegments=J;for(let te=J;te--;)l.unshift(null);c+=J}const q=U.enumeratedString("RECENTLY-REMOVED-DATERANGES");q&&(o.recentlyRemovedDateranges=q.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(N),1);break;case"VERSION":o.version=parseInt(N);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(N||j)&&g.tagList.push(j?[N,j]:[N]);break;case"DISCONTINUITY":h++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([_]);break;case"BITRATE":g.tagList.push([_,N]);break;case"DATERANGE":{const U=new Ge(N);zt(o,U,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),zt(o,U,U.clientAttrs);const J=new YR(U,o.dateRanges[U.ID]);J.isValid||o.skippedSegments?o.dateRanges[J.id]=J:M.warn(`Ignoring invalid DATERANGE tag: "${N}"`),g.tagList.push(["EXT-X-DATERANGE",N]);break}case"DEFINE":{{const U=new Ge(N);zt(o,U,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in U?xW(o,U,a):Tx(o,U,n)}break}case"DISCONTINUITY-SEQUENCE":h=parseInt(N);break;case"KEY":{const U=Ax(N,n,o);if(U.isSupported()){if(U.method==="NONE"){y=void 0;break}y||(y={}),y[U.keyFormat]&&(y=tt({},y)),y[U.keyFormat]=U}else M.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${N}"`);break}case"START":o.startTimeOffset=Cx(N);break;case"MAP":{const U=new Ge(N);if(zt(o,U,["BYTERANGE","URI"]),g.duration){const J=new k0(s,n);Ix(J,U,i,y),u=J,g.initSegment=u,u.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=u.rawProgramDateTime)}else{const J=g.byteRangeEndOffset;if(J){const q=g.byteRangeStartOffset;x=`${J-q}@${q}`}else x=null;Ix(g,U,i,y),u=g,b=!0}break}case"SERVER-CONTROL":{const U=new Ge(N);o.canBlockReload=U.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=U.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&U.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=U.optionalFloat("PART-HOLD-BACK",0),o.holdBack=U.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const U=new Ge(N);o.partTarget=U.decimalFloatingPoint("PART-TARGET");break}case"PART":{let U=o.partList;U||(U=o.partList=[]);const J=d>0?U[U.length-1]:void 0,q=d++,te=new Ge(N);zt(o,te,["BYTERANGE","URI"]);const ce=new Vj(te,g,n,q,J);U.push(ce),g.duration+=ce.duration;break}case"PRELOAD-HINT":{const U=new Ge(N);zt(o,U,["URI"]),o.preloadHint=U;break}case"RENDITION-REPORT":{const U=new Ge(N);zt(o,U,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(U);break}default:M.warn(`line parsed but not handled: ${v}`);break}}}p&&!p.relurl?(l.pop(),f-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(Lx(g,p),g.cc=h,o.fragmentHint=g,y&&_x(g,y,o));const w=l.length,A=l[0],C=l[w-1];if(f+=o.skippedSegments*o.targetduration,f>0&&w&&C){o.averagetargetduration=f/w;const L=C.sn;o.endSN=L!=="initSegment"?L:0,o.live||(C.endList=!0),A&&(o.startCC=A.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(f+=o.fragmentHint.duration),o.totalduration=f,o.endCC=h,T>0&&DW(l,T),o}}function Ax(t,e,n){var i,s;const r=new Ge(t);zt(n,r,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(i=r.METHOD)!=null?i:"",o=r.URI,l=r.hexadecimalInteger("IV"),u=r.KEYFORMATVERSIONS,c=(s=r.KEYFORMAT)!=null?s:"identity";o&&r.IV&&!l&&M.error(`Invalid IV: ${r.IV}`);const d=o?li.resolve(o,e):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new $l(a,d,c,f,l)}function Cx(t){const n=new Ge(t).decimalFloatingPoint("TIME-OFFSET");return le(n)?n:null}function RW(t,e){let n=(t||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const s=n.filter(r=>AW(r,i));s.length&&(e[`${i}Codec`]=s.join(","),n=n.filter(r=>s.indexOf(r)===-1))}),e.unknownCodecs=n}function wx(t,e,n){const i=e[n];i&&(t[n]=i)}function DW(t,e){let n=t[e];for(let i=e;i--;){const s=t[i];if(!s)return;s.programDateTime=n.programDateTime-s.duration*1e3,n=s}}function Lx(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),le(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function Ix(t,e,n,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function _x(t,e,n){t.levelkeys=e;const{encryptedFragments:i}=n;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&i.push(t)}var Ce={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},pe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function Rx(t){const{type:e}=t;switch(e){case Ce.AUDIO_TRACK:return pe.AUDIO;case Ce.SUBTITLE_TRACK:return pe.SUBTITLE;default:return pe.MAIN}}function $0(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class PW{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,i=n.pLoader,s=n.loader,r=i||s,a=new r(n);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:i}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ce.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,n){const{id:i,level:s,pathwayId:r,url:a,deliveryDirectives:o}=n;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:Ce.LEVEL,url:a,deliveryDirectives:o})}onAudioTrackLoading(e,n){const{id:i,groupId:s,url:r,deliveryDirectives:a}=n;this.load({id:i,groupId:s,level:null,responseType:"text",type:Ce.AUDIO_TRACK,url:r,deliveryDirectives:a})}onSubtitleTrackLoading(e,n){const{id:i,groupId:s,url:r,deliveryDirectives:a}=n;this.load({id:i,groupId:s,level:null,responseType:"text",type:Ce.SUBTITLE_TRACK,url:r,deliveryDirectives:a})}load(e){var n;const i=this.hls.config;let s=this.getInternalLoader(e);if(s){const u=s.context;if(u&&u.url===e.url&&u.level===e.level){M.trace("[playlist-loader]: playlist request ongoing");return}M.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let r;if(e.type===Ce.MANIFEST?r=i.manifestLoadPolicy.default:r=tt({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),le((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===Ce.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===Ce.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===Ce.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const f=Math.max(c*3,d*.8)*1e3;r=tt({},r,{maxTimeToFirstByteMs:Math.min(f,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(u,c,d,f)=>{const h=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=u.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,d,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),li.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(u,c,d,f||null,h):this.handleMasterPlaylist(u,c,d,f)},onError:(u,c,d,f)=>{this.handleNetworkError(c,d,!1,u,f)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};s.load(e,o,l)}handleMasterPlaylist(e,n,i,s){const r=this.hls,a=e.data,o=$0(e,i),l=li.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,s,n);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p}=l;this.variableList=p;const{AUDIO:g=[],SUBTITLES:v,"CLOSED-CAPTIONS":E}=li.parseMasterPlaylistMedia(a,o,l);g.length&&!g.some(T=>!T.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(M.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ge({}),bitrate:0,url:""})),r.trigger(S.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:v,captions:E,contentSteering:u,url:o,stats:n,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,n,i,s,r){const a=this.hls,{id:o,level:l,type:u}=i,c=$0(e,i),d=0,f=le(l)?l:le(o)?o:0,h=Rx(i),p=li.parseLevelPlaylist(e.data,c,f,h,d,this.variableList);if(u===Ce.MANIFEST){const g={attrs:new Ge({}),bitrate:0,details:p,name:"",url:c};a.trigger(S.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:c,stats:n,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,e,n,i,s,r)}handleManifestParsingError(e,n,i,s,r){this.hls.trigger(S.ERROR,{type:Ee.NETWORK_ERROR,details:H.MANIFEST_PARSING_ERROR,fatal:n.type===Ce.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:n,networkDetails:s,stats:r})}handleNetworkError(e,n,i=!1,s,r){let a=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Ce.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Ce.AUDIO_TRACK||e.type===Ce.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);M.warn(`[playlist-loader]: ${a}`);let l=H.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case Ce.MANIFEST:l=i?H.MANIFEST_LOAD_TIMEOUT:H.MANIFEST_LOAD_ERROR,u=!0;break;case Ce.LEVEL:l=i?H.LEVEL_LOAD_TIMEOUT:H.LEVEL_LOAD_ERROR,u=!1;break;case Ce.AUDIO_TRACK:l=i?H.AUDIO_TRACK_LOAD_TIMEOUT:H.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case Ce.SUBTITLE_TRACK:l=i?H.SUBTITLE_TRACK_LOAD_TIMEOUT:H.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:Ee.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:o,networkDetails:n,stats:r};if(s){const f=(n==null?void 0:n.url)||e.url;d.response=ht({url:f,data:void 0},s)}this.hls.trigger(S.ERROR,d)}handlePlaylistLoaded(e,n,i,s,r,a){const o=this.hls,{type:l,level:u,id:c,groupId:d,deliveryDirectives:f}=s,h=$0(n,s),p=Rx(s),g=typeof s.level=="number"&&p===pe.MAIN?u:void 0;if(!e.fragments.length){const E=new Error("No Segments found in Playlist");o.trigger(S.ERROR,{type:Ee.NETWORK_ERROR,details:H.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:E,reason:E.message,response:n,context:s,level:g,parent:p,networkDetails:r,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){o.trigger(S.ERROR,{type:Ee.NETWORK_ERROR,details:H.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:n,context:s,level:g,parent:p,networkDetails:r,stats:i});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Ce.MANIFEST:case Ce.LEVEL:o.trigger(S.LEVEL_LOADED,{details:e,level:g||0,id:c||0,stats:i,networkDetails:r,deliveryDirectives:f});break;case Ce.AUDIO_TRACK:o.trigger(S.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:f});break;case Ce.SUBTITLE_TRACK:o.trigger(S.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:f});break}}}function u2(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function c2(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){M.debug(`[texttrack-utils]: ${i}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){M.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}n==="disabled"&&(t.mode=n)}function ca(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function Zm(t,e,n,i){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const r=NW(t.cues,e,n);for(let a=0;a<r.length;a++)(!i||i(r[a]))&&t.removeCue(r[a])}s==="disabled"&&(t.mode=s)}function kW(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let i=0,s=n;for(;i<=s;){const r=Math.floor((s+i)/2);if(e<t[r].startTime)s=r-1;else if(e>t[r].startTime&&i<n)i=r+1;else return r}return t[i].startTime-e<e-t[s].startTime?i:s}function NW(t,e,n){const i=[],s=kW(t,e);if(s>-1)for(let r=s,a=t.length;r<a;r++){const o=t[r];if(o.startTime>=e&&o.endTime<=n)i.push(o);else if(o.startTime>n)return i}return i}function Mc(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(t[n])}return e}var Gn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const OW=.25;function Jm(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Dx(t,e,n,i,s){let r=new t(e,n,"");try{r.value=i,s&&(r.type=s)}catch{r=new t(e,n,JSON.stringify(s?ht({type:s},i):i))}return r}const ec=(()=>{const t=Jm();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function H0(t,e){return t.getTime()/1e3-e}function MW(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class FW{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(ca(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const i=e[n];if(i.kind==="metadata"&&i.label==="id3")return u2(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:r}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=Jm();if(a)for(let o=0;o<r.length;o++){const l=r[o].type;if(l===Gn.emsg&&!i||!s)continue;const u=JR(r[o].data);if(u){const c=r[o].pts;let d=c+r[o].duration;d>ec&&(d=ec),d-c<=0&&(d=c+OW);for(let h=0;h<u.length;h++){const p=u[h];if(!ZR(p)){this.updateId3CueEnds(c,l);const g=Dx(a,c,d,p,l);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,n){var i;const s=(i=this.id3Track)==null?void 0:i.cues;if(s)for(let r=s.length;r--;){const a=s[r];a.type===n&&a.startTime<e&&a.endTime===ec&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:i,type:s}){const{id3Track:r,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(r&&(o||l)){let u;s==="audio"?u=c=>c.type===Gn.audioId3&&l:s==="video"?u=c=>c.type===Gn.emsg&&o:u=c=>c.type===Gn.audioId3&&l||c.type===Gn.emsg&&o,Zm(r,n,i,u)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:s}=this,{dateRanges:r}=n,a=Object.keys(r);if(s){const c=Object.keys(i).filter(d=>!a.includes(d));for(let d=c.length;d--;){const f=c[d];Object.keys(i[f].cues).forEach(h=>{s.removeCue(i[f].cues[h])}),delete i[f]}}const o=n.fragments[n.fragments.length-1];if(a.length===0||!le(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,u=Jm();for(let c=0;c<a.length;c++){const d=a[c],f=r[d],h=H0(f.startDate,l),p=i[d],g=(p==null?void 0:p.cues)||{};let v=(p==null?void 0:p.durationKnown)||!1,E=ec;const y=f.endDate;if(y)E=H0(y,l),v=!0;else if(f.endOnNext&&!v){const b=a.reduce((x,w)=>{if(w!==f.id){const A=r[w];if(A.class===f.class&&A.startDate>f.startDate&&(!x||f.startDate<x.startDate))return A}return x},null);b&&(E=H0(b.startDate,l),v=!0)}const T=Object.keys(f.attr);for(let b=0;b<T.length;b++){const x=T[b];if(!$j(x))continue;const w=g[x];if(w)v&&!p.durationKnown&&(w.endTime=E);else if(u){let A=f.attr[x];Hj(x)&&(A=MW(A));const C=Dx(u,h,E,{key:x,data:A},Gn.dateRange);C&&(C.id=d,this.id3Track.addCue(C),g[x]=C)}}i[d]={cues:g,dateRange:f,durationKnown:v}}}}class BW{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let u=o&&i||n;(l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=r!==void 0?r:a*s);const c=s;return u+Math.min(this.stallCount*1,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,i=this.levelDetails;if(e===null||n===null||i===null)return null;const s=i.edge,r=e-n-this.edgeStalled,a=s-i.totalduration,o=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,r),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(S.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(S.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var i;n.details===H.BUFFER_STALLED_ERROR&&(this.stallCount++,(i=this.levelDetails)!=null&&i.live&&M.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:r}=this.config;if(!s||r===1||!n.live)return;const a=this.targetLatency;if(a===null)return;const o=i-a,l=Math.min(this.maxLatency,a+n.targetduration);if(o<l&&o>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,r)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(c,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const eg=["NONE","TYPE-0","TYPE-1",null];function UW(t){return eg.indexOf(t)>-1}const Xd=["SDR","PQ","HLG"];function $W(t){return!!t&&Xd.indexOf(t)>-1}var Fc={No:"",Yes:"YES",v2:"v2"};function Px(t){const{canSkipUntil:e,canSkipDateRanges:n,age:i}=t,s=i<e/2;return e&&s?n?Fc.v2:Fc.Yes:Fc.No}class kx{constructor(e,n,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=i}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class Ya{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Nx(this._audioGroups,e)}hasSubtitleGroup(e){return Nx(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(n)===-1&&i.push(n)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(n)===-1&&i.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function Nx(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function V0(t,e){const n=e.startPTS;if(le(n)){let i=0,s;e.sn>t.sn?(i=n-t.start,s=t):(i=t.start-n,s=e),s.duration!==i&&(s.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function d2(t,e,n,i,s,r){i-n<=0&&(M.warn("Fragment should have a positive duration",e),i=n+e.duration,r=s+e.duration);let o=n,l=i;const u=e.startPTS,c=e.endPTS;if(le(u)){const v=Math.abs(u-n);le(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,o=Math.max(n,u),n=Math.min(n,u),s=Math.min(s,e.startDTS),l=Math.min(i,c),i=Math.max(i,c),r=Math.max(r,e.endDTS)}const d=n-e.start;e.start!==0&&(e.start=n),e.duration=i-e.start,e.startPTS=n,e.maxStartPTS=o,e.startDTS=s,e.endPTS=i,e.minEndPTS=l,e.endDTS=r;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let h;const p=f-t.startSN,g=t.fragments;for(g[p]=e,h=p;h>0;h--)V0(g[h],g[h-1]);for(h=p;h<g.length-1;h++)V0(g[h],g[h+1]);return t.fragmentHint&&V0(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function HW(t,e){let n=null;const i=t.fragments;for(let l=i.length-1;l>=0;l--){const u=i[l].initSegment;if(u){n=u;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s=0,r;if(jW(t,e,(l,u)=>{l.relurl&&(s=l.cc-u.cc),le(l.startPTS)&&le(l.endPTS)&&(u.start=u.startPTS=l.startPTS,u.startDTS=l.startDTS,u.maxStartPTS=l.maxStartPTS,u.endPTS=l.endPTS,u.endDTS=l.endDTS,u.minEndPTS=l.minEndPTS,u.duration=l.endPTS-l.startPTS,u.duration&&(r=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=l.elementaryStreams,u.loader=l.loader,u.stats=l.stats,l.initSegment&&(u.initSegment=l.initSegment,n=l.initSegment)}),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(u=>{var c;u&&(!u.initSegment||u.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(u.initSegment=n)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){M.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=VW(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(s){M.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<a.length;l++)a[l].cc+=s}e.skippedSegments&&(e.startCC=e.fragments[0].cc),GW(t.partList,e.partList,(l,u)=>{u.elementaryStreams=l.elementaryStreams,u.stats=l.stats}),r?d2(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):f2(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function VW(t,e,n){const i=tt({},t);return n&&n.forEach(s=>{delete i[s]}),Object.keys(e).forEach(s=>{const r=new YR(e[s].attr,i[s]);r.isValid?i[s]=r:M.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[s].attr)}"`)}),i}function GW(t,e,n){if(t&&e){let i=0;for(let s=0,r=t.length;s<=r;s++){const a=t[s],o=e[s+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?n(a,o):i--}}}function jW(t,e,n){const i=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,r=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=s;u<=r;u++){const c=l[a+u];let d=o[u];i&&!d&&u<i&&(d=e.fragments[u]=c),c&&d&&n(c,d)}}function f2(t,e){const n=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;n<0||n>=i.length||tg(e,i[n].start)}function tg(t,e){if(e){const n=t.fragments;for(let i=t.skippedSegments;i<n.length;i++)n[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function WW(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const i=t.fragments;if(i.length&&n*4>e){const r=i[i.length-1].duration*1e3;r<n&&(n=r)}}else n/=2;return Math.round(n)}function zW(t,e,n){if(!(t!=null&&t.details))return null;const i=t.details;let s=i.fragments[e-i.startSN];return s||(s=i.fragmentHint,s&&s.sn===e)?s:e<i.startSN&&n&&n.sn===e?n:null}function Ox(t,e,n){var i;return t!=null&&t.details?h2((i=t.details)==null?void 0:i.partList,e,n):null}function h2(t,e,n){if(t)for(let i=t.length;i--;){const s=t[i];if(s.index===n&&s.fragment.sn===e)return s}return null}function p2(t){t.forEach((e,n)=>{const{details:i}=e;i!=null&&i.fragments&&i.fragments.forEach(s=>{s.level=n})})}function Qd(t){switch(t.details){case H.FRAG_LOAD_TIMEOUT:case H.KEY_LOAD_TIMEOUT:case H.LEVEL_LOAD_TIMEOUT:case H.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Mx(t,e){const n=Qd(e);return t.default[`${n?"timeout":"error"}Retry`]}function R1(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function Fx(t){return ht(ht({},t),{errorRetry:null,timeoutRetry:null})}function Zd(t,e,n,i){if(!t)return!1;const s=i==null?void 0:i.code,r=e<t.maxNumRetry&&(KW(s)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,i,r):r}function KW(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const m2={search:function(t,e){let n=0,i=t.length-1,s=null,r=null;for(;n<=i;){s=(n+i)/2|0,r=t[s];const a=e(r);if(a>0)n=s+1;else if(a<0)i=s-1;else return r}return null}};function YW(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!le(e))return null;const i=t[0].programDateTime;if(e<(i||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;n=n||0;for(let r=0;r<t.length;++r){const a=t[r];if(XW(e,n,a))return a}return null}function Jd(t,e,n=0,i=0,s=.005){let r=null;if(t){r=e[t.sn-e[0].sn+1]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(r=e[0]);if(r&&((!t||t.level===r.level)&&ng(n,i,r)===0||qW(r,t,Math.min(s,i))))return r;const a=m2.search(e,ng.bind(null,n,i));return a&&(a!==t||!r)?a:r}function qW(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((s,r)=>(r[0]==="INF"&&(s+=parseFloat(r[1])),s),n);return t.start<=i}return!1}function ng(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function XW(t,e,n){const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-i>t}function QW(t,e){return m2.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var Et={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},On={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ZW{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=M.log.bind(M,"[info]:"),this.warn=M.warn.bind(M,"[warning]:"),this.error=M.error.bind(M,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.ERROR,this.onError,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.ERROR,this.onError,this),e.off(S.ERROR,this.onErrorOut,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===pe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var i,s;if(n.fatal)return;const r=this.hls,a=n.context;switch(n.details){case H.FRAG_LOAD_ERROR:case H.FRAG_LOAD_TIMEOUT:case H.KEY_LOAD_ERROR:case H.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case H.FRAG_PARSING_ERROR:if((i=n.frag)!=null&&i.gap){n.errorAction={action:Et.DoNothing,flags:On.None};return}case H.FRAG_GAP:case H.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Et.SendAlternateToPenaltyBox;return}case H.LEVEL_EMPTY_ERROR:case H.LEVEL_PARSING_ERROR:{var o,l;const u=n.parent===pe.MAIN?n.level:r.loadLevel;n.details===H.LEVEL_EMPTY_ERROR&&((o=n.context)!=null&&(l=o.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case H.LEVEL_LOAD_ERROR:case H.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,a.level));return;case H.AUDIO_TRACK_LOAD_ERROR:case H.AUDIO_TRACK_LOAD_TIMEOUT:case H.SUBTITLE_LOAD_ERROR:case H.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=r.levels[r.loadLevel];if(u&&(a.type===Ce.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===Ce.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,r.loadLevel),n.errorAction.action=Et.SendAlternateToPenaltyBox,n.errorAction.flags=On.MoveAllAlternatesMatchingHost;return}}return;case H.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=r.levels[r.loadLevel],c=u==null?void 0:u.attrs["HDCP-LEVEL"];c?n.errorAction={action:Et.SendAlternateToPenaltyBox,flags:On.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(n)}return;case H.BUFFER_ADD_CODEC_ERROR:case H.REMUX_ALLOC_ERROR:case H.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(s=n.level)!=null?s:r.loadLevel);return;case H.INTERNAL_EXCEPTION:case H.BUFFER_APPENDING_ERROR:case H.BUFFER_FULL_ERROR:case H.LEVEL_SWITCH_ERROR:case H.BUFFER_STALLED_ERROR:case H.BUFFER_SEEK_OVER_HOLE:case H.BUFFER_NUDGE_ON_STALL:n.errorAction={action:Et.DoNothing,flags:On.None};return}n.type===Ee.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const i=this.hls,s=Mx(i.config.playlistLoadPolicy,e),r=this.playlistError++;if(Zd(s,r,Qd(e),e.response))return{action:Et.RetryRequest,flags:On.None,retryConfig:s,retryCount:r};const o=this.getLevelSwitchAction(e,n);return s&&(o.retryConfig=s,o.retryCount=r),o}getFragRetryOrSwitchAction(e){const n=this.hls,i=this.getVariantLevelIndex(e.frag),s=n.levels[i],{fragLoadPolicy:r,keyLoadPolicy:a}=n.config,o=Mx(e.details.startsWith("key")?a:r,e),l=n.levels.reduce((c,d)=>c+d.fragmentError,0);if(s&&(e.details!==H.FRAG_GAP&&s.fragmentError++,Zd(o,l,Qd(e),e.response)))return{action:Et.RetryRequest,flags:On.None,retryConfig:o,retryCount:l};const u=this.getLevelSwitchAction(e,i);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,n){const i=this.hls;n==null&&(n=i.loadLevel);const s=this.hls.levels[n];if(s){var r,a;const u=e.details;s.loadError++,u===H.BUFFER_APPEND_ERROR&&s.fragmentError++;let c=-1;const{levels:d,loadLevel:f,minAutoLevel:h,maxAutoLevel:p}=i;i.autoLevelEnabled||(i.loadLevel=-1);const g=(r=e.frag)==null?void 0:r.type,E=(g===pe.AUDIO&&u===H.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===H.BUFFER_ADD_CODEC_ERROR||u===H.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:w})=>s.audioCodec!==w),T=e.sourceBufferName==="video"&&(u===H.BUFFER_ADD_CODEC_ERROR||u===H.BUFFER_APPEND_ERROR)&&d.some(({codecSet:w,audioCodec:A})=>s.codecSet!==w&&s.audioCodec===A),{type:b,groupId:x}=(a=e.context)!=null?a:{};for(let w=d.length;w--;){const A=(w+f)%d.length;if(A!==f&&A>=h&&A<=p&&d[A].loadError===0){var o,l;const C=d[A];if(u===H.FRAG_GAP&&g===pe.MAIN&&e.frag){const L=d[A].details;if(L){const _=Jd(e.frag,L.fragments,e.frag.start);if(_!=null&&_.gap)continue}}else{if(b===Ce.AUDIO_TRACK&&C.hasAudioGroup(x)||b===Ce.SUBTITLE_TRACK&&C.hasSubtitleGroup(x))continue;if(g===pe.AUDIO&&(o=s.audioGroups)!=null&&o.some(L=>C.hasAudioGroup(L))||g===pe.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(L=>C.hasSubtitleGroup(L))||E&&s.audioCodec===C.audioCodec||!E&&s.audioCodec!==C.audioCodec||T&&s.codecSet===C.codecSet)continue}c=A;break}}if(c>-1&&i.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:Et.SendAlternateToPenaltyBox,flags:On.None,nextAutoLevel:c}}return{action:Et.SendAlternateToPenaltyBox,flags:On.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var i;switch((i=n.errorAction)==null?void 0:i.action){case Et.DoNothing:break;case Et.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==H.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:r,nextAutoLevel:a}=i;switch(s){case On.None:this.switchLevel(e,a);break;case On.MoveAllAlternatesMatchingHDCP:r&&(n.maxHdcpLevel=eg[eg.indexOf(r)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,a)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class D1{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=M.log.bind(M,`${n}:`),this.warn=M.warn.bind(M,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,i){const s=n==null?void 0:n.renditionReports;if(s){let r=-1;for(let a=0;a<s.length;a++){const o=s[a];let l;try{l=new self.URL(o.URI,n.url).href}catch(u){M.warn(`Could not construct new URL for Rendition Report: ${u}`),l=o.URI||""}if(l===e){r=a;break}else l===e.substring(0,l.length)&&(r=a)}if(r!==-1){const a=s[r],o=parseInt(a["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let l=parseInt(a["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const c=Math.min(n.age-n.partTarget,n.targetduration);l>=0&&c>n.partTarget&&(l+=1)}const u=i&&Px(i);return new kx(o,l>=0?l:void 0,u)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,i){const{details:s,stats:r}=n,a=self.performance.now(),o=r.loading.first?Math.max(0,a-r.loading.first):0;if(s.advancedDateTime=Date.now()-o,s.live||i!=null&&i.live){if(s.reloaded(i),i&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),i&&s.fragments.length>0&&HW(i,s),!this.canLoad||!s.live)return;let l,u,c;if(s.canBlockReload&&s.endSN&&s.advanced){const v=this.hls.config.lowLatencyMode,E=s.lastPartSn,y=s.endSN,T=s.lastPartIndex,b=T!==-1,x=E===y,w=v?0:T;b?(u=x?y+1:E,c=x?w:T+1):u=y+1;const A=s.age,C=A+s.ageHeader;let L=Math.min(C-s.partTarget,s.targetduration*1.5);if(L>0){if(i&&L>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${L} with playlist age: ${s.age}`),L=0;else{const _=Math.floor(L/s.targetduration);if(u+=_,c!==void 0){const N=Math.round(L%s.targetduration/s.partTarget);c+=N}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${A.toFixed(2)}s goal: ${L} skip sn ${_} to part ${c}`)}s.tuneInGoal=L}if(l=this.getDeliveryDirectives(s,n.deliveryDirectives,u,c),v||!x){this.loadPlaylist(l);return}}else(s.canBlockReload||s.canSkipUntil)&&(l=this.getDeliveryDirectives(s,n.deliveryDirectives,u,c));const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,h=(s.edge-f)*1e3,p=WW(s,h);s.updated&&a>this.requestScheduled+p&&(this.requestScheduled=r.loading.start),u!==void 0&&s.canBlockReload?this.requestScheduled=r.loading.first+p-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=p);let g=this.requestScheduled-a;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,n,i,s){let r=Px(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(i=n.msn,s=n.part,r=Fc.No),new kx(i,s,r)}checkRetry(e){const n=e.details,i=Qd(e),s=e.errorAction,{action:r,retryCount:a=0,retryConfig:o}=s||{},l=!!s&&!!o&&(r===Et.RetryRequest||!s.resolved&&r===Et.SendAlternateToPenaltyBox);if(l){var u;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(i&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const c=R1(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${n}" in ${c}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}class Fr{constructor(e,n=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=i}sample(e,n){const i=Math.pow(this.alpha_,e);this.estimate_=n*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class JW{constructor(e,n,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Fr(e),this.fast_=new Fr(n),this.defaultTTFB_=s,this.ttfb_=new Fr(e)}update(e,n){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new Fr(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==n&&(this.fast_=new Fr(n,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new Fr(e,r.getEstimate(),r.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const i=8*n,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const n=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const g2={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Bx={};function ez(t,e,n,i,s,r){const a=t.audioCodec?t.audioGroups:null,o=r==null?void 0:r.audioCodec,l=r==null?void 0:r.channels,u=l?parseInt(l):o?1/0:2;let c=null;if(a!=null&&a.length)try{a.length===1&&a[0]?c=e.groups[a[0]].channels:c=a.reduce((d,f)=>{if(f){const h=e.groups[f];if(!h)throw new Error(`Audio track group ${f} not found`);Object.keys(h.channels).forEach(p=>{d[p]=(d[p]||0)+h.channels[p]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(i,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(s,8e6))||!!c&&le(u)&&Object.keys(c).some(d=>parseInt(d)>u)}function tz(t,e,n){const i=t.videoCodec,s=t.audioCodec;if(!i||!s||!n)return Promise.resolve(g2);const r={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},a=t.videoRange;a!=="SDR"&&(r.transferFunction=a.toLowerCase());const o=i.split(",").map(l=>({type:"media-source",video:ht(ht({},r),{},{contentType:Hl(l,"video")})}));return s&&t.audioGroups&&t.audioGroups.forEach(l=>{var u;l&&((u=e.groups[l])==null||u.tracks.forEach(c=>{if(c.groupId===l){const d=c.channels||"",f=parseFloat(d);le(f)&&f>2&&o.push.apply(o,s.split(",").map(h=>({type:"media-source",audio:{contentType:Hl(h,"audio"),channels:""+f}})))}}))}),Promise.all(o.map(l=>{const u=nz(l);return Bx[u]||(Bx[u]=n.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:o,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:o,decodingInfoResults:[],error:l}))}function nz(t){const{audio:e,video:n}=t,i=n||e;if(i){const s=i.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${s}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${s}`}return""}function iz(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function sz(t,e){let n=!1,i=[];return t&&(n=t!=="SDR",i=[t]),e&&(i=e.allowedVideoRanges||Xd.slice(0),n=e.preferHDR!==void 0?e.preferHDR:iz(),n?i=i.filter(s=>s!=="SDR"):i=["SDR"]),{preferHDR:n,allowedVideoRanges:i}}function rz(t,e,n,i,s){const r=Object.keys(t),a=i==null?void 0:i.channels,o=i==null?void 0:i.audioCodec,l=a&&parseInt(a)===2;let u=!0,c=!1,d=1/0,f=1/0,h=1/0,p=0,g=[];const{preferHDR:v,allowedVideoRanges:E}=sz(e,s);for(let x=r.length;x--;){const w=t[r[x]];u=w.channels[2]>0,d=Math.min(d,w.minHeight),f=Math.min(f,w.minFramerate),h=Math.min(h,w.minBitrate);const A=E.filter(C=>w.videoRanges[C]>0);A.length>0&&(c=!0,g=A)}d=le(d)?d:0,f=le(f)?f:0;const y=Math.max(1080,d),T=Math.max(30,f);return h=le(h)?h:n,n=Math.max(h,n),c||(e=void 0,g=[]),{codecSet:r.reduce((x,w)=>{const A=t[w];if(w===x)return x;if(A.minBitrate>n)return yi(w,`min bitrate of ${A.minBitrate} > current estimate of ${n}`),x;if(!A.hasDefaultAudio)return yi(w,"no renditions with default or auto-select sound found"),x;if(o&&w.indexOf(o.substring(0,4))%5!==0)return yi(w,`audio codec preference "${o}" not found`),x;if(a&&!l){if(!A.channels[a])return yi(w,`no renditions with ${a} channel sound found (channels options: ${Object.keys(A.channels)})`),x}else if((!o||l)&&u&&A.channels[2]===0)return yi(w,"no renditions with stereo sound found"),x;return A.minHeight>y?(yi(w,`min resolution of ${A.minHeight} > maximum of ${y}`),x):A.minFramerate>T?(yi(w,`min framerate of ${A.minFramerate} > maximum of ${T}`),x):g.some(C=>A.videoRanges[C]>0)?A.maxScore<p?(yi(w,`max score of ${A.maxScore} < selected max of ${p}`),x):x&&(Yd(w)>=Yd(x)||A.fragmentError>t[x].fragmentError)?x:(p=A.maxScore,w):(yi(w,`no variants with VIDEO-RANGE of ${JSON.stringify(g)} found`),x)},void 0),videoRanges:g,preferHDR:v,minFramerate:f,minBitrate:h}}function yi(t,e){M.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function az(t){return t.reduce((e,n)=>{let i=e.groups[n.groupId];i||(i=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(n);const s=n.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||n.default,i.hasAutoSelect=i.hasAutoSelect||n.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function oz(t,e,n,i){return t.slice(n,i+1).reduce((s,r)=>{if(!r.codecSet)return s;const a=r.audioGroups;let o=s[r.codecSet];o||(s[r.codecSet]=o={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),o.minBitrate=Math.min(o.minBitrate,r.bitrate);const l=Math.min(r.height,r.width);return o.minHeight=Math.min(o.minHeight,l),o.minFramerate=Math.min(o.minFramerate,r.frameRate),o.maxScore=Math.max(o.maxScore,r.score),o.fragmentError+=r.fragmentError,o.videoRanges[r.videoRange]=(o.videoRanges[r.videoRange]||0)+1,a&&a.forEach(u=>{if(!u)return;const c=e.groups[u];c&&(o.hasDefaultAudio=o.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(d=>{o.channels[d]=(o.channels[d]||0)+c.channels[d]}))}),s},{})}function ui(t,e,n){if("attrs"in t){const i=e.indexOf(t);if(i!==-1)return i}for(let i=0;i<e.length;i++){const s=e[i];if(ba(t,s,n))return i}return-1}function ba(t,e,n){const{groupId:i,name:s,lang:r,assocLang:a,characteristics:o,default:l}=t,u=t.forced;return(i===void 0||e.groupId===i)&&(s===void 0||e.name===s)&&(r===void 0||e.lang===r)&&(r===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(o===void 0||lz(o,e.characteristics))&&(n===void 0||n(t,e))}function lz(t,e=""){const n=t.split(","),i=e.split(",");return n.length===i.length&&!n.some(s=>i.indexOf(s)===-1)}function Br(t,e){const{audioCodec:n,channels:i}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function uz(t,e,n,i,s){const r=e[i],o=e.reduce((f,h,p)=>{const g=h.uri;return(f[g]||(f[g]=[])).push(p),f},{})[r.uri];o.length>1&&(i=Math.max.apply(Math,o));const l=r.videoRange,u=r.frameRate,c=r.codecSet.substring(0,4),d=Ux(e,i,f=>{if(f.videoRange!==l||f.frameRate!==u||f.codecSet.substring(0,4)!==c)return!1;const h=f.audioGroups,p=n.filter(g=>!h||h.indexOf(g.groupId)!==-1);return ui(t,p,s)>-1});return d>-1?d:Ux(e,i,f=>{const h=f.audioGroups,p=n.filter(g=>!h||h.indexOf(g.groupId)!==-1);return ui(t,p,s)>-1})}function Ux(t,e,n){for(let i=e;i;i--)if(n(t[i]))return i;for(let i=e+1;i<t.length;i++)if(n(t[i]))return i;return-1}class cz{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:i,hls:s}=this,{autoLevelEnabled:r,media:a}=s;if(!n||!a)return;const o=performance.now(),l=i?i.stats:n.stats,u=i?i.duration:n.duration,c=o-l.loading.start,d=s.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!r||a.paused||!a.playbackRate||!a.readyState)return;const f=s.mainForwardBufferInfo;if(f===null)return;const h=this.bwEstimator.getEstimateTTFB(),p=Math.abs(a.playbackRate);if(c<=Math.max(h,1e3*(u/(p*2))))return;const g=f.len/p,v=l.loading.first?l.loading.first-l.loading.start:-1,E=l.loaded&&v>-1,y=this.getBwEstimate(),T=s.levels,b=T[n.level],x=l.total||Math.max(l.loaded,Math.round(u*b.averageBitrate/8));let w=E?c-v:c;w<1&&E&&(w=Math.min(c,l.loaded*8/y));const A=E?l.loaded*1e3/w:0,C=A?(x-l.loaded)/A:x*8/y+h/1e3;if(C<=g)return;const L=A?A*8:y;let _=Number.POSITIVE_INFINITY,N;for(N=n.level-1;N>d;N--){const U=T[N].maxBitrate;if(_=this.getTimeToLoadFrag(h/1e3,L,u*U,!T[N].details),_<g)break}if(_>=C||_>u*10)return;s.nextLoadLevel=s.nextAutoLevel=N,E?this.bwEstimator.sample(c-Math.min(h,v),l.loaded):this.bwEstimator.sampleTTFB(c);const j=T[N].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>j&&this.resetEstimator(j),this.clearTimer(),M.warn(`[abr] Fragment ${n.sn}${i?" part "+i.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${g.toFixed(3)} s
      Estimated load time for current fragment: ${C.toFixed(3)} s
      Estimated load time for down switch fragment: ${_.toFixed(3)} s
      TTFB estimate: ${v|0} ms
      Current BW estimate: ${le(y)?y|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${N} @ ${j|0} bps`),s.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:i,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(M.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new JW(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(S.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const i=n.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var s;this.fragCurrent=i,this.partCurrent=(s=n.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case H.BUFFER_ADD_CODEC_ERROR:case H.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case H.FRAG_LOAD_TIMEOUT:{const i=n.frag,{fragCurrent:s,partCurrent:r}=this;if(i&&s&&i.sn===s.sn&&i.level===s.level){const a=performance.now(),o=r?r.stats:i.stats,l=a-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,i,s){const r=e+i/n,a=s?this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,n){const i=this.hls.config,{loading:s}=n.stats,r=s.end-s.start;le(r)&&(this.lastLevelLoadSec=r/1e3),n.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:i}){const s=i?i.stats:n.stats;if(n.type===pe.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=i?i.duration:n.duration,a=this.hls.levels[n.level],o=(a.loaded?a.loaded.bytes:0)+s.loaded,l=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(n.bitrateTest){const r={stats:s,frag:n,part:i,id:n.type};this.onFragBuffered(S.FRAG_BUFFERED,r),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:i,part:s}=n,r=s!=null&&s.stats.loaded?s.stats:i.stats;if(r.aborted||this.ignoreFragment(i))return;const a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==pe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,n,e,0,s,1,1);if(r>-1)return r;const a=this.hls.firstLevel,o=Math.min(Math.max(a,n),e);return M.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,r)&&a[e].loadError<=a[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:i}=this,{maxAutoLevel:s,config:r,minAutoLevel:a}=i,o=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(u){const v=this.findBestLevel(l,a,s,u,0,c,d);if(v>=0)return v}let f=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!u){const v=this.bitrateTestDelay;v&&(f=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-v,M.info(`[abr] bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=d=1)}const h=this.findBestLevel(l,a,s,u,f,c,d);if(M.info(`[abr] ${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const p=i.levels[a],g=i.levels[i.loadLevel];return(p==null?void 0:p.bitrate)<(g==null?void 0:g.bitrate)?a:i.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const i=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,i,s,r,a,o){var l;const u=s+r,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:h}=this,{levels:p,allAudioTracks:g,loadLevel:v,config:E}=this.hls;if(p.length===1)return 0;const y=p[d],T=!!(y!=null&&(l=y.details)!=null&&l.live),b=v===-1||c===-1;let x,w="SDR",A=(y==null?void 0:y.frameRate)||0;const{audioPreference:C,videoPreference:L}=E,_=this.audioTracksByGroup||(this.audioTracksByGroup=az(g));if(b){if(this.firstSelection!==-1)return this.firstSelection;const q=this.codecTiers||(this.codecTiers=oz(p,_,n,i)),te=rz(q,w,e,C,L),{codecSet:ce,videoRanges:Y,minFramerate:O,minBitrate:k,preferHDR:z}=te;x=ce,w=z?Y[Y.length-1]:Y[0],A=O,e=Math.max(e,k),M.log(`[abr] picked start tier ${JSON.stringify(te)}`)}else x=y==null?void 0:y.codecSet,w=y==null?void 0:y.videoRange;const N=h?h.duration:f?f.duration:0,j=this.bwEstimator.getEstimateTTFB()/1e3,U=[];for(let q=i;q>=n;q--){var J;const te=p[q],ce=q>d;if(!te)continue;if(E.useMediaCapabilities&&!te.supportedResult&&!te.supportedPromise){const re=navigator.mediaCapabilities;typeof(re==null?void 0:re.decodingInfo)=="function"&&ez(te,_,w,A,e,C)?(te.supportedPromise=tz(te,_,re),te.supportedPromise.then(de=>{if(!this.hls)return;te.supportedResult=de;const ge=this.hls.levels,Se=ge.indexOf(te);de.error?M.warn(`[abr] MediaCapabilities decodingInfo error: "${de.error}" for level ${Se} ${JSON.stringify(de)}`):de.supported||(M.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Se} ${JSON.stringify(de)}`),Se>-1&&ge.length>1&&(M.log(`[abr] Removing unsupported level ${Se}`),this.hls.removeLevel(Se)))})):te.supportedResult=g2}if(x&&te.codecSet!==x||w&&te.videoRange!==w||ce&&A>te.frameRate||!ce&&A>0&&A<te.frameRate||te.supportedResult&&!((J=te.supportedResult.decodingInfoResults)!=null&&J[0].smooth)){U.push(q);continue}const Y=te.details,O=(h?Y==null?void 0:Y.partTarget:Y==null?void 0:Y.averagetargetduration)||N;let k;ce?k=o*e:k=a*e;const z=N&&s>=N*2&&r===0?p[q].averageBitrate:p[q].maxBitrate,G=this.getTimeToLoadFrag(j,k,z*O,Y===void 0);if(k>=z&&(q===c||te.loadError===0&&te.fragmentError===0)&&(G<=j||!le(G)||T&&!this.bitrateTestDelay||G<u)){const re=this.forcedAutoLevel;return q!==v&&(re===-1||re!==v)&&(U.length&&M.trace(`[abr] Skipped level(s) ${U.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[U[0]].codecs}" ${p[U[0]].videoRange}; not compatible with "${y.codecs}" ${w}`),M.info(`[abr] switch candidate:${d}->${q} adjustedbw(${Math.round(k)})-bitrate=${Math.round(k-z)} ttfb:${j.toFixed(1)} avgDuration:${O.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${G.toFixed(1)} firstSelection:${b} codecSet:${x} videoRange:${w} hls.loadLevel:${v}`)),b&&(this.firstSelection=q),q}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:i}=this.hls,s=Math.min(Math.max(e,i),n);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}}class dz{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var ut={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class fz{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.BUFFER_APPENDED,this.onBufferAppended,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.BUFFER_APPENDED,this.onBufferAppended,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const i=this.activePartLists[n];if(i)for(let s=i.length;s--;){const r=i[s];if(!r)break;const a=r.end;if(r.start<=e&&a!==null&&e<=a)return r}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:i}=this,s=Object.keys(i);for(let r=s.length;r--;){const a=i[s[r]];if((a==null?void 0:a.body.type)===n&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,n,i,s){this.timeRanges&&(this.timeRanges[e]=n);const r=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||r>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===i&&this.removeFragment(o.body);return}const l=o.range[e];l&&l.time.some(u=>{const c=!this.isTimeBuffered(u.startPTS,u.endPTS,n);return c&&this.removeFragment(o.body),c})})}detectPartialFragments(e){const n=this.timeRanges,{frag:i,part:s}=e;if(!n||i.sn==="initSegment")return;const r=Ur(i),a=this.fragments[r];if(!a||a.buffered&&i.gap)return;const o=!i.relurl;Object.keys(n).forEach(l=>{const u=i.elementaryStreams[l];if(!u)return;const c=n[l],d=o||u.partial===!0;a.range[l]=this.getBufferedTimes(i,s,d,c)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=i.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),tc(a)||this.removeParts(i.sn-1,i.type)):this.removeFragment(a.body)}removeParts(e,n){const i=this.activePartLists[n];i&&(this.activePartLists[n]=i.filter(s=>s.fragment.sn>=e))}fragBuffered(e,n){const i=Ur(e);let s=this.fragments[i];!s&&n&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,n,i,s){const r={time:[],partial:i},a=e.start,o=e.end,l=e.minEndPTS||o,u=e.maxStartPTS||a;for(let c=0;c<s.length;c++){const d=s.start(c)-this.bufferPadding,f=s.end(c)+this.bufferPadding;if(u>=d&&l<=f){r.time.push({startPTS:Math.max(a,s.start(c)),endPTS:Math.min(o,s.end(c))});break}else if(a<f&&o>d){const h=Math.max(a,s.start(c)),p=Math.min(o,s.end(c));p>h&&(r.partial=!0,r.time.push({startPTS:h,endPTS:p}))}else if(o<=d)break}return r}getPartialFragment(e){let n=null,i,s,r,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&tc(c)&&(s=c.body.start-o,r=c.body.end+o,e>=s&&e<=r&&(i=Math.min(e-s,r-e),a<=i&&(n=c.body,a=i)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||tc(n))}getState(e){const n=Ur(e),i=this.fragments[n];return i?i.buffered?tc(i)?ut.PARTIAL:ut.OK:ut.APPENDING:ut.NOT_LOADED}isTimeBuffered(e,n,i){let s,r;for(let a=0;a<i.length;a++){if(s=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,e>=s&&n<=r)return!0;if(n<=s)return!1}return!1}onFragLoaded(e,n){const{frag:i,part:s}=n;if(i.sn==="initSegment"||i.bitrateTest)return;const r=s?null:n,a=Ur(i);this.fragments[a]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:i,part:s,timeRanges:r}=n;if(i.sn==="initSegment")return;const a=i.type;if(s){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(s)}this.timeRanges=r,Object.keys(r).forEach(o=>{const l=r[o];this.detectEvictedFragments(o,l,a,s)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Ur(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==i||s&&!l.gap||l.start<n&&l.end>e&&(o.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const n=Ur(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const s=e.sn;this.activePartLists[e.type]=i.filter(r=>r.fragment.sn!==s)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function tc(t){var e,n,i;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((i=t.range.audiovideo)==null?void 0:i.partial))}function Ur(t){return`${t.type}_${t.level}_${t.sn}`}const hz={length:0,start:()=>0,end:()=>0};class Oe{static isBuffered(e,n){try{if(e){const i=Oe.getBuffered(e);for(let s=0;s<i.length;s++)if(n>=i.start(s)&&n<=i.end(s))return!0}}catch{}return!1}static bufferInfo(e,n,i){try{if(e){const s=Oe.getBuffered(e),r=[];let a;for(a=0;a<s.length;a++)r.push({start:s.start(a),end:s.end(a)});return this.bufferedInfo(r,n,i)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,i){n=Math.max(0,n),e.sort(function(u,c){const d=u.start-c.start;return d||c.end-u.end});let s=[];if(i)for(let u=0;u<e.length;u++){const c=s.length;if(c){const d=s[c-1].end;e[u].start-d<i?e[u].end>d&&(s[c-1].end=e[u].end):s.push(e[u])}else s.push(e[u])}else s=e;let r=0,a,o=n,l=n;for(let u=0;u<s.length;u++){const c=s[u].start,d=s[u].end;if(n+i>=c&&n<d)o=c,l=d,r=l-n;else if(n+i<c){a=c;break}}return{len:r,start:o||0,end:l||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(n){return M.log("failed to get media.buffered",n),hz}}}class P1{constructor(e,n,i,s=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=nc(),this.buffering={audio:nc(),video:nc(),audiovideo:nc()},this.level=e,this.sn=n,this.id=i,this.size=s,this.part=r,this.partial=a}}function nc(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Bc(t,e){for(let i=0,s=t.length;i<s;i++){var n;if(((n=t[i])==null?void 0:n.cc)===e)return t[i]}return null}function pz(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function mz(t,e){const n=t.fragments,i=e.fragments;if(!i.length||!n.length){M.log("No fragments to align");return}const s=Bc(n,i[0].cc);if(!s||s&&!s.startPTS){M.log("No frag in previous level to align on");return}return s}function $x(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function E2(t,e){const n=e.fragments;for(let i=0,s=n.length;i<s;i++)$x(n[i],t);e.fragmentHint&&$x(e.fragmentHint,t),e.alignedSliding=!0}function gz(t,e,n){e&&(Ez(t,n,e),!n.alignedSliding&&e&&ef(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&f2(e,n))}function Ez(t,e,n){if(pz(t,n,e)){const i=mz(n,e);i&&le(i.start)&&(M.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),E2(i.start,e))}}function ef(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,i=e.fragments;if(!n.length||!i.length)return;let s,r;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(s=Bc(i,a),r=Bc(n,a)),(!s||!r)&&(s=i[Math.floor(i.length/2)],r=Bc(n,s.cc)||n[Math.floor(n.length/2)]);const o=s.programDateTime,l=r.programDateTime;if(!o||!l)return;const u=(l-o)/1e3-(r.start-s.start);E2(u,t)}const Hx=Math.pow(2,17);class Tz{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const i=e.url;if(!i)return Promise.reject(new Li({type:Ee.NETWORK_ERROR,details:H.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(h=>h[0]==="GAP")){l(Gx(e));return}else e.gap=!1;const u=this.loader=e.loader=r?new r(s):new a(s),c=Vx(e),d=Fx(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Hx};e.stats=u.stats,u.load(c,f,{onSuccess:(h,p,g,v)=>{this.resetLoader(e,u);let E=h.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(E.slice(0,16)),E=E.slice(16)),o({frag:e,part:null,payload:E,networkDetails:v})},onError:(h,p,g,v)=>{this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ht({url:i,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:v}))},onAbort:(h,p,g)=>{this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))},onProgress:(h,p,g,v)=>{n&&n({frag:e,part:null,payload:g,networkDetails:v})}})})}loadPart(e,n,i){this.abort();const s=this.config,r=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(Gx(e,n));return}const u=this.loader=e.loader=r?new r(s):new a(s),c=Vx(e,n),d=Fx(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Hx};n.stats=u.stats,u.load(c,f,{onSuccess:(h,p,g,v)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const E={frag:e,part:n,payload:h.data,networkDetails:v};i(E),o(E)},onError:(h,p,g,v)=>{this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:ht({url:c.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:v}))},onAbort:(h,p,g)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,u),l(new Li({type:Ee.NETWORK_ERROR,details:H.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))}})})}updateStatsFromPart(e,n){const i=e.stats,s=n.stats,r=s.total;if(i.loaded+=s.loaded,r){const l=Math.round(e.duration/n.duration),u=Math.min(Math.round(i.loaded/r),l),d=(l-u)*Math.round(i.loaded/u);i.total=i.loaded+d}else i.total=Math.max(i.loaded,i.total);const a=i.loading,o=s.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function Vx(t,e=null){const n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},s=n.byteRangeStartOffset,r=n.byteRangeEndOffset;if(le(s)&&le(r)){var a;let o=s,l=r;if(t.sn==="initSegment"&&((a=t.decryptdata)==null?void 0:a.method)==="AES-128"){const u=r-s;u%16&&(l=r+(16-u%16)),s!==0&&(i.resetIV=!0,o=s-16)}i.rangeStart=o,i.rangeEnd=l}return i}function Gx(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),i={type:Ee.MEDIA_ERROR,details:H.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new Li(i)}class Li extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class yz{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class vz{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function bz(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?hr(t,0,e-n):t}class xz{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=n.getUint32(s*4);return i}initTable(){const e=this.sBox,n=this.invSBox,i=this.subMix,s=i[0],r=i[1],a=i[2],o=i[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=new Uint32Array(256);let p=0,g=0,v=0;for(v=0;v<256;v++)v<128?h[v]=v<<1:h[v]=v<<1^283;for(v=0;v<256;v++){let E=g^g<<1^g<<2^g<<3^g<<4;E=E>>>8^E&255^99,e[p]=E,n[E]=p;const y=h[p],T=h[y],b=h[T];let x=h[E]*257^E*16843008;s[p]=x<<24|x>>>8,r[p]=x<<16|x>>>16,a[p]=x<<8|x>>>24,o[p]=x,x=b*16843009^T*65537^y*257^p*16843008,u[E]=x<<24|x>>>8,c[E]=x<<16|x>>>16,d[E]=x<<8|x>>>24,f[E]=x,p?(p=y^h[h[h[b^y]]],g^=h[h[g]]):p=g=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<n.length&&i;)i=n[s]===this.key[s],s++;if(i)return;this.key=n;const r=this.keySize=n.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const a=this.ksRows=(r+6+1)*4;let o,l;const u=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],g=h[1],v=h[2],E=h[3];let y,T;for(o=0;o<a;o++){if(o<r){y=u[o]=n[o];continue}T=y,o%r===0?(T=T<<8|T>>>24,T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255],T^=f[o/r|0]<<24):r>6&&o%r===4&&(T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255]),u[o]=y=(u[o-r]^T)>>>0}for(l=0;l<a;l++)o=a-l,l&3?T=u[o]:T=u[o-4],l<4||o<=4?c[l]=T:c[l]=p[d[T>>>24]]^g[d[T>>>16&255]]^v[d[T>>>8&255]]^E[d[T&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,i){const s=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],f=this.uint8ArrayToUint32Array_(i);let h=f[0],p=f[1],g=f[2],v=f[3];const E=new Int32Array(e),y=new Int32Array(E.length);let T,b,x,w,A,C,L,_,N,j,U,J,q,te;const ce=this.networkToHostOrderSwap;for(;n<E.length;){for(N=ce(E[n]),j=ce(E[n+1]),U=ce(E[n+2]),J=ce(E[n+3]),A=N^r[0],C=J^r[1],L=U^r[2],_=j^r[3],q=4,te=1;te<s;te++)T=l[A>>>24]^u[C>>16&255]^c[L>>8&255]^d[_&255]^r[q],b=l[C>>>24]^u[L>>16&255]^c[_>>8&255]^d[A&255]^r[q+1],x=l[L>>>24]^u[_>>16&255]^c[A>>8&255]^d[C&255]^r[q+2],w=l[_>>>24]^u[A>>16&255]^c[C>>8&255]^d[L&255]^r[q+3],A=T,C=b,L=x,_=w,q=q+4;T=a[A>>>24]<<24^a[C>>16&255]<<16^a[L>>8&255]<<8^a[_&255]^r[q],b=a[C>>>24]<<24^a[L>>16&255]<<16^a[_>>8&255]<<8^a[A&255]^r[q+1],x=a[L>>>24]<<24^a[_>>16&255]<<16^a[A>>8&255]<<8^a[C&255]^r[q+2],w=a[_>>>24]<<24^a[A>>16&255]<<16^a[C>>8&255]<<8^a[L&255]^r[q+3],y[n]=ce(T^h),y[n+1]=ce(w^p),y[n+2]=ce(x^g),y[n+3]=ce(b^v),h=N,p=j,g=U,v=J,n=n+4}return y.buffer}}const Sz=16;class k1{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?bz(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,i){return this.useSoftware?new Promise((s,r)=>{this.softwareDecrypt(new Uint8Array(e),n,i);const a=this.flush();a?s(a.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,i)}softwareDecrypt(e,n,i){const{currentIV:s,currentResult:r,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=kn(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;s&&(i=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new xz),l.expandKey(n);const u=r;return this.currentResult=l.decrypt(o.buffer,0,i),this.currentIV=hr(o,-16).buffer,u||null}webCryptoDecrypt(e,n,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,i));this.key=n,this.fastAesKey=new vz(this.subtle,n)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new yz(this.subtle,new Uint8Array(i)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(M.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,i)))}onWebCryptoError(e,n,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,i);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const i=e.length-e.length%Sz;return i!==e.length&&(n=hr(e,0,i),this.remainderData=hr(e,i)),n}logOnce(e){this.logEnabled&&(M.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Az={toString:function(t){let e="";const n=t.length;for(let i=0;i<n;i++)e+=`[${t.start(i).toFixed(3)}-${t.end(i).toFixed(3)}]`;return e}},ee={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class N1 extends dz{constructor(e,n,i,s,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ee.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=s,this.log=M.log.bind(M,`${s}:`),this.warn=M.warn.bind(M,`${s}:`),this.hls=e,this.fragmentLoader=new Tz(e.config),this.keyLoader=i,this.fragmentTracker=n,this.config=e.config,this.decrypter=new k1(e.config),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ee.STOPPED}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const i=n.partList;if(i!=null&&i.length){const r=i[i.length-1];return Oe.isBuffered(this.media,r.start+r.duration/2)}const s=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const i=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ee.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:i,mediaBuffer:s,state:r}=this,a=i?i.currentTime:0,o=Oe.bufferInfo(s||i,a,e.maxBufferHole);if(this.log(`media seeking to ${le(a)?a.toFixed(3):a}, state: ${r}`),this.state===ee.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,u=n.start-l,c=n.start+n.duration+l;if(!o.len||c<o.start||u>o.end){const d=a>c;(a<u||d)&&(d&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=ee.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,i){this._loadFragForPlayback(e,n,i)}_loadFragForPlayback(e,n,i){const s=r=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${r.part?" p: "+r.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,n,i,s).then(r=>{if(!r)return;const a=this.state;if(this.fragContextChanged(e)){(a===ee.FRAG_LOADING||!this.fragCurrent&&a===ee.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ee.IDLE);return}"payload"in r&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(S.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(`Frag error: ${(r==null?void 0:r.message)||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:i}=this;if(i.getState(e)===ut.APPENDING){const r=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,r),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===ut.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,i=null){if(!(e-n))return;const s={startOffset:e,endOffset:n,type:i};this.hls.trigger(S.BUFFER_FLUSHING,s)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(i=>{if(!i||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:s}=this,{payload:r}=i,a=e.decryptdata;if(r&&r.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).catch(l=>{throw s.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const u=self.performance.now();return s.trigger(S.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:o,tdecrypt:u}}),i.payload=l,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state=ee.IDLE,e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var i,s,r,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===pe.MAIN?"level":"track"} ${e.level} (frag:[${((i=e.startPTS)!=null?i:NaN).toFixed(3)}-${((s=e.endPTS)!=null?s:NaN).toFixed(3)}] > buffer:${o?Az.toString(Oe.getBuffered(o)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==pe.SUBTITLE){const c=e.elementaryStreams;if(!Object.keys(c).some(d=>!!c[d])){this.state=ee.IDLE;return}}const u=(l=this.levels)==null?void 0:l[e.level];u!=null&&u.fragmentError&&(this.log(`Resetting level fragment error count of ${u.fragmentError} on frag buffered`),u.fragmentError=0)}this.state=ee.IDLE,o&&(!this.loadedmetadata&&e.type==pe.MAIN&&o.buffered.length&&((r=this.fragCurrent)==null?void 0:r.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:i,part:s,partsLoaded:r}=e,a=!r||r.length===0||r.some(l=>!l),o=new P1(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!a);n.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,i=null,s){var r;const a=n==null?void 0:n.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ee.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(S.KEY_LOADED,c),this.state===ee.KEY_LOADING&&(this.state=ee.IDLE),c}),this.hls.trigger(S.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=a.partList;if(c&&s){i>e.end&&a.fragmentHint&&(e=a.fragmentHint);const d=this.getNextPart(c,e,i);if(d>-1){const f=c[d];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${d}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=ee.FRAG_LOADING;let h;return o?h=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,n,s)).catch(p=>this.handleFragLoadError(p)):h=this.doFragPartsLoad(e,f,n,s).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(S.FRAG_LOADING,{frag:e,part:f,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}else if(!e.url||this.loadedEndOfParts(c,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),le(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ee.FRAG_LOADING;const l=this.config.progressive;let u;return l&&o?u=o.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,s)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,l?s:void 0),o]).then(([c])=>(!l&&c&&s&&s(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(S.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,n,i,s){return new Promise((r,a)=>{var o;const l=[],u=(o=i.details)==null?void 0:o.partList,c=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const h=f.part;this.hls.trigger(S.FRAG_LOADED,f);const p=Ox(i,e.sn,d.index+1)||h2(u,e.sn,d.index+1);if(p)c(p);else return r({frag:e,part:h,partsLoaded:l})}).catch(a)};c(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===H.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(S.ERROR,n)}else this.hls.trigger(S.ERROR,{type:Ee.OTHER_ERROR,details:H.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==ee.PARSING){!this.fragCurrent&&this.state!==ee.STOPPED&&this.state!==ee.ERROR&&(this.state=ee.IDLE);return}const{frag:i,part:s,level:r}=n,a=self.performance.now();i.stats.parsing.end=a,s&&(s.stats.parsing.end=a),this.updateLevelTiming(i,s,r,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:i}=this,{level:s,sn:r,part:a}=e;if(!(n!=null&&n[s]))return this.warn(`Levels object was unset while buffering fragment ${r} of level ${s}. The current chunk will not be buffered.`),null;const o=n[s],l=a>-1?Ox(o,r,a):null,u=l?l.fragment:zW(o,r,i);return u?(i&&i!==u&&(u.stats=i.stats),{frag:u,part:l,level:o}):null}bufferFragmentData(e,n,i,s,r){var a;if(!e||this.state!==ee.PARSING)return;const{data1:o,data2:l}=e;let u=o;if(o&&l&&(u=kn(o,l)),!((a=u)!=null&&a.length))return;const c={type:e.type,frag:n,part:i,chunkMeta:s,parent:n.type,data:u};if(this.hls.trigger(S.BUFFER_APPENDING,c),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!Oe.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const i=n.currentTime,s=Oe.bufferInfo(n,i,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),o=Math.max(Math.min(e.start-a,s.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,n){const i=this.getLoadPosition();return le(i)?this.getFwdBufferInfoAtPos(e,i,n):null}getFwdBufferInfoAtPos(e,n,i){const{config:{maxBufferHole:s}}=this,r=Oe.bufferInfo(e,n,s);if(r.len===0&&r.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(n,i);if(a&&r.nextStart<a.end)return Oe.bufferInfo(e,n,Math.max(r.nextStart,s))}return r}getMaxBufferLength(e){const{config:n}=this;let i;return e?i=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):i=n.maxBufferLength,Math.min(i,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const i=this.config,s=Math.max(Math.min(e-n,i.maxBufferLength),n),r=Math.max(e-n*3,i.maxMaxBufferLength/2,s);return r>=s?(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,n=pe.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,pe.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,n){const i=n.fragments,s=i.length;if(!s)return null;const{config:r}=this,a=i[0].start;let o;if(n.live){const l=r.initialLiveManifestSize;if(s<l)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(o=this.getInitialLiveFragment(n,i),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=i[0]);if(!o){const l=r.lowLatencyMode?n.partEnd:n.fragmentEnd;o=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,n){const i=this.fragmentTracker.getState(e);return(i===ut.OK||i===ut.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,i,s,r){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,n);if(o===null)return o;if(e=o,a&&e&&!e.gap&&i.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s);if(l!==null&&i.len+l.len>=r)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,i){let s=-1,r=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const u=e[o];if(a=a&&!u.independent,s>-1&&i<u.start)break;const c=u.loaded;c?s=-1:(r||u.independent||a)&&u.fragment===n&&(s=o),r=c}return s}loadedEndOfParts(e,n){const i=e[e.length-1];return i&&n>i.start&&i.loaded}getInitialLiveFragment(e,n){const i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=YW(n,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const a=n[r-e.startSN];i.cc===a.cc&&(s=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=QW(n,i.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(s=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,n,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:a,endSN:o}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:u}=s,c=i.partList,d=!!(s.lowLatencyMode&&c!=null&&c.length&&l);d&&l&&!this.bitrateTest&&(a=a.concat(l),o=l.sn);let f;if(e<n){const h=e>n-u?0:u;f=Jd(r,a,e,h)}else f=a[a.length-1];if(f){const h=f.sn-i.startSN,p=this.fragmentTracker.getState(f);if((p===ut.OK||p===ut.PARTIAL&&f.gap)&&(r=f),r&&f.sn===r.sn&&(!d||c[0].fragment.sn>f.sn)&&r&&f.level===r.level){const v=a[h+1];f.sn<o&&this.fragmentTracker.getState(v)!==ut.OK?f=v:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=i.currentTime,a=e.fragments[0].start,o=e.edge,l=r>=a-n.maxFragLookUpTolerance&&r<=o;if(s!==null&&i.duration>s&&(r<s||!l)){const u=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||r<o-u)&&(this.loadedmetadata||(this.nextLoadPosition=s),i.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),i.currentTime=s))}}alignPlaylists(e,n,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragments[0].start,a=!n,o=e.alignedSliding&&le(r);if(a||!o&&!r){const{fragPrevious:l}=this;gz(l,i,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${s}`),u}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let i=this.startPosition;if(i<n&&(i=-1),i===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,r=s?this.startTimeOffset:e.startTimeOffset;r!==null&&le(r)?(i=n+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(n,i),n+e.totalduration),this.log(`Start time offset ${r} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||n:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ee.FRAG_LOADING_WAITING_RETRY)&&(this.state=ee.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const c=this.getCurrentContext(n.chunkMeta);c&&(n.frag=c.frag)}const i=n.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const r=n.details===H.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const a=n.errorAction,{action:o,retryCount:l=0,retryConfig:u}=a||{};if(a&&o===Et.RetryRequest&&u){this.resetStartWhenNotLoaded(this.levelLastLoaded);const c=R1(u,l);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${n.details}, retrying loading ${l+1}/${u.maxNumRetry} in ${c}ms`),a.resolved=!0,this.retryDate=self.performance.now()+c,this.state=ee.FRAG_LOADING_WAITING_RETRY}else if(u&&a)if(this.resetFragmentErrors(e),l<u.maxNumRetry)!r&&o!==Et.RemoveAlternatePermanently&&(a.resolved=!0);else{M.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(a==null?void 0:a.action)===Et.SendAlternateToPenaltyBox?this.state=ee.WAITING_LEVEL:this.state=ee.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ee.PARSING||this.state===ee.PARSED){const n=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,(n==null?void 0:n.duration)||10);const a=!r;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===pe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ee.STOPPED&&(this.state=ee.IDLE)}afterBufferFlushed(e,n,i){if(!e)return;const s=Oe.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,s,i),this.state===ee.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ee.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,i,s){var r;const a=i.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const f=s?0:d2(a,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(S.LEVEL_PTS_UPDATED,{details:a,level:i,drift:f,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)&&((r=this.transmuxer)==null?void 0:r.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(i.fragmentError===0&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ee.PARSED,this.hls.trigger(S.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class T2{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let i;if(e.length)e.length===1?i=e[0]:i=Cz(e,n);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function Cz(t,e){const n=new Uint8Array(e);let i=0;for(let s=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}function wz(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Lz(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function Iz(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function ri(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class O1{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,i){}demux(e,n){this.cachedData&&(e=kn(this.cachedData,e),this.cachedData=null);let i=Ul(e,0),s=i?i.length:0,r;const a=this._audioTrack,o=this._id3Track,l=i?_1(i):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&le(l))&&(this.basePTS=_z(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Gn.audioId3,duration:Number.POSITIVE_INFINITY});s<u;){if(this.canParse(e,s)){const c=this.appendFrame(a,e,s);c?(this.frameIndex++,this.lastPTS=c.sample.pts,s+=c.length,r=s):s=u}else Xj(e,s)?(i=Ul(e,s),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Gn.audioId3,duration:Number.POSITIVE_INFINITY}),s+=i.length,r=s):s++;if(s===u&&r!==u){const c=hr(e,r);this.cachedData?this.cachedData=kn(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:ri(),id3Track:o,textTrack:ri()}}demuxSampleAes(e,n,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:ri(),id3Track:this._id3Track,textTrack:ri()}}destroy(){}}const _z=(t,e,n)=>{if(le(t))return t*90;const i=n?n.baseTime*9e4/n.timescale:0;return e*9e4+i};function Rz(t,e,n,i){let s,r,a,o;const l=navigator.userAgent.toLowerCase(),u=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[n+2]&192)>>>6)+1;const d=(e[n+2]&60)>>>2;if(d>c.length-1){const f=new Error(`invalid ADTS sampling index:${d}`);t.emit(S.ERROR,S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}return a=(e[n+2]&1)<<2,a|=(e[n+3]&192)>>>6,M.log(`manifest codec:${i}, ADTS type:${s}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(s=5,o=new Array(4),r=d-3):(s=2,o=new Array(2),r=d):l.indexOf("android")!==-1?(s=2,o=new Array(2),r=d):(s=5,o=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&d>=6?r=d-3:((i&&i.indexOf("mp4a.40.2")!==-1&&(d>=6&&a===1||/vivaldi/i.test(l))||!i&&a===1)&&(s=2,o=new Array(2)),r=d)),o[0]=s<<3,o[0]|=(d&14)>>1,o[1]|=(d&1)<<7,o[1]|=a<<3,s===5&&(o[1]|=(r&14)>>1,o[2]=(r&1)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[d],channelCount:a,codec:"mp4a.40."+s,manifestCodec:u}}function y2(t,e){return t[e]===255&&(t[e+1]&246)===240}function v2(t,e){return t[e+1]&1?7:9}function M1(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Dz(t,e){return e+5<t.length}function tf(t,e){return e+1<t.length&&y2(t,e)}function Pz(t,e){return Dz(t,e)&&y2(t,e)&&M1(t,e)<=t.length-e}function kz(t,e){if(tf(t,e)){const n=v2(t,e);if(e+n>=t.length)return!1;const i=M1(t,e);if(i<=n)return!1;const s=e+i;return s===t.length||tf(t,s)}return!1}function b2(t,e,n,i,s){if(!t.samplerate){const r=Rz(e,n,i,s);if(!r)return;t.config=r.config,t.samplerate=r.samplerate,t.channelCount=r.channelCount,t.codec=r.codec,t.manifestCodec=r.manifestCodec,M.log(`parsed codec:${t.codec}, rate:${r.samplerate}, channels:${r.channelCount}`)}}function x2(t){return 1024*9e4/t}function Nz(t,e){const n=v2(t,e);if(e+n<=t.length){const i=M1(t,e)-n;if(i>0)return{headerLength:n,frameLength:i}}}function S2(t,e,n,i,s){const r=x2(t.samplerate),a=i+s*r,o=Nz(e,n);let l;if(o){const{frameLength:d,headerLength:f}=o,h=f+d,p=Math.max(0,n+h-e.length);p?(l=new Uint8Array(h-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+h);const g={unit:l,pts:a};return p||t.samples.push(g),{sample:g,length:h,missing:p}}const u=e.length-n;return l=new Uint8Array(u),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:a},length:u,missing:-1}}let ic=null;const Oz=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Mz=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Fz=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Bz=[0,1,1,4];function A2(t,e,n,i,s){if(n+24>e.length)return;const r=C2(e,n);if(r&&n+r.frameLength<=e.length){const a=r.samplesPerFrame*9e4/r.sampleRate,o=i+s*a,l={unit:e.subarray(n,n+r.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function C2(t,e){const n=t[e+1]>>3&3,i=t[e+1]>>1&3,s=t[e+2]>>4&15,r=t[e+2]>>2&3;if(n!==1&&s!==0&&s!==15&&r!==3){const a=t[e+2]>>1&1,o=t[e+3]>>6,l=n===3?3-i:i===3?3:4,u=Oz[l*14+s-1]*1e3,d=Mz[(n===3?0:n===2?1:2)*3+r],f=o===3?1:2,h=Fz[n][i],p=Bz[i],g=h*8*p,v=Math.floor(h*u/d+a)*p;if(ic===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ic=T?parseInt(T[1]):0}return!!ic&&ic<=87&&i===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:v,samplesPerFrame:g}}}function F1(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function w2(t,e){return e+1<t.length&&F1(t,e)}function Uz(t,e){return F1(t,e)&&4<=t.length-e}function L2(t,e){if(e+1<t.length&&F1(t,e)){const i=C2(t,e);let s=4;i!=null&&i.frameLength&&(s=i.frameLength);const r=e+s;return r===t.length||w2(t,r)}return!1}class $z extends O1{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,i,s){super.resetInitSegment(e,n,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Ul(e,0);let i=(n==null?void 0:n.length)||0;if(L2(e,i))return!1;for(let s=e.length;i<s;i++)if(kz(e,i))return M.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return Pz(e,n)}appendFrame(e,n,i){b2(e,this.observer,n,i,e.manifestCodec);const s=S2(e,n,i,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const Hz=/\/emsg[-/]ID3/i;class Vz{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,i,s){const r=this.videoTrack=ri("video",1),a=this.audioTrack=ri("audio",1),o=this.txtTrack=ri("text",1);if(this.id3Track=ri("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=i2(e);if(l.video){const{id:u,timescale:c,codec:d}=l.video;r.id=u,r.timescale=o.timescale=c,r.codec=d}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;a.id=u,a.timescale=c,a.codec=d}o.id=e2.text,r.sampleDuration=0,r.duration=a.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return rW(e)}demux(e,n){this.timeOffset=n;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=kn(this.remainderData,e));const o=hW(i);this.remainderData=o.remainder,s.samples=o.valid||new Uint8Array}else s.samples=i;const a=this.extractID3Track(s,n);return r.samples=gx(n,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,i=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(n,this.timeOffset);return i.samples=gx(e,n),{videoTrack:n,audioTrack:ri(),id3Track:s,textTrack:ri()}}extractID3Track(e,n){const i=this.id3Track;if(e.samples.length){const s=ye(e.samples,["emsg"]);s&&s.forEach(r=>{const a=gW(r);if(Hz.test(a.schemeIdUri)){const o=le(a.presentationTime)?a.presentationTime/a.timeScale:n+a.presentationTimeDelta/a.timeScale;let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=a.payload;i.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:Gn.emsg,duration:l})}})}return i}demuxSampleAes(e,n,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const I2=(t,e)=>{let n=0,i=5;e+=i;const s=new Uint32Array(1),r=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=t[e];const o=Math.min(i,8),l=8-o;r[0]=4278190080>>>24+l<<l,s[0]=(a[0]&r[0])>>l,n=n?n<<o|s[0]:s[0],e+=1,i-=o}return n};class Gz extends O1{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,i,s){super.resetInitSegment(e,n,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,i){const s=_2(e,n,i,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const n=Ul(e,0);if(!n)return!1;const i=n.length;return e[i]===11&&e[i+1]===119&&_1(n)!==void 0&&I2(e,i)<16}}function _2(t,e,n,i,s){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const r=e[n+4]>>6;if(r>=3)return-1;const o=[48e3,44100,32e3][r],l=e[n+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(n+c>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const h=(e[n+6]<<8|e[n+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][d]+h,v=e[n+5]>>3,E=e[n+5]&7,y=new Uint8Array([r<<6|v<<1|E>>2,(E&3)<<6|d<<3|h<<2|l>>4,l<<4&224]),T=1536/o*9e4,b=i+s*T,x=e.subarray(n,n+c);return t.config=y,t.channelCount=g,t.samplerate=o,t.samples.push({unit:x,pts:b}),c}class jz{constructor(){this.VideoSample=null}createVideoSample(e,n,i,s){return{key:e,frame:!1,pts:n,dts:i,units:[],debug:s,length:0}}getLastNalUnit(e){var n;let i=this.VideoSample,s;if((!i||i.units.length===0)&&(i=e[e.length-1]),(n=i)!=null&&n.units){const r=i.units;s=r[r.length-1]}return s}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const i=n.samples,s=i.length;if(s){const r=i[s-1];e.pts=r.pts,e.dts=r.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&M.log(e.pts+"/"+e.dts+":"+e.debug)}}class jx{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,i=e.byteLength-n,s=new Uint8Array(4),r=Math.min(4,n);if(r===0)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const i=this.word>>>32-n;if(e>32&&M.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?i<<n|this.readBits(n):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,i=8,s;for(let r=0;r<e;r++)i!==0&&(s=this.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(){let e=0,n=0,i=0,s=0,r,a,o;const l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const v=l();if(u(5),f(3),l(),p(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const w=c();if(w===3&&f(1),p(),p(),f(1),d())for(a=w!==3?8:12,o=0;o<a;o++)d()&&(o<6?g(16):g(64))}p();const E=c();if(E===0)c();else if(E===1)for(f(1),h(),h(),r=c(),o=0;o<r;o++)h();p(),f(1);const y=c(),T=c(),b=u(1);b===0&&f(1),f(1),d()&&(e=c(),n=c(),i=c(),s=c());let x=[1,1];if(d()&&d())switch(l()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:{x=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((y+1)*16-e*2-n*2),height:(2-b)*(T+1)*16-(b?2:4)*(i+s),pixelRatio:x}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Wz extends jz{parseAVCPES(e,n,i,s,r){const a=this.parseAVCNALu(e,i.data);let o=this.VideoSample,l,u=!1;i.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),a.forEach(c=>{var d;switch(c.type){case 1:{let g=!1;l=!0;const v=c.data;if(u&&v.length>4){const E=new jx(v).readSliceType();(E===2||E===4||E===7||E===9)&&(g=!0)}if(g){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),o.frame=!0,o.key=g;break}case 5:l=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),o.key=!0,o.frame=!0;break;case 6:{l=!0,r2(c.data,1,i.pts,n.samples);break}case 7:{var h,p;l=!0,u=!0;const g=c.data,E=new jx(g).readSPS();if(!e.sps||e.width!==E.width||e.height!==E.height||((h=e.pixelRatio)==null?void 0:h[0])!==E.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==E.pixelRatio[1]){e.width=E.width,e.height=E.height,e.pixelRatio=E.pixelRatio,e.sps=[g],e.duration=r;const y=g.subarray(1,4);let T="avc1.";for(let b=0;b<3;b++){let x=y[b].toString(16);x.length<2&&(x="0"+x),T+=x}e.codec=T}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:l=!0;break;default:l=!1,o&&(o.debug+="unknown NAL "+c.type+" ");break}o&&l&&o.units.push(c)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,n){const i=n.byteLength;let s=e.naluState||0;const r=s,a=[];let o=0,l,u,c,d=-1,f=0;for(s===-1&&(d=0,f=n[0]&31,s=0,o=1);o<i;){if(l=n[o++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(u=o-s-1,d>=0){const h={data:n.subarray(d,u),type:f};a.push(h)}else{const h=this.getLastNalUnit(e.samples);h&&(r&&o<=4-r&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-r)),u>0&&(h.data=kn(h.data,n.subarray(0,u)),h.state=0))}o<i?(c=n[o]&31,d=o,f=c,s=0):s=-1}else s=0}if(d>=0&&s>=0){const h={data:n.subarray(d,i),type:f,state:s};a.push(h)}if(a.length===0){const h=this.getLastNalUnit(e.samples);h&&(h.data=kn(h.data,n))}return e.naluState=s,a}}class zz{constructor(e,n,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new k1(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,i){const s=e[n].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,i)})}decryptAacSamples(e,n,i){for(;;n++){if(n>=e.length){i();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(n);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,n){const i=new Uint8Array(n);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,n,i,s,r){const a=a2(r.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,i+1,s)})}decryptAvcSamples(e,n,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,i=0){if(n>=e.length){s();return}const r=e[n].units;for(;!(i>=r.length);i++){const a=r[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,n,i,s,a),!this.decrypter.isSync()))return}}}}const at=188;class rs{constructor(e,n,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.videoParser=new Wz}static probe(e){const n=rs.syncOffset(e);return n>0&&M.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let i=Math.min(at*5,n-at)+1,s=0;for(;s<i;){let r=!1,a=-1,o=0;for(let l=s;l<n;l+=at)if(e[l]===71&&(n-l===at||e[l+at]===71)){if(o++,a===-1&&(a=l,a!==0&&(i=Math.min(a+at*99,e.length-at)+1)),r||(r=ig(e,l)===0),r&&o>1&&(a===0&&o>2||l+at>i))return a}else{if(o)return-1;break}s++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:e2[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=rs.createTrack("video"),this._audioTrack=rs.createTrack("audio",s),this._id3Track=rs.createTrack("id3"),this._txtTrack=rs.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:i}=this;e&&(e.pesData=null),n&&(n.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,i=!1,s=!1){i||(this.sampleAes=null);let r;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=a.pid,d=a.pesData,f=o.pid,h=l.pid,p=o.pesData,g=l.pesData,v=null,E=this.pmtParsed,y=this._pmtId,T=e.length;if(this.remainderData&&(e=kn(this.remainderData,e),T=e.length,this.remainderData=null),T<at&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};const b=Math.max(0,rs.syncOffset(e));T-=(T-b)%at,T<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let x=0;for(let A=b;A<T;A+=at)if(e[A]===71){const C=!!(e[A+1]&64),L=ig(e,A),_=(e[A+3]&48)>>4;let N;if(_>1){if(N=A+5+e[A+4],N===A+at)continue}else N=A+4;switch(L){case c:C&&(d&&(r=$r(d))&&this.videoParser.parseAVCPES(a,u,r,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(N,A+at)),d.size+=A+at-N);break;case f:if(C){if(p&&(r=$r(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(N,A+at)),p.size+=A+at-N);break;case h:C&&(g&&(r=$r(g))&&this.parseID3PES(l,r),g={data:[],size:0}),g&&(g.data.push(e.subarray(N,A+at)),g.size+=A+at-N);break;case 0:C&&(N+=e[N]+1),y=this._pmtId=Kz(e,N);break;case y:{C&&(N+=e[N]+1);const j=Yz(e,N,this.typeSupported,i,this.observer);c=j.videoPid,c>0&&(a.pid=c,a.segmentCodec=j.segmentVideoCodec),f=j.audioPid,f>0&&(o.pid=f,o.segmentCodec=j.segmentAudioCodec),h=j.id3Pid,h>0&&(l.pid=h),v!==null&&!E&&(M.warn(`MPEG-TS PMT found at ${A} after unknown PID '${v}'. Backtracking to sync byte @${b} to parse all TS packets.`),v=null,A=b-188),E=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=L;break}}else x++;x>0&&nf(this.observer,new Error(`Found ${x} TS packet/s that do not start with 0x47`)),a.pesData=d,o.pesData=p,l.pesData=g;const w={audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};return s&&this.extractRemainingSamples(w),w}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:i,id3Track:s,textTrack:r}=e,a=i.pesData,o=n.pesData,l=s.pesData;let u;if(a&&(u=$r(a))?(this.videoParser.parseAVCPES(i,r,u,!0,this._duration),i.pesData=null):i.pesData=a,o&&(u=$r(o))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else o!=null&&o.size&&M.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;l&&(u=$r(l))?(this.parseID3PES(s,u),s.pesData=null):s.pesData=l}demuxSampleAes(e,n,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new zz(this.observer,this.config,n);return this.decrypt(s,r)}decrypt(e,n){return new Promise(i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&s.segmentCodec==="aac"?n.decryptAacSamples(s.samples,0,()=>{r.samples?n.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&n.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let i=0;const s=this.aacOverFlow;let r=n.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)r=kn(s.sample.unit,r);else{const h=f-d;s.sample.unit.set(r.subarray(0,d),h),e.samples.push(s.sample),i=s.missing}}let a,o;for(a=i,o=r.length;a<o-1&&!tf(r,a);a++);if(a!==i){let d;const f=a<o-1;if(f?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",nf(this.observer,new Error(d),f),!f)return}b2(e,this.observer,r,a,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(s){const d=x2(e.samplerate);l=s.sample.pts+d}else{M.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;a<o;)if(c=S2(e,r,a,l,u),a+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;a<o-1&&!tf(r,a);a++);}parseMPEGPES(e,n){const i=n.data,s=i.length;let r=0,a=0;const o=n.pts;if(o===void 0){M.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<s;)if(w2(i,a)){const l=A2(e,i,a,o,r);if(l)a+=l.length,r++;else break}else a++}parseAC3PES(e,n){{const i=n.data,s=n.pts;if(s===void 0){M.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=i.length;let a=0,o=0,l;for(;o<r&&(l=_2(e,i,o,s,a++))>0;)o+=l}}parseID3PES(e,n){if(n.pts===void 0){M.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=tt({},n,{type:this._videoTrack?Gn.emsg:Gn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function ig(t,e){return((t[e+1]&31)<<8)+t[e+2]}function Kz(t,e){return(t[e+10]&31)<<8|t[e+11]}function Yz(t,e,n,i,s){const r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(t[e+1]&15)<<8|t[e+2],o=e+3+a-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<o;){const u=ig(t,e),c=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!i){G0("ADTS AAC");break}case 15:r.audioPid===-1&&(r.audioPid=u);break;case 21:r.id3Pid===-1&&(r.id3Pid=u);break;case 219:if(!i){G0("H.264");break}case 27:r.videoPid===-1&&(r.videoPid=u,r.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?M.log("MPEG audio found, not supported in this browser"):r.audioPid===-1&&(r.audioPid=u,r.segmentAudioCodec="mp3");break;case 193:if(!i){G0("AC-3");break}case 129:n.ac3?r.audioPid===-1&&(r.audioPid=u,r.segmentAudioCodec="ac3"):M.log("AC-3 audio found, not supported in this browser");break;case 6:if(r.audioPid===-1&&c>0){let d=e+5,f=c;for(;f>2;){switch(t[d]){case 106:n.ac3!==!0?M.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=u,r.segmentAudioCodec="ac3");break}const p=t[d+1]+2;d+=p,f-=p}}break;case 194:case 135:return nf(s,new Error("Unsupported EC-3 in M2TS found")),r;case 36:return nf(s,new Error("Unsupported HEVC in M2TS found")),r}e+=c+5}return r}function nf(t,e,n){M.warn(`parsing error: ${e.message}`),t.emit(S.ERROR,S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function G0(t){M.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function $r(t){let e=0,n,i,s,r,a;const o=t.data;if(!t||t.size===0)return null;for(;o[0].length<19&&o.length>1;)o[0]=kn(o[0],o[1]),o.splice(1,1);if(n=o[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>t.size-6)return null;const u=n[7];u&192&&(r=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,u&64?(a=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,r-a>60*9e4&&(M.warn(`${Math.round((r-a)/9e4)}s delta between PTS and DTS, align them`),r=a)):a=r),s=n[8];let c=s+9;if(t.size<=c)return null;t.size-=c;const d=new Uint8Array(t.size);for(let f=0,h=o.length;f<h;f++){n=o[f];let p=n.byteLength;if(c)if(c>p){c-=p;continue}else n=n.subarray(c),p-=c,c=0;d.set(n,e),e+=p}return i&&(i-=s+3),{data:d,pts:r,dts:a,len:i}}return null}class qz extends O1{resetInitSegment(e,n,i,s){super.resetInitSegment(e,n,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Ul(e,0);let i=(n==null?void 0:n.length)||0;if(n&&e[i]===11&&e[i+1]===119&&_1(n)!==void 0&&I2(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(L2(e,i))return M.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return Uz(e,n)}appendFrame(e,n,i){if(this.basePTS!==null)return A2(e,n,i,this.basePTS,this.frameIndex)}}class Wx{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ji=Math.pow(2,32)-1;class B{static init(){B.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in B.types)B.types.hasOwnProperty(e)&&(B.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);B.HDLR_TYPES={video:n,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);B.STTS=B.STSC=B.STCO=r,B.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),B.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),B.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);B.FTYP=B.box(B.types.ftyp,a,l,a,o),B.DINF=B.box(B.types.dinf,B.box(B.types.dref,s))}static box(e,...n){let i=8,s=n.length;const r=s;for(;s--;)i+=n[s].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),s=0,i=8;s<r;s++)a.set(n[s],i),i+=n[s].byteLength;return a}static hdlr(e){return B.box(B.types.hdlr,B.HDLR_TYPES[e])}static mdat(e){return B.box(B.types.mdat,e)}static mdhd(e,n){n*=e;const i=Math.floor(n/(Ji+1)),s=Math.floor(n%(Ji+1));return B.box(B.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return B.box(B.types.mdia,B.mdhd(e.timescale,e.duration),B.hdlr(e.type),B.minf(e))}static mfhd(e){return B.box(B.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?B.box(B.types.minf,B.box(B.types.smhd,B.SMHD),B.DINF,B.stbl(e)):B.box(B.types.minf,B.box(B.types.vmhd,B.VMHD),B.DINF,B.stbl(e))}static moof(e,n,i){return B.box(B.types.moof,B.mfhd(e),B.traf(i,n))}static moov(e){let n=e.length;const i=[];for(;n--;)i[n]=B.trak(e[n]);return B.box.apply(null,[B.types.moov,B.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(B.mvex(e)))}static mvex(e){let n=e.length;const i=[];for(;n--;)i[n]=B.trex(e[n]);return B.box.apply(null,[B.types.mvex,...i])}static mvhd(e,n){n*=e;const i=Math.floor(n/(Ji+1)),s=Math.floor(n%(Ji+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return B.box(B.types.mvhd,r)}static sdtp(e){const n=e.samples||[],i=new Uint8Array(4+n.length);let s,r;for(s=0;s<n.length;s++)r=n[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return B.box(B.types.sdtp,i)}static stbl(e){return B.box(B.types.stbl,B.stsd(e),B.box(B.types.stts,B.STTS),B.box(B.types.stsc,B.STSC),B.box(B.types.stsz,B.STSZ),B.box(B.types.stco,B.STCO))}static avc1(e){let n=[],i=[],s,r,a;for(s=0;s<e.sps.length;s++)r=e.sps[s],a=r.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(r));for(s=0;s<e.pps.length;s++)r=e.pps[s],a=r.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(r));const o=B.box(B.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(i))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return B.box(B.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,B.box(B.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),B.box(B.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return B.box(B.types.mp4a,B.audioStsd(e),B.box(B.types.esds,B.esds(e)))}static mp3(e){return B.box(B.types[".mp3"],B.audioStsd(e))}static ac3(e){return B.box(B.types["ac-3"],B.audioStsd(e),B.box(B.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?B.box(B.types.stsd,B.STSD,B.mp3(e)):e.segmentCodec==="ac3"?B.box(B.types.stsd,B.STSD,B.ac3(e)):B.box(B.types.stsd,B.STSD,B.mp4a(e)):B.box(B.types.stsd,B.STSD,B.avc1(e))}static tkhd(e){const n=e.id,i=e.duration*e.timescale,s=e.width,r=e.height,a=Math.floor(i/(Ji+1)),o=Math.floor(i%(Ji+1));return B.box(B.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,n){const i=B.sdtp(e),s=e.id,r=Math.floor(n/(Ji+1)),a=Math.floor(n%(Ji+1));return B.box(B.types.traf,B.box(B.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),B.box(B.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),B.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,B.box(B.types.trak,B.tkhd(e),B.mdia(e))}static trex(e){const n=e.id;return B.box(B.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const i=e.samples||[],s=i.length,r=12+16*s,a=new Uint8Array(r);let o,l,u,c,d,f;for(n+=8+r,a.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),o=0;o<s;o++)l=i[o],u=l.duration,c=l.size,d=l.flags,f=l.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*o);return B.box(B.types.trun,a)}static initSegment(e){B.types||B.init();const n=B.moov(e);return kn(B.FTYP,n)}}B.types=void 0;B.HDLR_TYPES=void 0;B.STTS=void 0;B.STSC=void 0;B.STCO=void 0;B.STSZ=void 0;B.VMHD=void 0;B.SMHD=void 0;B.STSD=void 0;B.FTYP=void 0;B.DINF=void 0;const R2=9e4;function B1(t,e,n=1,i=!1){const s=t*e*n;return i?Math.round(s):s}function Xz(t,e,n=1,i=!1){return B1(t,e,1/n,i)}function Lo(t,e=!1){return B1(t,1e3,1/R2,e)}function Qz(t,e=1){return B1(t,R2,1/e)}const Zz=10*1e3,zx=1024,Jz=1152,eK=1536;let Hr=null,j0=null;class Uc{constructor(e,n,i,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.ISGenerated=!1,Hr===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Hr=a?parseInt(a[1]):0}if(j0===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);j0=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){M.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){M.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){M.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const i=e.reduce((s,r)=>{const a=r.pts-s;return a<-4294967296?(n=!0,An(s,r.pts)):a>0?s:r.pts},e[0].pts);return n&&M.debug("PTS rollover detected"),i}remux(e,n,i,s,r,a,o,l){let u,c,d,f,h,p,g=r,v=r;const E=e.pid>-1,y=n.pid>-1,T=n.samples.length,b=e.samples.length>0,x=o&&T>0||T>1;if((!E||b)&&(!y||x)||this.ISGenerated||o){if(this.ISGenerated){var A,C,L,_;const J=this.videoTrackConfig;J&&(n.width!==J.width||n.height!==J.height||((A=n.pixelRatio)==null?void 0:A[0])!==((C=J.pixelRatio)==null?void 0:C[0])||((L=n.pixelRatio)==null?void 0:L[1])!==((_=J.pixelRatio)==null?void 0:_[1]))&&this.resetInitSegment()}else d=this.generateIS(e,n,r,a);const N=this.isVideoContiguous;let j=-1,U;if(x&&(j=tK(n.samples),!N&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,j>0){M.warn(`[mp4-remuxer]: Dropped ${j} out of ${T} video samples due to a missing keyframe`);const J=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(j),n.dropped+=j,v+=(n.samples[0].pts-J)/n.inputTimeScale,U=v}else j===-1&&(M.warn(`[mp4-remuxer]: No keyframe found out of ${T} video samples`),p=!1);if(this.ISGenerated){if(b&&x){const J=this.getVideoStartPts(n.samples),te=(An(e.samples[0].pts,J)-J)/n.inputTimeScale;g+=Math.max(0,te),v+=Math.max(0,-te)}if(b){if(e.samplerate||(M.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,r,a)),c=this.remuxAudio(e,g,this.isAudioContiguous,a,y||x||l===pe.AUDIO?v:void 0),x){const J=c?c.endPTS-c.startPTS:0;n.inputTimeScale||(M.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,r,a)),u=this.remuxVideo(n,v,N,J)}}else x&&(u=this.remuxVideo(n,v,N,0));u&&(u.firstKeyFrame=j,u.independent=j!==-1,u.firstKeyFramePTS=U)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(h=D2(i,r,this._initPTS,this._initDTS)),s.samples.length&&(f=P2(s,r,this._initPTS))),{audio:c,video:u,initSegment:d,independent:p,text:f,id3:h}}generateIS(e,n,i,s){const r=e.samples,a=n.samples,o=this.typeSupported,l={},u=this._initPTS;let c=!u||s,d="audio/mp4",f,h,p;if(c&&(f=h=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):B.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(p=e.inputTimeScale,!u||p!==u.timescale?f=h=r[0].pts-Math.round(p*i):c=!1)}if(n.sps&&n.pps&&a.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:B.initSegment([n]),metadata:{width:n.width,height:n.height}},c)if(p=n.inputTimeScale,!u||p!==u.timescale){const g=this.getVideoStartPts(a),v=Math.round(p*i);h=Math.min(h,An(a[0].dts,g)-v),f=Math.min(f,g-v)}else c=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:h,timescale:p}):f=p=void 0,{tracks:l,initPTS:f,timescale:p}}remuxVideo(e,n,i,s){const r=e.inputTimeScale,a=e.samples,o=[],l=a.length,u=this._initPTS;let c=this.nextAvcDts,d=8,f=this.videoSampleDuration,h,p,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,E=!1;if(!i||c===null){const O=n*r,k=a[0].pts-An(a[0].dts,a[0].pts);Hr&&c!==null&&Math.abs(O-k-c)<15e3?i=!0:c=O-k}const y=u.baseTime*r/u.timescale;for(let O=0;O<l;O++){const k=a[O];k.pts=An(k.pts-y,c),k.dts=An(k.dts-y,c),k.dts<a[O>0?O-1:O].dts&&(E=!0)}E&&a.sort(function(O,k){const z=O.dts-k.dts,G=O.pts-k.pts;return z||G}),h=a[0].dts,p=a[a.length-1].dts;const T=p-h,b=T?Math.round(T/(l-1)):f||e.inputTimeScale/30;if(i){const O=h-c,k=O>b,z=O<-1;if((k||z)&&(k?M.warn(`AVC: ${Lo(O,!0)} ms (${O}dts) hole between fragments detected at ${n.toFixed(3)}`):M.warn(`AVC: ${Lo(-O,!0)} ms (${O}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!z||c>=a[0].pts||Hr)){h=c;const G=a[0].pts-O;if(k)a[0].dts=h,a[0].pts=G;else for(let se=0;se<a.length&&!(a[se].dts>G);se++)a[se].dts-=O,a[se].pts-=O;M.log(`Video: Initial PTS/DTS adjusted: ${Lo(G,!0)}/${Lo(h,!0)}, delta: ${Lo(O,!0)} ms`)}}h=Math.max(0,h);let x=0,w=0,A=h;for(let O=0;O<l;O++){const k=a[O],z=k.units,G=z.length;let se=0;for(let re=0;re<G;re++)se+=z[re].data.length;w+=se,x+=G,k.length=se,k.dts<A?(k.dts=A,A+=b/4|0||1):A=k.dts,g=Math.min(k.pts,g),v=Math.max(k.pts,v)}p=a[l-1].dts;const C=w+4*x+8;let L;try{L=new Uint8Array(C)}catch(O){this.observer.emit(S.ERROR,S.ERROR,{type:Ee.MUX_ERROR,details:H.REMUX_ALLOC_ERROR,fatal:!1,error:O,bytes:C,reason:`fail allocating video mdat ${C}`});return}const _=new DataView(L.buffer);_.setUint32(0,C),L.set(B.types.mdat,4);let N=!1,j=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY;for(let O=0;O<l;O++){const k=a[O],z=k.units;let G=0;for(let de=0,ge=z.length;de<ge;de++){const Se=z[de],Nt=Se.data,Qi=Se.data.byteLength;_.setUint32(d,Qi),d+=4,L.set(Nt,d),d+=Qi,G+=4+Qi}let se;if(O<l-1)f=a[O+1].dts-k.dts,se=a[O+1].pts-k.pts;else{const de=this.config,ge=O>0?k.dts-a[O-1].dts:b;if(se=O>0?k.pts-a[O-1].pts:b,de.stretchShortVideoTrack&&this.nextAudioPts!==null){const Se=Math.floor(de.maxBufferHole*r),Nt=(s?g+s*r:this.nextAudioPts)-k.pts;Nt>Se?(f=Nt-ge,f<0?f=ge:N=!0,M.log(`[mp4-remuxer]: It is approximately ${Nt/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=ge}else f=ge}const re=Math.round(k.pts-k.dts);j=Math.min(j,f),J=Math.max(J,f),U=Math.min(U,se),q=Math.max(q,se),o.push(new Kx(k.key,f,G,re))}if(o.length){if(Hr){if(Hr<70){const O=o[0].flags;O.dependsOn=2,O.isNonSync=0}}else if(j0&&q-U<J-j&&b/J<.025&&o[0].cts===0){M.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let O=h;for(let k=0,z=o.length;k<z;k++){const G=O+o[k].duration,se=O+o[k].cts;if(k<z-1){const re=G+o[k+1].cts;o[k].duration=re-se}else o[k].duration=k?o[k-1].duration:b;o[k].cts=0,O=G}}}f=N||!f?b:f,this.nextAvcDts=c=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const Y={data1:B.moof(e.sequenceNumber++,h,tt({},e,{samples:o})),data2:L,startPTS:g/r,endPTS:(v+f)/r,startDTS:h/r,endDTS:c/r,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Y}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Jz;case"ac3":return eK;default:return zx}}remuxAudio(e,n,i,s,r){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=r!==void 0;let g=e.samples,v=f?0:8,E=this.nextAudioPts||-1;const y=n*a,T=d.baseTime*a/d.timescale;if(this.isAudioContiguous=i=i||g.length&&E>0&&(s&&Math.abs(y-E)<9e3||Math.abs(An(g[0].pts-T,y)-E)<20*c),g.forEach(function(te){te.pts=An(te.pts-T,y)}),!i||E<0){if(g=g.filter(te=>te.pts>=0),!g.length)return;r===0?E=0:s&&!p?E=Math.max(0,y):E=g[0].pts}if(e.segmentCodec==="aac"){const te=this.config.maxAudioFramesDrift;for(let ce=0,Y=E;ce<g.length;ce++){const O=g[ce],k=O.pts,z=k-Y,G=Math.abs(1e3*z/a);if(z<=-te*c&&p)ce===0&&(M.warn(`Audio frame @ ${(k/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*z/a)} ms.`),this.nextAudioPts=E=Y=k);else if(z>=te*c&&G<Zz&&p){let se=Math.round(z/c);Y=k-se*c,Y<0&&(se--,Y+=c),ce===0&&(this.nextAudioPts=E=Y),M.warn(`[mp4-remuxer]: Injecting ${se} audio frame @ ${(Y/a).toFixed(3)}s due to ${Math.round(1e3*z/a)} ms gap.`);for(let re=0;re<se;re++){const de=Math.max(Y,0);let ge=Wx.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ge||(M.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ge=O.unit.subarray()),g.splice(ce,0,{unit:ge,pts:de}),Y+=c,ce++}}O.pts=Y,Y+=c}}let b=null,x=null,w,A=0,C=g.length;for(;C--;)A+=g[C].unit.byteLength;for(let te=0,ce=g.length;te<ce;te++){const Y=g[te],O=Y.unit;let k=Y.pts;if(x!==null){const G=h[te-1];G.duration=Math.round((k-x)/l)}else if(i&&e.segmentCodec==="aac"&&(k=E),b=k,A>0){A+=v;try{w=new Uint8Array(A)}catch(G){this.observer.emit(S.ERROR,S.ERROR,{type:Ee.MUX_ERROR,details:H.REMUX_ALLOC_ERROR,fatal:!1,error:G,bytes:A,reason:`fail allocating audio mdat ${A}`});return}f||(new DataView(w.buffer).setUint32(0,A),w.set(B.types.mdat,4))}else return;w.set(O,v);const z=O.byteLength;v+=z,h.push(new Kx(!0,u,z,0)),x=k}const L=h.length;if(!L)return;const _=h[h.length-1];this.nextAudioPts=E=x+l*_.duration;const N=f?new Uint8Array(0):B.moof(e.sequenceNumber++,b/l,tt({},e,{samples:h}));e.samples=[];const j=b/a,U=E/a,q={data1:N,data2:w,startPTS:j,endPTS:U,startDTS:j,endDTS:U,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.isAudioContiguous=!0,q}remuxEmptyAudio(e,n,i,s){const r=e.inputTimeScale,a=e.samplerate?e.samplerate:r,o=r/a,l=this.nextAudioPts,u=this._initDTS,c=u.baseTime*9e4/u.timescale,d=(l!==null?l:s.startDTS*r)+c,f=s.endDTS*r+c,h=o*zx,p=Math.ceil((f-d)/h),g=Wx.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(M.warn("[mp4-remuxer]: remux empty Audio"),!g){M.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const v=[];for(let E=0;E<p;E++){const y=d+E*h;v.push({unit:g,pts:y,dts:y})}return e.samples=v,this.remuxAudio(e,n,i,!1)}}function An(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function tK(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function D2(t,e,n,i){const s=t.samples.length;if(!s)return;const r=t.inputTimeScale;for(let o=0;o<s;o++){const l=t.samples[o];l.pts=An(l.pts-n.baseTime*r/n.timescale,e*r)/r,l.dts=An(l.dts-i.baseTime*r/i.timescale,e*r)/r}const a=t.samples;return t.samples=[],{samples:a}}function P2(t,e,n){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let a=0;a<i;a++){const o=t.samples[a];o.pts=An(o.pts-n.baseTime*s/n.timescale,e*s)/s}t.samples.sort((a,o)=>a.pts-o.pts);const r=t.samples;return t.samples=[],{samples:r}}class Kx{constructor(e,n,i,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=i,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class nK{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,i,s){this.audioCodec=n,this.videoCodec=i,this.generateInitSegment(lW(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=i2(e);s.audio&&(n=Yx(s.audio,Re.AUDIO)),s.video&&(i=Yx(s.video,Re.VIDEO));const r={};s.audio&&s.video?r.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:e,id:"main"}:s.audio?r.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:s.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:M.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,n,i,s,r,a){var o,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};le(c)||(c=this.lastEndTime=r||0);const f=n.samples;if(!(f!=null&&f.length))return d;const h={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return M.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=cW(f,p),v=uW(p,f),E=v===null?r:v;(iK(u,E,r,g)||h.timescale!==u.timescale&&a)&&(h.initPTS=E-r,u&&u.timescale===1&&M.warn(`Adjusting initPTS by ${h.initPTS-u.baseTime}`),this.initPTS=u={baseTime:h.initPTS,timescale:1});const y=e?E-u.baseTime/u.timescale:c,T=y+g;fW(p,f,u.baseTime/u.timescale),g>0?this.lastEndTime=T:(M.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,x=!!p.video;let w="";b&&(w+="audio"),x&&(w+="video");const A={data1:f,startPTS:y,startDTS:y,endPTS:T,endDTS:T,type:w,hasAudio:b,hasVideo:x,nb:1,dropped:0};return d.audio=A.type==="audio"?A:void 0,d.video=A.type!=="audio"?A:void 0,d.initSegment=h,d.id3=D2(i,r,u,u),s.samples.length&&(d.text=P2(s,r,u)),d}}function iK(t,e,n,i){if(t===null)return!0;const s=Math.max(i,1),r=e-t.baseTime/t.timescale;return Math.abs(r-n)>s}function Yx(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===Re.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return qd(n,!1);const i="mp4a.40.5";return M.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${i}"`),i}return M.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let Ii;try{Ii=self.performance.now.bind(self.performance)}catch{M.debug("Unable to use Performance API on this environment"),Ii=Ka==null?void 0:Ka.Date.now}const $c=[{demux:Vz,remux:nK},{demux:rs,remux:Uc},{demux:$z,remux:Uc},{demux:qz,remux:Uc}];$c.splice(2,0,{demux:Gz,remux:Uc});class qx{constructor(e,n,i,s,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=i,this.vendor=s,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,i,s){const r=i.transmuxing;r.executeStart=Ii();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=s||o,{audioCodec:g,videoCodec:v,defaultInitPts:E,duration:y,initSegmentData:T}=l,b=sK(a,n);if(b&&b.method==="AES-128"){const C=this.getDecrypter();if(C.isSync()){let L=C.softwareDecrypt(a,b.key.buffer,b.iv.buffer);if(i.part>-1&&(L=C.flush()),!L)return r.executeEnd=Ii(),W0(i);a=new Uint8Array(L)}else return this.decryptionPromise=C.webCryptoDecrypt(a,b.key.buffer,b.iv.buffer).then(L=>{const _=this.push(L,null,i);return this.decryptionPromise=null,_}),this.decryptionPromise}const x=this.needsProbing(c,d);if(x){const C=this.configureTransmuxer(a);if(C)return M.warn(`[transmuxer] ${C.message}`),this.observer.emit(S.ERROR,S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),r.executeEnd=Ii(),W0(i)}(c||d||p||x)&&this.resetInitSegment(T,g,v,y,n),(c||p||x)&&this.resetInitialTimestamp(E),u||this.resetContiguity();const w=this.transmux(a,b,h,f,i),A=this.currentTransmuxState;return A.contiguous=!0,A.discontinuity=!1,A.trackSwitch=!1,r.executeEnd=Ii(),w}flush(e){const n=e.transmuxing;n.executeStart=Ii();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return r.then(()=>this.flush(e));const a=[],{timeOffset:o}=s;if(i){const d=i.flush();d&&a.push(this.push(d,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u)return n.executeEnd=Ii(),[W0(e)];const c=l.flush(o);return Hc(c)?c.then(d=>(this.flushRemux(a,d,e),a)):(this.flushRemux(a,c,e),a)}flushRemux(e,n,i){const{audioTrack:s,videoTrack:r,id3Track:a,textTrack:o}=n,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;M.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const c=this.remuxer.remux(s,r,a,o,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:i}),i.transmuxing.executeEnd=Ii()}resetInitialTimestamp(e){const{demuxer:n,remuxer:i}=this;!n||!i||(n.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,i,s,r){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,n,i,s),o.resetInitSegment(e,n,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,i,s,r){let a;return n&&n.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,n,i,s,r):a=this.transmuxUnencrypted(e,i,s,r),a}transmuxUnencrypted(e,n,i,s){const{audioTrack:r,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,o,l,n,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,n,i,s,r){return this.demuxer.demuxSampleAes(e,n,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,s,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:n,observer:i,typeSupported:s,vendor:r}=this;let a;for(let f=0,h=$c.length;f<h;f++){var o;if((o=$c[f].demux)!=null&&o.probe(e)){a=$c[f];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=a.remux,d=a.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(i,n,s,r)),(!l||!(l instanceof d))&&(this.demuxer=new d(i,n,s),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new k1(this.config)),e}}function sK(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const W0=t=>({remuxResult:{},chunkMeta:t});function Hc(t){return"then"in t&&t.then instanceof Function}class rK{constructor(e,n,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class aK{constructor(e,n,i,s,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=a}}var k2={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function r(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,d||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},o.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,f,h,p){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],E=arguments.length,y,T;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,f),!0;case 5:return v.fn.call(v.context,c,d,f,h),!0;case 6:return v.fn.call(v.context,c,d,f,h,p),!0}for(T=1,y=new Array(E-1);T<E;T++)y[T-1]=arguments[T];v.fn.apply(v.context,y)}else{var b=v.length,x;for(T=0;T<b;T++)switch(v[T].once&&this.removeListener(u,v[T].fn,void 0,!0),E){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,c);break;case 3:v[T].fn.call(v[T].context,c,d);break;case 4:v[T].fn.call(v[T].context,c,d,f);break;default:if(!y)for(x=1,y=new Array(E-1);x<E;x++)y[x-1]=arguments[x];v[T].fn.apply(v[T].context,y)}}return!0},o.prototype.on=function(u,c,d){return r(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return r(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&a(this,h);else{for(var g=0,v=[],E=p.length;g<E;g++)(p[g].fn!==c||f&&!p[g].once||d&&p[g].context!==d)&&v.push(p[g]);v.length?this._events[h]=v.length===1?v[0]:v:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(k2);var oK=k2.exports,U1=Rj(oK);class N2{constructor(e,n,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=n,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const a=(u,c)=>{c=c||{},c.frag=this.frag,c.id=this.id,u===S.ERROR&&(this.error=c.error),this.hls.trigger(u,c)};this.observer=new U1,this.observer.on(S.FRAG_DECRYPTED,a),this.observer.on(S.ERROR,a);const o=Ar(r.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(r.workerPath||wz())){try{r.workerPath?(M.log(`loading Web Worker ${r.workerPath} for "${n}"`),this.workerContext=Iz(r.workerPath)):(M.log(`injecting Web Worker for "${n}"`),this.workerContext=Lz()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=d=>{const f=new Error(`${d.message}  (${d.filename}:${d.lineno})`);r.enableWorker=!1,M.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(S.ERROR,{type:Ee.OTHER_ERROR,details:H.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},c.postMessage({cmd:"init",typeSupported:l,vendor:"",id:n,config:JSON.stringify(r)})}catch(c){M.warn(`Error setting up "${n}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new qx(this.observer,l,r,"",n)}return}this.transmuxer=new qx(this.observer,l,r,"",n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,i,s,r,a,o,l,u,c){var d,f;u.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=a?a.start:r.start,g=r.decryptdata,v=this.frag,E=!(v&&r.cc===v.cc),y=!(v&&u.level===v.level),T=v?u.sn-v.sn:-1,b=this.part?u.part-this.part.index:-1,x=T===0&&u.id>1&&u.id===(v==null?void 0:v.stats.chunkCount),w=!y&&(T===1||T===0&&(b===1||x&&b<=0)),A=self.performance.now();(y||T||r.stats.parsing.start===0)&&(r.stats.parsing.start=A),a&&(b||!w)&&(a.stats.parsing.start=A);const C=!(v&&((d=r.initSegment)==null?void 0:d.url)===((f=v.initSegment)==null?void 0:f.url)),L=new aK(E,w,l,y,p,C);if(!w||E||C){M.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${u.sn} p: ${u.part} level: ${u.level} id: ${u.id}
        discontinuity: ${E}
        trackSwitch: ${y}
        contiguous: ${w}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${C}`);const _=new rK(i,s,n,o,c);this.configureTransmuxer(_)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:u,state:L},e instanceof ArrayBuffer?[e]:[]);else if(h){const _=h.push(e,g,u,L);Hc(_)?(h.async=!0,_.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,u,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete(_))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let i=n.flush(e);Hc(i)||n.async?(Hc(i)||(i=Promise.resolve(i)),i.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}}transmuxerError(e,n,i){this.hls&&(this.error=e,this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,n){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data;if(!(n!=null&&n.event)){M.warn(`worker message received with no ${n?"event name":"data"}`);return}const i=this.hls;if(this.hls)switch(n.event){case"init":{var s;const r=(s=this.workerContext)==null?void 0:s.objectURL;r&&self.URL.revokeObjectURL(r);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":M[n.data.logType]&&M[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,i.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function O2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!qa(t[n].attrs,e[n].attrs))return!1;return!0}function qa(t,e,n){const i=t["STABLE-RENDITION-ID"];return i&&!n?i===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>t[s]!==e[s])}function sg(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}const Xx=100;class lK extends N1{constructor(e,n,i){super(e,n,i,"[audio-stream-controller]",pe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:i,initPTS:s,timescale:r}){if(i==="main"){const a=n.cc;this.initPTS[n.cc]={baseTime:s,timescale:r},this.log(`InitPTS for cc: ${a} found from main: ${s}`),this.videoTrackCC=a,this.state===ee.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ee.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Xx),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=ee.IDLE):(this.loadedmetadata=!1,this.state=ee.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ee.IDLE:this.doTickIdle();break;case ee.WAITING_TRACK:{var e;const{levels:i,trackId:s}=this,r=i==null||(e=i[s])==null?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=ee.WAITING_INIT_PTS}break}case ee.FRAG_LOADING_WAITING_RETRY:{var n;const i=performance.now(),s=this.retryDate;if(!s||i>=s||(n=this.media)!=null&&n.seeking){const{levels:r,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((r==null?void 0:r[a])||null),this.state=ee.IDLE}break}case ee.WAITING_INIT_PTS:{const i=this.waitingData;if(i){const{frag:s,part:r,cache:a,complete:o}=i;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.FRAG_LOADING;const l=a.flush(),u={frag:s,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),o&&super._handleFragmentLoadComplete(u)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${s.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),u=Oe.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);ng(u.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log(`Waiting fragment cc (${s.cc}) @ ${s.start} cancelled because another fragment at ${u.end} is needed`),this.clearWaitingFragment())}}else this.state=ee.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:i,trackId:s}=this,r=e.config;if(!i&&(this.startFragRequested||!r.startFragPrefetch)||!(n!=null&&n[s]))return;const a=n[s],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o)){this.state=ee.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Re.AUDIO,pe.AUDIO));const u=this.getFwdBufferInfo(l,pe.AUDIO);if(u===null)return;const{bufferedTrack:c,switchingTrack:d}=this;if(!d&&this._streamEnded(u,o)){e.trigger(S.BUFFER_EOS,{type:"audio"}),this.state=ee.ENDED;return}const f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,pe.MAIN),h=u.len,p=this.getMaxBufferLength(f==null?void 0:f.len),g=o.fragments,v=g[0].start;let E=this.flushing?this.getLoadPosition():u.end;if(d&&i){const x=this.getLoadPosition();c&&!qa(d.attrs,c.attrs)&&(E=x),o.PTSKnown&&x<v&&(u.end>v||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(h>=p&&!d&&E<g[g.length-1].start)return;let y=this.getNextFragment(E,o),T=!1;if(y&&this.isLoopLoading(y,E)&&(T=!!y.gap,y=this.getNextFragmentLoopLoading(y,o,u,pe.MAIN,p)),!y){this.bufferFlushed=!0;return}const b=f&&y.start>f.end+o.targetduration;if(b||!(f!=null&&f.len)&&u.len){const x=this.getAppendedFrag(y.start,pe.MAIN);if(x===null||(T||(T=!!x.gap||!!b&&f.len===0),b&&!T||T&&u.nextStart&&u.nextStart<x.end))return}this.loadFragment(y,a,E)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(i=>new Ya(i))}onAudioTrackSwitching(e,n){const i=!!n.url;this.trackId=n.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?this.setInterval(Xx):this.resetTransmuxer(),i?(this.switchingTrack=n,this.state=ee.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=ee.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(S.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var i;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:s}=this,{details:r,id:a}=n;if(!s){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const o=s[a];let l=0;if(r.live||(i=o.details)!=null&&i.live){this.checkLiveUpdate(r);const c=this.mainDetails;if(r.deltaUpdateFailed||!c)return;if(!o.details&&r.hasProgramDateTime&&c.hasProgramDateTime)ef(r,c),l=r.fragments[0].start;else{var u;l=this.alignPlaylists(r,o.details,(u=this.levelLastLoaded)==null?void 0:u.details)}}o.details=r,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!r.live)&&this.setStartPosition(this.mainDetails||r,l),this.state===ee.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=ee.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:i,part:s,payload:r}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const u=l[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const d=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new N2(this.hls,pe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[i.cc],p=(n=i.initSegment)==null?void 0:n.data;if(h!==void 0){const v=s?s.index:-1,E=v!==-1,y=new P1(i.level,i.sn,i.stats.chunkCount,r.byteLength,v,E);f.push(r,p,d,"",i,s,c.totalduration,!1,y,h)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:g}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new T2,complete:!1};g.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=ee.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const i=n.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:i,part:s}=n;if(i.type!==pe.AUDIO){if(!this.loadedmetadata&&i.type===pe.MAIN){const r=this.videoBuffer||this.media;r&&Oe.getBuffered(r).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(i.sn!=="initSegment"){this.fragPrevious=i;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(S.AUDIO_TRACK_SWITCHED,ht({},r)))}this.fragBufferedComplete(i,s)}onError(e,n){var i;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case H.FRAG_GAP:case H.FRAG_PARSING_ERROR:case H.FRAG_DECRYPT_ERROR:case H.FRAG_LOAD_ERROR:case H.FRAG_LOAD_TIMEOUT:case H.KEY_LOAD_ERROR:case H.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(pe.AUDIO,n);break;case H.AUDIO_TRACK_LOAD_ERROR:case H.AUDIO_TRACK_LOAD_TIMEOUT:case H.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_TRACK&&((i=n.context)==null?void 0:i.type)===Ce.AUDIO_TRACK&&(this.state=ee.IDLE);break;case H.BUFFER_APPEND_ERROR:case H.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===H.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case H.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==Re.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==Re.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ee.ENDED&&(this.state=ee.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,n,pe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:c}=o,{details:d}=c,{audio:f,text:h,id3:p,initSegment:g}=r;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ee.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const v=l.initSegment||l;this._bufferInitSegment(c,g.tracks,v,a),s.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:i,tracks:g.tracks})}if(f){const{startPTS:v,endPTS:E,startDTS:y,endDTS:T}=f;u&&(u.elementaryStreams[Re.AUDIO]={startPTS:v,endPTS:E,startDTS:y,endDTS:T}),l.setElementaryStreamInfo(Re.AUDIO,v,E,y,T),this.bufferFragmentData(f,l,u,a)}if(p!=null&&(n=p.samples)!=null&&n.length){const v=tt({id:i,frag:l,details:d},p);s.trigger(S.FRAG_PARSING_METADATA,v)}if(h){const v=tt({id:i,frag:l,details:d},h);s.trigger(S.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,i,s){if(this.state!==ee.PARSING)return;n.video&&delete n.video;const r=n.audio;if(!r)return;r.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${a}/${r.codec}]`),a&&a.split(",").length===1&&(r.levelCodec=a),this.hls.trigger(S.BUFFER_CODECS,n);const o=r.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:o};this.hls.trigger(S.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,i){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===ut.NOT_LOADED||s===ut.PARTIAL){var r;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((r=n.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ee.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==n.details.fragments[0].start&&ef(n.details,a)}else this.startFragRequested=!0,super.loadFragment(e,n,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:n,bufferedTrack:i}=this,s=i==null?void 0:i.attrs,r=e.attrs;n&&s&&(s.CHANNELS!==r.CHANNELS||i.name!==e.name||i.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(S.AUDIO_TRACK_SWITCHED,ht({},e))}}class uK extends D1{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:i,groupId:s,details:r}=n,a=this.tracksInGroup[i];if(!a||a.groupId!==s){this.warn(`Audio track with id:${i} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=n.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(f=>!i||i.indexOf(f.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(f=>f.default)&&(this.selectDefaultTrack=!1),o.forEach((f,h)=>{f.id=h});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!r&&l){const f=ui(l,o,Br);if(f>-1)r=o[f];else{const h=ui(l,this.tracks);r=this.tracks[h]}}let u=this.findTrackId(r);u===-1&&r&&(u=this.findTrackId(null));const c={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger(S.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(o.length&&d===-1){var a;const f=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(f.message),this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===Ce.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&ba(e,s,Br))return s;const r=ui(e,this.tracksInGroup,Br);if(r>-1){const a=this.tracksInGroup[r];return this.setAudioTrack(r),a}else if(s){let a=n.loadLevel;a===-1&&(a=n.firstAutoLevel);const o=uz(e,n.levels,i,a,Br);if(o===-1)return null;n.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=ui(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=n[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(S.AUDIO_TRACK_SWITCHING,ht({},s)),r))return;const a=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(a)}findTrackId(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const s=n[i];if(!(this.selectDefaultTrack&&!s.default)&&(!e||ba(e,s,Br)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:a,audioCodec:o,channels:l}=e;for(let u=0;u<n.length;u++){const c=n[u];if(ba({name:i,lang:s,assocLang:r,characteristics:a,audioCodec:o,channels:l},c,Br))return u}for(let u=0;u<n.length;u++){const c=n[u];if(qa(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const c=n[u];if(qa(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const i=n.id,s=n.groupId;let r=n.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${i} "${n.name}" lang:${n.lang} group:${s}`),this.clearTimer(),this.hls.trigger(S.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:e||null})}}}const Qx=500;class cK extends N1{constructor(e,n,i){super(e,n,i,"[subtitle-stream-controller]",pe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ee.IDLE,this.setInterval(Qx),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:i,success:s}=n;if(this.fragPrevious=i,this.state=ee.IDLE,!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a;const o=i.start;for(let u=0;u<r.length;u++)if(o>=r[u].start&&o<=r[u].end){a=r[u];break}const l=i.start+i.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,n){const{startOffset:i,endOffset:s}=n;if(i===0&&s!==Number.POSITIVE_INFINITY){const r=s-1;if(r<=0)return;n.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=r){a.shift();continue}else if(a[o].start<r)a[o].start=r;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,r,pe.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===pe.MAIN){var i;(i=this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const i=n.frag;(i==null?void 0:i.type)===pe.SUBTITLE&&(n.details===H.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ee.STOPPED&&(this.state=ee.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&O2(this.levels,n)){this.levels=n.map(i=>new Ya(i));return}this.tracksBuffered=[],this.levels=n.map(i=>{const s=new Ya(i);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,pe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var i;if(this.currentTrackId=n.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(Qx)}onSubtitleTrackLoaded(e,n){var i;const{currentTrackId:s,levels:r}=this,{details:a,id:o}=n;if(!r){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=r[o];if(o>=r.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||(i=l.details)!=null&&i.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const f=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(ef(a,d),u=a.fragments[0].start):f&&(u=f.start,tg(a,u));else{var c;u=this.alignPlaylists(a,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&f&&(u=f.start,tg(a,u))}}l.details=a,this.levelLastLoaded=l,o===s&&(!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,u),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===ee.IDLE&&(Jd(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:i}=e,s=n.decryptdata,r=this.hls;if(!this.fragContextChanged(n)&&i&&i.byteLength>0&&s!=null&&s.key&&s.iv&&s.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer).catch(o=>{throw r.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:n}),o}).then(o=>{const l=performance.now();r.trigger(S.FRAG_DECRYPTED,{frag:n,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=ee.IDLE})}}doTick(){if(!this.media){this.state=ee.IDLE;return}if(this.state===ee.IDLE){const{currentTrackId:e,levels:n}=this,i=n==null?void 0:n[e];if(!i||!n.length||!i.details)return;const{config:s}=this,r=this.getLoadPosition(),a=Oe.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:o,len:l}=a,u=this.getFwdBufferInfo(this.media,pe.MAIN),c=i.details,d=this.getMaxBufferLength(u==null?void 0:u.len)+c.levelTargetDuration;if(l>d)return;const f=c.fragments,h=f.length,p=c.edge;let g=null;const v=this.fragPrevious;if(o<p){const E=s.maxFragLookUpTolerance,y=o>p-E?0:E;g=Jd(v,f,Math.max(f[0].start,o),y),!g&&v&&v.start<f[0].start&&(g=f[0])}else g=f[h-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const E=g.sn-c.startSN,y=f[E-1];y&&y.cc===g.cc&&this.fragmentTracker.getState(y)===ut.NOT_LOADED&&(g=y)}this.fragmentTracker.getState(g)===ut.NOT_LOADED&&this.loadFragment(g,i,o)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,i){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,i))}get mediaBufferTimeRanges(){return new dK(this.tracksBuffered[this.currentTrackId]||[])}}class dK{constructor(e){this.buffered=void 0;const n=(i,s,r)=>{if(s=s>>>0,s>r-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${r})`);return e[s][i]};this.buffered={get length(){return e.length},end(i){return n("end",i,e.length)},start(i){return n("start",i,e.length)}}}}class fK extends D1{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const i=Mc(this.media.textTracks);for(let r=0;r<i.length;r++)if(i[r].mode==="hidden")n=i[r];else if(i[r].mode==="showing"){n=i[r];break}const s=this.findTrackForTextTrack(n);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Mc(this.media.textTracks).forEach(n=>{ca(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:i,groupId:s,details:r}=n,a=this.tracksInGroup[i];if(!a||a.groupId!==s){this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=n.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(c=>!i||i.indexOf(c.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(c=>c.default)&&(this.selectDefaultTrack=!1),a.forEach((c,d)=>{c.id=d});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!r&&o){this.selectDefaultTrack=!1;const c=ui(o,a);if(c>-1)r=a[c];else{const d=ui(o,this.tracks);r=this.tracks[d]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));const u={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<n.length;s++){const r=n[s];if(!(i&&!r.default||!i&&!e)&&(!e||ba(r,e)))return s}if(e){for(let s=0;s<n.length;s++){const r=n[s];if(qa(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<n.length;s++){const r=n[s];if(qa(e.attrs,r.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const s=n[i];if(sg(s,e))return i}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===Ce.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&ba(e,i))return i;const s=ui(e,this.tracksInGroup);if(s>-1){const r=this.tracksInGroup[s];return this.setSubtitleTrack(s),r}else{if(i)return null;{const r=ui(e,n);if(r>-1)return n[r]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const i=n.id,s=n.groupId;let r=n.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${i}`),this.hls.trigger(S.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Mc(e.textTracks),i=this.currentTrack;let s;if(i&&(s=n.filter(r=>sg(i,r))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(n).forEach(r=>{r.mode!=="disabled"&&r!==s&&(r.mode="disabled")}),s){const r=this.subtitleDisplay?"showing":"hidden";s.mode!==r&&(s.mode=r)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!le(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=n[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:a,groupId:o="",name:l,type:u,url:c}=s;this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:c});const d=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(d)}}class hK{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,i){const s=this.queues[n];s.push(e),s.length===1&&!i&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const i=new Promise(r=>{n=r}),s={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),i}executeNext(e){const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(s){M.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${s}`),i.onError(s);const r=this.buffers[e];r!=null&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Zx=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class pK{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=i=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:i,mediaSource:s}=this;this.log("Media source opened"),i&&(i.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(S.MEDIA_ATTACHED,{media:i,mediaSource:s})),s&&s.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:s}=this;i!==s&&M.error(`Media element src was set while attaching MediaSource (${s} > ${i})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=SW(Ar(e.config.preferManagedMediaSource)),this.log=M.log.bind(M,n),this.warn=M.warn.bind(M,n),this.error=M.error.bind(M,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_APPENDING,this.onBufferAppending,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.BUFFER_EOS,this.onBufferEos,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.FRAG_PARSED,this.onFragParsed,this),e.on(S.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_APPENDING,this.onBufferAppending,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.BUFFER_EOS,this.onBufferEos,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.FRAG_PARSED,this.onFragParsed,this),e.off(S.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new hK(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const i=this.media=n.media,s=Ar(this.appendSource);if(i&&s){var r;const a=this.mediaSource=new s;this.log(`created media source: ${(r=a.constructor)==null?void 0:r.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&a instanceof l,Jx(i),mK(i,o),i.load()}catch{i.src=o}else i.src=o;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:i}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(s){this.warn(`onMediaDetaching: ${s.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&Jx(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(S.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var i;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(s){this.warn(`onBufferReset ${e}`,s)}}onBufferCodecs(e,n){const i=this.getSourceBufferTypes().length,s=Object.keys(n);if(s.forEach(a=>{if(i){const l=this.tracks[a];if(l&&typeof l.buffer.changeType=="function"){var o;const{id:u,codec:c,levelCodec:d,container:f,metadata:h}=n[a],p=vx(l.codec,l.levelCodec),g=p==null?void 0:p.replace(Zx,"$1");let v=vx(c,d);const E=(o=v)==null?void 0:o.replace(Zx,"$1");if(v&&g!==E){a.slice(0,5)==="audio"&&(v=qd(v,this.appendSource));const y=`${f};codecs=${v}`;this.appendChangeType(a,y),this.log(`switching codec ${p} to ${v}`),this.tracks[a]={buffer:l.buffer,codec:c,container:f,levelCodec:d,metadata:h,id:u}}}}else this.pendingTracks[a]=n[a]}),i)return;const r=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==r&&(this.log(`${r} bufferCodec event(s) expected ${s.join(",")}`),this.bufferCodecEventsExpected=r),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:i}=this,s={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log(`changing ${e} sourceBuffer type to ${n}`),r.changeType(n)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:r=>{this.warn(`Failed to change ${e} SourceBuffer type`,r)}};i.append(s,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:i,operationQueue:s,tracks:r}=this,{data:a,type:o,frag:l,part:u,chunkMeta:c}=n,d=c.buffering[o],f=self.performance.now();d.start=f;const h=l.stats.buffering,p=u?u.stats.buffering:null;h.start===0&&(h.start=f),p&&p.start===0&&(p.start=f);const g=r.audio;let v=!1;o==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const E=l.start,y={execute:()=>{if(d.executeStart=self.performance.now(),v){const T=this.sourceBuffer[o];if(T){const b=E-T.timestampOffset;Math.abs(b)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${E} (delta: ${b}) sn: ${l.sn})`),T.timestampOffset=E)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const T=self.performance.now();d.executeEnd=d.end=T,h.first===0&&(h.first=T),p&&p.first===0&&(p.first=T);const{sourceBuffer:b}=this,x={};for(const w in b)x[w]=Oe.getBuffered(b[w]);this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(S.BUFFER_APPENDED,{type:o,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:x})},onError:T=>{const b={type:Ee.MEDIA_ERROR,parent:l.type,details:H.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:l,part:u,chunkMeta:c,error:T,err:T,fatal:!1};if(T.code===DOMException.QUOTA_EXCEEDED_ERR)b.details=H.BUFFER_FULL_ERROR;else{const x=++this.appendErrors[o];b.details=H.BUFFER_APPEND_ERROR,this.warn(`Failed ${x}/${i.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),x>=i.config.appendErrorMaxRetry&&(b.fatal=!0)}i.trigger(S.ERROR,b)}};s.append(y,o,!!this.pendingTracks[o])}onBufferFlushing(e,n){const{operationQueue:i}=this,s=r=>({execute:this.removeExecutor.bind(this,r,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(S.BUFFER_FLUSHED,{type:r})},onError:a=>{this.warn(`Failed to remove from ${r} SourceBuffer`,a)}});n.type?i.append(s(n.type),n.type):this.getSourceBufferTypes().forEach(r=>{i.append(s(r),r)})}onFragParsed(e,n){const{frag:i,part:s}=n,r=[],a=s?s.elementaryStreams:i.elementaryStreams;a[Re.AUDIOVIDEO]?r.push("audiovideo"):(a[Re.AUDIO]&&r.push("audio"),a[Re.VIDEO]&&r.push("video"));const o=()=>{const l=self.performance.now();i.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const u=s?s.stats:i.stats;this.hls.trigger(S.FRAG_BUFFERED,{frag:i,part:s,stats:u,id:i.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,r)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((s,r)=>{const a=this.sourceBuffer[r];return a&&(!n.type||n.type===r)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${r} sourceBuffer now EOS`))),s&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(r=>{const a=this.sourceBuffer[r];a&&(a.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:i}=this;if(!i||n===null||!this.getSourceBufferTypes().length)return;const r=e.config,a=i.currentTime,o=n.levelTargetDuration,l=n.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(le(l)&&l>0){const u=Math.max(l,o),c=Math.floor(a/o)*o-u;this.flushBackBuffer(a,o,c)}if(le(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const u=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),c=Math.max(u,o),d=Math.floor(a/o)*o+c;this.flushFrontBuffer(a,o,d)}}flushBackBuffer(e,n,i){const{details:s,sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(o=>{const l=r[o];if(l){const u=Oe.getBuffered(l);if(u.length>0&&i>u.start(0)){if(this.hls.trigger(S.BACK_BUFFER_REACHED,{bufferEnd:i}),s!=null&&s.live)this.hls.trigger(S.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l.ended&&u.end(u.length-1)-e<n*2){this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:o})}}})}flushFrontBuffer(e,n,i){const{sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const o=s[a];if(o){const l=Oe.getBuffered(o),u=l.length;if(u<2)return;const c=l.start(u-1),d=l.end(u-1);if(i>c||e>=c&&e<=d)return;if(o.ended&&e-d<2*n){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:i,mediaSource:s}=this,r=e.fragments[0].start+e.totalduration,a=i.duration,o=le(s.duration)?s.duration:0;e.live&&n.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>a||!le(a))&&(this.log(`Updating Media Source duration to ${r.toFixed(3)}`),s.duration=r)}updateSeekableRange(e){const n=this.mediaSource,i=e.fragments;if(i.length&&e.live&&n!=null&&n.setLiveSeekableRange){const r=Math.max(0,i[0].start),a=Math.max(r,r+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${r}-${a}.`),n.setLiveSeekableRange(r,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:i}=this,s=Object.keys(i).length;if(s&&(!e||s===2||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(S.BUFFER_CREATED,{tracks:this.tracks}),r.forEach(a=>{n.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!n[r]){var s;const a=e[r];if(!a)throw Error(`source buffer exists for track ${r}, however track does not`);let o=((s=a.levelCodec)==null?void 0:s.indexOf(","))===-1?a.levelCodec:a.codec;o&&r.slice(0,5)==="audio"&&(o=qd(o,this.appendSource));const l=`${a.container};codecs=${o}`;this.log(`creating sourceBuffer(${l})`);try{const u=n[r]=i.addSourceBuffer(l),c=r;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(c,"bufferedchange",(d,f)=>{const h=f.removedRanges;h!=null&&h.length&&this.hls.trigger(S.BUFFER_FLUSHED,{type:r})}),this.tracks[r]={buffer:u,codec:o,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(u){this.error(`error while trying to add sourceBuffer: ${u.message}`),this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:r,mimeType:l})}}}get mediaSrc(){var e,n;const i=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return i==null?void 0:i.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:i}=this;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${s}`,n),this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(s)}removeExecutor(e,n,i){const{media:s,mediaSource:r,operationQueue:a,sourceBuffer:o}=this,l=o[e];if(!s||!r||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const u=le(s.duration)?s.duration:1/0,c=le(r.duration)?r.duration:1/0,d=Math.max(0,n),f=Math.min(i,u,c);f>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),l.remove(d,f)):a.shiftAndExecuteNext(e)}appendExecutor(e,n){const i=this.sourceBuffer[n];if(!i){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:i}=this,s=n.map(r=>i.appendBlocker(r));Promise.all(s).then(()=>{e(),n.forEach(r=>{const a=this.sourceBuffer[r];a!=null&&a.updating||i.shiftAndExecuteNext(r)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,i){const s=this.sourceBuffer[e];if(!s)return;const r=i.bind(this,e);this.listeners[e].push({event:n,listener:r}),s.addEventListener(n,r)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(i=>{n.removeEventListener(i.event,i.listener)})}}function Jx(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function mK(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const gK={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},M2=t=>String.fromCharCode(gK[t]||t),Mn=15,vi=100,EK={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},TK={17:2,18:4,21:6,22:8,23:10,19:13,20:15},yK={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},vK={25:2,26:4,29:6,30:8,31:10,27:13,28:15},bK=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class xK{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const i=typeof n=="function"?n():n;M.log(`${this.time} [${e}] ${i}`)}}}const js=function(e){const n=[];for(let i=0;i<e.length;i++)n.push(e[i].toString(16));return n};class F2{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let i=0;i<n.length;i++){const s=n[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class SK{constructor(){this.uchar=" ",this.penState=new F2}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class AK{constructor(e){this.chars=[],this.pos=0,this.currPenState=new F2,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<vi;n++)this.chars.push(new SK);this.logger=e}equals(e){for(let n=0;n<vi;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<vi;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<vi;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>vi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=vi)}moveCursor(e){const n=this.pos+e;if(e>1)for(let i=this.pos+1;i<n+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=M2(e);if(this.pos>=vi){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<vi;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let i=0;i<vi;i++){const s=this.chars[i].uchar;s!==" "&&(n=!1),e.push(s)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class z0{constructor(e){this.rows=[],this.currRow=Mn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<Mn;n++)this.rows.push(new AK(e));this.logger=e}reset(){for(let e=0;e<Mn;e++)this.rows[e].clear();this.currRow=Mn-1}equals(e){let n=!0;for(let i=0;i<Mn;i++)if(!this.rows[i].equals(e.rows[i])){n=!1;break}return n}copy(e){for(let n=0;n<Mn;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<Mn;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let o=0;o<Mn;o++)this.rows[o].clear();const r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[r].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(a.rows[r+u])}}this.currRow=n;const i=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,a=Math.max(r-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let i="",s=-1;for(let r=0;r<Mn;r++){const a=this.rows[r].getTextString();a&&(s=r+1,e?n.push("Row "+s+": '"+a+"'"):n.push(a.trim()))}return n.length>0&&(e?i="["+n.join(" | ")+"]":i=n.join(`
`)),i}getTextAndFormat(){return this.rows}}class eS{constructor(e,n,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new z0(i),this.nonDisplayedMemory=new z0(i),this.lastOutputScreen=new z0(i),this.currRollUpRow=this.displayedMemory.rows[Mn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Mn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=s[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class tS{constructor(e,n,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=wK(),this.logger=void 0;const s=this.logger=new xK;this.channels=[null,new eS(e,n,s),new eS(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let i=0;i<n.length;i+=2){const s=n[i]&127,r=n[i+1]&127;let a=!1,o=null;if(s===0&&r===0)continue;this.logger.log(3,()=>"["+js([n[i],n[i+1]])+"] -> ("+js([s,r])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(CK(s,r,l)){sc(null,null,l),this.logger.log(3,()=>"Repeated command ("+js([s,r])+") is dropped");continue}sc(s,r,this.cmdHistory),a=this.parseCmd(s,r),a||(a=this.parseMidrow(s,r)),a||(a=this.parsePAC(s,r)),a||(a=this.parseBackgroundAttributes(s,r))}else sc(null,null,l);if(!a&&(o=this.parseChars(s,r),o)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+js([s,r])+" orig: "+js([n[i],n[i+1]]))}}parseCmd(e,n){const i=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(i||s))return!1;const r=e===20||e===21||e===23?1:2,a=this.channels[r];return e===20||e===21||e===28||e===29?n===32?a.ccRCL():n===33?a.ccBS():n===34?a.ccAOF():n===35?a.ccAON():n===36?a.ccDER():n===37?a.ccRU(2):n===38?a.ccRU(3):n===39?a.ccRU(4):n===40?a.ccFON():n===41?a.ccRDC():n===42?a.ccTR():n===43?a.ccRTD():n===44?a.ccEDM():n===45?a.ccCR():n===46?a.ccENM():n===47&&a.ccEOC():a.ccTO(n-32),this.currentChannel=r,!0}parseMidrow(e,n){let i=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return s?(s.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+js([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,r=(e===16||e===24)&&n>=64&&n<=95;if(!(s||r))return!1;const a=e<=23?1:2;n>=64&&n<=95?i=a===1?EK[e]:yK[e]:i=a===1?TK[e]:vK[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(i,n)),this.currentChannel=a,!0):!1}interpretPAC(e,n){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?i=n-96:i=n-64,s.underline=(i&1)===1,i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((i-16)/2)*4,s}parseChars(e,n){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let a;r===17?a=n+80:r===18?a=n+112:a=n+144,this.logger.log(2,()=>"Special char '"+M2(a)+"' in channel "+i),s=[a]}else e>=32&&e<=127&&(s=n===0?[e]:[e,n]);return s&&this.logger.log(3,()=>"Char codes =  "+js(s).join(",")),s}parseBackgroundAttributes(e,n){const i=(e===16||e===24)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=45&&n<=47;if(!(i||s))return!1;let r;const a={};e===16||e===24?(r=Math.floor((n-32)/2),a.background=bK[r],n%2===1&&(a.background=a.background+"_semi")):n===45?a.background="transparent":(a.foreground="black",n===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}sc(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const i=this.channels[n];i&&i.cueSplitAtTime(e)}}}function sc(t,e,n){n.a=t,n.b=e}function CK(t,e,n){return n.a===t&&n.b===e}function wK(){return{a:null,b:null}}class rc{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var $1=function(){if(Ka!=null&&Ka.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const u=l.toLowerCase();return~o.indexOf(u)?u:!1}function i(o){return n(t,o)}function s(o){return n(e,o)}function r(o,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)o[d]=c[d]}return o}function a(o,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let f="",h=!1,p=o,g=l,v=u,E=null,y="",T=!0,b="auto",x="start",w=50,A="middle",C=50,L="middle";Object.defineProperty(c,"id",r({},d,{get:function(){return f},set:function(_){f=""+_}})),Object.defineProperty(c,"pauseOnExit",r({},d,{get:function(){return h},set:function(_){h=!!_}})),Object.defineProperty(c,"startTime",r({},d,{get:function(){return p},set:function(_){if(typeof _!="number")throw new TypeError("Start time must be set to a number.");p=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",r({},d,{get:function(){return g},set:function(_){if(typeof _!="number")throw new TypeError("End time must be set to a number.");g=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",r({},d,{get:function(){return v},set:function(_){v=""+_,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",r({},d,{get:function(){return E},set:function(_){E=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",r({},d,{get:function(){return y},set:function(_){const N=i(_);if(N===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=N,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",r({},d,{get:function(){return T},set:function(_){T=!!_,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",r({},d,{get:function(){return b},set:function(_){if(typeof _!="number"&&_!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");b=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",r({},d,{get:function(){return x},set:function(_){const N=s(_);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");x=N,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",r({},d,{get:function(){return w},set:function(_){if(_<0||_>100)throw new Error("Position must be between 0 and 100.");w=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",r({},d,{get:function(){return A},set:function(_){const N=s(_);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");A=N,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",r({},d,{get:function(){return C},set:function(_){if(_<0||_>100)throw new Error("Size must be between 0 and 100.");C=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",r({},d,{get:function(){return L},set:function(_){const N=s(_);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");L=N,this.hasBeenReset=!0}})),c.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class LK{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function B2(t){function e(i,s,r,a){return(i|0)*3600+(s|0)*60+(r|0)+parseFloat(a||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class IK{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,i){return i?this.has(e)?this.values[e]:n[i]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,i){for(let s=0;s<i.length;++s)if(n===i[s]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const i=parseFloat(n);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function U2(t,e,n,i){const s=i?t.split(i):[t];for(const r in s){if(typeof s[r]!="string")continue;const a=s[r].split(n);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const rg=new $1(0,0,""),ac=rg.align==="middle"?"middle":"center";function _K(t,e,n){const i=t;function s(){const o=B2(t);if(o===null)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){const u=new IK;U2(o,function(f,h){let p;switch(f){case"region":for(let g=n.length-1;g>=0;g--)if(n[g].id===h){u.set(f,n[g].region);break}break;case"vertical":u.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),u.integer(f,p[0]),u.percent(f,p[0])&&u.set("snapToLines",!1),u.alt(f,p[0],["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start",ac,"end"]);break;case"position":p=h.split(","),u.percent(f,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start",ac,"end","line-left","line-right","auto"]);break;case"size":u.percent(f,h);break;case"align":u.alt(f,h,["start",ac,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&rg.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",ac);let d=u.get("position","auto");d==="auto"&&rg.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);t=t.slice(3),a(),e.endTime=s(),a(),r(t,e)}function $2(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class RK{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new LK,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function i(){let r=n.buffer,a=0;for(r=$2(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;const o=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,n.buffer=r.slice(a),o}function s(r){U2(r,function(a,o){},/:/)}try{let r="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;r=i();const o=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let a=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:r=i(),n.state){case"HEADER":/:/.test(r)?s(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new $1(0,0,""),n.state="CUE",r.indexOf("-->")===-1){n.cue.id=r;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{_K(r,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const o=r.indexOf("-->")!==-1;if(!r||o&&(a=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=r}continue;case"BADCUE":r||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const DK=/\r\n|\n\r|\n|\r/g,K0=function(e,n,i=0){return e.slice(i,i+n.length)===n},PK=function(e){let n=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!le(n)||!le(i)||!le(s)||!le(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*i,n+=60*1e3*s,n+=60*60*1e3*r,n},Y0=function(e){let n=5381,i=e.length;for(;i;)n=n*33^e.charCodeAt(--i);return(n>>>0).toString()};function H1(t,e,n){return Y0(t.toString())+Y0(e.toString())+Y0(n)}const kK=function(e,n,i){let s=e[n],r=e[s.prevCC];if(!r||!r.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(a=r)!=null&&a.new;){var a;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function NK(t,e,n,i,s,r,a){const o=new RK,l=mi(new Uint8Array(t)).trim().replace(DK,`
`).split(`
`),u=[],c=e?Qz(e.baseTime,e.timescale):0;let d="00:00.000",f=0,h=0,p,g=!0;o.oncue=function(v){const E=n[i];let y=n.ccOffset;const T=(f-c)/9e4;if(E!=null&&E.new&&(h!==void 0?y=n.ccOffset=E.start:kK(n,i,T)),T){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}y=T-n.presentationOffset}const b=v.endTime-v.startTime,x=An((v.startTime+y-h)*9e4,s*9e4)/9e4;v.startTime=Math.max(x,0),v.endTime=Math.max(x+b,0);const w=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(w)),v.id||(v.id=H1(v.startTime,v.endTime,w)),v.endTime>0&&u.push(v)},o.onparsingerror=function(v){p=v},o.onflush=function(){if(p){a(p);return}r(u)},l.forEach(v=>{if(g)if(K0(v,"X-TIMESTAMP-MAP=")){g=!1,v.slice(16).split(",").forEach(E=>{K0(E,"LOCAL:")?d=E.slice(6):K0(E,"MPEGTS:")&&(f=parseInt(E.slice(7)))});try{h=PK(d)/1e3}catch(E){p=E}return}else v===""&&(g=!1);o.parse(v+`
`)}),o.flush()}const q0="stpp.ttml.im1t",H2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,V2=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,OK={left:"start",center:"center",right:"end",start:"start",end:"end"};function nS(t,e,n,i){const s=ye(new Uint8Array(t),["mdat"]);if(s.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const r=s.map(o=>mi(o)),a=Xz(e.baseTime,1,e.timescale);try{r.forEach(o=>n(MK(o,a)))}catch(o){i(o)}}function MK(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(r).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||r[f],d),{}),o=s.getAttribute("xml:space")!=="preserve",l=iS(X0(s,"styling","style")),u=iS(X0(s,"layout","region")),c=X0(s,"body","[begin]");return[].map.call(c,d=>{const f=G2(d,o);if(!f||!d.hasAttribute("begin"))return null;const h=Z0(d.getAttribute("begin"),a),p=Z0(d.getAttribute("dur"),a);let g=Z0(d.getAttribute("end"),a);if(h===null)throw sS(d);if(g===null){if(p===null)throw sS(d);g=h+p}const v=new $1(h-e,g-e,f);v.id=H1(v.startTime,v.endTime,v.text);const E=u[d.getAttribute("region")],y=l[d.getAttribute("style")],T=FK(E,y,l),{textAlign:b}=T;if(b){const x=OK[b];x&&(v.lineAlign=x),v.align=b}return tt(v,T),v}).filter(d=>d!==null)}function X0(t,e,n){const i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function iS(t){return t.reduce((e,n)=>{const i=n.getAttribute("xml:id");return i&&(e[i]=n),e},{})}function G2(t,e){return[].slice.call(t.childNodes).reduce((n,i,s)=>{var r;return i.nodeName==="br"&&s?n+`
`:(r=i.childNodes)!=null&&r.length?G2(i,e):e?n+i.textContent.trim().replace(/\s+/g," "):n+i.textContent},"")}function FK(t,e,n){const i="http://www.w3.org/ns/ttml#styling";let s=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&n.hasOwnProperty(a)&&(s=n[a]),r.reduce((o,l)=>{const u=Q0(e,i,l)||Q0(t,i,l)||Q0(s,i,l);return u&&(o[l]=u),o},{})}function Q0(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function sS(t){return new Error(`Could not parse ttml timestamp ${t}`)}function Z0(t,e){if(!t)return null;let n=B2(t);return n===null&&(H2.test(t)?n=BK(t,e):V2.test(t)&&(n=UK(t,e))),n}function BK(t,e){const n=H2.exec(t),i=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+i/e.frameRate}function UK(t,e){const n=V2.exec(t),i=Number(n[1]);switch(n[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class $K{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=aS(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new rc(this,"textTrack1"),n=new rc(this,"textTrack2"),i=new rc(this,"textTrack3"),s=new rc(this,"textTrack4");this.cea608Parser1=new tS(1,e,n),this.cea608Parser2=new tS(3,i,s)}}addCues(e,n,i,s,r){let a=!1;for(let o=r.length;o--;){const l=r[o],u=HK(l[0],l[1],n,i);if(u>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],i),a=!0,u/(i-n)>.5))return}if(a||r.push([n,i]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,n,i,s)}else{const o=this.Cues.newCue(null,n,i,s);this.hls.trigger(S.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:n,id:i,initPTS:s,timescale:r}){const{unparsedVttFrags:a}=this;i==="main"&&(this.initPTS[n.cc]={baseTime:s,timescale:r}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(S.FRAG_LOADED,o)}))}getExistingTrack(e,n){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(rS(r,{name:e,lang:n,attrs:{}}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:i,media:s}=this,{label:r,languageCode:a}=n[e],o=this.getExistingTrack(r,a);if(o)i[e]=o,ca(i[e]),u2(i[e],s);else{const l=this.createTextTrack("captions",r,a);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const i=n.label,s={_id:e,label:i,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,n,i){const s=this.media;if(s)return s.addTextTrack(e,n,i)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{ca(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=aS(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let i=0;i<n.length;i++)ca(n[i])}onSubtitleTracksUpdated(e,n){const i=n.subtitleTracks||[],s=i.some(r=>r.textCodec===q0);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(O2(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const a=this.media,o=a?Mc(a.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(o){let d=null;for(let f=0;f<o.length;f++)if(o[f]&&rS(o[f],l)){d=o[f],o[f]=null;break}d&&(c=d)}if(c)ca(c);else{const d=j2(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),o!=null&&o.length){const l=o.filter(u=>u!==null).map(u=>u.label);l.length&&M.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(i=>{const s=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!s)return;const r=`textTrack${s[1]}`,a=this.captionsProperties[r];a&&(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===pe.MAIN){var i,s;const{cea608Parser1:r,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:u}=n.frag,c=(i=(s=n.part)==null?void 0:s.index)!=null?i:-1;r&&a&&(u!==o+1||u===o&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,n){const{frag:i,payload:s}=n;if(i.type===pe.SUBTITLE)if(s.byteLength){const r=i.decryptdata,a="stats"in n;if(r==null||!r.encrypted||a){const o=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===q0?this._parseIMSC1(i,s):this._parseVTTs(n)}}else this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const i=this.hls;nS(n,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),i.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{M.log(`Failed to parse IMSC1: ${s}`),i.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var n;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:a}=this,o=r.length-1;if(!r[i.cc]&&o===-1){a.push(e);return}const l=this.hls,u=(n=i.initSegment)!=null&&n.data?kn(i.initSegment.data,new Uint8Array(s)):s;NK(u,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,c=>{this._appendCues(c,i.level),l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(i,s),M.log(`Failed to parse VTT cue: ${c}`),!(d&&o>i.cc)&&l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:c})})}_fallbackToIMSC1(e,n){const i=this.tracks[e.level];i.textCodec||nS(n,this.initPTS[e.cc],()=>{i.textCodec=q0,this._parseIMSC1(e,n)},()=>{i.textCodec="wvtt"})}_appendCues(e,n){const i=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[n];if(!s||s.mode==="disabled")return;e.forEach(r=>c2(s,r))}else{const s=this.tracks[n];if(!s)return;const r=s.default?"default":"subtitles"+n;i.trigger(S.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,n){const{frag:i}=n;i.type===pe.SUBTITLE&&this.onFragLoaded(S.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:s}=this;if(!this.enabled||!i||!s)return;const{frag:r,samples:a}=n;if(!(r.type===pe.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<a.length;o++){const l=a[o].bytes;if(l){const u=this.extractCea608Data(l);i.addData(a[o].pts,u[0]),s.addData(a[o].pts,u[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:a}=this;if(!(!a||a.currentTime<i)){if(!r||r==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>Zm(o[l],n,i))}if(this.config.renderTextTracksNatively&&n===0&&s!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>Zm(o[l],n,s))}}}extractCea608Data(e){const n=[[],[]],i=e[0]&31;let s=2;for(let r=0;r<i;r++){const a=e[s++],o=127&e[s++],l=127&e[s++];if(o===0&&l===0)continue;if((4&a)!==0){const c=3&a;(c===0||c===1)&&(n[c].push(o),n[c].push(l))}}return n}}function j2(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function rS(t,e){return!!t&&t.kind===j2(e)&&sg(e,t)}function HK(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function aS(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class V1{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const i=this.hls.levels[n.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const i=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,i.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&le(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&M.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=i,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const i=n.filter((s,r)=>this.isLevelAllowed(s)&&r<=e);return this.clientRect=null,V1.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const i=e.getBoundingClientRect();n.width=i.width,n.height=i.height,!n.width&&!n.height&&(n.width=i.right-i.left||e.width||0,n.height=i.bottom-i.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,n,i){if(!(e!=null&&e.length))return-1;const s=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let r=e.length-1;const a=Math.max(n,i);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&s(l,e[o+1])){r=o;break}}return r}}class VK{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const i=this.hls.config;if(i.capLevelOnFPSDrop){const s=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,i){const s=performance.now();if(n){if(this.lastTime){const r=s-this.lastTime,a=i-this.lastDroppedFrames,o=n-this.lastDecodedFrames,l=1e3*a/r,u=this.hls;if(u.trigger(S.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*o){let c=u.currentLevel;M.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(S.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const oc="[eme]";class xa{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=xa.CDMCleanupPromise?[xa.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=M.debug.bind(M,oc),this.log=M.log.bind(M,oc),this.warn=M.warn.bind(M,oc),this.error=M.error.bind(M,oc),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:i}=this.config,s=n[e];if(s)return s.licenseUrl;if(e===Me.WIDEVINE&&i)return i;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:n}=this.config,i=n[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,i=(a,o,l)=>!!a&&l.indexOf(a)===o,s=n.map(a=>a.audioCodec).filter(i),r=n.map(a=>a.videoCodec).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,o)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,s,r).then(d=>a({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof bn?o(d):o(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${i}`;return XR===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return i(e,n)}getMediaKeysPromise(e,n,i){const s=Yj(e,n,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let a=r==null?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),a=this.requestMediaKeySystemAccess(e,s);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),u.then(d=>d?this.setMediaKeysServerCertificate(c,e,d):c))),o.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),o.mediaKeys})}return a.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:i}){this.log(`Creating key-system session "${n}" keyId: ${ti.hexDump(e.keyId||[])}`);const s=i.createSession(),r={decryptdata:e,keySystem:n,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(n),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return ti.hexDump(e.keyId)}updateKeySession(e,n){var i;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${ti.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),s.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,i)=>{const s=N0(this.config),r=e.map(fx).filter(a=>!!a&&s.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:a})=>{const o=px(a);o?n(o):i(new Error(`Unable to find format for key-system "${a}"`))}).catch(i)})}loadKey(e){const n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),s=`(keyId: ${i} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);let r=this.keyIdToKeySessionPromise[i];return r||(r=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),r.catch(a=>this.handleError(a))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof bn?this.hls.trigger(S.ERROR,e.data):this.hls.trigger(S.ERROR,{type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[n];if(!i){const s=fx(e.keyFormat),r=s?[s]:N0(this.config);return this.attemptKeySystemAccess(r)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=N0(this.config)),e.length===0)throw new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:n,initData:i}=e,s=`"${e.type}" event: init data type: "${n}"`;if(this.debug(s),i===null)return;let r,a;if(n==="sinf"&&this.config.drmSystems[Me.FAIRPLAY]){const d=nt(new Uint8Array(i));try{const f=L1(JSON.parse(d).sinf),h=s2(new Uint8Array(f));if(!h)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");r=h.subarray(8,24),a=Me.FAIRPLAY}catch(f){this.warn(`${s} Failed to parse sinf: ${f}`);return}}else{const d=yW(i),f=d.filter(h=>h.systemId===Oo.WIDEVINE)[0];if(!f){d.length===0||d.some(h=>!h.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${d.map(h=>hx(h.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(a=hx(f.systemId),f.version===0&&f.data){const h=f.data.length-22;r=f.data.subarray(h,h+16)}}if(!a||!r)return;const o=ti.hexDump(r),{keyIdToKeySessionPromise:l,mediaKeySessions:u}=this;let c=l[o];for(let d=0;d<u.length;d++){const f=u[d],h=f.decryptdata;if(!h.keyId)continue;const p=ti.hexDump(h.keyId);if(o===p||h.uri.replace(/-/g,"").indexOf(o)!==-1){if(c=l[p],h.pssh)break;delete l[p],h.pssh=new Uint8Array(i),h.keyId=r,c=l[o]=c.then(()=>this.generateRequestWithPreferredKeySession(f,n,i,"encrypted-event-key-match"));break}}c||(c=l[o]=this.getKeySystemSelectionPromise([a]).then(({keySystem:d,mediaKeys:f})=>{var h;this.throwIfDestroyed();const p=new $l("ISO-23001-7",o,(h=px(d))!=null?h:"");return p.pssh=new Uint8Array(i),p.keyId=r,this.attemptSetMediaKeys(d,f).then(()=>{this.throwIfDestroyed();const g=this.createMediaKeySessionContext({decryptdata:p,keySystem:d,mediaKeys:f});return this.generateRequestWithPreferredKeySession(g,n,i,"encrypted-event-no-match")})})),c.catch(d=>this.handleError(d))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,n){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>i.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,n,i,s){var r,a;const o=(r=this.config.drmSystems)==null||(a=r[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const p=o.call(this.hls,n,i,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,i=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(i===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${u} (init data type: ${n} length: ${i?i.byteLength:null})`);const c=new U1,d=e._onmessage=p=>{const g=e.mediaKeysSession;if(!g){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:E}=p;this.log(`"${v}" message event for session "${g.sessionId}" message size: ${E.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,E).catch(y=>{this.handleError(y),c.emit("error",y)}):v==="license-release"?e.keySystem===Me.FAIRPLAY&&(this.updateKeySession(e,Xm("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;c.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",f);const h=new Promise((p,g)=>{c.on("error",g),c.on("keyStatus",v=>{v.startsWith("usable")?p():v==="output-restricted"?g(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?g(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?g(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(n,i).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${u}`)}).catch(p=>{throw new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>h).catch(p=>{throw c.removeAllListeners(),this.removeSession(e),p}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,i)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${ti.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${ti.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,i=n.loader,s=new i(n),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:r},u=n.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{a(f.data)},onError:(f,h,p,g)=>{o(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:ht({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${r}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{o(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(f,h,p)=>{o(new Error("aborted"))}};s.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,i){return new Promise((s,r)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i==null?void 0:i.byteLength}) on "${n}"`),s(e)}).catch(a=>{r(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(s=>{throw new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,n){const i=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const s=new DOMParser().parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let c;for(let d=0,f=r.length;d<f;d++){var a,o;c=r[d];const h=(a=c.querySelector("name"))==null?void 0:a.textContent,p=(o=c.querySelector("value"))==null?void 0:o.textContent;h&&p&&e.setRequestHeader(h,p)}}const l=s.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return Xm(atob(u))}setupLicenseXHR(e,n,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,n,i,s)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",n,!0),r.call(this.hls,e,n,i,s)}).then(a=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:a||s})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,n){const i=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,o,a,e)}catch(c){this.error(c)}s(l)}else{const l=i.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)r(new bn({type:Ee.KEY_SYSTEM_ERROR,details:H.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,n).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,n).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==Me.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const i=n.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},$l.clearKeyUriToKeyIdMap();const i=n.length;xa.CDMCleanupPromise=Promise.all(n.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}`)}))).then(()=>{i&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=n.reduce((s,r)=>(s.indexOf(r.keyFormat)===-1&&s.push(r.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:i}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),n.remove().catch(r=>{this.log(`Could not remove session: ${r}`)}).then(()=>n.close()).catch(r=>{this.log(`Could not close session: ${r}`)})}}}xa.CDMCleanupPromise=void 0;class bn extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var At;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(At||(At={}));var ag;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(ag||(ag={}));var sr;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(sr||(sr={}));const GK={[sr.OBJECT]:["br","d","ot","tb"],[sr.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[sr.SESSION]:["cid","pr","sf","sid","st","v"],[sr.STATUS]:["bs","rtp"]};class Xa{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(i=>i instanceof Xa?i:new Xa(i))),this.value=e,this.params=n}}class W2{constructor(e){this.description=void 0,this.description=e}}const jK="Dict";function WK(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function zK(t,e,n,i){return new Error(`failed to ${t} "${WK(e)}" as ${n}`,{cause:i})}const oS="Bare Item",KK="Boolean",YK="Byte Sequence",qK="Decimal",XK="Integer";function QK(t){return t<-999999999999999||999999999999999<t}const ZK=/[\x00-\x1f\x7f]+/,JK="Token",eY="Key";function Ti(t,e,n){return zK("serialize",t,e,n)}function tY(t){if(typeof t!="boolean")throw Ti(t,KK);return t?"?1":"?0"}function nY(t){return btoa(String.fromCharCode(...t))}function iY(t){if(ArrayBuffer.isView(t)===!1)throw Ti(t,YK);return`:${nY(t)}:`}function z2(t){if(QK(t))throw Ti(t,XK);return t.toString()}function sY(t){return`@${z2(t.getTime()/1e3)}`}function K2(t,e){if(t<0)return-K2(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const s=Math.floor(t*n);return(s%2===0?s:s+1)/n}else return Math.round(t*n)/n}function rY(t){const e=K2(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ti(t,qK);const n=e.toString();return n.includes(".")?n:`${n}.0`}const aY="String";function oY(t){if(ZK.test(t))throw Ti(t,aY);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function lY(t){return t.description||t.toString().slice(7,-1)}function lS(t){const e=lY(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ti(e,JK);return e}function og(t){switch(typeof t){case"number":if(!le(t))throw Ti(t,oS);return Number.isInteger(t)?z2(t):rY(t);case"string":return oY(t);case"symbol":return lS(t);case"boolean":return tY(t);case"object":if(t instanceof Date)return sY(t);if(t instanceof Uint8Array)return iY(t);if(t instanceof W2)return lS(t);default:throw Ti(t,oS)}}function lg(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Ti(t,eY);return t}function G1(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${lg(e)}`:`;${lg(e)}=${og(n)}`).join("")}function Y2(t){return t instanceof Xa?`${og(t.value)}${G1(t.params)}`:og(t)}function uY(t){return`(${t.value.map(Y2).join(" ")})${G1(t.params)}`}function cY(t,e={whitespace:!0}){if(typeof t!="object")throw Ti(t,jK);const n=t instanceof Map?t.entries():Object.entries(t),i=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([s,r])=>{r instanceof Xa||(r=new Xa(r));let a=lg(s);return r.value===!0?a+=G1(r.params):(a+="=",Array.isArray(r.value)?a+=uY(r):a+=Y2(r)),a}).join(`,${i}`)}function dY(t,e){return cY(t,e)}const fY=t=>t==="ot"||t==="sf"||t==="st",hY=t=>typeof t=="number"?le(t):t!=null&&t!==""&&t!==!1;function pY(t,e){const n=new URL(t),i=new URL(e);if(n.origin!==i.origin)return t;const s=n.pathname.split("/").slice(1),r=i.pathname.split("/").slice(1,-1);for(;s[0]===r[0];)s.shift(),r.shift();for(;r.length;)r.shift(),s.unshift("..");return s.join("/")}function mY(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?r:r&3|8).toString(16)})}}}const Vc=t=>Math.round(t),gY=(t,e)=>(e!=null&&e.baseUrl&&(t=pY(t,e.baseUrl)),encodeURIComponent(t)),lc=t=>Vc(t/100)*100,EY={br:Vc,d:Vc,bl:lc,dl:lc,mtp:lc,nor:gY,rtp:lc,tb:Vc};function TY(t,e){const n={};if(t==null||typeof t!="object")return n;const i=Object.keys(t).sort(),s=tt({},EY,e==null?void 0:e.formatters),r=e==null?void 0:e.filter;return i.forEach(a=>{if(r!=null&&r(a))return;let o=t[a];const l=s[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||hY(o)&&(fY(a)&&typeof o=="string"&&(o=new W2(o)),n[a]=o))}),n}function q2(t,e={}){return t?dY(TY(t,e),tt({whitespace:!1},e)):""}function yY(t,e={}){if(!t)return{};const n=Object.entries(t),i=Object.entries(GK).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),s=n.reduce((r,a)=>{var o,l;const[u,c]=a,d=((o=i.find(f=>f[1].includes(u)))==null?void 0:o[0])||sr.REQUEST;return(l=r[d])!=null||(r[d]={}),r[d][u]=c,r},{});return Object.entries(s).reduce((r,[a,o])=>(r[a]=q2(o,e),r),{})}function vY(t,e,n){return tt(t,yY(e,n))}const bY="CMCD";function xY(t,e={}){if(!t)return"";const n=q2(t,e);return`${bY}=${encodeURIComponent(n)}`}const uS=/CMCD=[^&#]+/;function SY(t,e,n){const i=xY(e,n);if(!i)return t;if(uS.test(t))return t.replace(uS,i);const s=t.includes("?")?"&":"?";return`${t}${s}${i}`}class AY{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:At.MANIFEST,su:!this.initialized})}catch(r){M.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=s=>{try{const r=s.frag,a=this.hls.levels[r.level],o=this.getObjectType(r),l={d:r.duration*1e3,ot:o};(o===At.VIDEO||o===At.AUDIO||o==At.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(o)/1e3,l.bl=this.getBufferLength(o)),this.apply(s,l)}catch(r){M.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const n=this.config=e.config,{cmcd:i}=n;i!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||mY(),this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHED,this.onMediaDetached,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHED,this.onMediaDetached,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var i,s;this.audioBuffer=(i=n.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(s=n.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:ag.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){tt(n,this.createData());const i=n.ot===At.INIT||n.ot===At.VIDEO||n.ot===At.MUXED;this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:s}=this;s&&(n=Object.keys(n).reduce((r,a)=>(s.includes(a)&&(r[a]=n[a]),r),{})),this.useHeaders?(e.headers||(e.headers={}),vY(e.headers,n)):e.url=SY(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return At.TIMED_TEXT;if(e.sn==="initSegment")return At.INIT;if(n==="audio")return At.AUDIO;if(n==="main")return this.hls.audioTracks.length?At.VIDEO:At.MUXED}getTopBandwidth(e){let n=0,i;const s=this.hls;if(e===At.AUDIO)i=s.audioTracks;else{const r=s.maxAutoLevel,a=r>-1?r+1:s.levels.length;i=s.levels.slice(0,a)}for(const r of i)r.bitrate>n&&(n=r.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,i=e===At.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!n?NaN:Oe.bufferInfo(i,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){n(r),this.loader.load(r,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){n(r),this.loader.load(r,a,o)}}}}const CY=3e5;class wY{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=M.log.bind(M,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:i}=n;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:i}=n;if((i==null?void 0:i.action)===Et.SendAlternateToPenaltyBox&&i.flags===On.MoveAllAlternatesMatchingHost){const s=this.levels;let r=this.pathwayPriority,a=this.pathwayId;if(n.context){const{groupId:o,pathwayId:l,type:u}=n.context;o&&s?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&s&&(r=s.reduce((o,l)=>(o.indexOf(l.pathwayId)===-1&&o.push(l.pathwayId),o),[])),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==a),i.resolved||M.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${a} levels: ${s&&s.length} priorities: ${JSON.stringify(r)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),n=this.getLevelsForPathway(i),this.pathwayId=i}return n.length!==e.length?(this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(r=>{s-i[r]>CY&&delete i[r]});for(let r=0;r<e.length;r++){const a=e[r];if(a in i)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(n=this.getLevelsForPathway(a),n.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,p2(n),this.hls.trigger(S.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[o];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,n,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(n===Ce.AUDIO_TRACK&&s[r].hasAudioGroup(e)||n===Ce.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const n=this.levels;if(!n)return;const i={},s={};e.forEach(r=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=r;if(n.some(c=>c.pathwayId===a))return;const u=this.getLevelsForPathway(o).map(c=>{const d=new Ge(c.attrs);d["PATHWAY-ID"]=a;const f=d.AUDIO&&`${d.AUDIO}_clone_${a}`,h=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;f&&(i[d.AUDIO]=f,d.AUDIO=f),h&&(s[d.SUBTITLES]=h,d.SUBTITLES=h);const p=X2(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new Ya({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let v=1;v<c.audioGroups.length;v++)g.addGroupId("audio",`${c.audioGroups[v]}_clone_${a}`);if(c.subtitleGroups)for(let v=1;v<c.subtitleGroups.length;v++)g.addGroupId("text",`${c.subtitleGroups[v]}_clone_${a}`);return g});n.push(...u),cS(this.audioTracks,i,l,a),cS(this.subtitleTracks,s,l,a)})}loadSteeringManifest(e){const n=this.hls.config,i=n.loader;this.loader&&this.loader.destroy(),this.loader=new i(n);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+c)}const r={responseType:"json",url:s.href},a=n.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(c,d,f,h)=>{this.log(`Loaded steering manifest: "${s}"`);const p=c.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":E}=p;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v);const y={steeringManifest:p,url:s.toString()};this.hls.trigger(S.STEERING_MANIFEST_LOADED,y),E&&this.updatePathwayPriority(E)},onError:(c,d,f,h)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const v=g.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(c,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,l,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const s=(i=this.hls)==null?void 0:i.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function cS(t,e,n,i){t&&Object.keys(e).forEach(s=>{const r=t.filter(a=>a.groupId===s).map(a=>{const o=tt({},a);return o.details=void 0,o.attrs=new Ge(o.attrs),o.url=o.attrs.URI=X2(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=e[s],o.attrs["PATHWAY-ID"]=i,o});t.push(...r)})}function X2(t,e,n,i){const{HOST:s,PARAMS:r,[n]:a}=i;let o;e&&(o=a==null?void 0:a[e],o&&(t=o));const l=new self.URL(t);return s&&!o&&(l.host=s),r&&Object.keys(r).sort().forEach(u=>{u&&l.searchParams.set(u,r[u])}),l.href}const LY=/^age:\s*[\d.]+\s*$/im;class Q2{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new rh,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return r(i,n.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",n.url,!0),r(i,n.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,n,e)}).catch(a=>{this.callbacks.onError({code:i.status,text:a.message},n,i,s)}):this.openAndSendXhr(i,n,e)}openAndSendXhr(e,n,i){e.readyState||e.open("GET",n.url,!0);const s=n.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=i.loadPolicy;if(s)for(const o in s)e.setRequestHeader(o,s[o]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&le(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:i}=this;if(!e||!n)return;const s=n.readyState,r=this.config;if(!i.aborted&&s>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const a=n.status,o=n.responseType!=="text";if(a>=200&&a<300&&(o&&n.response||n.responseText!==null)){i.loading.end=Math.max(self.performance.now(),i.loading.first);const l=o?n.response:n.responseText,u=n.responseType==="arraybuffer"?l.byteLength:l.length;if(i.loaded=i.total=u,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first),!this.callbacks)return;const c=this.callbacks.onProgress;if(c&&c(i,e,l,n),!this.callbacks)return;const d={url:n.responseURL,data:l,code:a};this.callbacks.onSuccess(d,i,e,n)}else{const l=r.loadPolicy.errorRetry,u=i.retry,c={url:e.url,data:void 0,code:a};Zd(l,u,!1,c)?this.retry(l):(M.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:n.statusText},e,n,i))}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Zd(e,n,!0))this.retry(e);else{var i;M.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:i}=this;this.retryDelay=R1(e,i.retry),i.retry++,M.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&LY.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function IY(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const _Y=/(\d+)-(\d+)\/(\d+)/;class dS{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||kY,this.controller=new self.AbortController,this.stats=new rh}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=RY(e,this.controller.signal),a=i.onProgress,o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),n.timeout=u&&le(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(s,e,this.response)},n.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(s,e,this.response)},c-(f-s.loading.start)),!d.ok){const{status:h,statusText:p}=d;throw new NY(p||"fetch, bad network response",h,d)}return s.loading.first=f,s.total=PY(d.headers)||s.total,a&&le(n.highWaterMark)?this.loadProgressively(d,s,e,n.highWaterMark,a):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const h=d[l];h&&(s.loaded=s.total=h);const p={url:f.url,data:d,code:f.status};a&&!le(n.highWaterMark)&&a(s,e,d,f),i.onSuccess(p,s,e,f)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=d&&d.code||0,h=d?d.message:null;i.onError({code:f,text:h},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,i,s=0,r){const a=new T2,o=e.body.getReader(),l=()=>o.read().then(u=>{if(u.done)return a.dataLength&&r(n,i,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return n.loaded+=d,d<s||a.dataLength?(a.push(c),a.dataLength>=s&&r(n,i,a.flush(),e)):r(n,i,c,e),l()}).catch(()=>Promise.reject());return l()}}function RY(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(tt({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function DY(t){const e=_Y.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function PY(t){const e=t.get("Content-Range");if(e){const i=DY(e);if(le(i))return i}const n=t.get("Content-Length");if(n)return parseInt(n)}function kY(t,e){return new self.Request(t.url,e)}class NY extends Error{constructor(e,n,i){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=i}}const OY=/\s/,MY={newCue(t,e,n,i){const s=[];let r,a,o,l,u;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<i.rows.length;f++)if(r=i.rows[f],o=!0,l=0,u="",!r.isEmpty()){var d;for(let g=0;g<r.chars.length;g++)OY.test(r.chars[g].uchar)&&o?l++:(u+=r.chars[g].uchar,o=!1);r.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const h=$2(u.trim()),p=H1(e,n,h);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(a=new c(e,n,h),a.id=p,a.line=f+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(a))}return t&&s.length&&(s.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),s.forEach(f=>c2(t,f))),s}},FY={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Z2=ht(ht({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Q2,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:cz,bufferController:pK,capLevelController:V1,errorController:ZW,fpsController:VK,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:XR,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:FY},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},BY()),{},{subtitleStreamController:cK,subtitleTrackController:fK,timelineController:$K,audioStreamController:lK,audioTrackController:uK,emeController:xa,cmcdController:AY,contentSteeringController:wY});function BY(){return{cueHandler:MY,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function UY(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=ug(t),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(r=>{const a=`${r==="level"?"playlist":r}LoadPolicy`,o=e[a]===void 0,l=[];s.forEach(u=>{const c=`${r}Loading${u}`,d=e[c];if(d!==void 0&&o){l.push(c);const f=n[a].default;switch(e[a]={default:f},u){case"TimeOut":f.maxLoadTimeMs=d,f.maxTimeToFirstByteMs=d;break;case"MaxRetry":f.errorRetry.maxNumRetry=d,f.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":f.errorRetry.retryDelayMs=d,f.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=d,f.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&M.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),ht(ht({},n),e)}function ug(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(ug):Object.keys(t).reduce((e,n)=>(e[n]=ug(t[n]),e),{}):t}function $Y(t){const e=t.loader;e!==dS&&e!==Q2?(M.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):IY()&&(t.loader=dS,t.progressive=!0,t.enableSoftwareAES=!0,M.log("[config]: Progressive streaming enabled, using FetchLoader"))}let J0;class HY extends D1{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const i=this.hls.config.preferManagedMediaSource,s=[],r={},a={};let o=!1,l=!1,u=!1;n.levels.forEach(c=>{var d,f;const h=c.attrs;let{audioCodec:p,videoCodec:g}=c;((d=p)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(J0||(J0=/chrome|firefox/i.test(navigator.userAgent)),J0&&(c.audioCodec=p=void 0)),p&&(c.audioCodec=p=qd(p,i)),((f=g)==null?void 0:f.indexOf("avc1"))===0&&(g=c.videoCodec=LW(g));const{width:v,height:E,unknownCodecs:y}=c;if(o||(o=!!(v&&E)),l||(l=!!g),u||(u=!!p),y!=null&&y.length||p&&!B0(p,"audio",i)||g&&!B0(g,"video",i))return;const{CODECS:T,"FRAME-RATE":b,"HDCP-LEVEL":x,"PATHWAY-ID":w,RESOLUTION:A,"VIDEO-RANGE":C}=h,_=`${`${w||"."}-`}${c.bitrate}-${A}-${b}-${T}-${C}-${x}`;if(r[_])if(r[_].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const N=a[_]+=1;c.attrs["PATHWAY-ID"]=new Array(N+1).join(".");const j=new Ya(c);r[_]=j,s.push(j)}else r[_].addGroupId("audio",h.AUDIO),r[_].addGroupId("text",h.SUBTITLES);else{const N=new Ya(c);r[_]=N,a[_]=1,s.push(N)}}),this.filterAndSortMediaOptions(s,n,o,l,u)}filterAndSortMediaOptions(e,n,i,s,r){let a=[],o=[],l=e;if((i||s)&&r&&(l=l.filter(({videoCodec:p,videoRange:g,width:v,height:E})=>(!!p||!!(v&&E))&&$W(g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){n.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(n.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:p,reason:p.message})}});return}if(n.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;a=n.audioTracks.filter(g=>!g.audioCodec||B0(g.audioCodec,"audio",p)),fS(a)}n.subtitles&&(o=n.subtitles,fS(o));const u=l.slice(0);l.sort((p,g)=>{if(p.attrs["HDCP-LEVEL"]!==g.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(g.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&p.height!==g.height)return p.height-g.height;if(p.frameRate!==g.frameRate)return p.frameRate-g.frameRate;if(p.videoRange!==g.videoRange)return Xd.indexOf(p.videoRange)-Xd.indexOf(g.videoRange);if(p.videoCodec!==g.videoCodec){const v=yx(p.videoCodec),E=yx(g.videoCodec);if(v!==E)return E-v}if(p.uri===g.uri&&p.codecSet!==g.codecSet){const v=Yd(p.codecSet),E=Yd(g.codecSet);if(v!==E)return E-v}return p.averageBitrate!==g.averageBitrate?p.averageBitrate-g.averageBitrate:0});let c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length)){for(let p=0;p<u.length;p++)if(u[p].pathwayId===l[0].pathwayId){c=u[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===c){var d;this._firstLevel=p;const g=c.bitrate,v=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${g}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const E=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);E>v&&v===Z2.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const f=r&&!s,h={levels:l,audioTracks:a,subtitleTracks:o,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:r,video:s,altAudio:!f&&a.some(p=>!!p.url)};this.hls.trigger(S.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(S.ERROR,{type:Ee.OTHER_ERROR,details:H.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,n.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,a=n[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&a.details&&s&&r===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${i}${r?" with Pathway "+r:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(S.LEVEL_SWITCHING,l);const u=a.details;if(!u||u.live){const c=this.switchParams(a.uri,s==null?void 0:s.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===Ce.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===pe.MAIN){const i=n.elementaryStreams;if(!Object.keys(i).some(r=>!!i[r]))return;const s=this._levels[n.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,n){var i;const{level:s,details:r}=n,a=this._levels[s];if(!a){var o;this.warn(`Invalid level index ${s}`),(o=n.deliveryDirectives)!=null&&o.skip&&(r.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(s,n,a.details)):(i=n.deliveryDirectives)!=null&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let s=i.uri;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const r=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${r?" Pathway "+r:""} ${s}`),this.clearTimer(),this.hls.trigger(S.LEVEL_LOADING,{url:s,level:n,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;const i=this._levels.filter((s,r)=>r!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(a=>a.level=-1)),!1));p2(i),this._levels=i,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(S.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(S.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function fS(t){const e={};t.forEach(n=>{const i=n.groupId||"";n.id=e[i]=e[i]||0,e[i]++})}class VY{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var n;if(e&&e!==((n=s.context)==null?void 0:n.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=H.KEY_LOAD_ERROR,i,s,r){return new Li({type:Ee.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=e;for(let r=0;r<n.length;r++){const a=n[r];if(s<=a.cc&&(i==="initSegment"||a.sn==="initSegment"||i<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var i,s;n&&e.setKeyFormat(n);const r=e.decryptdata;if(!r){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,H.KEY_LOAD_ERROR,u))}const a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,H.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((i=o)!=null&&i.decryptdata.key)return r.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((s=o)!=null&&s.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(u=>(r.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,H.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,n){const i={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(i);if(s)return(e.keyLoadPromise=s.then(r=>(e.mediaKeySessionContext=r,i))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(i)}loadKeyHTTP(e,n){const i=this.config,s=i.loader,r=new s(i);return n.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=i.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{const{frag:v,keyInfo:E,url:y}=p;if(!v.decryptdata||E!==this.keyUriToKeyInfo[y])return o(this.createKeyLoadError(v,H.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));E.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,E.loader=null,a({frag:v,keyInfo:E})},onError:(f,h,p,g)=>{this.resetLoader(h),o(this.createKeyLoadError(n,H.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,ht({url:l.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),o(this.createKeyLoadError(n,H.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),o(this.createKeyLoadError(n,H.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};r.load(l,c,d)})}resetLoader(e){const{frag:n,keyInfo:i,url:s}=e,r=i.loader;n.keyLoader===r&&(n.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],r&&r.destroy()}}function J2(){return self.SourceBuffer||self.WebKitSourceBuffer}function eD(){if(!Ar())return!1;const e=J2();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function GY(){if(!eD())return!1;const t=Ar();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Hl(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Hl(e,"audio"))))}function jY(){var t;const e=J2();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const WY=250,Gc=2,zY=.1,KY=.05;class YY{constructor(e,n,i,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=i,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:i,media:s,stalled:r}=this;if(s===null)return;const{currentTime:a,seeking:o}=s,l=this.seeking&&!o,u=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,o||(this.nudgeRetry=0),r!==null){if(this.stallReported){const v=self.performance.now()-r;M.warn(`playback not stuck anymore @${a}, after ${Math.round(v)}ms`),this.stallReported=!1}this.stalled=null}return}if(u||l){this.stalled=null;return}if(s.paused&&!o||s.ended||s.playbackRate===0||!Oe.getBuffered(s).length){this.nudgeRetry=0;return}const c=Oe.bufferInfo(s,a,0),d=c.nextStart||0;if(o){const v=c.len>Gc,E=!d||n&&n.start<=a||d-a>Gc&&!this.fragmentTracker.getPartialFragment(a);if(v||E)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;if(!(c.len>0)&&!d)return;const E=Math.max(d,c.start||0)-a,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(y==null||(f=y.details)==null?void 0:f.live)?y.details.targetduration*2:Gc,x=this.fragmentTracker.getPartialFragment(a);if(E>0&&(E<=b||x)){s.paused||this._trySkipBufferHole(x);return}}const h=self.performance.now();if(r===null){this.stalled=h;return}const p=h-r;if(!o&&p>=WY&&(this._reportStall(c),!this.media))return;const g=Oe.bufferInfo(s,a,i.maxBufferHole);this._tryFixBufferStall(g,p)}_tryFixBufferStall(e,n){const{config:i,fragmentTracker:s,media:r}=this;if(r===null)return;const a=r.currentTime,o=s.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-a<i.maxBufferHole)&&n>i.highBufferWatchdogPeriod*1e3&&(M.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:i,stallReported:s}=this;if(!s&&i){this.stallReported=!0;const r=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);M.warn(r.message),n.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:i,media:s}=this;if(s===null)return 0;const r=s.currentTime,a=Oe.bufferInfo(s,r,0),o=r<a.start?a.start:a.nextStart;if(o){const l=a.len<=n.maxBufferHole,u=a.len>0&&a.len<1&&s.readyState<3,c=o-r;if(c>0&&(l||u)){if(c>n.maxBufferHole){const{fragmentTracker:f}=this;let h=!1;if(r===0){const p=f.getAppendedFrag(0,pe.MAIN);p&&o<p.end&&(h=!0)}if(!h){const p=e||f.getAppendedFrag(r,pe.MAIN);if(p){let g=!1,v=p.end;for(;v<o;){const E=f.getPartialFragment(v);if(E)v+=E.duration;else{g=!0;break}}if(g)return 0}}}const d=Math.max(o+KY,r+zY);if(M.warn(`skipping hole, adjusting currentTime from ${r} to ${d}`),this.moved=!0,this.stalled=null,s.currentTime=d,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${d}`);i.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:i,nudgeRetry:s}=this;if(i===null)return;const r=i.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const a=r+(s+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${r} to ${a}`);M.warn(o.message),i.currentTime=a,n.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);M.error(a.message),n.trigger(S.ERROR,{type:Ee.MEDIA_ERROR,details:H.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const qY=100;class XY extends N1{constructor(e,n,i){super(e,n,i,"[stream-controller]",pe.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(S.ERROR,this.onError,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(S.ERROR,this.onError,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(qY),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=ee.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ee.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ee.WAITING_LEVEL:{const{levels:n,level:i}=this,s=n==null?void 0:n[i],r=s==null?void 0:s.details;if(r&&(!r.live||this.levelLastLoaded===s)){if(this.waitForCdnTuneIn(r))break;this.state=ee.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ee.IDLE;break}break}case ee.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),i=this.retryDate;if(!i||n>=i||(e=this.media)!=null&&e.seeking){const{levels:s,level:r}=this,a=s==null?void 0:s[r];this.resetStartWhenNotLoaded(a||null),this.state=ee.IDLE}}break}this.state===ee.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:i,media:s}=this;if(n===null||!s&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=e.nextLoadLevel;if(!(i!=null&&i[r]))return;const a=i[r],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const g={};this.altAudio&&(g.type="video"),this.hls.trigger(S.BUFFER_EOS,g),this.state=ee.ENDED;return}e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const u=a.details;if(!u||this.state===ee.WAITING_LEVEL||u.live&&this.levelLastLoaded!==a){this.level=r,this.state=ee.WAITING_LEVEL;return}const c=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:o.end;let h=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&h&&h.sn!=="initSegment"&&this.fragmentTracker.getState(h)!==ut.OK){var p;const v=((p=this.backtrackFragment)!=null?p:h).sn-u.startSN,E=u.fragments[v-1];E&&h.cc===E.cc&&(h=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const v=this.audioOnly&&!this.altAudio?Re.AUDIO:Re.VIDEO,E=(v===Re.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,v,pe.MAIN)}h=this.getNextFragmentLoopLoading(h,u,o,pe.MAIN,d)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,a,f))}loadFragment(e,n,i){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===ut.NOT_LOADED||s===ut.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,pe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let i;const s=this.getAppendedFrag(n.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<r.targetduration*2)return}if(!n.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],u=this.fragLastKbps;u&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:i=0}else i=0;const a=this.getBufferedFrag(n.currentTime+i);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(a.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ee.KEY_LOADING:case ee.FRAG_LOADING:case ee.FRAG_LOADING_WAITING_RETRY:case ee.PARSING:case ee.PARSED:this.state=ee.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new YY(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;le(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const i=this.getMainFwdBufferInfo();if(i===null||i.len===0){this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(S.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,n){let i=!1,s=!1;n.levels.forEach(r=>{const a=r.audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,s=s||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&s&&!jY(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:i}=this;if(!i||this.state!==ee.IDLE)return;const s=i[n.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=ee.WAITING_LEVEL)}onLevelLoaded(e,n){var i;const{levels:s}=this,r=n.level,a=n.details,o=a.totalduration;if(!s){this.warn(`Levels were reset while loading level ${r}`);return}this.log(`Level ${r} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=s[r],u=this.fragCurrent;u&&(this.state===ee.FRAG_LOADING||this.state===ee.FRAG_LOADING_WAITING_RETRY)&&u.level!==n.level&&u.loader&&this.abortCurrentFrag();let c=0;if(a.live||(i=l.details)!=null&&i.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,this.hls.trigger(S.LEVEL_UPDATED,{details:a,level:r}),this.state===ee.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ee.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,c),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:i,part:s,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const o=a[i.level],l=o.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const u=o.videoCodec,c=l.PTSKnown||!l.live,d=(n=i.initSegment)==null?void 0:n.data,f=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new N2(this.hls,pe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,g=p!==-1,v=new P1(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,g),E=this.initPTS[i.cc];h.push(r,d,f,u,i,s,l.totalduration,c,v,E)}onAudioTrackSwitching(e,n){const i=this.altAudio;if(!!!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const r=this.hls;i&&(r.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),r.trigger(S.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const i=n.id,s=!!this.hls.audioTracks[i].url;if(s){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=s,this.tick()}onBufferCreated(e,n){const i=n.tracks;let s,r,a=!1;for(const o in i){const l=i[o];if(l.id==="main"){if(r=o,s=l,o==="video"){const u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:i,part:s}=n;if(i&&i.type!==pe.MAIN)return;if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ee.PARSED&&(this.state=ee.IDLE);return}const r=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),i.sn!=="initSegment"&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}onError(e,n){var i;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case H.FRAG_GAP:case H.FRAG_PARSING_ERROR:case H.FRAG_DECRYPT_ERROR:case H.FRAG_LOAD_ERROR:case H.FRAG_LOAD_TIMEOUT:case H.KEY_LOAD_ERROR:case H.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(pe.MAIN,n);break;case H.LEVEL_LOAD_ERROR:case H.LEVEL_LOAD_TIMEOUT:case H.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_LEVEL&&((i=n.context)==null?void 0:i.type)===Ce.LEVEL&&(this.state=ee.IDLE);break;case H.BUFFER_APPEND_ERROR:case H.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;if(n.details===H.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case H.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!Oe.getBuffered(e).length){const i=this.state!==ee.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ee.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==Re.AUDIO||this.audioOnly&&!this.altAudio){const i=(n===Re.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,pe.MAIN),this.tick()}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let i=this.startPosition;if(i>=0&&n<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${n}`);return}const s=Oe.getBuffered(e),a=(s.length?s.start(0):0)-i;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),i+=a,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${n}`),e.currentTime=i}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(i=>{const{hls:s}=this;if(!i||this.fragContextChanged(e))return;n.fragmentError=0,this.state=ee.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),s.trigger(S.FRAG_LOADED,i),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const i="main",{hls:s}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:c}=o,{video:d,text:f,id3:h,initSegment:p}=r,{details:g}=c,v=this.altAudio?void 0:r.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ee.PARSING,p){if(p!=null&&p.tracks){const T=l.initSegment||l;this._bufferInitSegment(c,p.tracks,T,a),s.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:i,tracks:p.tracks})}const E=p.initPTS,y=p.timescale;le(E)&&(this.initPTS[l.cc]={baseTime:E,timescale:y},s.trigger(S.INIT_PTS_FOUND,{frag:l,id:i,initPTS:E,timescale:y}))}if(d&&g&&l.sn!=="initSegment"){const E=g.fragments[l.sn-1-g.startSN],y=l.sn===g.startSN,T=!E||l.cc>E.cc;if(r.independent!==!1){const{startPTS:b,endPTS:x,startDTS:w,endDTS:A}=d;if(u)u.elementaryStreams[d.type]={startPTS:b,endPTS:x,startDTS:w,endDTS:A};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!T&&(this.couldBacktrack=!0),d.dropped&&d.independent){const C=this.getMainFwdBufferInfo(),L=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,_=d.firstKeyFramePTS?d.firstKeyFramePTS:b;if(!y&&L<_-this.config.maxBufferHole&&!T){this.backtrack(l);return}else T&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,x,l.start,A,!0)}else y&&b>Gc&&(l.gap=!0);l.setElementaryStreamInfo(d.type,b,x,w,A),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,u,a,y||T)}else if(y||T)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:E,endPTS:y,startDTS:T,endDTS:b}=v;u&&(u.elementaryStreams[Re.AUDIO]={startPTS:E,endPTS:y,startDTS:T,endDTS:b}),l.setElementaryStreamInfo(Re.AUDIO,E,y,T,b),this.bufferFragmentData(v,l,u,a)}if(g&&h!=null&&(n=h.samples)!=null&&n.length){const E={id:i,frag:l,details:g,samples:h.samples};s.trigger(S.FRAG_PARSING_METADATA,E)}if(g&&f){const E={id:i,frag:l,details:g,samples:f.samples};s.trigger(S.FRAG_PARSING_USERDATA,E)}}_bufferInitSegment(e,n,i,s){if(this.state!==ee.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:r,video:a,audiovideo:o}=n;if(r){let l=e.audioCodec;const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const c=r.metadata;c&&"channelCount"in c&&(c.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),r.levelCodec=l,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${r.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(S.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const c=n[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(S.BUFFER_APPENDING,{type:l,data:c,frag:i,part:null,chunkMeta:s,parent:i.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,pe.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ee.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(Oe.isBuffered(e,i)?n=this.getAppendedFrag(i):Oe.isBuffered(e,i+.1)&&(n=this.getAppendedFrag(i+.1)),n){this.backtrackFragment=null;const s=this.fragPlaying,r=n.level;(!s||n.sn!==s.sn||s.level!==r)&&(this.fragPlaying=n,this.hls.trigger(S.FRAG_CHANGED,{frag:n}),(!s||s.level!==r)&&this.hls.trigger(S.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,i=this.currentFrag;if(i&&le(n)&&le(i.programDateTime)){const s=i.programDateTime+(n-i.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Fi{static get version(){return"1.5.15"}static isMSESupported(){return eD()}static isSupported(){return GY()}static getMediaSource(){return Ar()}static get Events(){return S}static get ErrorTypes(){return Ee}static get ErrorDetails(){return H}static get DefaultConfig(){return Fi.defaultConfig?Fi.defaultConfig:Z2}static set DefaultConfig(e){Fi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new U1,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,Bj(e.debug||!1,"Hls instance");const n=this.config=UY(Fi.DefaultConfig,e);this.userConfig=e,n.progressive&&$Y(n);const{abrController:i,bufferController:s,capLevelController:r,errorController:a,fpsController:o}=n,l=new a(this),u=this.abrController=new i(this),c=this.bufferController=new s(this),d=this.capLevelController=new r(this),f=new o(this),h=new PW(this),p=new FW(this),g=n.contentSteeringController,v=g?new g(this):null,E=this.levelController=new HY(this,v),y=new fz(this),T=new VY(this.config),b=this.streamController=new XY(this,y,T);d.setStreamController(b),f.setStreamController(b);const x=[h,E,b];v&&x.splice(1,0,v),this.networkControllers=x;const w=[u,c,d,f,p,y];this.audioTrackController=this.createController(n.audioTrackController,x);const A=n.audioStreamController;A&&x.push(new A(this,y,T)),this.subtitleTrackController=this.createController(n.subtitleTrackController,x);const C=n.subtitleStreamController;C&&x.push(new C(this,y,T)),this.createController(n.timelineController,w),T.emeController=this.emeController=this.createController(n.emeController,w),this.cmcdController=this.createController(n.cmcdController,w),this.latencyController=this.createController(BW,w),this.coreComponents=w,x.push(l);const L=l.onErrorOut;typeof L=="function"&&this.on(S.ERROR,L,l)}createController(e,n){if(e){const i=new e(this);return n&&n.push(i),i}return null}on(e,n,i=this){this._emitter.on(e,n,i)}once(e,n,i=this){this._emitter.once(e,n,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,i=this,s){this._emitter.off(e,n,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,n,i){return this._emitter.emit(e,n,i)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(i){if(M.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const s=e===S.ERROR;this.trigger(S.ERROR,{type:Ee.OTHER_ERROR,details:H.INTERNAL_EXCEPTION,fatal:s,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){M.log("destroy"),this.trigger(S.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){M.log("attachMedia"),this._media=e,this.trigger(S.MEDIA_ATTACHING,{media:e})}detachMedia(){M.log("detachMedia"),this.trigger(S.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,i=this.url,s=this.url=w1.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,M.log(`loadSource:${s}`),n&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(S.MANIFEST_LOADING,{url:e})}startLoad(e=-1){M.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach(n=>{n.startLoad(e)})}stopLoad(){M.log("stopLoad"),this.started=!1,this.networkControllers.forEach(e=>{e.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.stopLoad()})}swapAudioCodec(){M.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){M.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){M.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){M.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){M.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){M.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){M.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(M.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){UW(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=n)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:i}=this;let s;if(n===-1&&e!=null&&e.length?s=e.length-1:s=n,i)for(let r=s;r--;){const a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var n;return(n=this.audioTrackController)==null?void 0:n.setAudioOption(e)}setSubtitleOption(e){var n;return(n=this.subtitleTrackController)==null||n.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Fi.defaultConfig=void 0;const QY="/assets/hls.worker-DRUp388X.js";function ZY(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Object.assign({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}const JY=/(\d+)-(\d+)\/(\d+)/;function eq(t){const e=JY.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function tq(t){const e=t.get("Content-Range");if(e){const i=eq(e);if(Number.isFinite(i))return i}const n=t.get("Content-Length");if(n)return parseInt(n)}class nq extends Fi{constructor(e,n,i){super(e),this.config.loader=class extends this.config.loader{load(s,r,a){const o=this.stats;if(o.loading.start)throw new Error("Loader can only be used once.");o.loading.start=self.performance.now();const l=ZY(s,this.controller.signal),u=a.onProgress,c=s.responseType==="arraybuffer",d=c?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:h}=r.loadPolicy;this.context=s,this.config=r,this.callbacks=a,this.request=this.fetchSetup(s,l),self.clearTimeout(this.requestTimeout),r.timeout=f&&Number.isFinite(f)?f:h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),a.onTimeout(o,s,this.response)},r.timeout);const p=performance.now();n(this.request).then(async g=>{this.response=this.loader=g;const v=Math.max(self.performance.now(),o.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),a.onTimeout(o,s,this.response)},h-(v-o.loading.start)),o.loading.first=v,o.total=tq(g.headers)||o.total,u&&Number.isFinite(r.highWaterMark))return this.loadProgressively(g,o,s,r.highWaterMark,u);let E;return c&&(E=g.arrayBuffer()),s.responseType==="json"&&(E=g.json()),E=g.text(),E}).then(g=>{performance.now()-p>14e3&&(i==null||i());const E=this.response;if(!E)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),o.loading.end=Math.max(self.performance.now(),o.loading.first);const y=g[d];y&&(o.loaded=o.total=y);const T={url:E.url,data:g,code:E.status};u&&!Number.isFinite(r.highWaterMark)&&u(o,s,g,E),a.onSuccess(T,o,s,E)}).catch(g=>{if(self.clearTimeout(this.requestTimeout),o.aborted)return;const v=g&&g.code||0,E=g?g.message:null;a.onError({code:v,text:E},s,g?g.details:null,o)})}}}}const iq=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const sq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",rq=Array.prototype.slice.call(sq),uc=(t=>{let e={};return t.forEach((n,i)=>e[n]=i),e})(rq),aq=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ep=String.fromCharCode.bind(String);typeof Uint8Array.from=="function"&&Uint8Array.from.bind(Uint8Array);const oq=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),lq=t=>{if(t=t.replace(/\s+/g,""),!aq.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",i,s;for(let r=0;r<t.length;)e=uc[t.charAt(r++)]<<18|uc[t.charAt(r++)]<<12|(i=uc[t.charAt(r++)])<<6|(s=uc[t.charAt(r++)]),n+=i===64?ep(e>>16&255):s===64?ep(e>>16&255,e>>8&255):ep(e>>16&255,e>>8&255,e&255);return n},uq=typeof atob=="function"?t=>atob(oq(t)):iq?t=>Buffer.from(t,"base64").toString("binary"):lq;function cq(t){const e=uq(t),n=e.length,i=new Uint8Array(n);for(let s=0;s<n;s++)i[s]=e.charCodeAt(s);return i.buffer}async function dq(t){const e=new ReadableStream({start(n){t.then(({data:i})=>{n.enqueue(cq(i)),n.close()})}});return new Response(e,{status:200})}async function fq(t,e){var s,r;if(t.startsWith("data:app"))return fetch(t);if((s=e==null?void 0:e.signal)!=null&&s.aborted)throw new Error("ABORTED");const n=Ei.get({url:t,responseType:"arraybuffer",headers:Object.fromEntries(((r=e==null?void 0:e.headers)==null?void 0:r.entries())??[])}),i=dq(n);return Object.defineProperty(i,"url",{get:()=>t}),i}const hq="/assets/dha-release-S_m58GxH.wasm";async function pq(t,e={}){const n=e.w,i={w:Object.assign(Object.create(n),{b52(T){return T=u(T>>>0),c(n.b52(T))||v()},ift(T){return T=o(T>>>0),c(n.ift(T))||v()}}),env:Object.assign(Object.create(globalThis),e.env||{},{abort(T,b,x,w){T=u(T>>>0),b=u(b>>>0),x=x>>>0,w=w>>>0,(()=>{throw Error(`${T} in ${b}:${x}:${w}`)})()}})},{exports:s}=await WebAssembly.instantiate(t,i),r=s.memory||e.env.memory,a=Object.setPrototypeOf({transformBuff(T,b,x,w,A){return T=c(T)||v(),b=b?1:0,x=x?1:0,w=w?1:0,A=A?1:0,d(C=>f(Uint8Array,y(C)),2,s.transformBuff(T,b,x,w,A)>>>0)},b62u(T,b,x){T=p(c(T)||v()),x=c(x);try{return d(w=>f(Uint8Array,y(w)),2,s.b62u(T,b,x)>>>0)}finally{g(T)}},dezip(T){return T=l(T)||v(),u(s.dezip(T)>>>0)}},s);function o(T){return T?r.buffer.slice(T,T+new Uint32Array(r.buffer)[T-4>>>2]):null}function l(T){if(T==null)return 0;const b=s.__new(T.byteLength,1)>>>0;return new Uint8Array(r.buffer).set(new Uint8Array(T),b),b}function u(T){if(!T)return null;const b=T+new Uint32Array(r.buffer)[T-4>>>2]>>>1,x=new Uint16Array(r.buffer);let w=T>>>1,A="";for(;b-w>1024;)A+=String.fromCharCode(...x.subarray(w,w+=1024));return A+String.fromCharCode(...x.subarray(w,b))}function c(T){if(T==null)return 0;const b=T.length,x=s.__new(b<<1,2)>>>0,w=new Uint16Array(r.buffer);for(let A=0;A<b;++A)w[(x>>>1)+A]=T.charCodeAt(A);return x}function d(T,b,x){if(!x)return null;const w=y(x+4),A=E.getUint32(x+12,!0),C=new Array(A);for(let L=0;L<A;++L)C[L]=T(w+(L<<b>>>0));return C}function f(T,b){return b?new T(r.buffer,y(b+4),E.getUint32(b+8,!0)/T.BYTES_PER_ELEMENT).slice():null}const h=new Map;function p(T){if(T){const b=h.get(T);b?h.set(T,b+1):h.set(s.__pin(T),1)}return T}function g(T){if(T){const b=h.get(T);if(b===1)s.__unpin(T),h.delete(T);else if(b)h.set(T,b-1);else throw Error(`invalid refcount '${b}' for reference '${T}'`)}}function v(){throw TypeError("value must not be null")}let E=new DataView(r.buffer);function y(T){try{return E.getUint32(T,!0)}catch{return E=new DataView(r.buffer),E.getUint32(T,!0)}}return a}function co(t){let e=t.length;for(;--e>=0;)t[e]=0}const mq=3,gq=258,tD=29,Eq=256,Tq=Eq+1+tD,nD=30,yq=512,vq=new Array((Tq+2)*2);co(vq);const bq=new Array(nD*2);co(bq);const xq=new Array(yq);co(xq);const Sq=new Array(gq-mq+1);co(Sq);const Aq=new Array(tD);co(Aq);const Cq=new Array(nD);co(Cq);const wq=(t,e,n,i)=>{let s=t&65535|0,r=t>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do s=s+e[i++]|0,r=r+s|0;while(--a);s%=65521,r%=65521}return s|r<<16|0};var cg=wq;const Lq=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},Iq=new Uint32Array(Lq()),_q=(t,e,n,i)=>{const s=Iq,r=i+n;t^=-1;for(let a=i;a<r;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var Jn=_q,dg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const Rq=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Dq=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)Rq(n,i)&&(t[i]=n[i])}}return t},Pq=t=>{let e=0;for(let i=0,s=t.length;i<s;i++)e+=t[i].length;const n=new Uint8Array(e);for(let i=0,s=0,r=t.length;i<r;i++){let a=t[i];n.set(a,s),s+=a.length}return n},iD={assign:Dq,flattenChunks:Pq};let sD=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sD=!1}const Vl=new Uint8Array(256);for(let t=0;t<256;t++)Vl[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Vl[254]=Vl[254]=1;var kq=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,i,s,r,a=t.length,o=0;for(s=0;s<a;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(i=t.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),r=0,s=0;r<o;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(i=t.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),n<128?e[r++]=n:n<2048?(e[r++]=192|n>>>6,e[r++]=128|n&63):n<65536?(e[r++]=224|n>>>12,e[r++]=128|n>>>6&63,e[r++]=128|n&63):(e[r++]=240|n>>>18,e[r++]=128|n>>>12&63,e[r++]=128|n>>>6&63,e[r++]=128|n&63);return e};const Nq=(t,e)=>{if(e<65534&&t.subarray&&sD)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n};var Oq=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let i,s;const r=new Array(n*2);for(s=0,i=0;i<n;){let a=t[i++];if(a<128){r[s++]=a;continue}let o=Vl[a];if(o>4){r[s++]=65533,i+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&i<n;)a=a<<6|t[i++]&63,o--;if(o>1){r[s++]=65533;continue}a<65536?r[s++]=a:(a-=65536,r[s++]=55296|a>>10&1023,r[s++]=56320|a&1023)}return Nq(r,s)},Mq=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Vl[t[n]]>e?n:e},fg={string2buf:kq,buf2string:Oq,utf8border:Mq};function Fq(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Bq=Fq;const cc=16209,Uq=16191;var $q=function(t,e){let n,i,s,r,a,o,l,u,c,d,f,h,p,g,v,E,y,T,b,x,w,A,C,L;const _=t.state;n=t.next_in,C=t.input,i=n+(t.avail_in-5),s=t.next_out,L=t.output,r=s-(e-t.avail_out),a=s+(t.avail_out-257),o=_.dmax,l=_.wsize,u=_.whave,c=_.wnext,d=_.window,f=_.hold,h=_.bits,p=_.lencode,g=_.distcode,v=(1<<_.lenbits)-1,E=(1<<_.distbits)-1;e:do{h<15&&(f+=C[n++]<<h,h+=8,f+=C[n++]<<h,h+=8),y=p[f&v];t:for(;;){if(T=y>>>24,f>>>=T,h-=T,T=y>>>16&255,T===0)L[s++]=y&65535;else if(T&16){b=y&65535,T&=15,T&&(h<T&&(f+=C[n++]<<h,h+=8),b+=f&(1<<T)-1,f>>>=T,h-=T),h<15&&(f+=C[n++]<<h,h+=8,f+=C[n++]<<h,h+=8),y=g[f&E];n:for(;;){if(T=y>>>24,f>>>=T,h-=T,T=y>>>16&255,T&16){if(x=y&65535,T&=15,h<T&&(f+=C[n++]<<h,h+=8,h<T&&(f+=C[n++]<<h,h+=8)),x+=f&(1<<T)-1,x>o){t.msg="invalid distance too far back",_.mode=cc;break e}if(f>>>=T,h-=T,T=s-r,x>T){if(T=x-T,T>u&&_.sane){t.msg="invalid distance too far back",_.mode=cc;break e}if(w=0,A=d,c===0){if(w+=l-T,T<b){b-=T;do L[s++]=d[w++];while(--T);w=s-x,A=L}}else if(c<T){if(w+=l+c-T,T-=c,T<b){b-=T;do L[s++]=d[w++];while(--T);if(w=0,c<b){T=c,b-=T;do L[s++]=d[w++];while(--T);w=s-x,A=L}}}else if(w+=c-T,T<b){b-=T;do L[s++]=d[w++];while(--T);w=s-x,A=L}for(;b>2;)L[s++]=A[w++],L[s++]=A[w++],L[s++]=A[w++],b-=3;b&&(L[s++]=A[w++],b>1&&(L[s++]=A[w++]))}else{w=s-x;do L[s++]=L[w++],L[s++]=L[w++],L[s++]=L[w++],b-=3;while(b>2);b&&(L[s++]=L[w++],b>1&&(L[s++]=L[w++]))}}else if(T&64){t.msg="invalid distance code",_.mode=cc;break e}else{y=g[(y&65535)+(f&(1<<T)-1)];continue n}break}}else if(T&64)if(T&32){_.mode=Uq;break e}else{t.msg="invalid literal/length code",_.mode=cc;break e}else{y=p[(y&65535)+(f&(1<<T)-1)];continue t}break}}while(n<i&&s<a);b=h>>3,n-=b,h-=b<<3,f&=(1<<h)-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=s<a?257+(a-s):257-(s-a),_.hold=f,_.bits=h};const Vr=15,hS=852,pS=592,mS=0,tp=1,gS=2,Hq=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Vq=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Gq=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jq=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Wq=(t,e,n,i,s,r,a,o)=>{const l=o.bits;let u=0,c=0,d=0,f=0,h=0,p=0,g=0,v=0,E=0,y=0,T,b,x,w,A,C=null,L;const _=new Uint16Array(Vr+1),N=new Uint16Array(Vr+1);let j=null,U,J,q;for(u=0;u<=Vr;u++)_[u]=0;for(c=0;c<i;c++)_[e[n+c]]++;for(h=l,f=Vr;f>=1&&_[f]===0;f--);if(h>f&&(h=f),f===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<f&&_[d]===0;d++);for(h<d&&(h=d),v=1,u=1;u<=Vr;u++)if(v<<=1,v-=_[u],v<0)return-1;if(v>0&&(t===mS||f!==1))return-1;for(N[1]=0,u=1;u<Vr;u++)N[u+1]=N[u]+_[u];for(c=0;c<i;c++)e[n+c]!==0&&(a[N[e[n+c]]++]=c);if(t===mS?(C=j=a,L=20):t===tp?(C=Hq,j=Vq,L=257):(C=Gq,j=jq,L=0),y=0,c=0,u=d,A=r,p=h,g=0,x=-1,E=1<<h,w=E-1,t===tp&&E>hS||t===gS&&E>pS)return 1;for(;;){U=u-g,a[c]+1<L?(J=0,q=a[c]):a[c]>=L?(J=j[a[c]-L],q=C[a[c]-L]):(J=96,q=0),T=1<<u-g,b=1<<p,d=b;do b-=T,s[A+(y>>g)+b]=U<<24|J<<16|q|0;while(b!==0);for(T=1<<u-1;y&T;)T>>=1;if(T!==0?(y&=T-1,y+=T):y=0,c++,--_[u]===0){if(u===f)break;u=e[n+a[c]]}if(u>h&&(y&w)!==x){for(g===0&&(g=h),A+=d,p=u-g,v=1<<p;p+g<f&&(v-=_[p+g],!(v<=0));)p++,v<<=1;if(E+=1<<p,t===tp&&E>hS||t===gS&&E>pS)return 1;x=y&w,s[x]=h<<24|p<<16|A-r|0}}return y!==0&&(s[A+y]=u-g<<24|64<<16|0),o.bits=h,0};var al=Wq;const zq=0,rD=1,aD=2,{Z_FINISH:ES,Z_BLOCK:Kq,Z_TREES:dc,Z_OK:Cr,Z_STREAM_END:Yq,Z_NEED_DICT:qq,Z_STREAM_ERROR:Yn,Z_DATA_ERROR:oD,Z_MEM_ERROR:lD,Z_BUF_ERROR:Xq,Z_DEFLATED:TS}=j1,oh=16180,yS=16181,vS=16182,bS=16183,xS=16184,SS=16185,AS=16186,CS=16187,wS=16188,LS=16189,sf=16190,bi=16191,np=16192,IS=16193,ip=16194,_S=16195,RS=16196,DS=16197,PS=16198,fc=16199,hc=16200,kS=16201,NS=16202,OS=16203,MS=16204,FS=16205,sp=16206,BS=16207,US=16208,$e=16209,uD=16210,cD=16211,Qq=852,Zq=592,Jq=15,eX=Jq,$S=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function tX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kr=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<oh||e.mode>cD?1:0},dD=t=>{if(kr(t))return Yn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=oh,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Qq),e.distcode=e.distdyn=new Int32Array(Zq),e.sane=1,e.back=-1,Cr},fD=t=>{if(kr(t))return Yn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,dD(t)},hD=(t,e)=>{let n;if(kr(t))return Yn;const i=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Yn:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,fD(t))},pD=(t,e)=>{if(!t)return Yn;const n=new tX;t.state=n,n.strm=t,n.window=null,n.mode=oh;const i=hD(t,e);return i!==Cr&&(t.state=null),i},nX=t=>pD(t,eX);let HS=!0,rp,ap;const iX=t=>{if(HS){rp=new Int32Array(512),ap=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(al(rD,t.lens,0,288,rp,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;al(aD,t.lens,0,32,ap,0,t.work,{bits:5}),HS=!1}t.lencode=rp,t.lenbits=9,t.distcode=ap,t.distbits=5},mD=(t,e,n,i)=>{let s;const r=t.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(e.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>i&&(s=i),r.window.set(e.subarray(n-i,n-i+s),r.wnext),i-=s,i?(r.window.set(e.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},sX=(t,e)=>{let n,i,s,r,a,o,l,u,c,d,f,h,p,g,v=0,E,y,T,b,x,w,A,C;const L=new Uint8Array(4);let _,N;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kr(t)||!t.output||!t.input&&t.avail_in!==0)return Yn;n=t.state,n.mode===bi&&(n.mode=np),a=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,u=n.hold,c=n.bits,d=o,f=l,C=Cr;e:for(;;)switch(n.mode){case oh:if(n.wrap===0){n.mode=np;break}for(;c<16;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,L[0]=u&255,L[1]=u>>>8&255,n.check=Jn(n.check,L,2,0),u=0,c=0,n.mode=yS;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=$e;break}if((u&15)!==TS){t.msg="unknown compression method",n.mode=$e;break}if(u>>>=4,c-=4,A=(u&15)+8,n.wbits===0&&(n.wbits=A),A>15||A>n.wbits){t.msg="invalid window size",n.mode=$e;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?LS:bi,u=0,c=0;break;case yS:for(;c<16;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==TS){t.msg="unknown compression method",n.mode=$e;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=$e;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(L[0]=u&255,L[1]=u>>>8&255,n.check=Jn(n.check,L,2,0)),u=0,c=0,n.mode=vS;case vS:for(;c<32;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(L[0]=u&255,L[1]=u>>>8&255,L[2]=u>>>16&255,L[3]=u>>>24&255,n.check=Jn(n.check,L,4,0)),u=0,c=0,n.mode=bS;case bS:for(;c<16;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(L[0]=u&255,L[1]=u>>>8&255,n.check=Jn(n.check,L,2,0)),u=0,c=0,n.mode=xS;case xS:if(n.flags&1024){for(;c<16;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(L[0]=u&255,L[1]=u>>>8&255,n.check=Jn(n.check,L,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=SS;case SS:if(n.flags&1024&&(h=n.length,h>o&&(h=o),h&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+h),A)),n.flags&512&&n.wrap&4&&(n.check=Jn(n.check,i,h,r)),o-=h,r+=h,n.length-=h),n.length))break e;n.length=0,n.mode=AS;case AS:if(n.flags&2048){if(o===0)break e;h=0;do A=i[r+h++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A));while(A&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Jn(n.check,i,h,r)),o-=h,r+=h,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=CS;case CS:if(n.flags&4096){if(o===0)break e;h=0;do A=i[r+h++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A));while(A&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Jn(n.check,i,h,r)),o-=h,r+=h,A)break e}else n.head&&(n.head.comment=null);n.mode=wS;case wS:if(n.flags&512){for(;c<16;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=$e;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=bi;break;case LS:for(;c<32;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}t.adler=n.check=$S(u),u=0,c=0,n.mode=sf;case sf:if(n.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,n.hold=u,n.bits=c,qq;t.adler=n.check=1,n.mode=bi;case bi:if(e===Kq||e===dc)break e;case np:if(n.last){u>>>=c&7,c-=c&7,n.mode=sp;break}for(;c<3;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=IS;break;case 1:if(iX(n),n.mode=fc,e===dc){u>>>=2,c-=2;break e}break;case 2:n.mode=RS;break;case 3:t.msg="invalid block type",n.mode=$e}u>>>=2,c-=2;break;case IS:for(u>>>=c&7,c-=c&7;c<32;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=$e;break}if(n.length=u&65535,u=0,c=0,n.mode=ip,e===dc)break e;case ip:n.mode=_S;case _S:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;s.set(i.subarray(r,r+h),a),o-=h,r+=h,l-=h,a+=h,n.length-=h;break}n.mode=bi;break;case RS:for(;c<14;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=$e;break}n.have=0,n.mode=DS;case DS:for(;n.have<n.ncode;){for(;c<3;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.lens[j[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,_={bits:n.lenbits},C=al(zq,n.lens,0,19,n.lencode,0,n.work,_),n.lenbits=_.bits,C){t.msg="invalid code lengths set",n.mode=$e;break}n.have=0,n.mode=PS;case PS:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[u&(1<<n.lenbits)-1],E=v>>>24,y=v>>>16&255,T=v&65535,!(E<=c);){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(T<16)u>>>=E,c-=E,n.lens[n.have++]=T;else{if(T===16){for(N=E+2;c<N;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(u>>>=E,c-=E,n.have===0){t.msg="invalid bit length repeat",n.mode=$e;break}A=n.lens[n.have-1],h=3+(u&3),u>>>=2,c-=2}else if(T===17){for(N=E+3;c<N;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}u>>>=E,c-=E,A=0,h=3+(u&7),u>>>=3,c-=3}else{for(N=E+7;c<N;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}u>>>=E,c-=E,A=0,h=11+(u&127),u>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=$e;break}for(;h--;)n.lens[n.have++]=A}}if(n.mode===$e)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=$e;break}if(n.lenbits=9,_={bits:n.lenbits},C=al(rD,n.lens,0,n.nlen,n.lencode,0,n.work,_),n.lenbits=_.bits,C){t.msg="invalid literal/lengths set",n.mode=$e;break}if(n.distbits=6,n.distcode=n.distdyn,_={bits:n.distbits},C=al(aD,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,_),n.distbits=_.bits,C){t.msg="invalid distances set",n.mode=$e;break}if(n.mode=fc,e===dc)break e;case fc:n.mode=hc;case hc:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,n.hold=u,n.bits=c,$q(t,f),a=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,u=n.hold,c=n.bits,n.mode===bi&&(n.back=-1);break}for(n.back=0;v=n.lencode[u&(1<<n.lenbits)-1],E=v>>>24,y=v>>>16&255,T=v&65535,!(E<=c);){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(y&&!(y&240)){for(b=E,x=y,w=T;v=n.lencode[w+((u&(1<<b+x)-1)>>b)],E=v>>>24,y=v>>>16&255,T=v&65535,!(b+E<=c);){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=E,c-=E,n.back+=E,n.length=T,y===0){n.mode=FS;break}if(y&32){n.back=-1,n.mode=bi;break}if(y&64){t.msg="invalid literal/length code",n.mode=$e;break}n.extra=y&15,n.mode=kS;case kS:if(n.extra){for(N=n.extra;c<N;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=NS;case NS:for(;v=n.distcode[u&(1<<n.distbits)-1],E=v>>>24,y=v>>>16&255,T=v&65535,!(E<=c);){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(!(y&240)){for(b=E,x=y,w=T;v=n.distcode[w+((u&(1<<b+x)-1)>>b)],E=v>>>24,y=v>>>16&255,T=v&65535,!(b+E<=c);){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=E,c-=E,n.back+=E,y&64){t.msg="invalid distance code",n.mode=$e;break}n.offset=T,n.extra=y&15,n.mode=OS;case OS:if(n.extra){for(N=n.extra;c<N;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=$e;break}n.mode=MS;case MS:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=$e;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=s,p=a-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do s[a++]=g[p++];while(--h);n.length===0&&(n.mode=hc);break;case FS:if(l===0)break e;s[a++]=n.length,l--,n.mode=hc;break;case sp:if(n.wrap){for(;c<32;){if(o===0)break e;o--,u|=i[r++]<<c,c+=8}if(f-=l,t.total_out+=f,n.total+=f,n.wrap&4&&f&&(t.adler=n.check=n.flags?Jn(n.check,s,f,a-f):cg(n.check,s,f,a-f)),f=l,n.wrap&4&&(n.flags?u:$S(u))!==n.check){t.msg="incorrect data check",n.mode=$e;break}u=0,c=0}n.mode=BS;case BS:if(n.wrap&&n.flags){for(;c<32;){if(o===0)break e;o--,u+=i[r++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=$e;break}u=0,c=0}n.mode=US;case US:C=Yq;break e;case $e:C=oD;break e;case uD:return lD;case cD:default:return Yn}return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,n.hold=u,n.bits=c,(n.wsize||f!==t.avail_out&&n.mode<$e&&(n.mode<sp||e!==ES))&&mD(t,t.output,t.next_out,f-t.avail_out),d-=t.avail_in,f-=t.avail_out,t.total_in+=d,t.total_out+=f,n.total+=f,n.wrap&4&&f&&(t.adler=n.check=n.flags?Jn(n.check,s,f,t.next_out-f):cg(n.check,s,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(n.mode===bi?128:0)+(n.mode===fc||n.mode===ip?256:0),(d===0&&f===0||e===ES)&&C===Cr&&(C=Xq),C},rX=t=>{if(kr(t))return Yn;let e=t.state;return e.window&&(e.window=null),t.state=null,Cr},aX=(t,e)=>{if(kr(t))return Yn;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Cr):Yn},oX=(t,e)=>{const n=e.length;let i,s,r;return kr(t)||(i=t.state,i.wrap!==0&&i.mode!==sf)?Yn:i.mode===sf&&(s=1,s=cg(s,e,n,0),s!==i.check)?oD:(r=mD(t,e,n,n),r?(i.mode=uD,lD):(i.havedict=1,Cr))};var lX=fD,uX=hD,cX=dD,dX=nX,fX=pD,hX=sX,pX=rX,mX=aX,gX=oX,EX="pako inflate (from Nodeca project)",Di={inflateReset:lX,inflateReset2:uX,inflateResetKeep:cX,inflateInit:dX,inflateInit2:fX,inflate:hX,inflateEnd:pX,inflateGetHeader:mX,inflateSetDictionary:gX,inflateInfo:EX};function TX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yX=TX;const gD=Object.prototype.toString,{Z_NO_FLUSH:vX,Z_FINISH:bX,Z_OK:Gl,Z_STREAM_END:op,Z_NEED_DICT:lp,Z_STREAM_ERROR:xX,Z_DATA_ERROR:VS,Z_MEM_ERROR:SX}=j1;function pu(t){this.options=iD.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Bq,this.strm.avail_out=0;let n=Di.inflateInit2(this.strm,e.windowBits);if(n!==Gl)throw new Error(dg[n]);if(this.header=new yX,Di.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=fg.string2buf(e.dictionary):gD.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Di.inflateSetDictionary(this.strm,e.dictionary),n!==Gl)))throw new Error(dg[n])}pu.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?bX:vX,gD.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),r=Di.inflate(n,a),r===lp&&s&&(r=Di.inflateSetDictionary(n,s),r===Gl?r=Di.inflate(n,a):r===VS&&(r=lp));n.avail_in>0&&r===op&&n.state.wrap>0&&t[n.next_in]!==0;)Di.inflateReset(n),r=Di.inflate(n,a);switch(r){case xX:case VS:case lp:case SX:return this.onEnd(r),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||r===op))if(this.options.to==="string"){let l=fg.utf8border(n.output,n.next_out),u=n.next_out-l,c=fg.buf2string(n.output,l);n.next_out=u,n.avail_out=i-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(r===Gl&&o===0)){if(r===op)return r=Di.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};pu.prototype.onData=function(t){this.chunks.push(t)};pu.prototype.onEnd=function(t){t===Gl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iD.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function W1(t,e){const n=new pu(e);if(n.push(t),n.err)throw n.msg||dg[n.err];return n.result}function AX(t,e){return e=e||{},e.raw=!0,W1(t,e)}var CX=pu,wX=W1,LX=AX,IX=W1,_X=j1,RX={Inflate:CX,inflate:wX,inflateRaw:LX,ungzip:IX,constants:_X};const{Inflate:IQ,inflate:_Q,inflateRaw:DX,ungzip:RQ}=RX;var PX=DX;const up=new TextDecoder;function kX(t,e){return t.split("").map(n=>String.fromCharCode(n.charCodeAt(0)+e)).join("")}let ol;async function NX(){ol??(ol=await pq(await WebAssembly.compileStreaming(fetch(hq)),{env:{},w:{location,b52:t=>atob(t),ift:t=>PX(t,{to:"string"})}}))}async function OX(t,e=!0,n=!1,i=!1,s=!1,r=null){const a=ol.b62u(kX((window==null?void 0:window.hn)??location.hostname,10),10,r),o=await crypto.subtle.digest(up.decode(a[0]),a[1]),l=ol.transformBuff(t,e,n,i,s),u={name:up.decode(l[2]),iv:l[0]},c=await crypto.subtle.importKey("raw",o,u,!1,[up.decode(l[3])]),d=await crypto.subtle.decrypt(u,c,l[1]);return ol.dezip(d)}async function MX(t,e,n){const i=await Ei.post({url:t+"",headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36","content-type":"application/x-www-form-urlencoded",referer:"https",...n},data:new URLSearchParams(e).toString()});if(i.status!==200&&i.status!==201)throw i;return i}const FX=MX,BX=!!self.MediaStream,UX=async({id:t,play:e,link:n})=>{const i=await FX(_8,{id:t??"",play:e??"",link:n??"",backuplinks:"1"}),s=JSON.parse(i.data);await NX();const r=await OX(s.link[0].file);return{data:`data:application/vnd.apple.mpegurl;base64,${btoa($X(r))}`}};function $X(t){return BX?t:t.split(`
`).map(e=>e.includes("//")?e+"#animevsub-vsub_extra":e).join(`
`)}var GS;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(GS||(GS={}));var jS;(function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"})(jS||(jS={}));const pc=zf("StatusBar");var WS;(function(t){t.SHOW="onShow",t.HIDE="onHide",t.COLOR_CHANGE="onColorChange"})(WS||(WS={}));const zS=zf("NavigationBar",{web:()=>eo(()=>import("./web-Yx0fwYT_.js"),[]).then(t=>new t.NavigationBarWeb)});function Gr(t){return Math.floor(t)<10?`0${Math.floor(t)}`:`${Math.floor(t)}`}var ED={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KS=$.createContext&&$.createContext(ED),HX=["attr","size","title"];function VX(t,e){if(t==null)return{};var n=GX(t,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function GX(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rf.apply(this,arguments)}function YS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function af(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(n),!0).forEach(function(i){jX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jX(t,e,n){return e=WX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WX(t){var e=zX(t,"string");return typeof e=="symbol"?e:e+""}function zX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TD(t){return t&&t.map((e,n)=>$.createElement(e.tag,af({key:n},e.attr),TD(e.child)))}function lh(t){return e=>$.createElement(KX,rf({attr:af({},t.attr)},e),TD(t.child))}function KX(t){var e=n=>{var{attr:i,size:s,title:r}=t,a=VX(t,HX),o=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),$.createElement("svg",rf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:l,style:af(af({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),r&&$.createElement("title",null,r),t.children)};return KS!==void 0?$.createElement(KS.Consumer,null,n=>e(n)):e(ED)}function YX(t){return lh({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5M.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5"},child:[]}]})(t)}function qX(t){return lh({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(t)}function XX(t){return lh({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"},child:[]}]})(t)}function QX(t){return lh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(t)}let mc=Date.now();const ZX=t=>{var Y,O;const[e,n]=X.useState(),i=async({id:k,play:z,link:G})=>{n((await UX({id:k,link:G,play:z})).data)};X.useEffect(()=>{t!==void 0&&i({id:t.isEp.dataId,link:t.isEp.dataLink,play:t.isEp.dataPlay})},[t]);const s=X.useRef(null),r=X.useRef(null),[a,o]=X.useState(!1),[l,u]=X.useState(0),[c,d]=X.useState(0),[f,h]=X.useState("00:00"),[p,g]=X.useState("00:00"),[v,E]=X.useState(!1),[y,T]=X.useState(0),[b,x]=X.useState(!0),[w,A]=X.useState(!1),[C,L]=X.useState(!1),_=()=>{var se,re;Date.now()-mc>=3e3&&b&&!v&&a&&x(!1);const k=((se=s.current)==null?void 0:se.currentTime)??0,z=((re=s.current)==null?void 0:re.duration)??0;h(`${Gr(k/60)}:${Gr(k%60)}`),g(`${Gr(z/60)}:${Gr(z%60)}`);const G=k/z*100;u(Math.floor(G))},N=()=>{const k=s.current;let z=0;const G=k.buffered,se=k.currentTime;try{for(;!(G.start(z)<=se&&se<=G.end(z));)z+=1;const re=G.end(z)/k.duration;d(re)}catch{try{d(G.end(0)/k.duration)}catch{}}},j=k=>{var re,de;E(!0);const z=k.currentTarget.getBoundingClientRect().x,G=k.currentTarget.offsetWidth,{left:se}=k.currentTarget.getBoundingClientRect();if(z){const ge=(((re=event.changedTouches)==null?void 0:re[0])??((de=event.touches)==null?void 0:de[0])??event).clientX-z-se;T(Math.max(0,Math.min(s.current.duration,s.current.duration*ge/G))),u(Math.max(0,Math.min(s.current.duration,s.current.duration*ge/G))/s.current.duration*100),mc=Date.now(),h(`${Gr(Math.max(0,Math.min(s.current.duration,s.current.duration*ge/G))/60)}:${Gr(Math.max(0,Math.min(s.current.duration,s.current.duration*ge/G))%60)}`)}},U=()=>{E(!1),s.current.currentTime=y,mc=Date.now()};let J=null;const q=()=>{J=setTimeout(()=>{x(!0)},400)},te=()=>{J&&(clearTimeout(J),J=null)},ce=async k=>{k?(await r.current.requestFullscreen(),typeof document!==void 0&&screen.orientation.lock("landscape"),pc.hide(),zS.hide(),pc.setOverlaysWebView({overlay:!0})):(await document.exitFullscreen(),typeof document!==void 0&&screen.orientation.unlock(),pc.show(),zS.show(),pc.setOverlaysWebView({overlay:!1})),L(document.fullscreenElement!==null)};return X.useEffect(()=>{a?s.current.play():s.current.pause()},[a]),X.useEffect(()=>{if(Fi.isSupported()&&e!==void 0){const k=new nq({workerPath:QY,progressive:!0,fragLoadingRetryDelay:1e4,fetchSetup(z,G){return G.headers.set("referer",uu),z.url.includes("base64")||(z.url+="#animevsub-vsub_extra"),new Request(z.url,G)}},async z=>fq(z.url,z));k.loadSource(e),k.attachMedia(s.current),k.on(Fi.Events.MANIFEST_PARSED,()=>{a&&s.current.play()})}},[e]),P.jsxs("div",{className:"flex h-[25%] w-full",ref:r,children:[P.jsx("video",{ref:s,className:`${C?"":"object-fill"} w-full`,onTimeUpdate:v?()=>{}:_,onProgress:N,poster:(Y=t.isData)==null?void 0:Y.banner,onPlay:()=>{o(!0)},onPause:()=>{o(!1)},onWaiting:()=>{A(!0)},onCanPlay:()=>{A(!1)}}),P.jsx("div",{className:"absolute top-0 left-0 w-full h-full cursor-none",style:{display:b?"none":""},onTouchStart:q,onTouchMove:te,onTouchEnd:()=>{mc=Date.now()}}),P.jsxs("div",{className:"absolute w-full h-[25%] top-0 left-0 bg-[#00000056] overflow-hidden flex items-center justify-center px-1 animate-fade-out toolbar",style:{display:b?"":"none"},children:[P.jsxs("div",{className:"pt-5 pl-2 w-full pb-[160px] absolute flex items-center toolbar-top",children:[P.jsx("div",{className:"text-white",children:P.jsx(QX,{className:"size-6"})}),P.jsxs("div",{className:"text-white",children:[P.jsx("h3",{className:"text-[14px]",children:(O=t.isData)==null?void 0:O.title}),P.jsxs("span",{className:"text-sm",children:["Tập ",t.Ep+1]})]})]}),P.jsx("div",{className:"pb-0 px-2 pt-[160px] w-full toolbar-bottom-progress",children:P.jsx("div",{className:"relative flex flex-row items-center px-1 py-4 cursor-pointer z-[30]",onTouchStart:j,onTouchMove:j,onTouchEnd:U,children:P.jsxs("div",{className:"flex items-center relative h-[3px] w-full bg-[#fff3] transition-[height] duration-[0.22s] ease-[ease-in-out]",children:[P.jsx("div",{className:"absolute z-[10] left-0 top-0 right-0 bottom-0 h-full w-0 bg-[#fff6] pointer-events-none",style:{width:`${c*100}%`}}),P.jsx("div",{className:"absolute z-[20] left-0 top-0 right-0 bottom-0 h-full w-0 bg-[#00c234] pointer-events-none",style:{width:`${l}%`}}),P.jsx("div",{className:"absolute z-[22] left-0 top-0 right-0 bottom-0 w-0 h-full pointer-events-none",style:{width:`${l}%`},children:P.jsx("div",{className:"absolute size-[15px] right-[-10px] top-[calc(100%-9px)] transition-transform duration-[0.2s] ease-[ease-in-out] z-[22]",children:P.jsx("img",{src:"https://artplayer.org/assets/img/indicator.svg"})})})]})})}),P.jsxs("div",{className:"flex justify-between absolute pt-[120px] w-full h-5 px-4 items-center text-white toolbar-bottom-text",children:[P.jsxs("div",{className:"text-[13px] font",children:[f," /"," ",isFinite(Number(p.split(":")[0]))?p:"00:00"]}),P.jsx("div",{onClick:()=>{ce(!C)},children:P.jsx(YX,{})})]}),P.jsx("div",{className:"flex justify-between absolute pl-[160px] w-full h-5 px-2 items-center text-white z-[31]",children:P.jsx("div",{className:"absolute w-12 h-12",onClick:()=>{o(!a)},children:w?P.jsx("span",{className:"loadingVideo size-12"}):a?P.jsx("span",{children:P.jsx(qX,{className:"size-12"})}):P.jsx("span",{children:P.jsx(XX,{className:"size-12"})})})})]})]})},JX=async t=>{const e=[],n=await Ei.get({url:t,responseType:"text",headers:vr(void 0)}),i=lo(n.data);return i(".list-episode").find("li").find("a").each((s,r)=>{const a=i(r).attr("data-id"),o=i(r).attr("href")??"",l=i(r).attr("data-play"),u=i(r).attr("data-movie"),c=i(r).attr("data-source"),d=i(r).attr("data-hash"),f=i(r).text();e.push({idEp:a,href:o,dataPlay:l,dataMovie:u,dataSource:c,dataHash:d,nameEp:f})}),e},eQ=async({html:t})=>{const e=[],n=[],i=lo(t),s=i("header").find(".Title").text(),r=i("header").find(".SubTitle").text(),a=i(".Objf").find("img").attr("src"),o=i(".Description").text(),l=i(".Info").find(".AAIco-remove_red_eye").text().slice(0,i(".Info").find(".AAIco-remove_red_eye").text().indexOf(" ")),u=i(".Info").find(".Date").find("a").text(),c=i(".Info").find(".Time")[0].children[0].data,d=i("#average_score").text(),f=i(".num-rating").text(),h=i('img[class="TPostBg"]').attr("src"),p=[],g=i(".TPlayerTb").find("iframe").attr("src"),v=[];i(".season_item").length>0&&i(".season_item").find("a").each((A,C)=>{e.push({href:fr({url:i(C).attr("href")})??"",name:i(C).text()})}),i(".MovieListRelated").find(".TPostMv").each((A,C)=>{var U;const L=i("img",C).attr("src"),_=i(".TPost",C).find("a").attr("href"),N=i(".Title",C).text(),j=i(".mli-quality",C).text().length>=1?i(".mli-quality",C).text():i(".mli-eps",C).find("i").text()==="TẤT"?"Trọn bộ":`Tập ${i(".mli-eps",C).find("i").text()}`;v.push(j),n.push({title:N,href:((U=fr({url:_}))==null?void 0:U.split("/")[0])??"",image:L??"",tag:j})});const E=[],y=[],T=[],b=[];i(".InfoList").find("li").each((A,C)=>{const L=i(C).text();L.indexOf("Lịch chiếu")>=0&&E.push(L),L.indexOf("Season")>=0&&y.push(L),L.indexOf("Quốc gia")>=0&&T.push(L),L.indexOf("Studio")>=0&&b.push(L),L.indexOf("Thể loại")>=0&&i(C).find("a").each((_,N)=>{p.push({name:i(N).text(),url:`${i(N).attr("href")}`})})});const x=i(".latest_eps").find("a")[0].children[0].parent.attribs.href,w=await JX(x);return{title:s,otherName:r,imageSrc:a,view:l,dateAnime:u,currentEp:c,averageScore:d,countRating:f,showTime:E.join(""),Season:y.join(""),country:T.join(""),studio:b.join(""),banner:h,allSeason:e,tag:v,trailer:g,description:o,Related:n,listGenre:p,listAllEpAnime:w}},tQ=async t=>{const e=await Ei.get({url:`${uu}/phim/${t}`,responseType:"text",headers:vr(void 0)});return eQ({html:e.data})},qS=["N","Tr","T","V"];function nQ(t){if(t<1e3)return t+"";const e=qS.findIndex(()=>(t/=1e3,t<1e3));return`${parseFloat(t.toFixed(2)).toString().replace(/\./g,",")}${qS[e]}`}function iQ(t){const e=new Date,n=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i=["Hai","Ba","Tư","Năm","Sáu","Bảy","Nhật"],s=(t==null?void 0:t.split(" ")[2])??"",r=i.indexOf(s),a=e.toString().split(" ")[0],o=n.indexOf(a),l=t==null?void 0:t.split(" ")[5],u=t==null?void 0:t.split(" ")[7];return l!==void 0&&u!==void 0?o>r?`Tập mới chiếu vào ${l}:${u} tuần sau`:o===r?`Tập mới chiếu vào ${l}:${u} hôm nay`:`Tập mới chiếu vào ${l}:${u} tuần này`:"Phim đã được cập nhật đầy đủ."}const sQ=async(t,e)=>{const n=await Ei.get({url:`https://opend-9animetv.animevsub.eu.org/list-episodes?name=${t}`,responseType:"json",headers:vr(void 0)}),i=[],s=[];return n.data.list.map((u,c)=>{e+1===Number(u.order)&&(i.push(u.id),s.push(u.title))}),{...(await Ei.get({url:`https://opend-9animetv.animevsub.eu.org/episode-skip/${i.join("")}`,responseType:"json",headers:vr(void 0)})).data,nameEp:s.join("")}},rQ=()=>{var g,v,E,y,T,b,x,w,A,C;const{setLoading:t}=su(),e=Fw(),n=LE(),i=Bw(),[s,r]=X.useState(),[a,o]=X.useState(!1),[l,u]=X.useState(0),[c,d]=X.useState(),f=L=>{u(L)},h=async()=>{r(await tQ(i.anime))};X.useEffect(()=>{h()},[]);const p=async()=>{var L;d(await sQ(`https://opend-9animetv.animevsub.eu.org/list-episodes?${[s==null?void 0:s.title,...((L=s==null?void 0:s.otherName)==null?void 0:L.split(",").map(_=>_.trim()))??[]].map(_=>`name=${_}`).join("&")}`,l))};return X.useEffect(()=>{s!==void 0&&p()},[s,l]),X.useEffect(()=>{t(s===void 0)},[s]),P.jsx("div",{className:"w-full h-screen",children:s!==void 0?P.jsxs("div",{className:`w-full h-screen ${a?"":"overflow-y-auto"} relative overflow-x-hidden`,children:[P.jsxs("div",{className:`${a?"top-[30%] animate-fade-up":"top-[-1000px]"} flex flex-col fixed bg-neutral text-white h-screen w-full z-[1000]`,children:[P.jsxs("div",{className:"flex justify-between h-[50px] w-full items-center p-2 animate-delay-500",children:[P.jsx("h3",{children:"Chi tiết"}),P.jsx("button",{className:"hover:bg-[#ffffff23] p-2 rounded-full",onClick:()=>{o(!1)},children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),P.jsxs("div",{className:"w-full h-[57vh] flex flex-col p-2 overflow-y-auto",children:[P.jsxs("div",{className:"flex justify-center w-full px-2",children:[P.jsx("img",{src:s.imageSrc,alt:s.title,className:"w-44 object-cover h-auto rounded-md"}),P.jsxs("div",{className:"p-2 flex flex-col",children:[P.jsx("h3",{children:s.title}),P.jsxs("span",{className:"text-sm text-gray-400",children:[s.dateAnime," |"," ",(g=s.country)==null?void 0:g.split(":")[1].replace(",","")]}),P.jsxs("span",{className:"text-sm text-gray-400",children:["Sản xuất bởi"," ",(v=s.studio)==null?void 0:v.split(" ")[1].trim()]})]})]}),P.jsxs("div",{className:"flex flex-col w-[360px] p-2 gap-2",children:[P.jsxs("div",{children:[P.jsxs("span",{className:"text-gray-400 text-sm",children:["Tên khác:"," "]}),P.jsx("span",{children:s.otherName})]}),P.jsxs("div",{children:[P.jsxs("span",{className:"text-gray-400 text-sm",children:["Giới thiệu:"," "]}),P.jsx("span",{children:s.description})]}),P.jsx("div",{className:"w-full",children:((E=s.trailer)==null?void 0:E.length)>0?P.jsxs("div",{className:"w-full",children:[P.jsx("h3",{className:"text-md",children:"Trailer"}),P.jsx("div",{className:"w-full flex items-center",children:P.jsx("iframe",{src:s.trailer,width:320,height:200})})]}):P.jsx("h3",{children:"Trailer đang được cập nhật"})})]})]})]}),P.jsx(ZX,{isDataSkip:c,Ep:l,isData:s,isEp:{dataId:(s==null?void 0:s.listAllEpAnime)!==void 0?s.listAllEpAnime[l].idEp:"",dataLink:(s==null?void 0:s.listAllEpAnime)!==void 0?s.listAllEpAnime[l].dataHash:"",dataPlay:(s==null?void 0:s.listAllEpAnime)!==void 0?s.listAllEpAnime[l].dataPlay:""}}),P.jsxs("div",{className:"p-3 flex flex-col",children:[P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsx("h3",{className:"text-gray-100",children:s==null?void 0:s.title}),P.jsx("button",{className:"hover:bg-[#ffffff23] p-2 rounded-full",onClick:()=>{o(!0)},children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4 text-gray-100",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]}),P.jsxs("span",{className:"py-1 text-[14px]",children:[nQ(Number((y=s==null?void 0:s.view)==null?void 0:y.split(",").join("")))," ","lượt xem -"," ",iQ((T=s==null?void 0:s.showTime)==null?void 0:T.split(":")[1])]}),P.jsxs("span",{className:"py-1 text-[14px]",children:["Đã cập nhật tới tập ",s.currentEp]}),P.jsxs("span",{className:"py-1 text-[14px]",children:[s==null?void 0:s.averageScore,"/10 - ",s==null?void 0:s.countRating," ","người đã đánh giá -"," ",(b=s==null?void 0:s.Season)==null?void 0:b.split(":")[1].split("-")[0].trim()]})]}),P.jsxs("div",{className:"py-1 px-2",children:[P.jsxs("div",{className:"text-gray-50 flex justify-between",children:[P.jsx("h3",{children:"Tập"}),P.jsxs("h3",{className:"flex items-center gap-1",children:["Trọn bộ",P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})]})]}),P.jsx("div",{className:"flex items-center overflow-x-auto w-screen p-2 text-gray-50 gap-2",children:(x=s.listAllEpAnime)==null?void 0:x.map((L,_)=>P.jsx("div",{className:`border px-3 py-2 rounded hover:border-[#21ba45] ${_===l?"text-[#21ba45] border-[#21ba45]":"border-gray-200"}`,onClick:()=>{f(_)},children:L.nameEp},_))}),P.jsx("div",{className:`${((w=s.allSeason)==null?void 0:w.length)>0?"flex":"hidden"} items-center overflow-x-auto w-screen p-2 text-gray-50 gap-2`,children:(A=s.allSeason)==null?void 0:A.map((L,_)=>P.jsx("div",{className:`border px-3 py-2 rounded hover:border-[#21ba45] whitespace-nowrap ${e.pathname.split("/")[2]===L.href.replace("/","")?"text-[#21ba45] border-[#21ba45]":"border-gray-200"}`,onClick:()=>{n.push(`/watchanime/${L.href}`),window.location.reload()},children:L.name},_))}),P.jsxs("div",{className:"h-full",children:[P.jsx("h3",{className:"py-2 text-gray-50",children:"Phim liên quan"}),P.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full h-full",children:[(C=s.Related)==null?void 0:C.map((L,_)=>P.jsxs("div",{className:"flex flex-col w-full h-auto items-center",onClick:()=>{n.push(`/watchanime/${L.href}`),window.location.reload()},children:[P.jsxs("div",{className:"relative",children:[P.jsx("img",{src:L.image,alt:L.title,className:"w-full object-cover h-[150px] rounded-md"}),P.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#0000004b]"}),P.jsx("h1",{className:"text-sm absolute bottom-0 w-full z-50 text-white h-[25px] ml-2 rounded-b-md",children:L.tag})]}),P.jsx("div",{className:"w-full",children:P.jsx("h3",{className:"text-[15px] w-full font-[500] two-line",children:L.title})})]},_)),P.jsx("div",{className:"h-[50px]"})]})]})]})]}):""})};new n5;eo(()=>import("./eruda-COpiO5yt.js").then(t=>t.e),[]).then(t=>{t.default.init()}).catch(()=>{console.error("Load Eruda2 fail!")});const aQ=()=>P.jsx(N6,{children:P.jsxs(i5,{children:[P.jsxs(T6,{children:[P.jsx(_c,{exact:!0,path:"/watch/:manga/:chapter/:chap",component:KV}),P.jsx(_c,{exact:!0,path:"/",component:_j}),P.jsx(_c,{exact:!0,path:"/watchanime/:anime",component:rQ})]}),P.jsx(s5,{})]})});Ew(document.getElementById("root")).render(P.jsx(aQ,{}));export{c_ as W,P3 as a,dQ as b,cQ as c,zl as g};
